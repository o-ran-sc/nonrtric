[{"id":"7246862.0315f78","type":"dgstart","name":"DGSTART","outputs":1,"x":167.00390625,"y":95.00390625,"z":"c1342c00.7cc71","wires":[["149dc604.07732a"]]},{"id":"149dc604.07732a","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":378.86101722717285,"y":200.4801082611084,"z":"c1342c00.7cc71","wires":[["8d2d3504.574348"]]},{"id":"8d2d3504.574348","type":"method","name":"get-complex-resource-service-model","xml":"<method rpc='get-complex-resource-service-model' mode='sync'>\n","comments":"","outputs":1,"x":357.7777976989746,"y":281.99200439453125,"z":"c1342c00.7cc71","wires":[["8392c399.34438"]]},{"id":"8392c399.34438","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":382.7181854248047,"y":369.2896385192871,"z":"c1342c00.7cc71","wires":[["af8eb329.85854","fca55797.b483e8","882ed672.708e58","c214de01.d27ed","43f711ff.395f1"]]},{"id":"af8eb329.85854","type":"get-resource","name":"get-resource COMPLEX_RESOURCE","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from COMPLEX_RESOURCE \n  WHERE customization_uuid = $get-complex-resource-service-model-input.customization-uuid'\n  pfx='db.complex-resource'>","comments":"","outputs":1,"x":653.0039367675781,"y":369.00391006469727,"z":"c1342c00.7cc71","wires":[["fb31d15e.ce461","79350b6.fc3eff4"]]},{"id":"9bb1c659.926d78","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No complex resource found for customization UUID ' + $get-complex-resource-service-model-input.customization-uuid`\" />\n","comments":"","x":1104.0873260498047,"y":367.75403690338135,"z":"c1342c00.7cc71","wires":[]},{"id":"fb31d15e.ce461","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":905.3374061584473,"y":363.111252784729,"z":"c1342c00.7cc71","wires":[["9bb1c659.926d78"]]},{"id":"79350b6.fc3eff4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":899.0874061584473,"y":395.611252784729,"z":"c1342c00.7cc71","wires":[["9bb1c659.926d78"]]},{"id":"3915ef9f.1f9e2","type":"comment","name":"If service model uuid not passed in input, use from service-data","info":"","comments":"","x":748.380859375,"y":329.78454971313477,"z":"c1342c00.7cc71","wires":[]},{"id":"fca55797.b483e8","type":"get-resource","name":"get-resource ATTRIBUTE_VALUE_PAIR","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from ATTRIBUTE_VALUE_PAIR \n  WHERE resource_uuid = $db.complex-resource.uuid\n  and resource_type = $db.complex-resource.type'\n  pfx='db.av-pair'>","comments":"","outputs":1,"x":651.00390625,"y":497.0039234161377,"z":"c1342c00.7cc71","wires":[["c3fdf072.cbc36","bd6efdf4.3a7f1","39121dbd.f60c12"]]},{"id":"fbd9c790.21e678","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No attribute found for customization UUID ' + $get-complex-resource-service-model-input.customization-uuid`\" />\n","comments":"","x":1104.0873260498047,"y":494.7540330886841,"z":"c1342c00.7cc71","wires":[]},{"id":"c3fdf072.cbc36","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":905.3374061584473,"y":490.11124897003174,"z":"c1342c00.7cc71","wires":[["fbd9c790.21e678"]]},{"id":"bd6efdf4.3a7f1","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":899.0874061584473,"y":522.6112489700317,"z":"c1342c00.7cc71","wires":[["fbd9c790.21e678"]]},{"id":"39121dbd.f60c12","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":902.0039329528809,"y":553.0039405822754,"z":"c1342c00.7cc71","wires":[["2c8a69c5.55d806"]]},{"id":"2c8a69c5.55d806","type":"for","name":"for 0..av-pair_length","xml":"<for silentFailure='true' index='idx' start='0' end='`$db.av-pair_length`' >\n","comments":"","outputs":1,"x":1081.0039520263672,"y":553.0039405822754,"z":"c1342c00.7cc71","wires":[["c6cc13a6.0adc5"]]},{"id":"c6cc13a6.0adc5","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1294.00390625,"y":553.00390625,"z":"c1342c00.7cc71","wires":[["17cbace9.1db563","a1a1fd08.f5777","abbe50b8.6f184","941f5f58.ff131","3199b3e1.936edc","9a866943.9112b8"]]},{"id":"17cbace9.1db563","type":"switchNode","name":"switch cr_function","xml":"<switch test=\"`$db.sdn-circuit-req[$idx].attribute-name == 'cr_function' `\">","comments":"","outputs":1,"x":1486.0040283203125,"y":553.003924369812,"z":"c1342c00.7cc71","wires":[["e60bfd5e.02208"]]},{"id":"5e6fa5c7.eecf2c","type":"other","name":"set output cr-function","xml":"<set>\n<parameter name='get-complex-resource-service-model-output.cr-function' value='`$db.sdn-circuit-req[$idx].attribute-value`' />\n","comments":"","outputs":1,"x":1894.504322052002,"y":556.4205236434937,"z":"c1342c00.7cc71","wires":[[]]},{"id":"a1a1fd08.f5777","type":"switchNode","name":"switch cr_role","xml":"<switch test=\"`$db.sdn-circuit-req[$idx].attribute-name == 'cr_role'`\">","comments":"","outputs":1,"x":1478.5041580200195,"y":599.0039749145508,"z":"c1342c00.7cc71","wires":[["f0c30516.5d8e38"]]},{"id":"2b45c282.ff1aee","type":"other","name":"set output cr-role","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.cr-role\" value=\"`$db.sdn-circuit-req[$idx].attribute-value`\" />\n","comments":"","outputs":1,"x":1882.0041961669922,"y":602.4205322265625,"z":"c1342c00.7cc71","wires":[[]]},{"id":"abbe50b8.6f184","type":"switchNode","name":"switch cr_type","xml":"<switch test=\"`$db.sdn-circuit-req[$idx].attribute-name == 'cr_type'`\">","comments":"","outputs":1,"x":1482.5039138793945,"y":645.0039110183716,"z":"c1342c00.7cc71","wires":[["b7345862.d6b868"]]},{"id":"f089c8db.52f4a8","type":"other","name":"set output cr-type","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.cr-type\" value=\"`$db.sdn-circuit-req[$idx].attribute-value`\" />\n","comments":"","outputs":1,"x":1883.0041666030884,"y":649.4205408096313,"z":"c1342c00.7cc71","wires":[[]]},{"id":"941f5f58.ff131","type":"switchNode","name":"switch network_collection_function","xml":"<switch test=\"`$db.sdn-circuit-req[$idx].attribute-name == 'network_collection_function'`\">","comments":"","outputs":1,"x":1547.5040283203125,"y":694.0039501190186,"z":"c1342c00.7cc71","wires":[["dbfe27cd.9e7158"]]},{"id":"d901122c.d751c","type":"other","name":"set output network_collection_function","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.network-collection-function\" value=\"`$db.sdn-circuit-req[$idx].attribute-value`\" />\n","comments":"","outputs":1,"x":2071.004409790039,"y":694.4206619262695,"z":"c1342c00.7cc71","wires":[[]]},{"id":"3199b3e1.936edc","type":"switchNode","name":"switch network_collection_description","xml":"<switch test=\"`$db.sdn-circuit-req[$idx].attribute-name == 'network_collection_description'`\">","comments":"","outputs":1,"x":1552.50390625,"y":746.00390625,"z":"c1342c00.7cc71","wires":[["6522088b.b68998"]]},{"id":"6cec4f8f.bbbde","type":"other","name":"set output network_collection_description","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.network-collection-description\" value=\"`$db.sdn-circuit-req[$idx].attribute-value`\" />\n","comments":"","outputs":1,"x":2076.0042877197266,"y":753.420618057251,"z":"c1342c00.7cc71","wires":[[]]},{"id":"9a866943.9112b8","type":"switchNode","name":"switch subinterface_network_quantity","xml":"<switch test=\"`$db.sdn-circuit-req[$idx].attribute-name == 'subinterface_network_quantity'`\">","comments":"","outputs":1,"x":1552.5039367675781,"y":797.0039510726929,"z":"c1342c00.7cc71","wires":[["ceff2e83.44c5e"]]},{"id":"dc61aeab.805fe","type":"other","name":"set output subinterface_network_quantity","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.subinterface-network-quantity\" value=\"`$db.sdn-circuit-req[$idx].attribute-value`\" />\n","comments":"","outputs":1,"x":2098.004325866699,"y":799.4206323623657,"z":"c1342c00.7cc71","wires":[[]]},{"id":"882ed672.708e58","type":"get-resource","name":"get-resource NETWORK-MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from NETWORK_MODEL \n  WHERE complex_resource_uuid = $db.complex-resource.uuid'\n  pfx='db.network-model'>","comments":"","outputs":1,"x":661.50390625,"y":880.0039219856262,"z":"c1342c00.7cc71","wires":[["e0511d98.9cd7d","9be95fd4.166bc"]]},{"id":"5ba01895.439578","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"No network model found\" />\n","comments":"","x":1115.5873260498047,"y":877.7540330886841,"z":"c1342c00.7cc71","wires":[]},{"id":"e0511d98.9cd7d","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":916.8374061584473,"y":873.1112489700317,"z":"c1342c00.7cc71","wires":[["5ba01895.439578"]]},{"id":"9be95fd4.166bc","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":910.5874061584473,"y":905.6112489700317,"z":"c1342c00.7cc71","wires":[["5ba01895.439578"]]},{"id":"c214de01.d27ed","type":"get-resource","name":"get-resource RESOURCE_POLICY_TO_TARGET_NODE_MAPPING","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from RESOURCE_POLICY_TO_TARGET_NODE_MAPPING\n  WHERE target_node_uuid = $db.network-model.uuid\n  AND target_node_customization_uuid = db.network-model.customization-uuid'\n  pfx='db.respoltargetnodemap' >","comments":"","outputs":1,"x":776.5039367675781,"y":980.0040149688721,"z":"c1342c00.7cc71","wires":[["d87c1534.00efa8","1cad27f0.155218"]]},{"id":"b73674e1.097898","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"No resource_policy_to_target_node_mapping found\"  />\n","comments":"","x":1374.5873374938965,"y":985.7540988922119,"z":"c1342c00.7cc71","wires":[]},{"id":"d87c1534.00efa8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1175.837417602539,"y":981.1113147735596,"z":"c1342c00.7cc71","wires":[["b73674e1.097898"]]},{"id":"1cad27f0.155218","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1169.587417602539,"y":1013.6113147735596,"z":"c1342c00.7cc71","wires":[["b73674e1.097898"]]},{"id":"43f711ff.395f1","type":"get-resource","name":"get-resource RESOURCE_POLICY ","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key=\"SELECT * from RESOURCE_POLICY  \n  WHERE policy_uuid = $db.respoltargetnodemap.policy_uuid\n  and policy_type = 'ecomp.policies.External' \"\n  pfx='db.resource-policy'>","comments":"","outputs":1,"x":667.5039215087891,"y":1114.0039138793945,"z":"c1342c00.7cc71","wires":[["163efefb.1f83e1","5d15704a.bf524","d793ba58.2e3dc8"]]},{"id":"dc73836a.6adea","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No complex resource found for customization UUID ' + $get-complex-resource-service-model-input.customization-uuid`\" />\n","comments":"","x":1140.5873260498047,"y":1117.7540159225464,"z":"c1342c00.7cc71","wires":[]},{"id":"163efefb.1f83e1","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":941.8374061584473,"y":1113.111231803894,"z":"c1342c00.7cc71","wires":[["dc73836a.6adea"]]},{"id":"5d15704a.bf524","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":935.5874061584473,"y":1145.611231803894,"z":"c1342c00.7cc71","wires":[["dc73836a.6adea"]]},{"id":"d793ba58.2e3dc8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":938.5039329528809,"y":1176.0039234161377,"z":"c1342c00.7cc71","wires":[["638f63d4.2707dc"]]},{"id":"638f63d4.2707dc","type":"for","name":"for 0..resource-policy_length","xml":"<for silentFailure='true' index='idx' start='0' end='`$db.resource-policy_length`' >\n","comments":"","outputs":1,"x":1146.5039672851562,"y":1176.003978729248,"z":"c1342c00.7cc71","wires":[["b37f473d.ce6b48"]]},{"id":"b37f473d.ce6b48","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1408.5039596557617,"y":1179.0039777755737,"z":"c1342c00.7cc71","wires":[["acd487ad.c295a8","3c1c13d9.4dd6dc","8fde22b4.2e926"]]},{"id":"acd487ad.c295a8","type":"switchNode","name":"switch network naming policy","xml":"<switch test=\"`$db.resource-policy[$idx].property-type == 'Name' and $db.resource-policy[$idx].property-name == 'Network Collection Name'`\">","comments":"","outputs":1,"x":1664.5041809082031,"y":1178.0040845870972,"z":"c1342c00.7cc71","wires":[["5f96620e.7e45dc"]]},{"id":"9e19f5ec.575f78","type":"other","name":"set output network-naming-policy","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.network-naming-policy\" value=\"`$db.resource-policy[$idx].policy-name`\" />\n","comments":"","outputs":1,"x":2148.0047454833984,"y":1176.4208145141602,"z":"c1342c00.7cc71","wires":[[]]},{"id":"3c1c13d9.4dd6dc","type":"switchNode","name":"switch subnet-assignment-policy","xml":"<switch test=\"`$db.resource-policy[$idx].property-type == 'subnetwork assignments' and $db.resource-policy[$idx].property-name == 'subnet'`\">","comments":"","outputs":1,"x":1670.00390625,"y":1227.00390625,"z":"c1342c00.7cc71","wires":[["3a98b11c.474f1e"]]},{"id":"a3edcd86.5d9e6","type":"other","name":"set output subnet-assignment-policy","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.subnet-assignment-policy\" value=\"`$db.resource-policy[$idx].policy-name`\" />\n","comments":"","outputs":1,"x":2168.5042572021484,"y":1228.4205703735352,"z":"c1342c00.7cc71","wires":[[]]},{"id":"8fde22b4.2e926","type":"switchNode","name":"switch vpn-binding-policy","xml":"<switch test=\"`$db.resource-policy[$idx].property-type == 'network assignments' and $db.resource-policy[$idx].property-name == 'route target'`\">","comments":"","outputs":1,"x":1650.0039596557617,"y":1274.0040826797485,"z":"c1342c00.7cc71","wires":[["b18f5745.6edad8"]]},{"id":"478beed0.6a4bc","type":"other","name":"set output vpn-binding-policy","xml":"<set>\n<parameter name=\"get-complex-resource-service-model-output.vpn-binding-policy\" value=\"`$db.resource-policy[$idx].policy-name`\" />\n","comments":"","outputs":1,"x":2167.5042572021484,"y":1275.4205856323242,"z":"c1342c00.7cc71","wires":[[]]},{"id":"e60bfd5e.02208","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1676.50390625,"y":555.00390625,"z":"c1342c00.7cc71","wires":[["5e6fa5c7.eecf2c"]]},{"id":"f0c30516.5d8e38","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1665.5039176940918,"y":601.00390625,"z":"c1342c00.7cc71","wires":[["2b45c282.ff1aee"]]},{"id":"b7345862.d6b868","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1659.50390625,"y":645.00390625,"z":"c1342c00.7cc71","wires":[["f089c8db.52f4a8"]]},{"id":"dbfe27cd.9e7158","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1809.50390625,"y":696.00390625,"z":"c1342c00.7cc71","wires":[["d901122c.d751c"]]},{"id":"6522088b.b68998","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1816.50390625,"y":754.00390625,"z":"c1342c00.7cc71","wires":[["6cec4f8f.bbbde"]]},{"id":"ceff2e83.44c5e","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1813.50390625,"y":801.00390625,"z":"c1342c00.7cc71","wires":[["dc61aeab.805fe"]]},{"id":"5f96620e.7e45dc","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1907.0039520263672,"y":1179.003958582878,"z":"c1342c00.7cc71","wires":[["9e19f5ec.575f78"]]},{"id":"3a98b11c.474f1e","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1929.0039806365967,"y":1228.0039596557617,"z":"c1342c00.7cc71","wires":[["a3edcd86.5d9e6"]]},{"id":"b18f5745.6edad8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1920.00390625,"y":1275.00390625,"z":"c1342c00.7cc71","wires":[["478beed0.6a4bc"]]},{"id":"a06eb349.3703e","type":"comment","name":"Input/Output","info":"Input:\n\tget-complex-resource-service-model-input.customization-uuid\n\t\nOutput\n\tget-complex-resource-service-model-output.network-naming-policy\n\tget-complex-resource-service-model-output.subnet-assignment-policy\n\tget-complex-resource-service-model-output.vpn-binding-policy\n\tget-complex-resource-service-model-output.cr-function\n\tget-complex-resource-service-model-output.cr-role\n\tget-complex-resource-service-model-output.cr-type\n\tget-complex-resource-service-model-output.network-collection-function\n\tget-complex-resource-service-model-output.network-collection-description\n\tget-complex-resource-service-model-output.subinterface-network-quantity\n\n\t","comments":"","x":365.00390625,"y":108.00391864776611,"z":"c1342c00.7cc71","wires":[]},{"id":"f2e46e54.4cd1a","type":"comment","name":"tosca-vlan-tagging-1030","info":"","comments":"","x":400.00390625,"y":75.00390625,"z":"c1342c00.7cc71","wires":[]}]