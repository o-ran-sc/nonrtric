[{"id":"79ba259.c7ba2dc","type":"dgstart","name":"DGSTART","outputs":1,"x":128.75,"y":29.321433067321777,"z":"c652763a.596c58","wires":[["834c6c7c.38e56"]]},{"id":"a766aebf.c7668","type":"method","name":"method generate-FQPN","xml":"<method rpc='generate-FQPN' mode='sync'>\n","comments":"","outputs":1,"x":207.92857360839844,"y":80.55556201934814,"z":"c652763a.596c58","wires":[["48815f52.bf419"]]},{"id":"48815f52.bf419","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":199.14287567138672,"y":129.35717582702637,"z":"c652763a.596c58","wires":[["d06c8acf.1c9578","8a089a57.322c78","e7614998.3c8608","52804378.5be62c","11421c9.063bce3","72bce7b0.c625f8"]]},{"id":"e7614998.3c8608","type":"execute","name":"call EIPAM getPlanTopology","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.eipam.EIPAMPlugin\" method=\"getPlanTopology\">","comments":"","outputs":1,"x":486.2739562988281,"y":462.1508502960205,"z":"c652763a.596c58","wires":[["6de13210.1501dc"]]},{"id":"6de13210.1501dc","type":"failure","name":"failure","xml":"<outcome value='failure'>","outputs":1,"x":702.6550140380859,"y":461.8774833679199,"z":"c652763a.596c58","wires":[["7bb873e9.96d31c"]]},{"id":"7bb873e9.96d31c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'An error occured while getting Keyname and Keyvalue for address plan, '+ $eipam-ip-block.planName + ', from EIPAM'`\" />\n","comments":"","x":858.5477600097656,"y":461.984712600708,"z":"c652763a.596c58","wires":[]},{"id":"52804378.5be62c","type":"switchNode","name":"switch: TopologyDetails_length","xml":"<switch test='`$eipam-ip-block.getPlanTopologyResponse.TopologyDetails_length`'>\n","comments":"","outputs":1,"x":494.3255310058594,"y":513.7897052764893,"z":"c652763a.596c58","wires":[["c388a5c.dc49c58"]]},{"id":"c388a5c.dc49c58","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":714.6429138183594,"y":513.7897171974182,"z":"c652763a.596c58","wires":[["bf892896.f0b5f8"]]},{"id":"556322b7.09182c","type":"switchNode","name":"switch: ADDRESS_PLAN_POLICIES.key-value-source","xml":"<switch test='`$db.address-plan-policies.key-value-source`'>\n","comments":"","outputs":1,"x":1627.8692474365234,"y":1339.2140498161316,"z":"c652763a.596c58","wires":[["17619a28.56be46","a36564be.c9d5d8","ac8b9d9a.5938b","faed7e83.a3dec","6922f413.90927c","58efd662.e89bb8","98de2fde.1b752","342731c4.6e7bfe","428d578.e3b2ea8","e3f636d7.501068","c469dc37.0566","7875fd31.d3ddc4"]]},{"id":"5b3b0420.b4d8fc","type":"get-resource","name":"get-resource ADDRESS_PLAN_POLICIES","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT key_value_source from ADDRESS_PLAN_POLICIES WHERE key_name = $tmp.eipam.key-name '\n  pfx='db.address-plan-policies'>\n\n","comments":"","outputs":1,"x":1590.0676879882812,"y":1091.3571662902832,"z":"c652763a.596c58","wires":[["48d5f70.28eab08","77df7ce.be04c84"]]},{"id":"2611123d.4966de","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No ADDRESS_PLAN_POLICIES entry found for key_name = ' + $eipam-ip-block.getPlanTopologyResponse.TopologyDetails[$key-index].KeyName`\" />\n","comments":"","x":2031.496109008789,"y":1115.785638809204,"z":"c652763a.596c58","wires":[]},{"id":"48d5f70.28eab08","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1855.8533782958984,"y":1071.7379970550537,"z":"c652763a.596c58","wires":[["12294024.d7218"]]},{"id":"77df7ce.be04c84","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1864.4248085021973,"y":1116.0237102508545,"z":"c652763a.596c58","wires":[["2611123d.4966de"]]},{"id":"12294024.d7218","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading ADDRESS_PLAN_POLICIES table\" />\n","comments":"","x":2030.8533096313477,"y":1070.8808975219727,"z":"c652763a.596c58","wires":[]},{"id":"17619a28.56be46","type":"outcome","name":"AddressPlanPolicyDG-Routing_Characteristic","xml":"<outcome value='AddressPlanPolicyDG-Routing_Characteristic'>\n","comments":"","outputs":1,"x":2054.6192169189453,"y":1339.214047908783,"z":"c652763a.596c58","wires":[["bc1689b0.948c28"]]},{"id":"a36564be.c9d5d8","type":"outcome","name":"AddressPlanPolicyDG-Location_Clli8","xml":"<outcome value='AddressPlanPolicyDG-Location_Clli8'>\n","comments":"","outputs":1,"x":2029.8691711425781,"y":1658.8528876304626,"z":"c652763a.596c58","wires":[["91b70338.c7b13"]]},{"id":"58efd662.e89bb8","type":"outcome","name":"AddressPlanPolicyDG-Complex_region","xml":"<outcome value='AddressPlanPolicyDG-Complex_region'>\n","comments":"","outputs":1,"x":2035.3413391113281,"y":1886.4084401130676,"z":"c652763a.596c58","wires":[["6742bcbb.0ddaf4"]]},{"id":"ac8b9d9a.5938b","type":"outcome","name":"AddressPlanPolicyDG-Vrf_Name","xml":"<outcome value='AddressPlanPolicyDG-Vrf_Name'>\n","comments":"","outputs":1,"x":2017.1864700317383,"y":1714.79735994339,"z":"c652763a.596c58","wires":[["532b3408.a7a4ec"]]},{"id":"6922f413.90927c","type":"outcome","name":"AddressPlanPolicyDG-Network_Name","xml":"<outcome value='AddressPlanPolicyDG-Network_Name'>\n","comments":"","outputs":1,"x":2033.3413543701172,"y":1944.6584401130676,"z":"c652763a.596c58","wires":[["5608d152.f0554"]]},{"id":"faed7e83.a3dec","type":"outcome","name":"cloud_region_id","xml":"<outcome value='cloud_region_id'>\n","comments":"","outputs":1,"x":1963.9841918945312,"y":1819.1584076881409,"z":"c652763a.596c58","wires":[["b8165c7b.aaca1"]]},{"id":"92c5a401.157c78","type":"get-resource","name":"get-resource ROUTING_CHARACTERISTIC_MAPPING","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from ROUTING_CHARACTERISTIC_MAPPING WHERE network_role = $generate-FQPN-input.network-role '\n  pfx='db.routing-characteristic_mapping[]'>\n\n","comments":"","outputs":1,"x":1631.2025299072266,"y":1186.380919456482,"z":"c652763a.596c58","wires":[["b458e390.eafb8","673c853f.b4e3fc"]]},{"id":"ae609e11.948b2","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No ROUTING_CHARACTERISTIC_MAPPING entry found for network_role = ' + $generate-FQPN-input.network-role`\" />\n","comments":"","x":2113.8809356689453,"y":1209.5593843460083,"z":"c652763a.596c58","wires":[]},{"id":"b458e390.eafb8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1938.2382049560547,"y":1165.511742591858,"z":"c652763a.596c58","wires":[["156061cd.bc051e"]]},{"id":"673c853f.b4e3fc","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1946.8096351623535,"y":1209.7974557876587,"z":"c652763a.596c58","wires":[["ae609e11.948b2"]]},{"id":"156061cd.bc051e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading ROUTING_CHARACTERISTIC_MAPPING table\" />\n","comments":"","x":2113.238136291504,"y":1165.6546430587769,"z":"c652763a.596c58","wires":[]},{"id":"85a0ca28.00cfa8","type":"switchNode","name":"switch: db.routing-characteristic_mapping_length > 1","xml":"<switch test='`$db.routing-characteristic_mapping_length &gt; 1`'>\n","comments":"","outputs":1,"x":2662.952606201172,"y":1413.6306977272034,"z":"c652763a.596c58","wires":[["2e6904ff.ed698c","af330778.3b34e8"]]},{"id":"1cce08c7.fcb087","type":"switchNode","name":"switch: db | input - vrf-name","xml":"<switch test='`$db.routing-characteristic_mapping[$routing-index].vrf-name == $generate-FQPN-input.vrf-name`'>\n","comments":"","outputs":1,"x":3666.952682495117,"y":1414.1307196617126,"z":"c652763a.596c58","wires":[["799cf5ac.b53bbc"]]},{"id":"e0608aa0.6ff978","type":"for","name":"for : db.routing-characteristic_mapping[]","xml":"<for index=\"routing-index\" start=\"0\" end=\"`$db.routing-characteristic_mapping_length`\">","comments":"","outputs":1,"x":3354.7026748657227,"y":1414.3807139396667,"z":"c652763a.596c58","wires":[["1cce08c7.fcb087"]]},{"id":"87ceba81.9e11c8","type":"comment","name":"Required INPUTS","info":"\ngenerate-FQPN-input.plan-name\n","comments":"","x":733.6984329223633,"y":36.2262396812439,"z":"c652763a.596c58","wires":[]},{"id":"2e6904ff.ed698c","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2961.702621459961,"y":1414.130699634552,"z":"c652763a.596c58","wires":[["1b5a8392.ee28fc"]]},{"id":"799cf5ac.b53bbc","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3878.4526596069336,"y":1414.1307120323181,"z":"c652763a.596c58","wires":[["94e0b4be.54b248"]]},{"id":"7d4a759a.d52b0c","type":"set","name":"set tmp.key-value = -1","xml":"<set>\n<parameter name='tmp.key-value' value='-1' />\n","comments":"","x":2567.928855895996,"y":1339.5117325782776,"z":"c652763a.596c58","wires":[]},{"id":"7a552f25.1a804","type":"set","name":"set tmp.key-value","xml":"<set>\n<parameter name='tmp.key-value' value='`$db.routing-characteristic_mapping[$routing-index].routing-characteristic`' />\n","comments":"","x":4243.647106170654,"y":1413.630639659034,"z":"c652763a.596c58","wires":[]},{"id":"e29adbda.480b38","type":"switchNode","name":"switch: tmp.key-value","xml":"<switch test='`$tmp.key-value`'>\n","comments":"","outputs":1,"x":2563.4884719848633,"y":1570.7456669807434,"z":"c652763a.596c58","wires":[["34acbd6f.5f5a22"]]},{"id":"34acbd6f.5f5a22","type":"outcomeTrue","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":2786.2384719848633,"y":1570.9956669807434,"z":"c652763a.596c58","wires":[["2ba9ab7a.eb4db4"]]},{"id":"2ba9ab7a.eb4db4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"No matching ROUTING_CHARACTERISTIC_MAPPING.vrf-name found\" />\n","comments":"","x":2945.7384719848633,"y":1570.7456669807434,"z":"c652763a.596c58","wires":[]},{"id":"bc1689b0.948c28","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2333.369354248047,"y":1339.3806958198547,"z":"c652763a.596c58","wires":[["85a0ca28.00cfa8","e29adbda.480b38","7d4a759a.d52b0c"]]},{"id":"bf892896.f0b5f8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"eipam-ip-block.getPlanTopologyResponse.TopologyDetails is null\" />\n","comments":"","x":874.5595855712891,"y":513.9008159637451,"z":"c652763a.596c58","wires":[]},{"id":"7691310e.0f762","type":"set","name":"set pool-index","xml":"<set>\n<parameter name='pool-index'\n   value='`$eipam-ip-block.getPlanTopologyResponse.TopologyDetails[$resp-index].Level - 1`' />\n","comments":"","x":938.0118560791016,"y":815.2421541213989,"z":"c652763a.596c58","wires":[]},{"id":"94e0b4be.54b248","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4042.8414268493652,"y":1414.07519197464,"z":"c652763a.596c58","wires":[["7a552f25.1a804","5a920854.123588"]]},{"id":"28db23f.554f3dc","type":"set","name":"set tmp.key-value","xml":"<set>\n<parameter name='tmp.key-value' value='`$db.routing-characteristic_mapping[0].routing-characteristic`' />\n","comments":"","x":3134.337303161621,"y":1514.1942734718323,"z":"c652763a.596c58","wires":[]},{"id":"af330778.3b34e8","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2960.253860473633,"y":1513.5990109443665,"z":"c652763a.596c58","wires":[["28db23f.554f3dc"]]},{"id":"91b70338.c7b13","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.location-clli8`' />\n","comments":"","x":2333.2618713378906,"y":1658.8251557350159,"z":"c652763a.596c58","wires":[]},{"id":"8a089a57.322c78","type":"set","name":"set eipam-ip-block.plan-name","xml":"<set>\n<parameter name='eipam-ip-block.plan-name' value='`$generate-FQPN-input.plan-name`' />\n","comments":"","x":492.4484329223633,"y":358.41671562194824,"z":"c652763a.596c58","wires":[]},{"id":"83fd072a.1aa948","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1282.3095703125,"y":1091.119131565094,"z":"c652763a.596c58","wires":[["5b3b0420.b4d8fc","556322b7.09182c","e335771d.ce26a8","92c5a401.157c78"]]},{"id":"bdaefa9a.44bad8","type":"switchNode","name":"switch: Response.planName vs eipam-ip-block..plan-name","xml":"<switch test='`$eipam-ip-block.plan-name == $eipam-ip-block.getPlanTopologyResponse.PlanName`'>\n","comments":"","outputs":1,"x":1075.6270370483398,"y":768.6031675338745,"z":"c652763a.596c58","wires":[["8ab7144b.dc5198"]]},{"id":"8ab7144b.dc5198","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1390.3572578430176,"y":768.8095111846924,"z":"c652763a.596c58","wires":[["7719b06a.805b2"]]},{"id":"7719b06a.805b2","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'eipam response plan-name ['+ $eipam-ip-block.getPlanTopologyResponse.PlanName + ' is not the same as input '+$eipam-ip-block.planName`\" />\n","comments":"","x":1555.7858123779297,"y":768.8095045089722,"z":"c652763a.596c58","wires":[]},{"id":"7266b10d.a764e","type":"comment","name":"eipam-ip-block.getPlanTopologyResponse.TopologyDetails[]","info":"eipam-ip-block.getPlanTopologyResponse.TopologyDetails[0].KeyName = CLLI_CLOUD_REGION\neipam-ip-block.getPlanTopologyResponse.TopologyDetails[0].Level = 1\neipam-ip-block.getPlanTopologyResponse.TopologyDetails[1].Level = 2\neipam-ip-block.getPlanTopologyResponse.TopologyDetails[1].KeyName = NETWORK_ROLE_NETWORK_ID\n\n","comments":"","x":1166.5238189697266,"y":455.3453063964844,"z":"c652763a.596c58","wires":[]},{"id":"b8165c7b.aaca1","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.aic-cloud-region`' />\n","comments":"","x":2199.011947631836,"y":1819.6306710243225,"z":"c652763a.596c58","wires":[]},{"id":"6742bcbb.0ddaf4","type":"set","name":"set tmp.key-value = complex.region","xml":"<set>\n<parameter name='tmp.key-value' value='`$aai.complex.region`' />\n","comments":"","x":2376.369110107422,"y":1885.8807015419006,"z":"c652763a.596c58","wires":[]},{"id":"5608d152.f0554","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.network-name`' />\n","comments":"","x":2344.2263107299805,"y":1944.8450865745544,"z":"c652763a.596c58","wires":[]},{"id":"98de2fde.1b752","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1937.6984895978658,"y":2429.8689430100576,"z":"c652763a.596c58","wires":[["732765e4.1228cc"]]},{"id":"732765e4.1228cc","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unknown ADDRESS_PLAN_POLICIES: ' + $db.address-plan-policies.key-value-source`\" />\n","comments":"","x":2106.127113342285,"y":2429.8689255714417,"z":"c652763a.596c58","wires":[]},{"id":"d06c8acf.1c9578","type":"switchNode","name":"switch: generate-FQPN-input.plan-name","xml":"<switch test='`$generate-FQPN-input.plan-name`'>\n","comments":"","outputs":1,"x":526.1429901123047,"y":303.9641819000244,"z":"c652763a.596c58","wires":[["4bc5e326.49bffc"]]},{"id":"5a920854.123588","type":"returnFailure","name":"BREAK","xml":"<return status='failure'>\n","comments":"","x":4215.761917114258,"y":1458.916515827179,"z":"c652763a.596c58","wires":[]},{"id":"456fc76a.e60c68","type":"returnSuccess","name":"CATCH BREAK","xml":"<return status='success'>","comments":"","x":3281.6190338134766,"y":1460.0593342781067,"z":"c652763a.596c58","wires":[]},{"id":"1b5a8392.ee28fc","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3110.6191787719727,"y":1414.0593552589417,"z":"c652763a.596c58","wires":[["e0608aa0.6ff978","456fc76a.e60c68"]]},{"id":"20e9e6c3.d21d5a","type":"set","name":"set generate-FQPN-output.pools[]","xml":"<set>\n<parameter name='generate-FQPN-output.pools[$pool-index].key-name'\n   value='`$tmp.getPlanTopologyResponse.key-name`' />\n<parameter name='generate-FQPN-output.pools[$pool-index].key-value'\n\tvalue='`$tmp.final.key-value`' />","comments":"","x":991.9999160766602,"y":1671.2973651885986,"z":"c652763a.596c58","wires":[]},{"id":"722e807f.31865","type":"switchNode","name":"switch: generate-FQPN-input.aic-cloud-region","xml":"<switch test='`$generate-FQPN-input.aic-cloud-region`'>\n","comments":"","outputs":1,"x":1348.571632385254,"y":68.10711860656738,"z":"c652763a.596c58","wires":[["6d671e0c.0d3ad"]]},{"id":"6d671e0c.0d3ad","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1621.0716400146484,"y":67.60711860656738,"z":"c652763a.596c58","wires":[["3c163883.e92c88"]]},{"id":"3c163883.e92c88","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"generate-FQPN-input.aic-cloud-region is null\" />\n","comments":"","x":1782.9883117675781,"y":67.71821737289429,"z":"c652763a.596c58","wires":[]},{"id":"342731c4.6e7bfe","type":"other","name":"AddressPlanPolicyDG-Subnet_Role","xml":"<outcome value='AddressPlanPolicyDG-Subnet_Role'>\n","comments":"","outputs":1,"x":2024.6191101074219,"y":2039.6307015419006,"z":"c652763a.596c58","wires":[["f9fc2911.d11238"]]},{"id":"fdbcf3f7.07358","type":"comment","name":"Change History","info":"iTrack 8790\n- add validation for network-role in input for null\n- change query of ROUTING_CHARATERISTIC table with network-role from input.\n- Return generate-FQPN-output.pools[]\n- set pools_length to .getPlanTopologyResponse.TopologyDetails_length separately at the end of the call.\niTrack 10846\n- node 35, fixed error-message, generate-FQPN-input.network-role\niTrack 11310\n- changed ADDRESS_PLAN_POLICIES  cloud_region_id from using vnfapi nodestring for cloud-region-id\n- added AddressPlanPolicyDG-Network_Role and AddressPlanPolicyDG-Network_Id to ADDRESS_PLAN_POLICIES  query and resolution\n- updated vrf-name resolution to use tosca data if not found in ADDRESS_PLAN_POLICIES\n- support compound key-name\niTrack 11945\n- added network-collection and zone \n- remove validation of all input except plan-name\n","comments":"","x":938.7500152587891,"y":66.4642915725708,"z":"c652763a.596c58","wires":[]},{"id":"882fb87d.50bb98","type":"switchNode","name":"switch: generate-FQPN-input.location-clli8","xml":"<switch test='`$generate-FQPN-input.location-clli8`'>\n","comments":"","outputs":1,"x":1337.3215713500977,"y":117.8928279876709,"z":"c652763a.596c58","wires":[["5745e190.c2fb9"]]},{"id":"5745e190.c2fb9","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1609.8215789794922,"y":117.3928279876709,"z":"c652763a.596c58","wires":[["52a22cfc.08e524"]]},{"id":"52a22cfc.08e524","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"generate-FQPN-input.location-clli8 is null\" />\n","comments":"","x":1771.7382507324219,"y":117.5039267539978,"z":"c652763a.596c58","wires":[]},{"id":"e2f939ea.05fa78","type":"switchNode","name":"switch: generate-FQPN-input.complex-region","xml":"<switch test='`$generate-FQPN-input.complex-region`'>\n","comments":"","outputs":1,"x":1346.8930130004883,"y":167.89282417297363,"z":"c652763a.596c58","wires":[["dfe11059.90d46"]]},{"id":"dfe11059.90d46","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1619.3930206298828,"y":167.39282417297363,"z":"c652763a.596c58","wires":[["5a14e8bf.c22d98"]]},{"id":"5a14e8bf.c22d98","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"generate-FQPN-input.complex-region is null\" />\n","comments":"","x":1781.3096923828125,"y":167.50392293930054,"z":"c652763a.596c58","wires":[]},{"id":"d362a8cb.2c2918","type":"switchNode","name":"switch: generate-FQPN-input.network-name","xml":"<switch test='`$generate-FQPN-input.network-name`'>\n","comments":"","outputs":1,"x":1343.6073455810547,"y":216.46425247192383,"z":"c652763a.596c58","wires":[["cbc1f670.e78b58"]]},{"id":"cbc1f670.e78b58","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1616.1073532104492,"y":215.96425247192383,"z":"c652763a.596c58","wires":[["35ddce88.fff762"]]},{"id":"35ddce88.fff762","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"generate-FQPN-input.network-name is null\" />\n","comments":"","x":1778.024024963379,"y":216.07535123825073,"z":"c652763a.596c58","wires":[]},{"id":"f706cd27.421b7","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"generate-FQPN-input.plan-name is null\" />\n","comments":"","x":958.46435546875,"y":303.74999618530273,"z":"c652763a.596c58","wires":[]},{"id":"4bc5e326.49bffc","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":781.8928985595703,"y":303.7500238418579,"z":"c652763a.596c58","wires":[["f706cd27.421b7"]]},{"id":"e335771d.ce26a8","type":"set","name":"set tmp.key-value = null","xml":"<set>\n<parameter name='tmp.key-value' value='' />\n","comments":"","x":1530.6787338256836,"y":1259.7380094528198,"z":"c652763a.596c58","wires":[]},{"id":"55980981.9f2b58","type":"for","name":"for resp-index: getPlanTopologyResponse.TopologyDetails[]","xml":"<for index=\"resp-index\" start=\"0\" end=\"`$eipam-ip-block.getPlanTopologyResponse.TopologyDetails_length`\">","comments":"","outputs":1,"x":567.9880828857422,"y":768.6667146682739,"z":"c652763a.596c58","wires":[["bdaefa9a.44bad8","7691310e.0f762","49723ed6.b5077","fcb3b4d4.db2118","795df082.1ef0e","20e9e6c3.d21d5a","f02298f2.395ed8"]]},{"id":"eccbf901.ff5b08","type":"switchNode","name":"switch: generate-FQPN-input.network-role","xml":"<switch test='`$generate-FQPN-input.network-role`'>\n","comments":"","outputs":1,"x":1335.6072845458984,"y":312.749963760376,"z":"c652763a.596c58","wires":[["26ab2719.de3898"]]},{"id":"26ab2719.de3898","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1608.107292175293,"y":312.249963760376,"z":"c652763a.596c58","wires":[["ade31dc.cd41ce"]]},{"id":"ade31dc.cd41ce","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"generate-FQPN-input.network-role is null\" />\n","comments":"","x":1770.0239639282227,"y":312.3610625267029,"z":"c652763a.596c58","wires":[]},{"id":"11421c9.063bce3","type":"set","name":"empty generate-FQPN-output.","xml":"<set>\n<parameter name='generate-FQPN-output.' value='' />\n","comments":"","x":493.1785888671875,"y":410.89291191101074,"z":"c652763a.596c58","wires":[]},{"id":"e337ea2f.a00878","type":"comment","name":"OUTPUT","info":"generate-FQPN-output.pools[]\ngenerate-FQPN-output.pools_length","comments":"","x":673.0356750488281,"y":100.75001049041748,"z":"c652763a.596c58","wires":[]},{"id":"4a7531a7.3f821","type":"set","name":"set generate-FQPN-output.pools_length","xml":"<set>\n<parameter name='generate-FQPN-output.pools_length' \n\tvalue='`$eipam-ip-block.getPlanTopologyResponse.TopologyDetails_length`' />\n","comments":"","x":503.6071090698242,"y":884.8572025299072,"z":"c652763a.596c58","wires":[]},{"id":"b89d845e.01b468","type":"set","name":"set tmp.key-value = STATIC","xml":"<set>\n<parameter name='tmp.key-value' value='STATIC' />\n","comments":"","x":2825.6906204223633,"y":2039.0593361854553,"z":"c652763a.596c58","wires":[]},{"id":"f9fc2911.d11238","type":"switchNode","name":"switch generate-FQPN-input.subnet-role","xml":"\n<switch test='`$generate-FQPN-input.subnet-role`' >\n","comments":"","outputs":1,"x":2365.6548385620117,"y":2039.7498326301575,"z":"c652763a.596c58","wires":[["4701e013.e7507","6a3c9bf7.7a0944"]]},{"id":"4701e013.e7507","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2613.5120162963867,"y":2039.3212475776672,"z":"c652763a.596c58","wires":[["b89d845e.01b468"]]},{"id":"6a3c9bf7.7a0944","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2613.7976608276367,"y":2085.6070103645325,"z":"c652763a.596c58","wires":[["b22212e1.24b38"]]},{"id":"b22212e1.24b38","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.subnet-role`' />\n","comments":"","x":2817.0835494995117,"y":2085.4641880989075,"z":"c652763a.596c58","wires":[]},{"id":"428d578.e3b2ea8","type":"outcome","name":"AddressPlanPolicyDG-Network_Role","xml":"<outcome value='AddressPlanPolicyDG-Network_Role'>\n","comments":"","outputs":1,"x":2030.8610153198242,"y":2152.765600681305,"z":"c652763a.596c58","wires":[["576bc5f5.7d0f5c"]]},{"id":"576bc5f5.7d0f5c","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.network-role`' />\n","comments":"","x":2321.7459716796875,"y":2152.9522471427917,"z":"c652763a.596c58","wires":[]},{"id":"e3f636d7.501068","type":"outcome","name":"AddressPlanPolicyDG-Network_Id","xml":"<outcome value='AddressPlanPolicyDG-Network_Id'>\n","comments":"","outputs":1,"x":2019.7499313354492,"y":2233.8767971992493,"z":"c652763a.596c58","wires":[["50767569.e5490c"]]},{"id":"50767569.e5490c","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.network-id`' />\n","comments":"","x":2310.6348876953125,"y":2234.063443660736,"z":"c652763a.596c58","wires":[]},{"id":"4ca5db34.62be64","type":"switchNode","name":"switch: generate-FQPN-input.network-id","xml":"<switch test='`$generate-FQPN-input.network-id`'>\n","comments":"","outputs":1,"x":1331.321517944336,"y":262.6071357727051,"z":"c652763a.596c58","wires":[["69381626.e9a348"]]},{"id":"69381626.e9a348","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1603.8215255737305,"y":263.1071357727051,"z":"c652763a.596c58","wires":[["2ac78bdc.099524"]]},{"id":"2ac78bdc.099524","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"generate-FQPN-input.network-id is null\" />\n","comments":"","x":1765.7381973266602,"y":263.218234539032,"z":"c652763a.596c58","wires":[]},{"id":"834c6c7c.38e56","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":401.6071472167969,"y":28.75,"z":"c652763a.596c58","wires":[["a766aebf.c7668"]]},{"id":"532b3408.a7a4ec","type":"switchNode","name":"switch: generate-FQPN-input.vrf-name","xml":"<switch test='`$generate-FQPN-input.vrf-name`'>\n","comments":"","outputs":1,"x":2340.797737121582,"y":1715.035650730133,"z":"c652763a.596c58","wires":[["ffd2065c.c1c968"]]},{"id":"ffd2065c.c1c968","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2588.512092590332,"y":1715.035650730133,"z":"c652763a.596c58","wires":[["d2bc39c7.5d9538"]]},{"id":"d2bc39c7.5d9538","type":"set","name":"set tmp.key-value = $db.routing-characteristic_mapping[0].vrf-name","xml":"<set>\n<parameter name='tmp.key-value' value='`$db.routing-characteristic_mapping[0].vrf-name`' />\n","comments":"","x":2927.0235900878906,"y":1714.6626954078674,"z":"c652763a.596c58","wires":[]},{"id":"49723ed6.b5077","type":"set","name":"set tmp.getPlanTopologyResponse.key-name","xml":"<set>\n<parameter name='tmp.getPlanTopologyResponse.key-name' \n\tvalue='`$eipam-ip-block.getPlanTopologyResponse.TopologyDetails[$resp-index].KeyName`' />\n","comments":"","x":1026.9286193847656,"y":918.0714998245239,"z":"c652763a.596c58","wires":[]},{"id":"fcb3b4d4.db2118","type":"execute","name":"split tmp.getPlanTopologyResponse.key-name","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n\t<parameter name=\"original_string\" value=\"`$tmp.getPlanTopologyResponse.key-name`\" />\n\t<parameter name=\"regex\" value=\":\" />\n\t<parameter name=\"ctx_memory_result_key\" value=\"tmp.split.key-name\" />\n","comments":"","outputs":1,"x":1031.071434020996,"y":971.6429176330566,"z":"c652763a.596c58","wires":[[]]},{"id":"795df082.1ef0e","type":"for","name":"for split-index: tmp.split.key-name","xml":"<for index=\"split-index\" start=\"0\" end=\"`$tmp.split.key-name_length`\">","comments":"","outputs":1,"x":993.2500343322754,"y":1023.7857522964478,"z":"c652763a.596c58","wires":[["b59ccbaa.90d0b8","83fd072a.1aa948","b14a8dd9.6e60d"]]},{"id":"b59ccbaa.90d0b8","type":"set","name":"set tmp.eipam.key-name","xml":"<set>\n<parameter name='tmp.eipam.key-name' \n\tvalue='`$tmp.split.key-name[$split-index]`' />\n","comments":"","x":1314.750015258789,"y":1023.5357351303101,"z":"c652763a.596c58","wires":[]},{"id":"7de6547e.574bfc","type":"set","name":"set tmp.final.key-value","xml":"<set>\n<parameter name='tmp.final.key-value' value=\"`$tmp.key-value`\" />\n","comments":"","x":1687.297378540039,"y":1513.1548833847046,"z":"c652763a.596c58","wires":[]},{"id":"b14a8dd9.6e60d","type":"switchNode","name":"switch: split-index == 0","xml":"<switch test='`$split-index == 0`'>\n","comments":"","outputs":1,"x":1294.297477722168,"y":1513.5834398269653,"z":"c652763a.596c58","wires":[["20c1863e.337c1a","975be642.2ad488"]]},{"id":"20c1863e.337c1a","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1491.0118026733398,"y":1513.5833616256714,"z":"c652763a.596c58","wires":[["7de6547e.574bfc"]]},{"id":"975be642.2ad488","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1492.8688583374023,"y":1565.011950492859,"z":"c652763a.596c58","wires":[["4c706252.b3c0bc"]]},{"id":"4c706252.b3c0bc","type":"set","name":"set tmp.final.key-value with :","xml":"<set>\n<parameter name='tmp.final.key-value' \n\tvalue=\"`$tmp.final.key-value + ':' + $tmp.key-value`\" />\n","comments":"","x":1706.154655456543,"y":1565.20254611969,"z":"c652763a.596c58","wires":[]},{"id":"f02298f2.395ed8","type":"set","name":"set tmp.final.key-value NULL","xml":"<set>\n<parameter name='tmp.final.key-value' value=\"\" />\n","comments":"","x":982.2500228881836,"y":867.5357341766357,"z":"c652763a.596c58","wires":[]},{"id":"c469dc37.0566","type":"outcome","name":"AddressPlanPolicyDG-Network_Collection","xml":"<outcome value='AddressPlanPolicyDG-Network_Collection'>\n","comments":"","outputs":1,"x":2044.6428833007812,"y":2300.357177734375,"z":"c652763a.596c58","wires":[["c8b4a61c.5dc488"]]},{"id":"c8b4a61c.5dc488","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.network-collection`' />\n","comments":"","x":2335.5278396606445,"y":2300.543824195862,"z":"c652763a.596c58","wires":[]},{"id":"7875fd31.d3ddc4","type":"outcome","name":"AddressPlanPolicyDG-Zone","xml":"<outcome value='AddressPlanPolicyDG-Zone'>\n","comments":"","outputs":1,"x":1998.3928833007812,"y":2360.3571796417236,"z":"c652763a.596c58","wires":[["3cd2f123.1a42be"]]},{"id":"3cd2f123.1a42be","type":"set","name":"set tmp.key-value = input","xml":"<set>\n<parameter name='tmp.key-value' value='`$generate-FQPN-input.zone`' />\n","comments":"","x":2289.2778396606445,"y":2360.5438261032104,"z":"c652763a.596c58","wires":[]},{"id":"72bce7b0.c625f8","type":"switchNode","name":"switch: sdnc-generated-cloud-resources","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.sdnc-generated-cloud-resources`'>\n","comments":"","outputs":1,"x":251.42862701416016,"y":571.285698890686,"z":"c652763a.596c58","wires":[["6ad0b534.7aedfc","53e1e9c2.959dc8","dee69902.b8b9c8"]]},{"id":"6ad0b534.7aedfc","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":525.1430282592773,"y":571.4285879135132,"z":"c652763a.596c58","wires":[["cbe4345b.0405f8"]]},{"id":"cbe4345b.0405f8","type":"call","name":"call GENERIC-RESOURCE-API:self-serve-generate-FQPN","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-generate-FQPN' mode='sync' >\n","comments":"","outputs":1,"x":840.0001487731934,"y":571.000002861023,"z":"c652763a.596c58","wires":[[]]},{"id":"53e1e9c2.959dc8","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":523.7143249511719,"y":654.2856321334839,"z":"c652763a.596c58","wires":[["6e3a5ada.ae9324"]]},{"id":"dee69902.b8b9c8","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":523.7143249511719,"y":614.2857723236084,"z":"c652763a.596c58","wires":[["6e3a5ada.ae9324"]]},{"id":"6e3a5ada.ae9324","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":224.28572845458984,"y":831.8571043014526,"z":"c652763a.596c58","wires":[["55980981.9f2b58","4a7531a7.3f821"]]}]