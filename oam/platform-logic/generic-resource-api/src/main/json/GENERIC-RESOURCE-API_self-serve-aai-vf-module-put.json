[{"id":"544113b5.3263fc","type":"dgstart","name":"DGSTART","outputs":1,"x":104.99999237060547,"y":48.33333206176758,"z":"8068ded9.ccc26","wires":[["1404c879.0f3058"]]},{"id":"d2b6c403.dde578","type":"method","name":"method self-serve-aai-vf-module-put","xml":"<method rpc='self-serve-aai-vf-module-put' mode='sync'>\n","comments":"","outputs":1,"x":237.21428680419922,"y":99.50794315338135,"z":"8068ded9.ccc26","wires":[["28d4af4a.f0cdb"]]},{"id":"28d4af4a.f0cdb","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":124.89287567138672,"y":174.8571548461914,"z":"8068ded9.ccc26","wires":[["f217d7f2.7c62d8","d7b740fc.6831a","9669e0ca.90c8f","3b0adeb0.0eb082"]]},{"id":"1404c879.0f3058","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":377.85713958740234,"y":47.7618989944458,"z":"8068ded9.ccc26","wires":[["d2b6c403.dde578"]]},{"id":"f217d7f2.7c62d8","type":"switchNode","name":"switch: ss.capability-action","xml":"<switch test='`$ss.capability-action`'>\n","comments":"","outputs":1,"x":362.8571662902832,"y":227.08332681655884,"z":"8068ded9.ccc26","wires":[["2cbb79a9.c1eea6","d1160c49.4176","43c0a50b.639d9c"]]},{"id":"2cbb79a9.c1eea6","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":571.3571624755859,"y":227.33332681655884,"z":"8068ded9.ccc26","wires":[["5ae95a45.5debe4"]]},{"id":"5ae95a45.5debe4","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-action is null\" />\n","comments":"","x":727.2738342285156,"y":227.44442558288574,"z":"8068ded9.ccc26","wires":[]},{"id":"d1160c49.4176","type":"outcome","name":"assign","xml":"<outcome value='assign'>","comments":"","outputs":1,"x":571.1071586608887,"y":276.33333015441895,"z":"8068ded9.ccc26","wires":[["a7cac65d.e914d8"]]},{"id":"d7b740fc.6831a","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-aai-vfput.log' />\n","comments":"","outputs":1,"x":319.8214340209961,"y":1210.9523258209229,"z":"8068ded9.ccc26","wires":[[]]},{"id":"27de274a.88c098","type":"save","name":"update generic-vnf","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"ipv4-loopback0-address\" value='`$ss.param.ipv4-loopback0-address`' />\n","comments":"","outputs":1,"x":2390.6071739196777,"y":1895.2024598121643,"z":"8068ded9.ccc26","wires":[["3979b1d5.6677ee","7a101d16.ff8574","d5eb2c25.f7bf1"]]},{"id":"3979b1d5.6677ee","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2590.857204437256,"y":1895.559506893158,"z":"8068ded9.ccc26","wires":[["d2c445d.5b0a2b8"]]},{"id":"7a101d16.ff8574","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2597.1072158813477,"y":1946.3095412254333,"z":"8068ded9.ccc26","wires":[["b17925c2.0a32d8"]]},{"id":"d2c445d.5b0a2b8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf.ipv4-loopback0-address in AnAI with ipv4-loopback0-address=' + $ss.param.ipv4-loopback0-address + '; ' + $error-message`\" />\n","comments":"","x":2768.726161956787,"y":1895.34521150589,"z":"8068ded9.ccc26","wires":[]},{"id":"b17925c2.0a32d8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`\" />\n","comments":"","x":2769.297679901123,"y":1945.583387851715,"z":"8068ded9.ccc26","wires":[]},{"id":"2bb84732.4581c8","type":"save","name":"update volume-group","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"volume-group\"\n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-owner  \n\t\t\tAND cloud-region.cloud-region-id = $ss.param.aic-cloud-region \n\t\t\tAND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner \n\t\t\tAND volume-group-id = $ss.param.volume-group-id\" >\n<parameter name=\"volume-group-name\" value='`$ss.param.volume-group-name`' />\n<parameter name=\"volume-group-id\" value='`$ss.param.volume-group-id`' />\n","comments":"","outputs":1,"x":1675.523941040039,"y":4008.690396785736,"z":"8068ded9.ccc26","wires":[["990ce64e.9c6758","603a3397.22016c"]]},{"id":"990ce64e.9c6758","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1883.523941040039,"y":4008.690396785736,"z":"8068ded9.ccc26","wires":[["4c1c1d74.1517f4"]]},{"id":"5f17c4a8.0dac0c","type":"save","name":"Rollback generic-vnf update","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"ipv4-loopback0-address\" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />\n<parameter name=\"ipv4-oam-address\" value='`$tmp.aai.vnf.ipv4-oam-address`' />\n<parameter name=\"as-number\" value='`$tmp.aai.vnf.as-number`' />\n<parameter name=\"vlan-id-outer\" value='`$tmp.aai.vnf.vlan-id-outer`' />","comments":"","outputs":1,"x":6086.120388031006,"y":3156.1444816589355,"z":"8068ded9.ccc26","wires":[["cd5787f3.1adc68","11863adb.b84605","a0326122.57c02"]]},{"id":"cd5787f3.1adc68","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":6324.370372772217,"y":3155.644426345825,"z":"8068ded9.ccc26","wires":[["2f247634.a3188a"]]},{"id":"11863adb.b84605","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":6330.620384216309,"y":3207.3944606781006,"z":"8068ded9.ccc26","wires":[["d35c334f.7cfba"]]},{"id":"cdbfc33f.d52a7","type":"save","name":"get generic-vnf","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \"\n\tpfx=\"tmp.aai.vnf\" >\n\n","comments":"","outputs":1,"x":1271.607234954834,"y":1643.833396911621,"z":"8068ded9.ccc26","wires":[["7c2ec187.5782e","d05d85c0.e9b768"]]},{"id":"7c2ec187.5782e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1480.1428680419922,"y":1643.3333177566528,"z":"8068ded9.ccc26","wires":[["83c73051.c3a32"]]},{"id":"d05d85c0.e9b768","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1486.3927879333496,"y":1742.2262258529663,"z":"8068ded9.ccc26","wires":[["486062c6.b9a65c"]]},{"id":"3a748bec.06c474","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Encountered error to get generic-vnf with vnf-id=' + $ss.param.vnf-id + ' from AnAI'`\" />\n","comments":"","x":1922.5830726623535,"y":1688.8333368301392,"z":"8068ded9.ccc26","wires":[]},{"id":"f79a10de.f96ed","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'generic-vnf.vnf-name with vnf-id=' + $ss.param.vnf-id + ' not found in AAI. '`\" />\n","comments":"","x":1924.2975463867188,"y":1742.785894393921,"z":"8068ded9.ccc26","wires":[]},{"id":"fd633781.1bf9c8","type":"save","name":"update volume-group","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"volume-group\"\n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-owner  \n\t\t\tAND cloud-region.cloud-region-id = $ss.param.aic-cloud-region \n\t\t\tAND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner \n\t\t\tAND volume-group-id = $ss.param.volume-group-id\" >\n<parameter name=\"volume-group-name\" value='`$tmp.aai.volume-group.volume-group-name`' />","comments":"","outputs":1,"x":5744.548473358154,"y":3776.048948287964,"z":"8068ded9.ccc26","wires":[["e4fa8909.4dd298","e6cf9e60.36c21","1a42d1bd.7e06ae"]]},{"id":"4c1c1d74.1517f4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2078.2739334106445,"y":4008.690370082855,"z":"8068ded9.ccc26","wires":[["c1b8579b.771458","5baa82ec.dffecc"]]},{"id":"a7cac65d.e914d8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":724.8571548461914,"y":276.5833263397217,"z":"8068ded9.ccc26","wires":[["d16edcfb.a2216","81d44ce6.28309","1e19f844.9c0ec8","a393fb3d.925a18","c0feb185.c5348","f10164da.04f358","40f8f017.2403a","4fcc988.d1ea868","310596e2.42bc4a"]]},{"id":"d16edcfb.a2216","type":"set","name":"set resource-resolution-data.status, parm[].value = SUCCESS","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='SUCCESS' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].value' \n\tvalue='SUCCESS' />\n","comments":"","x":1096.2739639282227,"y":6504.09578037262,"z":"8068ded9.ccc26","wires":[]},{"id":"83c73051.c3a32","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1651.714454650879,"y":1643.3691110610962,"z":"8068ded9.ccc26","wires":[["531e351c.fe55bc","3a748bec.06c474"]]},{"id":"486062c6.b9a65c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1652.571533203125,"y":1742.3691110610962,"z":"8068ded9.ccc26","wires":[["531e351c.fe55bc","f79a10de.f96ed"]]},{"id":"531e351c.fe55bc","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$ss.param.aai-vnf-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":2019.2858428955078,"y":1643.0834226608276,"z":"8068ded9.ccc26","wires":[]},{"id":"32c37498.d5047c","type":"for","name":"for bidx in param_length (VF-MODULE)","xml":"<for silentFailure='true' index=\"bidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\" >\n","comments":"","outputs":1,"x":1288.7617721557617,"y":360.57139682769775,"z":"8068ded9.ccc26","wires":[["930c302f.87d9a"]]},{"id":"a1dc9b53.b001a8","type":"switchNode","name":"switch param[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`'>\n","comments":"","outputs":1,"x":2028.1904602050781,"y":881.0000171661377,"z":"8068ded9.ccc26","wires":[["eda336f5.cd2b28","7e8f8098.f3aac","82245a01.d9d5d8","9a172f5.4d216d","1635f3c2.d64ecc","7b910270.aa145c","a7a813a9.685fe","4a38191a.665008","68af07a3.16ce88","91d6d0e4.e2cc2","8f404e48.285a6","133a1544.17dc0b","ec83fc2d.1db1b","ca7c357a.02aee8","f5541fce.c9fc9","2b83386b.477738","593dcc0e.8e3134","26c08944.595276","982628c3.cc5ec8","b7a3bc44.8c264","10ef55c1.e5abda"]]},{"id":"eda336f5.cd2b28","type":"outcome","name":"vf_module_id","xml":"<outcome value='vf_module_id'>\n","comments":"","outputs":1,"x":2322.1904525756836,"y":451.8571300506592,"z":"8068ded9.ccc26","wires":[["45675dfb.d48574"]]},{"id":"45675dfb.d48574","type":"set","name":"set ss.param.vf-module-id","xml":"<set>\n<parameter name='ss.param.vf-module-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n","comments":"","x":2660.619083404541,"y":452.7142939567566,"z":"8068ded9.ccc26","wires":[]},{"id":"7e8f8098.f3aac","type":"outcome","name":"vf-module-name","xml":"<outcome value='vf-module-name'>\n","comments":"","outputs":1,"x":2333.6189918518066,"y":494.7142791748047,"z":"8068ded9.ccc26","wires":[["4f7b07c.b10dcf8"]]},{"id":"4f7b07c.b10dcf8","type":"set","name":"set ss.param.vf-module-name","xml":"<set>\n<parameter name='ss.param.vf-module-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n","comments":"","x":2671.9047470092773,"y":495.28573751449585,"z":"8068ded9.ccc26","wires":[]},{"id":"82245a01.d9d5d8","type":"outcome","name":"volume-group-name","xml":"<outcome value='volume-group-name'>\n","comments":"","outputs":1,"x":2342.9047241210938,"y":579.5714559555054,"z":"8068ded9.ccc26","wires":[["f508bd0c.d0dc8"]]},{"id":"f508bd0c.d0dc8","type":"set","name":"set ss.param.volume-group-name","xml":"<set>\n<parameter name='ss.param.volume-group-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n","comments":"","x":2685.9047470092773,"y":580.2857375144958,"z":"8068ded9.ccc26","wires":[]},{"id":"9a172f5.4d216d","type":"outcome","name":"aic-cloud-region","xml":"<outcome value='aic-cloud-region'>\n","comments":"","outputs":1,"x":2328.904773712158,"y":621.5714359283447,"z":"8068ded9.ccc26","wires":[["ffb319f8.7a0188"]]},{"id":"ffb319f8.7a0188","type":"set","name":"set ss.param.aic-cloud-region","xml":"<set>\n<parameter name='ss.param.aic-cloud-region' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n","comments":"","x":2674.190528869629,"y":622.1428942680359,"z":"8068ded9.ccc26","wires":[]},{"id":"1635f3c2.d64ecc","type":"outcome","name":"volume-group-id","xml":"<outcome value='volume-group-id'>\n","comments":"","outputs":1,"x":2334.1904678344727,"y":536.8571701049805,"z":"8068ded9.ccc26","wires":[["3675b335.dbe54c"]]},{"id":"3675b335.dbe54c","type":"set","name":"set ss.param.volume-group-id","xml":"<set>\n<parameter name='ss.param.volume-group-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n","comments":"","x":2672.4762229919434,"y":537.4286284446716,"z":"8068ded9.ccc26","wires":[]},{"id":"e53f3779.d51718","type":"save","name":"update vf-module","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vf-module\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \n\t\t\tAND vf-module.vf-module-id = $ss.param.vf-module-id \" >\n<parameter name=\"vf-module-name\" value='`$ss.param.vf-module-name`' />\n<parameter name=\"selflink\" value='`$ss.selflink`' />\n","comments":"","outputs":1,"x":1680.0717315673828,"y":3563.9885816574097,"z":"8068ded9.ccc26","wires":[["afb215fc.55dad8","656edb50.29a904"]]},{"id":"afb215fc.55dad8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1873.3217163085938,"y":3563.4885263442993,"z":"8068ded9.ccc26","wires":[["a40c159f.2d73b8"]]},{"id":"656edb50.29a904","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1879.5717277526855,"y":3615.2385606765747,"z":"8068ded9.ccc26","wires":[["f18e9019.bd386"]]},{"id":"b02b7bf8.605ee8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'vf-module not found in AnAI with vf-module-id=' + $ss.param.vf-module-id + $error-message`\" />\n","comments":"","x":2223.7383728027344,"y":3453.857497215271,"z":"8068ded9.ccc26","wires":[]},{"id":"fff7178f.f6b028","type":"save","name":"get vf-module","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vf-module\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \n\t\t\tAND vf-module.vf-module-id = $ss.param.vf-module-id \"\n\tpfx=\"tmp.aai.vfmdoule\" >\n\n","comments":"","outputs":1,"x":1666.3218803405762,"y":3363.5716791152954,"z":"8068ded9.ccc26","wires":[["33df8cfd.d9e204","7ca5615.b5bdba"]]},{"id":"33df8cfd.d9e204","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1855.571865081787,"y":3363.071623802185,"z":"8068ded9.ccc26","wires":[["3a7cd486.8bb8bc"]]},{"id":"7ca5615.b5bdba","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1863.2503471374512,"y":3419.1073150634766,"z":"8068ded9.ccc26","wires":[["946f5847.827928"]]},{"id":"a40c159f.2d73b8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2070.7502822875977,"y":3563.5600509643555,"z":"8068ded9.ccc26","wires":[["fb61694.f0eee98","e9ef052a.050278"]]},{"id":"f18e9019.bd386","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2073.6074981689453,"y":3614.4171924591064,"z":"8068ded9.ccc26","wires":[["8d0b8b24.ceee48","e9ef052a.050278"]]},{"id":"1fa7644b.ffce9c","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":6137.54887008667,"y":3110.5131034851074,"z":"8068ded9.ccc26","wires":[]},{"id":"a0326122.57c02","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":6328.441631317139,"y":3255.656030654907,"z":"8068ded9.ccc26","wires":[["16cfd259.a82d8e"]]},{"id":"1c8efb54.0d2e25","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":5828.72732925415,"y":3066.906047821045,"z":"8068ded9.ccc26","wires":[["1fa7644b.ffce9c","5f17c4a8.0dac0c","c5a30c47.4e84c"]]},{"id":"d11853ad.952b6","type":"save","name":"Rollback vf-module update","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vf-module\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \n\t\t\tAND vf-module.vf-module-id = $ss.param.vf-module-id \" >\n<parameter name=\"vf-module-name\" value='`$tmp.aai.vfmdoule.vf-module-name`' />\n<parameter name=\"selflink\" value='`$tmp.aai.vfmdoule.selflink`' />","comments":"","outputs":1,"x":5913.00138092041,"y":3500.2506856918335,"z":"8068ded9.ccc26","wires":[["900b7985.d88088","d5f6460b.1a20b8","98d622a6.0af76"]]},{"id":"900b7985.d88088","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":6151.251365661621,"y":3499.750630378723,"z":"8068ded9.ccc26","wires":[["dfd2d7b3.3404f8"]]},{"id":"d5f6460b.1a20b8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":6159.501377105713,"y":3542.5006647109985,"z":"8068ded9.ccc26","wires":[["c4a7132d.b535c"]]},{"id":"98d622a6.0af76","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":6156.322624206543,"y":3585.762234687805,"z":"8068ded9.ccc26","wires":[["a9be3e4a.97414"]]},{"id":"7b910270.aa145c","type":"outcome","name":"vnfc-name","xml":"<outcome value='vnfc-name'>","comments":"","outputs":1,"x":2312.238136291504,"y":666.6665997505188,"z":"8068ded9.ccc26","wires":[["71eabe9b.2eb27"]]},{"id":"71eabe9b.2eb27","type":"set","name":"set ss.param.vnfc-name, index","xml":"<set>\n<parameter name='ss.param.vnfc-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.vnfc-name-index' value='`$bidx`' />","comments":"","x":2678.3453636169434,"y":667.416672706604,"z":"8068ded9.ccc26","wires":[]},{"id":"87beb09a.09ea7","type":"comment","name":"vf-module params","info":"","comments":"","x":1945.9046783447266,"y":543.9523286819458,"z":"8068ded9.ccc26","wires":[]},{"id":"22799e1.3c96862","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to get vf-module in AnAI with vf-module-id = ' + $ss.param.vf-module-id  + '; ' + $error-message`\" />\n","comments":"","x":2223.869354248047,"y":3399.0717306137085,"z":"8068ded9.ccc26","wires":[]},{"id":"3a7cd486.8bb8bc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2027.5361137390137,"y":3363.5717878341675,"z":"8068ded9.ccc26","wires":[["22799e1.3c96862","e9ef052a.050278"]]},{"id":"946f5847.827928","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2027.7860946655273,"y":3419.0717668533325,"z":"8068ded9.ccc26","wires":[["b02b7bf8.605ee8","e9ef052a.050278"]]},{"id":"2f247634.a3188a","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6507.191570281982,"y":3155.7631006240845,"z":"8068ded9.ccc26","wires":[]},{"id":"d35c334f.7cfba","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6509.691570281982,"y":3207.013102531433,"z":"8068ded9.ccc26","wires":[]},{"id":"16cfd259.a82d8e","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of generic-vnf update completed. '`\" />\n","comments":"","x":6512.191570281982,"y":3256.0131006240845,"z":"8068ded9.ccc26","wires":[]},{"id":"fb61694.f0eee98","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update vf-module-name with vf-module-id = ' + $ss.param.vf-module-id + ' in AnAI; ' + $error-message`\" />\n","comments":"","x":2263.631217956543,"y":3588.881335258484,"z":"8068ded9.ccc26","wires":[]},{"id":"8d0b8b24.ceee48","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update vf-module-name with vf-module-id =' + $ss.param.vf-module-id + ' because vf-module is not found in AAI' + $error-message`\" />\n","comments":"","x":2264.881217956543,"y":3639.6313371658325,"z":"8068ded9.ccc26","wires":[]},{"id":"c1b8579b.771458","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to update volume-group with volume-group-id =' + $ss.param.volume-group-id + ' and volume-group-name = ' + $ss.param.volume-group-name + ' in AnAI.' + $error-message`\" />\n","comments":"","x":2271.4525833129883,"y":4009.0239968299866,"z":"8068ded9.ccc26","wires":[]},{"id":"dfd2d7b3.3404f8","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`\" />\n","comments":"","x":6332.679847717285,"y":3499.215039253235,"z":"8068ded9.ccc26","wires":[]},{"id":"c4a7132d.b535c","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`\" />\n","comments":"","x":6351.679847717285,"y":3541.715039253235,"z":"8068ded9.ccc26","wires":[]},{"id":"c5a30c47.4e84c","type":"record","name":"record generic-vnf ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK generic-vnf update\"/>","comments":"","outputs":1,"x":6091.691570281982,"y":3066.013101577759,"z":"8068ded9.ccc26","wires":[[]]},{"id":"68e7f351.24dd5c","type":"record","name":"record vf-module ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK vf-module update\"/>","comments":"","outputs":1,"x":5920.929847717285,"y":3455.7150382995605,"z":"8068ded9.ccc26","wires":[[]]},{"id":"3d611339.da18cc","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":5676.929817199707,"y":3455.965012550354,"z":"8068ded9.ccc26","wires":[["68e7f351.24dd5c","d11853ad.952b6"]]},{"id":"a9be3e4a.97414","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of vf-module update completed.'`\" />\n","comments":"","x":6339.42985534668,"y":3585.2150373458862,"z":"8068ded9.ccc26","wires":[]},{"id":"e4fa8909.4dd298","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5951.6198387146,"y":3776.524684906006,"z":"8068ded9.ccc26","wires":[["599748a7.318d38"]]},{"id":"e6cf9e60.36c21","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5959.869850158691,"y":3819.2747192382812,"z":"8068ded9.ccc26","wires":[["f362ddc.8a3be2"]]},{"id":"1a42d1bd.7e06ae","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5956.6910972595215,"y":3862.536289215088,"z":"8068ded9.ccc26","wires":[["a0127c63.8e7e9"]]},{"id":"599748a7.318d38","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6133.048320770264,"y":3775.9890937805176,"z":"8068ded9.ccc26","wires":[]},{"id":"f362ddc.8a3be2","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`\" />\n","comments":"","x":6152.048320770264,"y":3819.4890937805176,"z":"8068ded9.ccc26","wires":[]},{"id":"eb495056.566df","type":"record","name":"record volume-group ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK volume-group update\"/>","comments":"","outputs":1,"x":5783.298320770264,"y":3732.4890928268433,"z":"8068ded9.ccc26","wires":[[]]},{"id":"5688630b.c730bc","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":5528.298290252686,"y":3732.7390670776367,"z":"8068ded9.ccc26","wires":[["eb495056.566df","fd633781.1bf9c8"]]},{"id":"a0127c63.8e7e9","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of volume_group completed.'`\" />\n","comments":"","x":6139.798328399658,"y":3862.989091873169,"z":"8068ded9.ccc26","wires":[]},{"id":"6e76a93a.5e0588","type":"save","name":"save VNFC","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vnfc\"\n\t\tkey=\"vnfc.vnfc-name = $ss.param.vnfc-name\" >\n<parameter name=\"nfc-naming-code\" value='`$ss.param.nfc-naming-code`' />\n<parameter name=\"nfc-function\" value='`$ss.param.nfc-function`' />\n<parameter name=\"model-customization-id\" value='`$ss.param.vnfc-model-customization-uuid`' />\n<parameter name=\"model-invariant-id\" value='`$ss.param.vnfc-model-invariant-uuid`' />\n<parameter name=\"model-version-id\" value='`$ss.param.vnfc-model-version`' />\n","comments":"","outputs":1,"x":1367.1668243408203,"y":4289.833667755127,"z":"8068ded9.ccc26","wires":[["d8805021.0b8d1","1a8d278c.ff1d48"]]},{"id":"d8805021.0b8d1","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1556.1668243408203,"y":4289.833667755127,"z":"8068ded9.ccc26","wires":[["95d6f18e.5f4b6"]]},{"id":"95d6f18e.5f4b6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1758.9168167114258,"y":4289.833641052246,"z":"8068ded9.ccc26","wires":[["6b1f5790.4f6e98","4c4f8f77.4d5e8"]]},{"id":"6b1f5790.4f6e98","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create vnfc with vnfc-name =' + $ss.param.vnfc-name + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":1969.9526290893555,"y":4333.024550437927,"z":"8068ded9.ccc26","wires":[]},{"id":"a48e88aa.092058","type":"save","name":"delete vnfc","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vnfc\"\n\t\tkey=\"vnfc.vnfc-name = $ss.param.vnfc-name\" >","comments":"","outputs":1,"x":5535.810607910156,"y":4058.9404010772705,"z":"8068ded9.ccc26","wires":[["59027b46.55df94","f9986c81.947e2","e0dbfb82.72b598"]]},{"id":"59027b46.55df94","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5742.881973266602,"y":4059.4161376953125,"z":"8068ded9.ccc26","wires":[["6a891b2f.3bef34"]]},{"id":"f9986c81.947e2","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5751.131984710693,"y":4102.166172027588,"z":"8068ded9.ccc26","wires":[["56f5e4c5.27919c"]]},{"id":"e0dbfb82.72b598","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5747.953231811523,"y":4145.4277420043945,"z":"8068ded9.ccc26","wires":[["f4aa6356.d4417"]]},{"id":"d76a7da6.218ec","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6180.310455322266,"y":4058.880546569824,"z":"8068ded9.ccc26","wires":[]},{"id":"56f5e4c5.27919c","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`\" />\n","comments":"","x":5943.310455322266,"y":4102.380546569824,"z":"8068ded9.ccc26","wires":[]},{"id":"eac4f91c.88d308","type":"record","name":"record vnfc ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK vnfc save\"/>","comments":"","outputs":1,"x":5573.560455322266,"y":4010.38054561615,"z":"8068ded9.ccc26","wires":[[]]},{"id":"35fbb6bd.1fe98a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5330.560405731201,"y":4010.0591592788696,"z":"8068ded9.ccc26","wires":[["eac4f91c.88d308","a48e88aa.092058"]]},{"id":"f4aa6356.d4417","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`\" />\n","comments":"","x":5931.06046295166,"y":4145.880544662476,"z":"8068ded9.ccc26","wires":[]},{"id":"507e9295.282f3c","type":"save","name":"save connection-point","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"cp\"\n\t\tkey=\"cp.cp-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id \n\t\tAND vnfc.vnfc-name = $ss.param.vnfc-name\" >\n<parameter name=\"cp-instance-id\" \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id`' />","comments":"","outputs":1,"x":1392.6549758911133,"y":4722.262181758881,"z":"8068ded9.ccc26","wires":[["8ed5705c.d927b","97aa540.9690fb","bd216744.2e7838"]]},{"id":"8ed5705c.d927b","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1613.6549758911133,"y":4722.262181758881,"z":"8068ded9.ccc26","wires":[["f28efc5d.8666"]]},{"id":"f28efc5d.8666","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1807.4049682617188,"y":4722.262155056,"z":"8068ded9.ccc26","wires":[["faf8768d.f51cd8","f742ee1.12f671"]]},{"id":"faf8768d.f51cd8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create connection-point with cp-instance-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":1991.5836181640625,"y":4722.595781803131,"z":"8068ded9.ccc26","wires":[]},{"id":"b7dc825b.8fad","type":"for","name":"for i in vnfc-network-data_length","xml":"<for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":1111.3691940307617,"y":4721.762137889862,"z":"8068ded9.ccc26","wires":[["507e9295.282f3c"]]},{"id":"896eec17.9592f","type":"save","name":"save vlan-tag","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vlan-tag\"\n\t\tkey=\"vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid\" >\n<parameter name=\"vlan-tag-id\" \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid`' />\n<parameter name=\"vlan-tag-role\" \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-tag-description`' />\n<parameter name=\"vlan-id-outer\" \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-tag-id`' />\n","comments":"","outputs":1,"x":2053.964241027832,"y":4818.345309019089,"z":"8068ded9.ccc26","wires":[["90f51779.f5ecd8","c0d3b01c.95c65","d246ced9.39264"]]},{"id":"90f51779.f5ecd8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2245.9643630981445,"y":4970.012247085571,"z":"8068ded9.ccc26","wires":[["1a95aa75.a66626"]]},{"id":"1a95aa75.a66626","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2437.71435546875,"y":4970.01222038269,"z":"8068ded9.ccc26","wires":[["8c5a2a75.a586c8","42ba330d.da466c"]]},{"id":"8c5a2a75.a586c8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":2617.8930053710938,"y":4970.345847129822,"z":"8068ded9.ccc26","wires":[]},{"id":"4fa2d7bb.85da48","type":"save","name":"save l-interface","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"l-interface\"\n\t\tkey=\"l-interface.interface-name = $ss.param.oam-interface-name\n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id\" >\n<parameter name=\"interface-name\" value='`$ss.param.oam-interface-name`' />\n<parameter name=\"interface-role\" value='OAM' />\n","comments":"","outputs":1,"x":2010.8334274291992,"y":5397.713664054871,"z":"8068ded9.ccc26","wires":[["224508bf.eb67c8","3ac567fb.ca3628"]]},{"id":"224508bf.eb67c8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2183.833427429199,"y":5397.713664054871,"z":"8068ded9.ccc26","wires":[["438d491f.6bf318"]]},{"id":"438d491f.6bf318","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2353.5834197998047,"y":5397.71363735199,"z":"8068ded9.ccc26","wires":[["1dcac7c7.528ac8","42ba330d.da466c"]]},{"id":"1dcac7c7.528ac8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create l-interface with interface-name = ' + $ss.param.oam-interface-name + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":2537.7620697021484,"y":5398.047264099121,"z":"8068ded9.ccc26","wires":[]},{"id":"8b4528ae.6e6858","type":"for","name":"for j in in vlan-data_length","xml":"<for silentFailure='true' index='j' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >\n","comments":"","outputs":1,"x":1831.9284744262695,"y":4818.095413923264,"z":"8068ded9.ccc26","wires":[["896eec17.9592f"]]},{"id":"97aa540.9690fb","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1622.1192169189453,"y":4767.762180805206,"z":"8068ded9.ccc26","wires":[["f28efc5d.8666"]]},{"id":"9d96ee38.6074","type":"save","name":"delete vlan-tag","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vlan-tag\"\n\t\tkey=\"vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid\" >","comments":"","outputs":1,"x":5547.858245849609,"y":4404.714177131653,"z":"8068ded9.ccc26","wires":[["7d9dc434.97b09c","dffb9406.38c898","9773800c.66ae6"]]},{"id":"7d9dc434.97b09c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5754.929611206055,"y":4405.189913749695,"z":"8068ded9.ccc26","wires":[["395726ee.6fab7a"]]},{"id":"dffb9406.38c898","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5763.1796226501465,"y":4447.93994808197,"z":"8068ded9.ccc26","wires":[["b21b98a6.1ff6e8"]]},{"id":"9773800c.66ae6","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5760.000869750977,"y":4491.201518058777,"z":"8068ded9.ccc26","wires":[["386810b6.14634"]]},{"id":"f8e8b37a.dee57","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6193.02498626709,"y":4403.987699985504,"z":"8068ded9.ccc26","wires":[]},{"id":"b21b98a6.1ff6e8","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`\" />\n","comments":"","x":5955.358093261719,"y":4448.1543226242065,"z":"8068ded9.ccc26","wires":[]},{"id":"a26d40b4.008af","type":"record","name":"record vlan-tag ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK vlan-tag save\"/>","comments":"","outputs":1,"x":5008.322776794434,"y":4355.43992805481,"z":"8068ded9.ccc26","wires":[[]]},{"id":"470ddb4b.ffbda4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4746.3227462768555,"y":4355.689902305603,"z":"8068ded9.ccc26","wires":[["a26d40b4.008af","c9166e05.d9ebc"]]},{"id":"386810b6.14634","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`\" />\n","comments":"","x":5943.108100891113,"y":4491.654320716858,"z":"8068ded9.ccc26","wires":[]},{"id":"f488880c.8a9458","type":"comment","name":"Deleting vnfc will delete connection-point (cp)","info":"","comments":"","x":1916.6429901123047,"y":4669.309711933136,"z":"8068ded9.ccc26","wires":[]},{"id":"c0d3b01c.95c65","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2254.285804748535,"y":5016.333622932434,"z":"8068ded9.ccc26","wires":[["1a95aa75.a66626"]]},{"id":"c9166e05.d9ebc","type":"for","name":"for i in vnfc-network-data_len","xml":"<for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":5013.429954528809,"y":4405.285639762878,"z":"8068ded9.ccc26","wires":[["6be8fd40.579294"]]},{"id":"6be8fd40.579294","type":"for","name":"for j in in vlan-data_length","xml":"<for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >\n","comments":"","outputs":1,"x":5309.858543395996,"y":4405.142817497253,"z":"8068ded9.ccc26","wires":[["9d96ee38.6074"]]},{"id":"2f9cf95b.a79726","type":"save","name":"save cp relationship","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vlan-tag:relationship-list\"\n\t\tkey=\"vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`$ss.cp.related-link`\" />","comments":"","outputs":1,"x":2627.2376022338867,"y":4866.238368272781,"z":"8068ded9.ccc26","wires":[["6ec967b.2c20298","11ee6506.d86e0b"]]},{"id":"6ec967b.2c20298","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2836.5233764648438,"y":4865.809748888016,"z":"8068ded9.ccc26","wires":[["a92d33a0.72b72"]]},{"id":"a92d33a0.72b72","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":3028.5589179992676,"y":4865.809715509415,"z":"8068ded9.ccc26","wires":[["c5386653.0ce498","42ba330d.da466c"]]},{"id":"c5386653.0ce498","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create cp relationship for vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":3208.7375679016113,"y":4866.143342256546,"z":"8068ded9.ccc26","wires":[]},{"id":"bd216744.2e7838","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1618.9524230957031,"y":4818.1908004283905,"z":"8068ded9.ccc26","wires":[["8b4528ae.6e6858"]]},{"id":"a7a813a9.685fe","type":"outcome","name":"oam-interface-name","xml":"<outcome value='oam-interface-name'>","comments":"","outputs":1,"x":2343.238121032715,"y":709.476101398468,"z":"8068ded9.ccc26","wires":[["82258c34.cd46e"]]},{"id":"82258c34.cd46e","type":"set","name":"set ss.param.oam-interface-name, index","xml":"<set>\n<parameter name='ss.param.oam-interface-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.oam-interface-name-index' value='`$bidx`' />","comments":"","x":2706.3453483581543,"y":710.2261743545532,"z":"8068ded9.ccc26","wires":[]},{"id":"4a38191a.665008","type":"outcome","name":"lo0-interface-name","xml":"<outcome value='=âlo0-interface-name'>","comments":"","outputs":1,"x":2339.952323913574,"y":752.19047498703,"z":"8068ded9.ccc26","wires":[["d1e11e09.3c6"]]},{"id":"d1e11e09.3c6","type":"set","name":"set ss.param.lo0-interface-name, index","xml":"<set>\n<parameter name='ss.param.lo0-interface-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.lo0-interface-name-index' value='`$bidx`' />","comments":"","x":2701.0595512390137,"y":752.9405479431152,"z":"8068ded9.ccc26","wires":[]},{"id":"4c4f8f77.4d5e8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4858.048778533936,"y":3553.6912155151367,"z":"8068ded9.ccc26","wires":[["1dadc5fe.f7b3aa","5baa82ec.dffecc"]]},{"id":"f742ee1.12f671","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4703.0722579956055,"y":3806.166953086853,"z":"8068ded9.ccc26","wires":[["4c4f8f77.4d5e8","b6293e2c.6351f"]]},{"id":"42ba330d.da466c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4545.6201095581055,"y":4096.262167930603,"z":"8068ded9.ccc26","wires":[["f742ee1.12f671","470ddb4b.ffbda4"]]},{"id":"d246ced9.39264","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2244.618579864502,"y":4818.047558784485,"z":"8068ded9.ccc26","wires":[["998e8a86.fc6368"]]},{"id":"75214bc4.1bbaa4","type":"switchNode","name":"switch: ss.param.oam-interface-name != NULL","xml":"<switch test=\"`$ss.param.oam-interface-name != ''`\">\n","comments":"","outputs":1,"x":1358.1906280517578,"y":5397.285633087158,"z":"8068ded9.ccc26","wires":[["ccf9556c.f89178"]]},{"id":"ccf9556c.f89178","type":"outcome","name":"true","xml":"<outcome value='true'>","comments":"","outputs":1,"x":1621.1906509399414,"y":5397.785631656647,"z":"8068ded9.ccc26","wires":[["e90d4fd9.29402"]]},{"id":"c64f4bcd.8c05f8","type":"save","name":"save l-interface","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"l-interface\"\n\t\tkey=\"l-interface.interface-name = $ss.param.lo0-interface-name\n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id\" >\n<parameter name=\"interface-name\" value='`$ss.param.lo0-interface-name`' />\n<parameter name=\"interface-role\" value='loopback' />\n","comments":"","outputs":1,"x":1990.7620086669922,"y":5735.571220397949,"z":"8068ded9.ccc26","wires":[["4e5bd967.48b608","3510ef13.90d34"]]},{"id":"4e5bd967.48b608","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2163.762008666992,"y":5735.571220397949,"z":"8068ded9.ccc26","wires":[["c67b407c.73c1a"]]},{"id":"c67b407c.73c1a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2333.5120010375977,"y":5735.571193695068,"z":"8068ded9.ccc26","wires":[["f0cb5410.f03658","75ee05f7.6473bc"]]},{"id":"f0cb5410.f03658","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create l-interface with interface-name = ' + $ss.param.lo0-interface-name + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":2517.6906509399414,"y":5735.9048204422,"z":"8068ded9.ccc26","wires":[]},{"id":"3d7d185.baa90e8","type":"switchNode","name":"switch: ss.param.lo0-interface-name != NULL","xml":"<switch test=\"`$ss.param.lo0-interface-name != ''`\">\n","comments":"","outputs":1,"x":1335.5476608276367,"y":5735.571606636047,"z":"8068ded9.ccc26","wires":[["9e2c16cf.876d78"]]},{"id":"9e2c16cf.876d78","type":"outcome","name":"true","xml":"<outcome value='true'>","comments":"","outputs":1,"x":1598.5476837158203,"y":5736.071605205536,"z":"8068ded9.ccc26","wires":[["4852b9cd.b1f178"]]},{"id":"dbc07084.be7f5","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1060.9048385620117,"y":5397.714184761047,"z":"8068ded9.ccc26","wires":[["75214bc4.1bbaa4","3d7d185.baa90e8"]]},{"id":"68af07a3.16ce88","type":"outcome","name":"ipv4-oam-address","xml":"<outcome value='ipv4-oam-address'>","comments":"","outputs":1,"x":2335.7143173217773,"y":796.3809504508972,"z":"8068ded9.ccc26","wires":[["999cc01d.893d6"]]},{"id":"999cc01d.893d6","type":"set","name":"set ss.param.ipv4-oam-address, index","xml":"<set>\n<parameter name='ss.param.ipv4-oam-address' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.ipv4-oam-address-index' value='`$bidx`' />","comments":"","x":2699.678642272949,"y":797.1309986114502,"z":"8068ded9.ccc26","wires":[]},{"id":"10ef55c1.e5abda","type":"outcome","name":"loopback0_ipv4_address","xml":"<outcome value='loopback0_ipv4_address'>","comments":"","outputs":1,"x":2358.1428451538086,"y":880.6666750907898,"z":"8068ded9.ccc26","wires":[["2d6cf27a.9e02fe"]]},{"id":"2d6cf27a.9e02fe","type":"set","name":"set ss.param.loopback0-ipv4-address, index","xml":"<set>\n<parameter name='ss.param.loopback0-ipv4-address' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.loopback0-ipv4-address-index' value='`$bidx`' />","comments":"","x":2719.3930130004883,"y":880.2738108634949,"z":"8068ded9.ccc26","wires":[]},{"id":"ae3cb914.642ab8","type":"save","name":"delete l-interface (oam)","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"l-interface\"\n\t\tkey=\"l-interface.interface-name = $ss.param.oam-interface-name\n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id\" >","comments":"","outputs":1,"x":5804.525096893311,"y":4807.285605430603,"z":"8068ded9.ccc26","wires":[["88e8efea.35169","99eafa73.541068","3d9cbb53.db7764"]]},{"id":"88e8efea.35169","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":6012.596462249756,"y":4807.761342048645,"z":"8068ded9.ccc26","wires":[["ba1b62f2.0c98"]]},{"id":"99eafa73.541068","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":6020.846473693848,"y":4850.51137638092,"z":"8068ded9.ccc26","wires":[["46d515d3.0378ac"]]},{"id":"3d9cbb53.db7764","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":6017.667720794678,"y":4893.772946357727,"z":"8068ded9.ccc26","wires":[["f05862ba.8abb5"]]},{"id":"8c6a392a.c8ded8","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6455.692127227783,"y":4808.225975036621,"z":"8068ded9.ccc26","wires":[]},{"id":"46d515d3.0378ac","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`\" />\n","comments":"","x":6213.02494430542,"y":4850.725750923157,"z":"8068ded9.ccc26","wires":[]},{"id":"cf73d4b9.868fc8","type":"record","name":"record OAM l-interface ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK l-interface (oam) save\"/>","comments":"","outputs":1,"x":5321.274875640869,"y":4758.868654251099,"z":"8068ded9.ccc26","wires":[[]]},{"id":"5de01092.e1692","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5061.274826049805,"y":4758.547267913818,"z":"8068ded9.ccc26","wires":[["cf73d4b9.868fc8","8981860f.667448"]]},{"id":"f05862ba.8abb5","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`\" />\n","comments":"","x":6200.774951934814,"y":4894.225749015808,"z":"8068ded9.ccc26","wires":[]},{"id":"8981860f.667448","type":"switchNode","name":"switch: ss.param.oam-interface-name != NULL","xml":"<switch test=\"`$ss.param.oam-interface-name != ''`\">\n","comments":"","outputs":1,"x":5356.525089263916,"y":4808.142771720886,"z":"8068ded9.ccc26","wires":[["48c1dee3.50f7f"]]},{"id":"48c1dee3.50f7f","type":"outcome","name":"true","xml":"<outcome value='true'>","comments":"","outputs":1,"x":5615.382266998291,"y":4807.142771720886,"z":"8068ded9.ccc26","wires":[["ae3cb914.642ab8"]]},{"id":"6fca57ea.3397e8","type":"save","name":"delete l-interface (oam)","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"l-interface\"\n\t\tkey=\"l-interface.interface-name = $ss.param.lo0-interface-name\n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id\" >","comments":"","outputs":1,"x":5709.619335174561,"y":5214.714804649353,"z":"8068ded9.ccc26","wires":[["3fbb9856.3afac8","21a87462.f4342c","d4c7d7a5.d0fbd8"]]},{"id":"3fbb9856.3afac8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5917.690700531006,"y":5215.190541267395,"z":"8068ded9.ccc26","wires":[["e857a6e0.098918"]]},{"id":"21a87462.f4342c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5925.940711975098,"y":5257.94057559967,"z":"8068ded9.ccc26","wires":[["cc064c02.22a01"]]},{"id":"d4c7d7a5.d0fbd8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5922.761959075928,"y":5301.202145576477,"z":"8068ded9.ccc26","wires":[["1e79dbee.93e174"]]},{"id":"9c8d41ed.27a7c","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6372.4523277282715,"y":5213.321630477905,"z":"8068ded9.ccc26","wires":[]},{"id":"cc064c02.22a01","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' not found in AAI. Consider silent success!'`\" />\n","comments":"","x":6118.11918258667,"y":5258.154950141907,"z":"8068ded9.ccc26","wires":[]},{"id":"a5d6d0ff.1e13d","type":"record","name":"record LOOPBACK l-interface ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK l-interface (oam) save\"/>","comments":"","outputs":1,"x":5250.369113922119,"y":5166.297853469849,"z":"8068ded9.ccc26","wires":[[]]},{"id":"3199093e.07e6f6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4966.369064331055,"y":5165.976467132568,"z":"8068ded9.ccc26","wires":[["a5d6d0ff.1e13d","3475a838.9659a8"]]},{"id":"1e79dbee.93e174","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.lo0-interface-name + '  completed.'`\" />\n","comments":"","x":6105.869190216064,"y":5301.654948234558,"z":"8068ded9.ccc26","wires":[]},{"id":"b614f632.2d7158","type":"outcome","name":"true","xml":"<outcome value='true'>","comments":"","outputs":1,"x":5520.476505279541,"y":5214.571970939636,"z":"8068ded9.ccc26","wires":[["6fca57ea.3397e8"]]},{"id":"3475a838.9659a8","type":"switchNode","name":"switch: ss.param.lo0-interface-name != NULL","xml":"<switch test=\"`$ss.param.lo0-interface-name != ''`\">\n","comments":"","outputs":1,"x":5259.619167327881,"y":5215.14351940155,"z":"8068ded9.ccc26","wires":[["b614f632.2d7158"]]},{"id":"75ee05f7.6473bc","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4416.81022644043,"y":4415.476540565491,"z":"8068ded9.ccc26","wires":[["42ba330d.da466c","47592f63.65ff8"]]},{"id":"3ac567fb.ca3628","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2191.9047927856445,"y":5439.999988555908,"z":"8068ded9.ccc26","wires":[["438d491f.6bf318"]]},{"id":"3510ef13.90d34","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2170.7619094848633,"y":5778.142643928528,"z":"8068ded9.ccc26","wires":[["c67b407c.73c1a"]]},{"id":"5713a33e.10386c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4285.38126373291,"y":4891.666825294495,"z":"8068ded9.ccc26","wires":[["75ee05f7.6473bc","16cd30f3.c7e79f"]]},{"id":"91d6d0e4.e2cc2","type":"outcome","name":"ipv4-oam-address-prefix","xml":"<outcome value='ipv4-oam-address-prefix'>","comments":"","outputs":1,"x":2355.7143173217773,"y":838.3810153007507,"z":"8068ded9.ccc26","wires":[["8eb30e9d.19d4b"]]},{"id":"8eb30e9d.19d4b","type":"set","name":"set ss.param.ipv4-oam-address-prefix, index","xml":"<set>\n<parameter name='ss.param.ipv4-oam-address-prefix' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.ipv4-oam-address-prefix-index' value='`$bidx`' />","comments":"","x":2718.3928871154785,"y":838.5596051216125,"z":"8068ded9.ccc26","wires":[]},{"id":"e90d4fd9.29402","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1781.0476303100586,"y":5397.285304069519,"z":"8068ded9.ccc26","wires":[["4fa2d7bb.85da48","f10bbb20.7f4fc8"]]},{"id":"4852b9cd.b1f178","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1760.1904983520508,"y":5736.142643928528,"z":"8068ded9.ccc26","wires":[["c64f4bcd.8c05f8","e8551427.6b64e8"]]},{"id":"f10bbb20.7f4fc8","type":"save","name":"save l3-interface-ipv4-address","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"l3-interface-ipv4-address-list\"\n\t\tkey=\"l3-interface-ipv4-address-list.l3-interface-ipv4-address = $ss.param.ipv4-oam-address \n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id \n\t\tAND l-interface.interface-name = $ss.param.oam-interface-name\" >\n<parameter name=\"l3-interface-ipv4-address\" value='`$ss.param.ipv4-oam-address`' />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value='`$ss.param.ipv4-oam-address-prefix`' />\n","comments":"","outputs":1,"x":2057.619125366211,"y":5542.999936103821,"z":"8068ded9.ccc26","wires":[["a8aab5fb.8eca68","93c4ee1c.dd6d6"]]},{"id":"a8aab5fb.8eca68","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2278.619125366211,"y":5542.999936103821,"z":"8068ded9.ccc26","wires":[["402e134b.ab039c"]]},{"id":"402e134b.ab039c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2448.3691177368164,"y":5542.99990940094,"z":"8068ded9.ccc26","wires":[["c292c4a4.2a1388","75ee05f7.6473bc"]]},{"id":"c292c4a4.2a1388","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create l3-interface-ipv4-address-list with l3-interface-ipv4-address = ' + $ss.param.ipv4-oam-address + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":2632.54776763916,"y":5543.333536148071,"z":"8068ded9.ccc26","wires":[]},{"id":"93c4ee1c.dd6d6","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2286.6904907226562,"y":5585.286260604858,"z":"8068ded9.ccc26","wires":[["402e134b.ab039c"]]},{"id":"e8551427.6b64e8","type":"save","name":"save l3-interface-ipv4-address","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"l3-interface-ipv4-address-list\"\n\t\tkey=\"l3-interface-ipv4-address-list.l3-interface-ipv4-address = $ss.param.ipv4-loopback0-address \n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id \n\t\tAND l-interface.interface-name = $ss.param.lo0-interface-name\" >\n<parameter name=\"l3-interface-ipv4-address\" value='`$ss.param.ipv4-loopback0-address`' />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value='32' />\n","comments":"","outputs":1,"x":2034.6191024780273,"y":5852.713961601257,"z":"8068ded9.ccc26","wires":[["2cfc8fb5.b92c4","a3b0bac1.66c468"]]},{"id":"2cfc8fb5.b92c4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2255.6191024780273,"y":5852.713961601257,"z":"8068ded9.ccc26","wires":[["7b9df773.727b78"]]},{"id":"7b9df773.727b78","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2425.369094848633,"y":5852.7139348983765,"z":"8068ded9.ccc26","wires":[["7a983387.d8620c","5713a33e.10386c"]]},{"id":"7a983387.d8620c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create l3-interface-ipv4-address-list with l3-interface-ipv4-address = ' + $ss.param.loopback0-ipv4-address + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":2609.5477447509766,"y":5853.047561645508,"z":"8068ded9.ccc26","wires":[]},{"id":"a3b0bac1.66c468","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2263.6904678344727,"y":5895.000286102295,"z":"8068ded9.ccc26","wires":[["7b9df773.727b78"]]},{"id":"1bae6e26.b48422","type":"comment","name":"Delete l-interface will delete l3-interface-ipv4-address-list","info":"","comments":"","x":4662.333908081055,"y":4894.429103851318,"z":"8068ded9.ccc26","wires":[]},{"id":"930c302f.87d9a","type":"execute","name":"param[].name startsWith 'sriov'","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='startsWith' emitsOutcome='true' >\n    <parameter name=\"source\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`\" />\n\t<parameter name=\"target\" value=\"sriov\"/>\n","comments":"","outputs":1,"x":1611.0475387573242,"y":360.666711807251,"z":"8068ded9.ccc26","wires":[["d36b238f.c2eeb","136cf5dd.278b9a"]]},{"id":"d36b238f.c2eeb","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1821.2975387573242,"y":360.916711807251,"z":"8068ded9.ccc26","wires":[["71ba3468.524d5c"]]},{"id":"71ba3468.524d5c","type":"execute","name":"param[].name endsWith 'sriov'","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='endsWith' emitsOutcome='true' >\n    <parameter name=\"source\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`\" />\n\t<parameter name=\"target\" value=\"_net_id\"/>\n","comments":"","outputs":1,"x":2038.1903686523438,"y":360.6667175292969,"z":"8068ded9.ccc26","wires":[["f28d4124.551b2"]]},{"id":"f28d4124.551b2","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2248.1902389526367,"y":360.2381229400635,"z":"8068ded9.ccc26","wires":[["892a94df.748008"]]},{"id":"b1277757.3b3778","type":"set","name":"set ss.network[$nidx].netid","xml":"<set>\n<parameter name='ss.network[$nidx].netid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n","comments":"","x":2599.618574142456,"y":359.66666984558105,"z":"8068ded9.ccc26","wires":[]},{"id":"8447582e.713cf8","type":"set","name":"nidx++","xml":"<set>\n<parameter name='nidx' value='`$nidx + 1`' />\n","comments":"","x":2539.618682861328,"y":403.09529304504395,"z":"8068ded9.ccc26","wires":[]},{"id":"823c2354.c6c5","type":"set","name":"set nidx = 0","xml":"<set>\n<parameter name='nidx' value='0' />\n","comments":"","x":1208.190185546875,"y":277.2380828857422,"z":"8068ded9.ccc26","wires":[]},{"id":"892a94df.748008","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2386.761890411377,"y":360.52386569976807,"z":"8068ded9.ccc26","wires":[["b1277757.3b3778","8447582e.713cf8"]]},{"id":"136cf5dd.278b9a","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1822.4762840270996,"y":403.80954360961914,"z":"8068ded9.ccc26","wires":[["a1dc9b53.b001a8"]]},{"id":"b307f248.13b72","type":"for","name":"for n in nidx","xml":"<for silentFailure='true' index='n' start='0' end='`$nidx`' >\n","comments":"","outputs":1,"x":1454.952407836914,"y":6171.667496681213,"z":"8068ded9.ccc26","wires":[["2dbbe18d.9f749e"]]},{"id":"4933575b.c49bc8","type":"save","name":"save l3-network relationships for VNF","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf:relationship-list\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`$ss.l3-network.related-link`\" />\n<!--\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"l3-network.network-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$ss.network[$n].netid`\" />\n-->","comments":"","outputs":1,"x":1898.1426467895508,"y":6219.333839416504,"z":"8068ded9.ccc26","wires":[["5f1ee172.8d495","f18a8eef.b86b4"]]},{"id":"11ee6506.d86e0b","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2845.761329650879,"y":4910.857924699783,"z":"8068ded9.ccc26","wires":[["a92d33a0.72b72"]]},{"id":"5f1ee172.8d495","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2173.857063293457,"y":6220.048072814941,"z":"8068ded9.ccc26","wires":[["61369a55.267e34"]]},{"id":"61369a55.267e34","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2370.6070556640625,"y":6220.048046112061,"z":"8068ded9.ccc26","wires":[["b7e15b92.6b9328","a7686c4c.48a2b"]]},{"id":"b7e15b92.6b9328","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`' Failed to create generic-vnf releationship for l3-network with network-id =' + $ss.network[$n].netid + ' in AnAI. ' + $error-message`\" />\n","comments":"","x":2550.7857055664062,"y":6220.381672859192,"z":"8068ded9.ccc26","wires":[]},{"id":"f18a8eef.b86b4","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2183.095016479492,"y":6265.096248626709,"z":"8068ded9.ccc26","wires":[["61369a55.267e34"]]},{"id":"48809820.da73e8","type":"save","name":"delete VNF l3-network relationships","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf:relationship-list\" \n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \n\t\tAND related-to = l3-network \n\t\tAND relationship.related-link = $tmp.related-link\" >","comments":"","outputs":1,"x":5329.524971008301,"y":5635.285350322723,"z":"8068ded9.ccc26","wires":[["88a59c9a.2b00b","de38bac1.0b21e8","71f6c03f.9af32"]]},{"id":"88a59c9a.2b00b","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5592.596336364746,"y":5635.761086940765,"z":"8068ded9.ccc26","wires":[["7d871113.d9d1b"]]},{"id":"de38bac1.0b21e8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5600.846347808838,"y":5678.511121273041,"z":"8068ded9.ccc26","wires":[["ea95c949.66b368"]]},{"id":"71f6c03f.9af32","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5597.667594909668,"y":5721.772691249847,"z":"8068ded9.ccc26","wires":[["ad0bb67e.3bf9b8"]]},{"id":"ffea8954.bee348","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to delete VNF l3-network relationship for generic-vnf.vnfid = ' + $ss.param.vnf-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6059.02445602417,"y":5634.891801357269,"z":"8068ded9.ccc26","wires":[]},{"id":"ea95c949.66b368","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' l3-network relationship with related-path = ' + $tmp.related-path  + ' not found in AAI. Consider silent success!'`\" />\n","comments":"","x":5793.02481842041,"y":5678.725495815277,"z":"8068ded9.ccc26","wires":[]},{"id":"fc646437.90d098","type":"record","name":"record VNF l3-network relationship ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK VNF l3-network relationship\"/>","comments":"","outputs":1,"x":5173.512390136719,"y":5526.345165252686,"z":"8068ded9.ccc26","wires":[[]]},{"id":"e665f06b.96f35","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4855.9888916015625,"y":5527.166730880737,"z":"8068ded9.ccc26","wires":[["fc646437.90d098","2f789ede.6f8722"]]},{"id":"ad0bb67e.3bf9b8","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback (delete) of generic-vnf l3-network relationships completed.'`\" />\n","comments":"","x":5780.774826049805,"y":5722.2254939079285,"z":"8068ded9.ccc26","wires":[]},{"id":"2f789ede.6f8722","type":"for","name":"for n in nidx","xml":"<for silentFailure='true' index='n' start='0' end='`$nidx`' >\n","comments":"","outputs":1,"x":5061.143711090088,"y":5587.381254673004,"z":"8068ded9.ccc26","wires":[["48809820.da73e8","4faa8555.6c3d7c"]]},{"id":"a7686c4c.48a2b","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4141.334602355957,"y":5268.095029830933,"z":"8068ded9.ccc26","wires":[["5713a33e.10386c","ecb6efb1.19ad9"]]},{"id":"603a3397.22016c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1893.3812103271484,"y":4058.47643327713,"z":"8068ded9.ccc26","wires":[["5819b51f.e401ec"]]},{"id":"8f404e48.285a6","type":"outcome","name":"aai-vf-module-put","xml":"<outcome value='aai-vf-module-put'>\n","comments":"","outputs":1,"x":2342.5713500976562,"y":1310.7143058776855,"z":"8068ded9.ccc26","wires":[["11703c8e.d0e733"]]},{"id":"51b14fbd.75b3e","type":"set","name":"set ss.param.aai-vf-module-put-index","xml":"<set>\n<parameter name='ss.param.aai-vf-module-put-index' value='`$bidx`' />\n","comments":"","x":2784.714401245117,"y":1310.5714855194092,"z":"8068ded9.ccc26","wires":[]},{"id":"43c0a50b.639d9c","type":"outcome","name":"unassign","xml":"<outcome value='unassign'>","comments":"","outputs":1,"x":469.1074523925781,"y":798.2615756988525,"z":"8068ded9.ccc26","wires":[["255c7c9f.01ed14"]]},{"id":"81d44ce6.28309","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1025.5951538085938,"y":276.8809232711792,"z":"8068ded9.ccc26","wires":[["823c2354.c6c5","32c37498.d5047c","385ba57a.8df6da"]]},{"id":"11ac6461.2c5e7c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":3352.3096084594727,"y":2988.3092212677,"z":"8068ded9.ccc26","wires":[["b6293e2c.6351f","470ddb4b.ffbda4","ecb6efb1.19ad9","47592f63.65ff8","16cd30f3.c7e79f"]]},{"id":"255c7c9f.01ed14","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":632.1905670166016,"y":797.7618198394775,"z":"8068ded9.ccc26","wires":[["11ac6461.2c5e7c","81d44ce6.28309","15d745ea.7fb6ba","b07947b2.6ba8c8"]]},{"id":"15d745ea.7fb6ba","type":"set","name":"set tmp.return-failure = true","xml":"<set>\n<parameter name='tmp.return-failure' value ='true' />","comments":"","x":1116.047607421875,"y":796.3332469463348,"z":"8068ded9.ccc26","wires":[]},{"id":"19fd6e4b.a54a02","type":"switchNode","name":"switch tmp.return-failure","xml":"<switch test='`$tmp.return-failure`'>\n","comments":"","outputs":1,"x":6194.024250030518,"y":4233.785830497742,"z":"8068ded9.ccc26","wires":[["e9f416b9.bf4c78"]]},{"id":"6a891b2f.3bef34","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5944.691295623779,"y":4058.7855892181396,"z":"8068ded9.ccc26","wires":[["d76a7da6.218ec","19fd6e4b.a54a02"]]},{"id":"e9f416b9.bf4c78","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":6387.691581726074,"y":4233.7856702804565,"z":"8068ded9.ccc26","wires":[["bcf9460c.c83dd8"]]},{"id":"db5e8538.a78a48","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='`$error-message`' />\n","comments":"","x":6762.691753387451,"y":4285.1189222335815,"z":"8068ded9.ccc26","wires":[]},{"id":"395726ee.6fab7a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5954.024467468262,"y":4404.7858057022095,"z":"8068ded9.ccc26","wires":[["4031474c.e3e268","f8e8b37a.dee57"]]},{"id":"4031474c.e3e268","type":"switchNode","name":"switch tmp.return-failure","xml":"<switch test='`$tmp.return-failure`'>\n","comments":"","outputs":1,"x":6203.357421875,"y":4579.7860469818115,"z":"8068ded9.ccc26","wires":[["f7d354b0.a531b8"]]},{"id":"ba1b62f2.0c98","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":6237.691120147705,"y":4808.1190395355225,"z":"8068ded9.ccc26","wires":[["d37f00eb.31762","8c6a392a.c8ded8"]]},{"id":"d37f00eb.31762","type":"switchNode","name":"switch tmp.return-failure","xml":"<switch test='`$tmp.return-failure`'>\n","comments":"","outputs":1,"x":6487.024074554443,"y":4979.1192808151245,"z":"8068ded9.ccc26","wires":[["9c9b56a.2f3efa8"]]},{"id":"9c9b56a.2f3efa8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":6680.69140625,"y":4979.119120597839,"z":"8068ded9.ccc26","wires":[["6aab8121.6a61f"]]},{"id":"e857a6e0.098918","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":6149.690906524658,"y":5213.785968780518,"z":"8068ded9.ccc26","wires":[["63a5e50e.8c1fac","9c8d41ed.27a7c"]]},{"id":"63a5e50e.8c1fac","type":"switchNode","name":"switch tmp.return-failure","xml":"<switch test='`$tmp.return-failure`'>\n","comments":"","outputs":1,"x":6399.0238609313965,"y":5388.78621006012,"z":"8068ded9.ccc26","wires":[["2a23691a.d2dc36"]]},{"id":"2a23691a.d2dc36","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":6592.691192626953,"y":5388.7860498428345,"z":"8068ded9.ccc26","wires":[["303089b7.8759a6"]]},{"id":"7d871113.d9d1b","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5828.2629737854,"y":5634.880418300629,"z":"8068ded9.ccc26","wires":[["9f47089c.1b3508","ffea8954.bee348"]]},{"id":"9f47089c.1b3508","type":"switchNode","name":"switch tmp.return-failure","xml":"<switch test='`$tmp.return-failure`'>\n","comments":"","outputs":1,"x":6077.595928192139,"y":5809.880659580231,"z":"8068ded9.ccc26","wires":[["5173c626.5e8d58"]]},{"id":"5173c626.5e8d58","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":6271.263259887695,"y":5809.880499362946,"z":"8068ded9.ccc26","wires":[["d589e67a.08f778"]]},{"id":"b07947b2.6ba8c8","type":"set","name":"set resource-resolution-data.status = DELETED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='DELETED' />\n","comments":"","x":966.9048004150391,"y":6656.333566665649,"z":"8068ded9.ccc26","wires":[]},{"id":"72952054.933dc","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":6860.024913787842,"y":4232.785665035248,"z":"8068ded9.ccc26","wires":[]},{"id":"bcf9460c.c83dd8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":6548.691387176514,"y":4233.118878364563,"z":"8068ded9.ccc26","wires":[["72952054.933dc","db5e8538.a78a48"]]},{"id":"f7d354b0.a531b8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":6397.024753570557,"y":4579.785886764526,"z":"8068ded9.ccc26","wires":[["eca1d6d8.eda8c8"]]},{"id":"20de2c42.a3d634","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='`$error-message`' />\n","comments":"","x":6775.691108703613,"y":4631.452404975891,"z":"8068ded9.ccc26","wires":[]},{"id":"7c8af4c6.8e0ccc","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":6873.024269104004,"y":4579.119147777557,"z":"8068ded9.ccc26","wires":[]},{"id":"eca1d6d8.eda8c8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":6561.690742492676,"y":4579.452361106873,"z":"8068ded9.ccc26","wires":[["7c8af4c6.8e0ccc","20de2c42.a3d634"]]},{"id":"935f61e6.451d4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='`$error-message`' />\n","comments":"","x":7069.357624053955,"y":5031.1190395355225,"z":"8068ded9.ccc26","wires":[]},{"id":"6d4ca687.6e4358","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":7166.690784454346,"y":4978.785782337189,"z":"8068ded9.ccc26","wires":[]},{"id":"6aab8121.6a61f","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":6855.357257843018,"y":4979.118995666504,"z":"8068ded9.ccc26","wires":[["6d4ca687.6e4358","935f61e6.451d4"]]},{"id":"40d75454.77644c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='`$error-message`' />\n","comments":"","x":6976.357410430908,"y":5441.119464874268,"z":"8068ded9.ccc26","wires":[]},{"id":"51fd880c.bcbaf8","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":7073.690570831299,"y":5388.786207675934,"z":"8068ded9.ccc26","wires":[]},{"id":"303089b7.8759a6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":6762.357044219971,"y":5389.119421005249,"z":"8068ded9.ccc26","wires":[["51fd880c.bcbaf8","40d75454.77644c"]]},{"id":"cafc31da.005e7","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='`$error-message`' />\n","comments":"","x":6661.596378326416,"y":5861.214030742645,"z":"8068ded9.ccc26","wires":[]},{"id":"dfaf7e7b.49ee9","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":6758.929538726807,"y":5808.8807735443115,"z":"8068ded9.ccc26","wires":[]},{"id":"d589e67a.08f778","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":6447.5960121154785,"y":5809.213986873627,"z":"8068ded9.ccc26","wires":[["dfaf7e7b.49ee9","cafc31da.005e7"]]},{"id":"133a1544.17dc0b","type":"outcome","name":"nfc-naming-code","xml":"<outcome value='nfc-naming-code'>","comments":"","outputs":1,"x":2334.3572387695312,"y":968.976146697998,"z":"8068ded9.ccc26","wires":[["25e3fff7.35115"]]},{"id":"25e3fff7.35115","type":"set","name":"set ss.param.vnfc-name, indexnfc-naming-code","xml":"<set>\n<parameter name='ss.param.nfc-naming-code' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.nfc-naming-code-index' value='`$bidx`' />","comments":"","x":2731.1787109375,"y":969.1547613143921,"z":"8068ded9.ccc26","wires":[]},{"id":"ec83fc2d.1db1b","type":"outcome","name":"nfc-function","xml":"<outcome value='nfc-function'>","comments":"","outputs":1,"x":2319.071521759033,"y":1010.4047336578369,"z":"8068ded9.ccc26","wires":[["79ed605a.86905"]]},{"id":"79ed605a.86905","type":"set","name":"set ss.param.nfc-function, index","xml":"<set>\n<parameter name='ss.param.nfc-function' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.nfc-function-index' value='`$bidx`' />","comments":"","x":2681.3215522766113,"y":1010.4405193328857,"z":"8068ded9.ccc26","wires":[]},{"id":"ca7c357a.02aee8","type":"outcome","name":"vnfc-model-customization-uuid","xml":"<outcome value='vnfc-model-customization-uuid'>","comments":"","outputs":1,"x":2378.500198364258,"y":1050.4047679901123,"z":"8068ded9.ccc26","wires":[["94c3f286.c2c34"]]},{"id":"94c3f286.c2c34","type":"set","name":"set ss.param.vnfc-model-customization-uuid, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-customization-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.vnfc-model-customization-uuid-index' value='`$bidx`' />","comments":"","x":2738.750228881836,"y":1050.4405536651611,"z":"8068ded9.ccc26","wires":[]},{"id":"f5541fce.c9fc9","type":"outcome","name":"vnfc-model-invariant-uuid","xml":"<outcome value='vnfc-model-invariant-uuid'>","comments":"","outputs":1,"x":2363.2144508361816,"y":1091.8333730697632,"z":"8068ded9.ccc26","wires":[["dbebcefd.68335"]]},{"id":"dbebcefd.68335","type":"set","name":"set ss.param.vnfc-model-invariant-uuid, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-invariant-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.vnfc-model-invariant-uuid-index' value='`$bidx`' />","comments":"","x":2722.4644813537598,"y":1091.869158744812,"z":"8068ded9.ccc26","wires":[]},{"id":"2b83386b.477738","type":"outcome","name":"vnfc-model-version","xml":"<outcome value='vnfc-model-version'>","comments":"","outputs":1,"x":2343.643020629883,"y":1133.261926651001,"z":"8068ded9.ccc26","wires":[["dfca8723.2b1448"]]},{"id":"dfca8723.2b1448","type":"set","name":"set ss.param.vnfc-model-version, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-version' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.vnfc-model-version-index' value='`$bidx`' />","comments":"","x":2703.893051147461,"y":1133.2977123260498,"z":"8068ded9.ccc26","wires":[]},{"id":"43435160.6954c","type":"set","name":"set TEST DATA","xml":"<set>\n<parameter name='vnf-index' value='0' />\n<parameter name='vf-module-index' value='0' />\n<parameter name='ss.capability-name' value='aai-vf-module-put' />\n<parameter name='ss.capability-action' value='unassign' />\n<parameter name='service-data.vnfs.vnf[0].vnf-id' value = '7324200933' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vnf-topology.vnf-parameters-data.param[0].name' value = 'vnf_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vnf-topology.vnf-parameters-data.param[0].value' value = '7324200933' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vnf-topology.sdnc-generated-cloud-resources' value='true' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.service-information.service-instance-id' value='11' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vnf-information.vnf-id' value='7324200933' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-topology.sdnc-generated-cloud-resources' value = 'true' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param_length' value = '36' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].name' value = 'vlan-tag-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].value' value = '${vlan-tag-1v}' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[0].name' value = 'policy-instance-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[0].value' value = 'JQIN1810SRIOV.Config_MS_SRIOV_VlanTag_1810_ADIOD_VPE.*' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[1].name' value = 'resource-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[1].value' value = 'vlan-tag-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[2].name' value = 'resource-value' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[2].value' value = '' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[3].name' value = 'scope-id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[3].value' value = 'MTCLL2238F' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[4].name' value = 'vlan-tag-key' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[4].value' value = 'dvncom4003' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[5].name' value = 'vlan-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[5].value' value = 'vlan-id-outer' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[6].name' value = 'vnfc-network-role' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key[6].value' value = 'network-role-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.resource-key_length' value = '7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.status' value = 'SUCCESS' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].resource-resolution-data.capability-name' value = 'mS-vlan-tag-assign' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].name' value = 'vlan-tag-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].value' value = 'manually-assigned-vlan-tag-2v' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[0].name' value = 'policy-instance-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[0].value' value = 'JQIN1810SRIOV.Config_MS_SRIOV_VlanTag_1810_ADIOD_VPE.*' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[1].name' value = 'resource-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[1].value' value = 'vlan-tag-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[2].name' value = 'resource-value' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[2].value' value = 'manually-assigned-vlan-tag-2v' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[3].name' value = 'scope-id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[3].value' value = 'MTCLL2238F' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[4].name' value = 'vlan-tag-key' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[4].value' value = 'dvncom4003' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[5].name' value = 'vlan-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[5].value' value = 'vlan-id-filter' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[6].name' value = 'vnfc-network-role' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key[6].value' value = 'network-role-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.resource-key_length' value = '7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.status' value = 'SUCCESS' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].resource-resolution-data.capability-name' value = 'INPUT' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[2].name' value = 'bogus1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[2].value' value = 'bogus1' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[3].name' value = 'bogus2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[3].value' value = 'bogus2' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[4].name' value = 'bogus3' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[4].value' value = 'bogus3' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[5].name' value = 'bogus4' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[5].value' value = 'bogus4' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[6].name' value = 'bogus5' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[6].value' value = 'bogus5' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[7].name' value = 'aic-cloud-region' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[7].value' value = 'mtn6' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[8].name' value = 'ipv4-loopback0-address' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[8].value' value = '1.1.1.1' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].name' value = 'ipv4-oam-address' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].value' value = '2.2.2.2' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].name' value = 'as-number' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].value' value = '11' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[11].name' value = 'vlan-id-outer' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[11].value' value = '[999]' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[12].name' value = 'bad_vnf_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[12].value' value = '7324200933' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[13].name' value = 'vf_module_name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[13].value' value = 'NEW_SELF_SERVE_VF_MODULE_TEST_1' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[14].name' value = 'volume-group-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[14].value' value = 'dummyvolumegroupname' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[15].name' value = 'volume_group_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[15].value' value = 'vg-1-999' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[16].name' value = 'vf_module_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[16].value' value = '7323683661' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[17].name' value = 'vf_module_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[17].value' value = '7323683661' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[18].name' value = 'vnfc-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[18].value' value = 'bogus-vnfc-name' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[19].name' value = 'vm_name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[19].value' value = 'bogus-vnfc-name' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[20].name' value = 'vm-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[20].value' value = 'oam' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[21].name' value = 'nfc-function' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[21].value' value = 'data' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[22].name' value = 'nfc-naming-code' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[22].value' value = 'dummy-naming-code' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[23].name' value = 'vnfc-model-customization-uuid' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[23].value' value = 'bbbb-99999' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[24].name' value = 'vnfc-model-invariant-uuid' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[24].value' value = 'aaaaa-10000' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[25].name' value = 'vnfc-model-version' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[25].value' value = 'model1' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[26].name' value = 'oam-interface-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[26].value' value = 'oamintfname' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[27].name' value = 'lo0-interface-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[27].value' value = 'lo0intfname' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[28].name' value = 'sriov41_net_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[28].value' value = '4141414141' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[29].name' value = 'sriov42_net_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[29].value' value = '4242424242' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[30].name' value = 'sriov43_net_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[30].value' value = '4343434343' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[31].name' value = 'sriov44_net_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[31].value' value = '4444444444' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[32].name' value = 'sriov21_net_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[32].value' value = '2121212121' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[33].name' value = 'sriov22_net_id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[33].value' value = '2222222222' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].name' value = 'aai-vf-module-put' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].value' value = '${status}' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[0].name' value = 'generic-vnf' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[0].value' value = 'generic-vnf' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[1].name' value = 'vf-module' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[1].value' value = 'vf-module' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[2].name' value = 'volume-group' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[2].value' value = 'volume-group' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[3].name' value = 'vnfc' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[3].value' value = 'vnfc' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[4].name' value = 'connection-points' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[4].value' value = 'connection-points' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[5].name' value = 'l-interface' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[5].value' value = 'l-interface' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[6].name' value = 'l3-network' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key[6].value' value = 'l3-network' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.resource-key_length' value = '7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[34].resource-resolution-data.status' value = 'PENDING' />\n\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[35].name' value = 'availability_zone_0' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[35].value' value = 'nova0' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-customization-uuid' value = 'bbbb-99999' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-invariant-uuid' value = 'aaaaa-10000' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-version' value = 'model1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-type' value = 'oam' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-name' value = 'bogus-vnfc-name' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length' value = '2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[0].vnfc-network-role' value = 'network-role-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[0].connection-point.connection-point-id' value = '789cddfa-58ba-4095-addc-8f7181186380' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[0].connection-point.vlan-data[0].vlan-role' value = '' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[0].connection-point.vlan-data[0].vlan-tag-description' value = 'VPE-Cust' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[0].connection-point.vlan-data[0].vlan-tag-id' value = '3553' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[0].connection-point.vlan-data[0].vlan-uuid' value = '56034624-9296-426c-8103-79a09c23e872' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].vnfc-network-role' value = 'network-role-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.connection-point-id' value = 'd1bdc1ae-4e67-42c3-ad25-2051ddae65a7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[0].vlan-role' value = 'outer-tag' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[0].vlan-tag-description' value = 'VPE-Cust-Outer' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[0].vlan-tag-id' value = '3503' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[0].vlan-uuid' value = 'fdc089af-0c00-41c0-a403-1501fb06909f' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[1].vlan-role' value = 'outer-tag' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[1].vlan-tag-description' value = 'VPE-Core1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[1].vlan-tag-id' value = '4001' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[1].vlan-uuid' value = 'f48473ff-fc11-4c38-bcf7-7dec483d81da' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[2].vlan-role' value = 'outer-tag' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[2].vlan-tag-description' value = 'VPE-Core2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[2].vlan-tag-id' value = '4002' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[1].connection-point.vlan-data[2].vlan-uuid' value = '147afe9e-81d3-4872-a298-f470999ba915' />","comments":"","x":953.2142868041992,"y":92.40475368499756,"z":"8068ded9.ccc26","wires":[]},{"id":"593dcc0e.8e3134","type":"outcome","name":"ipv4-loopback0-address","xml":"<outcome value='ipv4-loopback0-address'>","comments":"","outputs":1,"x":2355.3572692871094,"y":925.2618856430054,"z":"8068ded9.ccc26","wires":[["ef23ff6.9991e"]]},{"id":"ef23ff6.9991e","type":"set","name":"set ss.param.ipv4-loopback0-address, index","xml":"<set>\n<parameter name='ss.param.ipv4-loopback0-address' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.ipv4-loopback0-address-index' value='`bidx`' />","comments":"","x":2715.607292175293,"y":925.0119018554688,"z":"8068ded9.ccc26","wires":[]},{"id":"982628c3.cc5ec8","type":"outcome","name":"vlan-id-outer","xml":"<outcome value='vlan-id-outer'>","comments":"","outputs":1,"x":2324.8928451538086,"y":1220.0476179122925,"z":"8068ded9.ccc26","wires":[["bf23dba.cbde728"]]},{"id":"26c08944.595276","type":"outcome","name":"as-number","xml":"<outcome value='as-number'>","comments":"","outputs":1,"x":2319.678535461426,"y":1177.869029045105,"z":"8068ded9.ccc26","wires":[["104fad01.672133"]]},{"id":"104fad01.672133","type":"set","name":"set ss.param.as-number, index","xml":"<set>\n<parameter name='ss.param.as-number' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.as-number-index' value='`$bidx`' />","comments":"","x":2679.178512573242,"y":1178.3690299987793,"z":"8068ded9.ccc26","wires":[]},{"id":"bf23dba.cbde728","type":"set","name":"set vlan-id-outer, indexss.param.","xml":"<set>\n<parameter name='ss.param.vlan-id-outer' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.vlan-id-outer-index' value='`$bidx`' />","comments":"","x":2687.392822265625,"y":1219.7976169586182,"z":"8068ded9.ccc26","wires":[]},{"id":"385ba57a.8df6da","type":"set","name":"set ss.param.vnf-id","xml":"<set>\n<parameter name='ss.param.vnf-id' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-id`' />","comments":"","x":1228.6903991699219,"y":464.7856855392456,"z":"8068ded9.ccc26","wires":[]},{"id":"90cb9541.006378","type":"execute","name":"execute PropertiesNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":975.3570785522461,"y":141.4523696899414,"z":"8068ded9.ccc26","wires":[[]]},{"id":"369fedc4.640742","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":738.6903991699219,"y":114.78570365905762,"z":"8068ded9.ccc26","wires":[["43435160.6954c","90cb9541.006378"]]},{"id":"b3dc72d7.6c11b","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'volume-group not found in AnAI with volume-group-id=' + $ss.param.volume-group-id  + '; ' + $error-message`\" />\n","comments":"","x":2223.5953254699707,"y":3915.5000128746033,"z":"8068ded9.ccc26","wires":[]},{"id":"be71747e.761fd8","type":"save","name":"get volume-group","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"volume-group\"\n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-owner  \n\t\t\tAND cloud-region.cloud-region-id = $ss.param.aic-cloud-region \n\t\t\tAND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner \n\t\t\tAND volume-group-id = $ss.param.volume-group-id\" \n\tpfx=\"tmp.aai.volume-group\" >\n","comments":"","outputs":1,"x":1666.1788330078125,"y":3825.2141947746277,"z":"8068ded9.ccc26","wires":[["ab7cc2ae.b3122","491c18b8.279c08"]]},{"id":"ab7cc2ae.b3122","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1855.4288177490234,"y":3824.7141394615173,"z":"8068ded9.ccc26","wires":[["dd469fcd.ed1f6"]]},{"id":"491c18b8.279c08","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1863.1072998046875,"y":3880.749830722809,"z":"8068ded9.ccc26","wires":[["5df59ce5.ec4624"]]},{"id":"f712058.ba8fdf8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to get volume-group in AnAI with volume-group-id = ' + $ss.param.volume-group-id  + '; ' + $error-message`\" />\n","comments":"","x":2223.726306915283,"y":3860.7142462730408,"z":"8068ded9.ccc26","wires":[]},{"id":"dd469fcd.ed1f6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2027.39306640625,"y":3825.2143034934998,"z":"8068ded9.ccc26","wires":[["f712058.ba8fdf8","5baa82ec.dffecc"]]},{"id":"5df59ce5.ec4624","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2027.6430473327637,"y":3880.714282512665,"z":"8068ded9.ccc26","wires":[["b3dc72d7.6c11b","5baa82ec.dffecc"]]},{"id":"4faa8555.6c3d7c","type":"set","name":"set tmp.related-link","xml":"<set>\n<parameter name='tmp.related-link' value=\"`'/aai/v$/network/l3-networks/l3-network/' + $ss.network[$n].netid`\" />\n<!--\n<parameter name='tmp.related-link' value=\"`'/aai/' + $prop.aai.version + '/network/l3-networks/l3-network/' + $ss.network[$n].netid`\" />\n-->","comments":"","x":5282.429328918457,"y":5587.7142329216,"z":"8068ded9.ccc26","wires":[]},{"id":"9669e0ca.90c8f","type":"switchNode","name":"switch: ss.capability-name","xml":"<switch test='`$ss.capability-name`'>\n","comments":"","outputs":1,"x":363.5715103149414,"y":176.33332633972168,"z":"8068ded9.ccc26","wires":[["e32786de.9df318"]]},{"id":"e32786de.9df318","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":570.571533203125,"y":176.8333249092102,"z":"8068ded9.ccc26","wires":[["7197124b.04b54c"]]},{"id":"7197124b.04b54c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-name is null\" />\n","comments":"","x":730.4882049560547,"y":176.9444236755371,"z":"8068ded9.ccc26","wires":[]},{"id":"3b0adeb0.0eb082","type":"set","name":"set param[$ss.param.aai-vnf-put-index].value = SUCCESS","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].value' \n\tvalue='SUCCESS' />\n","comments":"","x":467.5714569091797,"y":1141.8094778060913,"z":"8068ded9.ccc26","wires":[]},{"id":"b9bf0de4.48018","type":"switchNode","name":"ss.param.ipv4-loopback0-address != NULL","xml":"<switch test=\"`$ss.param.ipv4-loopback0-address != ''`\">\n\n\n","comments":"","outputs":1,"x":1357.5237159729004,"y":1846.4284987449646,"z":"8068ded9.ccc26","wires":[["ceaf4524.23f4d8"]]},{"id":"ceaf4524.23f4d8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1625.9520988464355,"y":1845.8570322990417,"z":"8068ded9.ccc26","wires":[["43f75d58.570a74"]]},{"id":"43f75d58.570a74","type":"execute","name":"ss.param.ipv4-loopback0-address contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$ss.param.ipv4-loopback0-address`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":1897.761646270752,"y":1846.2380146980286,"z":"8068ded9.ccc26","wires":[["38011e7f.dd8f82","dcbb8012.d1394"]]},{"id":"38011e7f.dd8f82","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2184.7615852355957,"y":1845.5235419273376,"z":"8068ded9.ccc26","wires":[["1622e59b.0a538a"]]},{"id":"dcbb8012.d1394","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2185.2384243011475,"y":1894.380756855011,"z":"8068ded9.ccc26","wires":[["27de274a.88c098"]]},{"id":"1622e59b.0a538a","type":"record","name":"record ipv4-loopback0-address","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'ss.param.ipv4-loopback0-address = ' + $ss.param.ipv4-loopback0-address`\"/>\n<parameter name=\"field3\" value=\"__SKIP ipv4-loopback0-address update for generic-vnf in AnAI__\"/>","comments":"","outputs":1,"x":2427.285556793213,"y":1845.9524359703064,"z":"8068ded9.ccc26","wires":[[]]},{"id":"7327e39b.b7381c","type":"save","name":"update generic-vnf","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"ipv4-oam-address\" value='`$ss.param.ipv4-oam-address`' />\n","comments":"","outputs":1,"x":2275.5120964050293,"y":2121.7620272636414,"z":"8068ded9.ccc26","wires":[["7a590d98.438b34","45273777.668128","a8611fe4.861fc"]]},{"id":"7a590d98.438b34","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2475.7621269226074,"y":2122.119074344635,"z":"8068ded9.ccc26","wires":[["ecf0ba29.86e7a8"]]},{"id":"45273777.668128","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2482.012138366699,"y":2172.8691086769104,"z":"8068ded9.ccc26","wires":[["bdb288a7.c9e8f8"]]},{"id":"276849b.b8825b6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf.ipv4-oam-address in AnAI with ipv4-oam-address=' + $ss.param.ipv4-oam-address + '; ' + $error-message`\" />\n","comments":"","x":2851.6310844421387,"y":2121.904778957367,"z":"8068ded9.ccc26","wires":[]},{"id":"ff10d38d.f4ef5","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI' + '; ' + $error-message`\" />\n","comments":"","x":2852.2026023864746,"y":2172.142955303192,"z":"8068ded9.ccc26","wires":[]},{"id":"ecf0ba29.86e7a8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2649.1906929016113,"y":2122.190598964691,"z":"8068ded9.ccc26","wires":[["276849b.b8825b6","71faeb89.83a694"]]},{"id":"bdb288a7.c9e8f8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2652.047908782959,"y":2173.047740459442,"z":"8068ded9.ccc26","wires":[["ff10d38d.f4ef5","71faeb89.83a694"]]},{"id":"26afdd51.b0c082","type":"switchNode","name":"ss.param.ipv4-oam-address != NULL","xml":"<switch test=\"`$ss.param.ipv4-oam-address != ''`\">\n\n\n","comments":"","outputs":1,"x":1333.428638458252,"y":2071.9880661964417,"z":"8068ded9.ccc26","wires":[["1b81e3ed.85387c"]]},{"id":"1b81e3ed.85387c","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1569.857021331787,"y":2072.416599750519,"z":"8068ded9.ccc26","wires":[["6a5b7911.12efb8"]]},{"id":"6a5b7911.12efb8","type":"execute","name":"ss.param.ipv4-oam-address contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$ss.param.ipv4-oam-address`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":1813.6665687561035,"y":2072.7975821495056,"z":"8068ded9.ccc26","wires":[["e4511a53.c7e968","c52ae99f.811838"]]},{"id":"e4511a53.c7e968","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2069.6665077209473,"y":2072.0831093788147,"z":"8068ded9.ccc26","wires":[["cf116e57.4d2d6"]]},{"id":"c52ae99f.811838","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2070.143346786499,"y":2120.940324306488,"z":"8068ded9.ccc26","wires":[["7327e39b.b7381c"]]},{"id":"cf116e57.4d2d6","type":"record","name":"record ipv4-oam-address","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'ss.param.ipv4-oam-address = ' + $ss.param.ipv4-oam-address`\"/>\n<parameter name=\"field3\" value=\"__SKIP ipv4-oam-address update for generic-vnf in AnAI__\"/>","comments":"","outputs":1,"x":2293.1904792785645,"y":2072.5120034217834,"z":"8068ded9.ccc26","wires":[[]]},{"id":"e5889051.c0258","type":"save","name":"Rollback generic-vnf update","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"ipv4-loopback0-address\" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />","comments":"","outputs":1,"x":5601.476459503174,"y":1553.7621817588806,"z":"8068ded9.ccc26","wires":[["22af1de1.3fb9e2","8bf8665b.1437d8","c2c65d3e.5dfc2"]]},{"id":"22af1de1.3fb9e2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5839.726444244385,"y":1553.2621264457703,"z":"8068ded9.ccc26","wires":[["5e63f4b2.4ac3cc"]]},{"id":"8bf8665b.1437d8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5845.976455688477,"y":1605.0121607780457,"z":"8068ded9.ccc26","wires":[["ad206450.c1ee18"]]},{"id":"2d67b279.3df1de","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":5652.904941558838,"y":1508.1308035850525,"z":"8068ded9.ccc26","wires":[]},{"id":"c2c65d3e.5dfc2","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5843.797702789307,"y":1653.2737307548523,"z":"8068ded9.ccc26","wires":[["ec787945.492e18"]]},{"id":"47e8bd96.8ba9d4","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":5331.226184844971,"y":1463.5237832069397,"z":"8068ded9.ccc26","wires":[["2d67b279.3df1de","e5889051.c0258","384189da.b5f976"]]},{"id":"5e63f4b2.4ac3cc","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6022.54764175415,"y":1553.3808007240295,"z":"8068ded9.ccc26","wires":[]},{"id":"ad206450.c1ee18","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":6025.04764175415,"y":1604.6308026313782,"z":"8068ded9.ccc26","wires":[]},{"id":"ec787945.492e18","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`\" />\n","comments":"","x":6027.54764175415,"y":1653.6308007240295,"z":"8068ded9.ccc26","wires":[]},{"id":"384189da.b5f976","type":"record","name":"record generic-vnf ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK generic-vnf.ipv4-loopback0-address update\"/>","comments":"","outputs":1,"x":5607.04764175415,"y":1463.6308016777039,"z":"8068ded9.ccc26","wires":[[]]},{"id":"da76951d.afdea8","type":"comment","name":"ROLLBACK STARET HERE","info":"","comments":"","x":4691.0475997924805,"y":1417.7256727218628,"z":"8068ded9.ccc26","wires":[]},{"id":"bb524829.b73d08","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4512.619209289551,"y":1588.9048280715942,"z":"8068ded9.ccc26","wires":[["e2e1d228.1cac","71faeb89.83a694"]]},{"id":"e4a213fe.1cb","type":"save","name":"update generic-vnf","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"as-number\" value='`$ss.param.as-number`' />","comments":"","outputs":1,"x":2249.000072479248,"y":2371.190616130829,"z":"8068ded9.ccc26","wires":[["4efbae39.8c274","da35a4e3.507258","4bc8cbf7.d420c4"]]},{"id":"4efbae39.8c274","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2449.250102996826,"y":2371.5476632118225,"z":"8068ded9.ccc26","wires":[["a1700ab5.e0ada8"]]},{"id":"da35a4e3.507258","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2455.500114440918,"y":2422.297697544098,"z":"8068ded9.ccc26","wires":[["cd623d9e.bad95"]]},{"id":"2c15727.a84458e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf.as-number in AnAI with as-number=' + $ss.param.as-number + '; ' + $error-message`\" />\n","comments":"","x":2825.1190605163574,"y":2371.3333678245544,"z":"8068ded9.ccc26","wires":[]},{"id":"41bc64c.41bf29c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`\" />\n","comments":"","x":2825.6905784606934,"y":2421.5715441703796,"z":"8068ded9.ccc26","wires":[]},{"id":"a1700ab5.e0ada8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2622.67866897583,"y":2371.6191878318787,"z":"8068ded9.ccc26","wires":[["2c15727.a84458e","bb524829.b73d08"]]},{"id":"cd623d9e.bad95","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2625.5358848571777,"y":2422.4763293266296,"z":"8068ded9.ccc26","wires":[["41bc64c.41bf29c","bb524829.b73d08"]]},{"id":"908814ee.d3c7b8","type":"switchNode","name":"ss.param.as-number != NULL","xml":"<switch test=\"`$ss.param.as-number != ''`\">\n\n\n","comments":"","outputs":1,"x":1306.9166145324707,"y":2321.416655063629,"z":"8068ded9.ccc26","wires":[["737e972.985f168"]]},{"id":"737e972.985f168","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1543.3449974060059,"y":2321.8451886177063,"z":"8068ded9.ccc26","wires":[["1c5589e.b307676"]]},{"id":"1c5589e.b307676","type":"execute","name":"ss.param.as-number contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$ss.param.as-number`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":1787.1545448303223,"y":2322.226171016693,"z":"8068ded9.ccc26","wires":[["497ff762.9d1748","992db45d.438d38"]]},{"id":"497ff762.9d1748","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2043.154483795166,"y":2321.511698246002,"z":"8068ded9.ccc26","wires":[["deaa07b.61227f8"]]},{"id":"992db45d.438d38","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2043.6313228607178,"y":2370.3689131736755,"z":"8068ded9.ccc26","wires":[["e4a213fe.1cb"]]},{"id":"deaa07b.61227f8","type":"record","name":"record as-number","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'ss.param.as-number = ' + $ss.param.as-number`\"/>\n<parameter name=\"field3\" value=\"__SKIP as-number update for generic-vnf in AnAI__\"/>","comments":"","outputs":1,"x":2246.678455352783,"y":2321.940543651581,"z":"8068ded9.ccc26","wires":[[]]},{"id":"74f743f6.6c2a9c","type":"save","name":"Rollback generic-vnf update","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"ipv4-oam-address\" value='`$tmp.aai.vnf.ipv4-oam-address`' />","comments":"","outputs":1,"x":5424.047866821289,"y":1822.1906266212463,"z":"8068ded9.ccc26","wires":[["8ab667c6.6dc778","127a91f5.5edaee","6dc5a4c1.0050bc"]]},{"id":"8ab667c6.6dc778","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5662.2978515625,"y":1821.690571308136,"z":"8068ded9.ccc26","wires":[["ca5f07de.46aa38"]]},{"id":"127a91f5.5edaee","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5668.547863006592,"y":1873.4406056404114,"z":"8068ded9.ccc26","wires":[["7d6b1b6d.e73344"]]},{"id":"a407c233.f5534","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":5475.476348876953,"y":1776.5592484474182,"z":"8068ded9.ccc26","wires":[]},{"id":"6dc5a4c1.0050bc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5666.369110107422,"y":1921.702175617218,"z":"8068ded9.ccc26","wires":[["79516859.473258"]]},{"id":"768b08a.664faf8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5166.654808044434,"y":1732.9521927833557,"z":"8068ded9.ccc26","wires":[["a407c233.f5534","74f743f6.6c2a9c","9082c4e7.fb2758"]]},{"id":"ca5f07de.46aa38","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf.ipv4-oam-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5845.119049072266,"y":1821.8092455863953,"z":"8068ded9.ccc26","wires":[]},{"id":"7d6b1b6d.e73344","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5847.619049072266,"y":1873.059247493744,"z":"8068ded9.ccc26","wires":[]},{"id":"79516859.473258","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of generic-vnf.ipv4-oam-address update completed. '`\" />\n","comments":"","x":5850.119049072266,"y":1922.0592455863953,"z":"8068ded9.ccc26","wires":[]},{"id":"9082c4e7.fb2758","type":"record","name":"record generic-vnf ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK generic-vnf.ipv4-oam-address update\"/>","comments":"","outputs":1,"x":5429.619049072266,"y":1732.0592465400696,"z":"8068ded9.ccc26","wires":[[]]},{"id":"cb879e8.7659c6","type":"save","name":"update generic-vnf","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"vlan-id-outer\" value='`$ss.param.vlan-id-outer`' />","comments":"","outputs":1,"x":2255.2262687683105,"y":2602.619082927704,"z":"8068ded9.ccc26","wires":[["6f7ecbf3.9e2ac4","747eeb7.c55af14","39d08edc.6b6b42"]]},{"id":"6f7ecbf3.9e2ac4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2455.4762992858887,"y":2602.9761300086975,"z":"8068ded9.ccc26","wires":[["2c7b95a3.b6cfda"]]},{"id":"747eeb7.c55af14","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2461.7263107299805,"y":2653.726164340973,"z":"8068ded9.ccc26","wires":[["e8fe8375.a7f86"]]},{"id":"22896c5.57d9394","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf.vlan-id-outer in AnAI with as-number=' + $ss.param.as-number  + '; ' + $error-message`\" />\n","comments":"","x":2831.34525680542,"y":2602.7618346214294,"z":"8068ded9.ccc26","wires":[]},{"id":"1bdd53be.37f77c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`\" />\n","comments":"","x":2831.916774749756,"y":2653.0000109672546,"z":"8068ded9.ccc26","wires":[]},{"id":"2c7b95a3.b6cfda","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2628.9048652648926,"y":2603.0476546287537,"z":"8068ded9.ccc26","wires":[["22896c5.57d9394","d65ee09f.37cd9"]]},{"id":"e8fe8375.a7f86","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2631.7620811462402,"y":2653.9047961235046,"z":"8068ded9.ccc26","wires":[["1bdd53be.37f77c","d65ee09f.37cd9"]]},{"id":"c975e01d.234e2","type":"switchNode","name":"ss.param.vlan-id-outer != NULL","xml":"<switch test=\"`$ss.param.vlan-id-outer != ''`\">\n\n\n","comments":"","outputs":1,"x":1313.1428108215332,"y":2552.845121860504,"z":"8068ded9.ccc26","wires":[["93830daa.215c2"]]},{"id":"93830daa.215c2","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1549.5711936950684,"y":2553.2736554145813,"z":"8068ded9.ccc26","wires":[["27539cc9.080cc4"]]},{"id":"27539cc9.080cc4","type":"execute","name":"ss.param.vlan-id-outer contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$ss.param.vlan-id-outer`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":1793.3807411193848,"y":2553.654637813568,"z":"8068ded9.ccc26","wires":[["105606fa.800439","2247889c.578818"]]},{"id":"105606fa.800439","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2049.3806800842285,"y":2552.940165042877,"z":"8068ded9.ccc26","wires":[["531a6486.a6295c"]]},{"id":"2247889c.578818","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2049.8575191497803,"y":2601.7973799705505,"z":"8068ded9.ccc26","wires":[["cb879e8.7659c6"]]},{"id":"531a6486.a6295c","type":"record","name":"record vlan-id-outer","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'ss.param.vlan-id-outer = ' + $ss.param.vlan-id-outer`\"/>\n<parameter name=\"field3\" value=\"__SKIP vlan-id-outer update for generic-vnf in AnAI__\"/>","comments":"","outputs":1,"x":2255.761905670166,"y":2552.7977175712585,"z":"8068ded9.ccc26","wires":[[]]},{"id":"e5473ddc.047be","type":"save","name":"Rollback generic-vnf update","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"as-number\" value='`$tmp.aai.vnf.as-number`' />","comments":"","outputs":1,"x":5173.047737121582,"y":2097.0475330352783,"z":"8068ded9.ccc26","wires":[["285f2e24.1586f2","83023384.2b811","8076ba5d.d50338"]]},{"id":"285f2e24.1586f2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5411.297721862793,"y":2096.547477722168,"z":"8068ded9.ccc26","wires":[["fa907b6a.b7f9e8"]]},{"id":"83023384.2b811","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5417.547733306885,"y":2148.2975120544434,"z":"8068ded9.ccc26","wires":[["f07a54b8.00eae8"]]},{"id":"e1190313.df098","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":5224.476219177246,"y":2051.41615486145,"z":"8068ded9.ccc26","wires":[]},{"id":"8076ba5d.d50338","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5415.368980407715,"y":2196.55908203125,"z":"8068ded9.ccc26","wires":[["ebf1b213.e06bf"]]},{"id":"b0942bbb.c31398","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":4922.226112365723,"y":2002.9517307281494,"z":"8068ded9.ccc26","wires":[["e1190313.df098","e5473ddc.047be","25ff6863.c55cb8"]]},{"id":"fa907b6a.b7f9e8","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf.as-number update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5594.118919372559,"y":2096.6661520004272,"z":"8068ded9.ccc26","wires":[]},{"id":"f07a54b8.00eae8","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5596.618919372559,"y":2147.916153907776,"z":"8068ded9.ccc26","wires":[]},{"id":"ebf1b213.e06bf","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of generic-vnf.as-number update completed. '`\" />\n","comments":"","x":5599.118919372559,"y":2196.9161520004272,"z":"8068ded9.ccc26","wires":[]},{"id":"25ff6863.c55cb8","type":"record","name":"record generic-vnf ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK generic-vnf.as-number update\"/>","comments":"","outputs":1,"x":5177.190353393555,"y":2002.0587844848633,"z":"8068ded9.ccc26","wires":[[]]},{"id":"34d61ff5.579e6","type":"save","name":"Rollback generic-vnf update","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"vlan-id-outer\" value='`$tmp.aai.vnf.vlan-id-outer`' />","comments":"","outputs":1,"x":5037.905044555664,"y":2414.761951446533,"z":"8068ded9.ccc26","wires":[["629cce5b.29146","7a205153.d31fb","a1d97f77.5519b"]]},{"id":"629cce5b.29146","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5276.155029296875,"y":2414.261896133423,"z":"8068ded9.ccc26","wires":[["89392aae.d68578"]]},{"id":"7a205153.d31fb","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5282.405040740967,"y":2466.0119304656982,"z":"8068ded9.ccc26","wires":[["6d7e4c44.4dfcc4"]]},{"id":"5195e96f.8c0d38","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":5089.333526611328,"y":2369.130573272705,"z":"8068ded9.ccc26","wires":[]},{"id":"a1d97f77.5519b","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5279.226287841797,"y":2514.273500442505,"z":"8068ded9.ccc26","wires":[["9a615e51.2921d"]]},{"id":"d49362f8.a641c","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":4786.511985778809,"y":2325.5235176086426,"z":"8068ded9.ccc26","wires":[["5195e96f.8c0d38","34d61ff5.579e6","502f025d.7ed22c"]]},{"id":"89392aae.d68578","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf.vlan-id-outer update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5458.976226806641,"y":2414.380570411682,"z":"8068ded9.ccc26","wires":[]},{"id":"6d7e4c44.4dfcc4","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5461.476226806641,"y":2465.6305723190308,"z":"8068ded9.ccc26","wires":[]},{"id":"9a615e51.2921d","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of generic-vnf.vlan-id-outer update completed. '`\" />\n","comments":"","x":5462.976226806641,"y":2514.630570411682,"z":"8068ded9.ccc26","wires":[]},{"id":"502f025d.7ed22c","type":"record","name":"record generic-vnf ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK generic-vnf.vlan-id-outer update\"/>","comments":"","outputs":1,"x":5043.476226806641,"y":2324.6305713653564,"z":"8068ded9.ccc26","wires":[[]]},{"id":"a8611fe4.861fc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2479.8570671081543,"y":2224.6192326545715,"z":"8068ded9.ccc26","wires":[["9662e07e.fc4a8"]]},{"id":"9662e07e.fc4a8","type":"set","name":"set ss.ipv4-oam-address-updated = true","xml":"<set>\n<parameter name='ss.ipv4-oam-address-updated' value='true' />\n","comments":"","x":2734.9998893737793,"y":2224.0476994514465,"z":"8068ded9.ccc26","wires":[]},{"id":"39d08edc.6b6b42","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2460.999927520752,"y":2706.904727458954,"z":"8068ded9.ccc26","wires":[["e4253280.219b1"]]},{"id":"e4253280.219b1","type":"set","name":"set ss.vlan-id-outer-updated = true","xml":"<set>\n<parameter name='ss.vlan-id-outer-updated' value='true' />\n","comments":"","x":2697.142749786377,"y":2706.333194255829,"z":"8068ded9.ccc26","wires":[]},{"id":"d5eb2c25.f7bf1","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2594.428638458252,"y":1994.0476365089417,"z":"8068ded9.ccc26","wires":[["25b6966a.a2a8ca"]]},{"id":"25b6966a.a2a8ca","type":"set","name":"set ss.ipv4-loopback0-address-updated = true","xml":"<set>\n<parameter name='ss.ipv4-loopback0-address-updated' value='true' />\n","comments":"","x":2867.571460723877,"y":1993.4761033058167,"z":"8068ded9.ccc26","wires":[]},{"id":"4bc8cbf7.d420c4","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2451.4286613464355,"y":2474.047793865204,"z":"8068ded9.ccc26","wires":[["f06d656f.af5598"]]},{"id":"f06d656f.af5598","type":"set","name":"set ss.as-number-updated = true","xml":"<set>\n<parameter name='ss.as-number-updated' value='true' />\n","comments":"","x":2686.5714836120605,"y":2473.476260662079,"z":"8068ded9.ccc26","wires":[]},{"id":"1efb2ace.960c85","type":"switchNode","name":"ss.ipv4-loopback0-address-updated","xml":"<switch test=\"`$ss.ipv4-loopback0-address-updated`\">\n\n\n","comments":"","outputs":1,"x":4926.33345413208,"y":1463.4764018058777,"z":"8068ded9.ccc26","wires":[["30f66413.98e80c"]]},{"id":"30f66413.98e80c","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":5161.47624206543,"y":1463.0478825569153,"z":"8068ded9.ccc26","wires":[["47e8bd96.8ba9d4"]]},{"id":"e2e1d228.1cac","type":"switchNode","name":"ss.ipv4-oam-address-updated","xml":"<switch test=\"`$ss.ipv4-oam-address-updated`\">\n\n\n","comments":"","outputs":1,"x":4762.619338989258,"y":1733.4761872291565,"z":"8068ded9.ccc26","wires":[["161a1549.8e506b"]]},{"id":"161a1549.8e506b","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":4991.190628051758,"y":1732.904776096344,"z":"8068ded9.ccc26","wires":[["768b08a.664faf8"]]},{"id":"6e213c89.99cdc4","type":"switchNode","name":"ss.as-number-updated","xml":"<switch test=\"`$ss.as-number-updated`\">\n\n\n","comments":"","outputs":1,"x":4573.190734863281,"y":2002.0476455688477,"z":"8068ded9.ccc26","wires":[["c40b28e0.f8bd18"]]},{"id":"c40b28e0.f8bd18","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":4764.762023925781,"y":2002.4762344360352,"z":"8068ded9.ccc26","wires":[["b0942bbb.c31398"]]},{"id":"dab326d4.4c5188","type":"switchNode","name":"ss.vlan-id-outer-updated","xml":"<switch test=\"`$ss.vlan-id-outer-updated`\">\n\n\n","comments":"","outputs":1,"x":4435.619369506836,"y":2325.47625541687,"z":"8068ded9.ccc26","wires":[["615d0461.0886fc"]]},{"id":"615d0461.0886fc","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":4622.190658569336,"y":2325.9048442840576,"z":"8068ded9.ccc26","wires":[["d49362f8.a641c"]]},{"id":"d65ee09f.37cd9","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4358.333808898926,"y":1811.3334674835205,"z":"8068ded9.ccc26","wires":[["bb524829.b73d08","6e213c89.99cdc4"]]},{"id":"7102730.01d478c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4204.905014038086,"y":2084.76189994812,"z":"8068ded9.ccc26","wires":[["d65ee09f.37cd9","dab326d4.4c5188"]]},{"id":"71faeb89.83a694","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4691.762203216553,"y":1463.7620449066162,"z":"8068ded9.ccc26","wires":[["1efb2ace.960c85"]]},{"id":"11703c8e.d0e733","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2534.9999504089355,"y":1310.4761638641357,"z":"8068ded9.ccc26","wires":[["51b14fbd.75b3e","812c36d9.0a3ac8"]]},{"id":"e9f498df.26a9b8","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":3044.4289016723633,"y":1386.4762229919434,"z":"8068ded9.ccc26","wires":[["1f45c3a7.b75a7c","51073227.b22b1c","289fcfcb.8ee7","3c596d6c.b48dd2","b9f013b2.25b3f","3565db8d.625714","be2c548e.1c4a58"]]},{"id":"1f45c3a7.b75a7c","type":"outcome","name":"vf-module","xml":"<outcome value='vf-module'>\n","comments":"","outputs":1,"x":3305.448585510254,"y":1296.6546630859375,"z":"8068ded9.ccc26","wires":[["ca74e487.dcffc8"]]},{"id":"812c36d9.0a3ac8","type":"for","name":"for kidx in resource-key_length","xml":"<for silentFailure='true' index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":2765.2899780273438,"y":1386.3373336791992,"z":"8068ded9.ccc26","wires":[["e9f498df.26a9b8"]]},{"id":"51073227.b22b1c","type":"outcome","name":"generic-vnf","xml":"<outcome value='generic-vnf'>\n","comments":"","outputs":1,"x":3306.9087677001953,"y":1250.6903667449951,"z":"8068ded9.ccc26","wires":[["a2bddea8.fee28"]]},{"id":"a2bddea8.fee28","type":"set","name":"set ss.resource-key.generic-vnf","xml":"<set>\n<parameter name='ss.resource-key.generic-vnf' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":3609.4126205444336,"y":1250.944284439087,"z":"8068ded9.ccc26","wires":[]},{"id":"289fcfcb.8ee7","type":"outcome","name":"volume-group","xml":"<outcome value='volume-group'>\n","comments":"","outputs":1,"x":3320.571662902832,"y":1341.1905689239502,"z":"8068ded9.ccc26","wires":[["532ce28c.3776ac"]]},{"id":"3c596d6c.b48dd2","type":"outcome","name":"vnfc","xml":"<outcome value='vnfc'>\n","comments":"","outputs":1,"x":3300.000442504883,"y":1385.4763507843018,"z":"8068ded9.ccc26","wires":[["c4bd3f7e.1c8b5"]]},{"id":"b9f013b2.25b3f","type":"outcome","name":"connection-points","xml":"<outcome value='connection-points'>\n","comments":"","outputs":1,"x":3334.7143173217773,"y":1429.7620134353638,"z":"8068ded9.ccc26","wires":[["5e1b7935.47e818"]]},{"id":"3565db8d.625714","type":"outcome","name":"l-interface","xml":"<outcome value='l-interface'>\n","comments":"","outputs":1,"x":3311.2858123779297,"y":1475.333511352539,"z":"8068ded9.ccc26","wires":[["8c93fc68.5c60f"]]},{"id":"be2c548e.1c4a58","type":"outcome","name":"l3-network","xml":"<outcome value='l3-netework'>\n","comments":"","outputs":1,"x":3314.1430587768555,"y":1519.761960029602,"z":"8068ded9.ccc26","wires":[["c92bdf18.2a6ef"]]},{"id":"ca74e487.dcffc8","type":"set","name":"set ss.resource-key.vf-module","xml":"<set>\n<parameter name='ss.resource-key.vf-module' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":3607.000015258789,"y":1296.6191234588623,"z":"8068ded9.ccc26","wires":[]},{"id":"c4bd3f7e.1c8b5","type":"set","name":"set ss.resource-key.vnfc","xml":"<set>\n<parameter name='ss.resource-key.vnfc' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":3593.0003051757812,"y":1385.6191215515137,"z":"8068ded9.ccc26","wires":[]},{"id":"5e1b7935.47e818","type":"set","name":"set ss.resource-key.connection-points","xml":"<set>\n<parameter name='ss.resource-key.connection-points' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":3635.143081665039,"y":1429.9048519134521,"z":"8068ded9.ccc26","wires":[]},{"id":"532ce28c.3776ac","type":"set","name":"set ss.resource-key.volume-group","xml":"<set>\n<parameter name='ss.resource-key.volume-group' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":3622.428939819336,"y":1341.1904468536377,"z":"8068ded9.ccc26","wires":[]},{"id":"8c93fc68.5c60f","type":"set","name":"set ss.resource-key.l-interface","xml":"<set>\n<parameter name='ss.resource-key.l-interface' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":3611.5715560913086,"y":1474.0477256774902,"z":"8068ded9.ccc26","wires":[]},{"id":"c92bdf18.2a6ef","type":"set","name":"set ss.resource-key.l3-network","xml":"<set>\n<parameter name='ss.resource-key.l3-network' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":3614.143165588379,"y":1520.9047985076904,"z":"8068ded9.ccc26","wires":[]},{"id":"1e19f844.9c0ec8","type":"switchNode","name":"switch: ss.resource-key.generic-vnf","xml":"<switch test=\"`$ss.resource-key.generic-vnf`\">\n\n\n","comments":"","outputs":1,"x":1004.285888671875,"y":1415.8333263397217,"z":"8068ded9.ccc26","wires":[["22799027.e77b3"]]},{"id":"22799027.e77b3","type":"outcome","name":"generic-vnf","xml":"<outcome value='generic-vnf'>\n","comments":"","outputs":1,"x":1258.3174285888672,"y":1415.5832529067993,"z":"8068ded9.ccc26","wires":[["e09c2dd9.09452"]]},{"id":"8d88acea.3f4ec","type":"outcome","name":"volume-group","xml":"<outcome value='volume-group'>\n","comments":"","outputs":1,"x":1275.2182846069336,"y":3825.154559135437,"z":"8068ded9.ccc26","wires":[["2d857037.91483"]]},{"id":"6b9d6bf5.bbd334","type":"outcome","name":"vnfc","xml":"<outcome value='vnfc'>\n","comments":"","outputs":1,"x":1189.9327087402344,"y":4289.536512374878,"z":"8068ded9.ccc26","wires":[["6e76a93a.5e0588"]]},{"id":"6caebe95.cbe41","type":"outcome","name":"connection-points","xml":"<outcome value='connection-points'>\n","comments":"","outputs":1,"x":1308.7895584106445,"y":4614.012176275253,"z":"8068ded9.ccc26","wires":[["b7dc825b.8fad"]]},{"id":"7b7e9ace.8bcdd4","type":"outcome","name":"l-interface","xml":"<outcome value='l-interface'>\n","comments":"","outputs":1,"x":1249.0278244018555,"y":5281.91733455658,"z":"8068ded9.ccc26","wires":[["dbc07084.be7f5"]]},{"id":"4c582c8b.e26454","type":"outcome","name":"l3-network","xml":"<outcome value='l3-netework'>\n","comments":"","outputs":1,"x":1267.741928100586,"y":6171.630530357361,"z":"8068ded9.ccc26","wires":[["b307f248.13b72"]]},{"id":"e09c2dd9.09452","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1043.74995803833,"y":1644.6191158294678,"z":"8068ded9.ccc26","wires":[["cdbfc33f.d52a7","b9bf0de4.48018","26afdd51.b0c082","908814ee.d3c7b8","c975e01d.234e2","70689778.84aa08"]]},{"id":"b7a3bc44.8c264","type":"outcome","name":"availability_zone_0","xml":"<outcome value='availability_zone_0'>","comments":"","outputs":1,"x":2346.4286346435547,"y":1263.6190452575684,"z":"8068ded9.ccc26","wires":[["edac9821.fddc48"]]},{"id":"edac9821.fddc48","type":"set","name":"set ss.param.availability-zone-0, index","xml":"<set>\n<parameter name='ss.param.availability-zone-0' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />\n<parameter name='ss.param.availability-zone-0-index' value='`$bidx`' />","comments":"","x":2702.928611755371,"y":1263.369044303894,"z":"8068ded9.ccc26","wires":[]},{"id":"b6529101.23526","type":"save","name":"save availability-zone relationship","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf:relationship-list\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"availability-zone\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`$ss.availability-zone.related-link`\" />\n<!--\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"availability-zone\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"cloud-region.cloud-owner\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.cloud-region.cloud-owner`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-key\" value=\"cloud-region.cloud-region-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-value\" value=\"`$ss.param.aic-cloud-region`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-key\" value=\"availability-zone.availability-zone-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-value\" value=\"`$ss.param.availability-zone-0`\" />\n-->","comments":"","outputs":1,"x":2502.2857818603516,"y":2878.3335857391357,"z":"8068ded9.ccc26","wires":[["eff6042e.114c48","d6c66a3.e397a98","d3081601.d09528"]]},{"id":"eff6042e.114c48","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2751.5358123779297,"y":2878.6906328201294,"z":"8068ded9.ccc26","wires":[["7582c90f.6e1e58"]]},{"id":"d6c66a3.e397a98","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2757.7858238220215,"y":2929.440667152405,"z":"8068ded9.ccc26","wires":[["285dd4bf.b8919c"]]},{"id":"f35164aa.6c0648","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to save availability-zone relationship for generic-vnf in AnAI with availability-zone-name =' + $ss.param.as-number + '; ' + $error-message`\" />\n","comments":"","x":3127.404769897461,"y":2878.4763374328613,"z":"8068ded9.ccc26","wires":[]},{"id":"ef238623.db9c18","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to create availability-zone relationship because generic-vnf with vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`\" />\n","comments":"","x":3127.976287841797,"y":2928.7145137786865,"z":"8068ded9.ccc26","wires":[]},{"id":"7582c90f.6e1e58","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2924.9643783569336,"y":2878.7621574401855,"z":"8068ded9.ccc26","wires":[["f35164aa.6c0648","7102730.01d478c"]]},{"id":"285dd4bf.b8919c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2927.8215942382812,"y":2929.6192989349365,"z":"8068ded9.ccc26","wires":[["ef238623.db9c18","7102730.01d478c"]]},{"id":"70689778.84aa08","type":"switchNode","name":"ss.param.availability-zone-0 != NULL","xml":"<switch test=\"`$ss.param.availability-zone-0 != ''`\">\n\n\n","comments":"","outputs":1,"x":1326.7736320495605,"y":2782.845057487488,"z":"8068ded9.ccc26","wires":[["2be7ec40.58f454"]]},{"id":"2be7ec40.58f454","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1563.2020149230957,"y":2783.273591041565,"z":"8068ded9.ccc26","wires":[["8780edee.3bd45"]]},{"id":"8780edee.3bd45","type":"execute","name":"ss.param.availability-zone-0 contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$ss.param.availability-zone-0`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":1807.011562347412,"y":2783.6545734405518,"z":"8068ded9.ccc26","wires":[["4bde0e1f.c32f9","bf9059c2.977898"]]},{"id":"4bde0e1f.c32f9","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2063.011501312256,"y":2782.940100669861,"z":"8068ded9.ccc26","wires":[["95fe6fb0.516f"]]},{"id":"bf9059c2.977898","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2063.4883403778076,"y":2831.797315597534,"z":"8068ded9.ccc26","wires":[["f23554a3.c0f0c8"]]},{"id":"95fe6fb0.516f","type":"record","name":"availability_zone_0","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'ss.param.availability-zone-0 = ' + $ss.param.availability-zone-0`\"/>\n<parameter name=\"field3\" value=\"__SKIP availability-zone-0 update for generic-vnf in AnAI__\"/>","comments":"","outputs":1,"x":2253.535655975342,"y":2783.2263259887695,"z":"8068ded9.ccc26","wires":[[]]},{"id":"d3081601.d09528","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2759.0594635009766,"y":2981.6192302703857,"z":"8068ded9.ccc26","wires":[["abfe1557.59faf8"]]},{"id":"abfe1557.59faf8","type":"set","name":"set availability-zone-0-updated = true","xml":"<set>\n<parameter name='ss.availability-zone-0-updated' value='true' />\n","comments":"","x":3001.2022857666016,"y":2981.0476970672607,"z":"8068ded9.ccc26","wires":[]},{"id":"96bf497d.7c0b58","type":"save","name":"Rollback generic-vnf update","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf:relationship-list\" \n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \n\t\tAND related-to = availability-zone \n\t\tAND relationship.related-link = $tmp.related-link\" >","comments":"","outputs":1,"x":4930.714065551758,"y":2756.9527320861816,"z":"8068ded9.ccc26","wires":[["518876d5.324a98","4baf9d28.7def04","d702b2c2.0eebd"]]},{"id":"518876d5.324a98","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5167.964050292969,"y":2756.4526767730713,"z":"8068ded9.ccc26","wires":[["97aeb615.ee80a8"]]},{"id":"4baf9d28.7def04","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":5174.214061737061,"y":2808.2027111053467,"z":"8068ded9.ccc26","wires":[["6bbd2d7b.4fd744"]]},{"id":"84056dd2.6ed0f","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":4981.142532348633,"y":2659.6545724868774,"z":"8068ded9.ccc26","wires":[]},{"id":"d702b2c2.0eebd","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5172.035308837891,"y":2856.4642810821533,"z":"8068ded9.ccc26","wires":[["5d7ab32b.2f0aac"]]},{"id":"e5f99cea.bb11a","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":4678.320991516113,"y":2616.047516822815,"z":"8068ded9.ccc26","wires":[["84056dd2.6ed0f","96bf497d.7c0b58","b1f6477e.336b08","49a4a067.9c036"]]},{"id":"97aeb615.ee80a8","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf availability-zone relationship from AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5350.785247802734,"y":2756.5713510513306,"z":"8068ded9.ccc26","wires":[]},{"id":"6bbd2d7b.4fd744","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Failed to rollback generic-vnf availability-zone relationship because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":5353.285247802734,"y":2807.821352958679,"z":"8068ded9.ccc26","wires":[]},{"id":"5d7ab32b.2f0aac","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`$error-message + ' Rollback of generic-vnf availability-zone relationship completed. '`\" />\n","comments":"","x":5355.785247802734,"y":2856.8213510513306,"z":"8068ded9.ccc26","wires":[]},{"id":"b1f6477e.336b08","type":"record","name":"record generic-vnf relationship ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK availability-zone relationship\"/>","comments":"","outputs":1,"x":4973.285232543945,"y":2615.154570579529,"z":"8068ded9.ccc26","wires":[[]]},{"id":"48bbb5d3.ee15fc","type":"switchNode","name":"ss.availability-zone-0-updated","xml":"<switch test=\"`$ss.availability-zone-0-updated`\">\n\n\n","comments":"","outputs":1,"x":4297.428375244141,"y":2616.0002546310425,"z":"8068ded9.ccc26","wires":[["caa3d3a3.6b923"]]},{"id":"caa3d3a3.6b923","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":4513.999664306641,"y":2616.42884349823,"z":"8068ded9.ccc26","wires":[["e5f99cea.bb11a"]]},{"id":"40e8fb80.4fe434","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4059.0478286743164,"y":2410.9524269104004,"z":"8068ded9.ccc26","wires":[["48bbb5d3.ee15fc","7102730.01d478c"]]},{"id":"49a4a067.9c036","type":"set","name":"set tmp.related-link","xml":"<set>\n<parameter name='tmp.related-link' \n\tvalue=\"`'/aai/v$/cloud-infrastructure/cloud-regions/cloud-region/' + \n\t$prop.cloud-region.cloud-owner + \n\t'/' + \n\t$ss.param.aic-cloud-region + \n\t'/availability-zones/availability-zone/' + \n\t$ss.param.availability-zone-0`\" /> ","comments":"","x":4901.380401611328,"y":2708.6194067001343,"z":"8068ded9.ccc26","wires":[]},{"id":"a393fb3d.925a18","type":"switchNode","name":"switch: ss.resource-key.vf-module","xml":"<switch test=\"`$ss.resource-key.vf-module`\">\n\n\n","comments":"","outputs":1,"x":993.0477256774902,"y":3363.7859120368958,"z":"8068ded9.ccc26","wires":[["212cb7fa.9054e8"]]},{"id":"212cb7fa.9054e8","type":"outcome","name":"vf-module","xml":"<outcome value='vf-module'>\n","comments":"","outputs":1,"x":1246.8410301208496,"y":3363.4166798591614,"z":"8068ded9.ccc26","wires":[["f0e5f31a.7af32"]]},{"id":"f0e5f31a.7af32","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1438.7499465942383,"y":3363.9762563705444,"z":"8068ded9.ccc26","wires":[["fff7178f.f6b028","e53f3779.d51718","61212051.1f615"]]},{"id":"12288572.4b441b","type":"switchNode","name":"switch: ss.resource-key.generic-vnf","xml":"<switch test=\"`$ss.resource-key.generic-vnf`\">\n\n\n","comments":"","outputs":1,"x":5412.858173370361,"y":3067.3337631225586,"z":"8068ded9.ccc26","wires":[["2de67d2d.eaa8c2"]]},{"id":"2de67d2d.eaa8c2","type":"outcome","name":"generic-vnf","xml":"<outcome value='generic-vnf'>\n","comments":"","outputs":1,"x":5666.8897132873535,"y":3067.0836896896362,"z":"8068ded9.ccc26","wires":[["1c8efb54.0d2e25"]]},{"id":"e9ef052a.050278","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":5172.8579177856445,"y":3067.762412071228,"z":"8068ded9.ccc26","wires":[["12288572.4b441b"]]},{"id":"310596e2.42bc4a","type":"switchNode","name":"switch: ss.resource-key.volume-group","xml":"<switch test=\"`$ss.resource-key.volume-group`\">\n\n\n","comments":"","outputs":1,"x":1000.2382659912109,"y":3824.571523666382,"z":"8068ded9.ccc26","wires":[["8d88acea.3f4ec"]]},{"id":"2d857037.91483","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1464.368953704834,"y":3825.5235500335693,"z":"8068ded9.ccc26","wires":[["be71747e.761fd8","2bb84732.4581c8"]]},{"id":"5a1044bf.9a5c0c","type":"switchNode","name":"switch: ss.resource-key.vf-module","xml":"<switch test=\"`$ss.resource-key.vf-module`\">\n\n\n","comments":"","outputs":1,"x":5263.715049743652,"y":3456.6194343566895,"z":"8068ded9.ccc26","wires":[["2202a5e9.5bf9ba"]]},{"id":"2202a5e9.5bf9ba","type":"outcome","name":"vf-module","xml":"<outcome value='vf-module'>\n","comments":"","outputs":1,"x":5507.508354187012,"y":3456.250202178955,"z":"8068ded9.ccc26","wires":[["3d611339.da18cc"]]},{"id":"5baa82ec.dffecc","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":5016.715049743652,"y":3282.6194343566895,"z":"8068ded9.ccc26","wires":[["e9ef052a.050278","5a1044bf.9a5c0c"]]},{"id":"61212051.1f615","type":"set","name":"set ss.selflink","xml":"<set>\n<parameter name='ss.selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/' + \n$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.service-instance-id + \n'/service-data/vnfs/vnf/' + \n$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.vnf-id + \n'/vnf-data/vf-modules/vf-module/' + \n$ss.param.vf-module-id + \n'/vf-module-data/vf-module-topology/'`\" />\n","comments":"","x":1667.333381652832,"y":3496.237877845764,"z":"8068ded9.ccc26","wires":[]},{"id":"c0feb185.c5348","type":"switchNode","name":"switch: ss.resource-key.vnfc","xml":"<switch test=\"`$ss.resource-key.vnfc`\">\n\n\n","comments":"","outputs":1,"x":967.3056488037109,"y":4289.608148574829,"z":"8068ded9.ccc26","wires":[["6b9d6bf5.bbd334"]]},{"id":"f10164da.04f358","type":"switchNode","name":"switch: ss.resource-key.connection-points","xml":"<switch test=\"`$ss.resource-key.connection-points`\">\n\n\n","comments":"","outputs":1,"x":1014.3810577392578,"y":4614.28610253334,"z":"8068ded9.ccc26","wires":[["6caebe95.cbe41"]]},{"id":"40f8f017.2403a","type":"switchNode","name":"switch: ss.resource-key.l-interface","xml":"<switch test=\"`$ss.resource-key.l-interface`\">\n\n\n","comments":"","outputs":1,"x":995.7143478393555,"y":5281.61899471283,"z":"8068ded9.ccc26","wires":[["7b7e9ace.8bcdd4"]]},{"id":"4fcc988.d1ea868","type":"switchNode","name":"switch: ss.resource-key.l3-network","xml":"<switch test=\"`$ss.resource-key.l3-network`\">\n\n\n","comments":"","outputs":1,"x":1004.9998321533203,"y":6172.333167076111,"z":"8068ded9.ccc26","wires":[["4c582c8b.e26454"]]},{"id":"5819b51f.e401ec","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2080.2382049560547,"y":4058.3332056999207,"z":"8068ded9.ccc26","wires":[["270b03e3.958a6c","5baa82ec.dffecc"]]},{"id":"270b03e3.958a6c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'volume-group not found in AnAI with volume-group-id=' + $ss.param.volume-group-id  + '; ' + $error-message`\" />\n","comments":"","x":2271.9048805236816,"y":4057.4047617912292,"z":"8068ded9.ccc26","wires":[]},{"id":"2da1393.d2f90c6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1758.4762687683105,"y":4334.190864562988,"z":"8068ded9.ccc26","wires":[["6b1f5790.4f6e98","4c4f8f77.4d5e8"]]},{"id":"1a8d278c.ff1d48","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1567.6667938232422,"y":4334.476434707642,"z":"8068ded9.ccc26","wires":[["2da1393.d2f90c6"]]},{"id":"1dadc5fe.f7b3aa","type":"switchNode","name":"switch: ss.resource-key.volume-group","xml":"<switch test=\"`$ss.resource-key.volume-group`\">\n\n\n","comments":"","outputs":1,"x":5108.714794158936,"y":3733.9529342651367,"z":"8068ded9.ccc26","wires":[["e0077fc8.8ce35"]]},{"id":"e0077fc8.8ce35","type":"outcome","name":"volume-group","xml":"<outcome value='volume-group'>\n","comments":"","outputs":1,"x":5365.508098602295,"y":3733.5837020874023,"z":"8068ded9.ccc26","wires":[["5688630b.c730bc"]]},{"id":"8bd683f0.0ff8a","type":"outcome","name":"vnfc","xml":"<outcome value='vnfc'>\n","comments":"","outputs":1,"x":5170.715019226074,"y":4010.6193017959595,"z":"8068ded9.ccc26","wires":[["35fbb6bd.1fe98a"]]},{"id":"b6293e2c.6351f","type":"switchNode","name":"switch: ss.resource-key.vnfc","xml":"<switch test=\"`$ss.resource-key.vnfc`\">\n\n\n","comments":"","outputs":1,"x":4948.087959289551,"y":4010.6909379959106,"z":"8068ded9.ccc26","wires":[["8bd683f0.0ff8a"]]},{"id":"6686e089.e3643","type":"comment","name":"UNASSIGN","info":"","comments":"","x":3334.7619705200195,"y":2942.61895942688,"z":"8068ded9.ccc26","wires":[]},{"id":"db46c464.eb3478","type":"outcome","name":"l-interface","xml":"<outcome value='l-interface'>\n","comments":"","outputs":1,"x":4883.857345581055,"y":4758.047756195068,"z":"8068ded9.ccc26","wires":[["5de01092.e1692"]]},{"id":"47592f63.65ff8","type":"switchNode","name":"switch: ss.resource-key.l-interface","xml":"<switch test=\"`$ss.resource-key.l-interface`\">\n\n\n","comments":"","outputs":1,"x":4650.543869018555,"y":4757.749416351318,"z":"8068ded9.ccc26","wires":[["db46c464.eb3478"]]},{"id":"1c0b6aa6.c62445","type":"outcome","name":"l3-network","xml":"<outcome value='l3-netework'>\n","comments":"","outputs":1,"x":4667.61856842041,"y":5527.523387908936,"z":"8068ded9.ccc26","wires":[["e665f06b.96f35"]]},{"id":"ecb6efb1.19ad9","type":"switchNode","name":"switch: ss.resource-key.l3-network","xml":"<switch test=\"`$ss.resource-key.l3-network`\">\n","comments":"","outputs":1,"x":4404.8764724731445,"y":5528.226024627686,"z":"8068ded9.ccc26","wires":[["1c0b6aa6.c62445"]]},{"id":"3b70420c.dc52de","type":"outcome","name":"l-interface","xml":"<outcome value='l-interface'>\n","comments":"","outputs":1,"x":4778.714279174805,"y":5166.619045257568,"z":"8068ded9.ccc26","wires":[["3199093e.07e6f6"]]},{"id":"16cd30f3.c7e79f","type":"switchNode","name":"switch: ss.resource-key.l-interface","xml":"<switch test=\"`$ss.resource-key.l-interface`\">\n\n\n","comments":"","outputs":1,"x":4545.400802612305,"y":5166.320705413818,"z":"8068ded9.ccc26","wires":[["3b70420c.dc52de"]]},{"id":"408e0f2b.32827","type":"set","name":"set ss.cp.related-link","xml":"<set>\n<parameter name='ss.cp.related-link' \n\tvalue=\"`'/aai/v$/network/vnfcs/vnfc/' + \n\t$ss.param.vnfc-name + \n\t'/cps/cp/' + \n\t$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id`\" />","comments":"","x":2628.666618347168,"y":4817.666753053665,"z":"8068ded9.ccc26","wires":[]},{"id":"998e8a86.fc6368","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2416.666435241699,"y":4817.999890565872,"z":"8068ded9.ccc26","wires":[["408e0f2b.32827","2f9cf95b.a79726"]]},{"id":"8725d510.792668","type":"set","name":"set ss.l3-network.related-link","xml":"<set>\n<parameter name='ss.l3-network.related-link' \n\tvalue=\"`'/aai/v$/network/l3-networks/l3-network/' + $ss.network[$n].netid`\" />","comments":"","x":1869.9998779296875,"y":6171.000082015991,"z":"8068ded9.ccc26","wires":[]},{"id":"2dbbe18d.9f749e","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1631.666618347168,"y":6171.333102226257,"z":"8068ded9.ccc26","wires":[["8725d510.792668","4933575b.c49bc8"]]},{"id":"ed90b580.692598","type":"set","name":"set ss.availability-zone.related-link","xml":"<set>\n<parameter name='ss.availability-zone.related-link' \n\tvalue=\"`'/aai/v$/cloud-infrastructure/cloud-regions/cloud-region/' + \n\t$prop.cloud-region.cloud-owner + '/' + $ss.param.aic-cloud-region + \n\t'/availability-zones/availability-zone/' + \n\t$ss.param.availability-zone-0`\" />\n","comments":"","x":2502.7144470214844,"y":2831.857195854187,"z":"8068ded9.ccc26","wires":[]},{"id":"f23554a3.c0f0c8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2240.571601867676,"y":2832.2856311798096,"z":"8068ded9.ccc26","wires":[["ed90b580.692598","b6529101.23526"]]}]
