[{"id":"6c1dd237.4ac514","type":"dgstart","name":"DGSTART","outputs":1,"x":186,"y":122,"z":"8e01e90d.03c0b8","wires":[["1d978af4.0eb20d"]]},{"id":"1d978af4.0eb20d","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":264.61902618408203,"y":162.238112449646,"z":"8e01e90d.03c0b8","wires":[["54c410ef.22533"]]},{"id":"54c410ef.22533","type":"method","name":"brg-topology-operation","xml":"<method rpc='brg-topology-operation' mode='sync'>\n","comments":"","outputs":1,"x":249.09529876708984,"y":221.99999809265137,"z":"8e01e90d.03c0b8","wires":[["26f2dc2e.727b4c"]]},{"id":"ff82b2d4.02e6b8","type":"comment","name":"BRG-TOPOLOGY-OPERATION ","info":"","comments":"","x":577.0115203857422,"y":69.58634376525879,"z":"8e01e90d.03c0b8","wires":[]},{"id":"26f2dc2e.727b4c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":302.3810043334961,"y":305.4434595108032,"z":"8e01e90d.03c0b8","wires":[["b666324b.9917e8","9699fcc1.653908","83c22972.dcb878","673a5d62.b6f37c"]]},{"id":"b666324b.9917e8","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":526.7500534057617,"y":909.2861194610596,"z":"8e01e90d.03c0b8","wires":[]},{"id":"9699fcc1.653908","type":"switchNode","name":"switch svc-action","xml":"<switch test='`$brg-topology-operation-input.sdnc-request-header.svc-action`'>\n","comments":"","outputs":1,"x":523.3809280395508,"y":515.857177734375,"z":"8e01e90d.03c0b8","wires":[["b7f5f677.943d9","65adfd1a.c80ddc","1a041f5.60f9561","a13e6eac.da9aa8","e5d2641c.f1fb7","43a8465a.615b","acd124f4.75c688"]]},{"id":"b7f5f677.943d9","type":"other","name":"assign","xml":"<outcome value='assign'>\n","comments":"","outputs":1,"x":745.2857551574707,"y":376.7142586708069,"z":"8e01e90d.03c0b8","wires":[["fff021ad.b9858"]]},{"id":"fff021ad.b9858","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":925.0952835083008,"y":379.1429500579834,"z":"8e01e90d.03c0b8","wires":[["5269932b.15572c"]]},{"id":"83c22972.dcb878","type":"call","name":"call GENERIC-RESOURCE-API:validate-brg-input","xml":"<call module='GENERIC-RESOURCE-API' rpc='validate-brg-input' mode='sync' >\n","comments":"","outputs":1,"x":657.9523544311523,"y":297.42859268188477,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"5269932b.15572c","type":"call","name":"call GENERIC-RESOURCE-API:brg-topology-operation-assign","xml":"<call module='GENERIC-RESOURCE-API' rpc='brg-topology-operation-assign' mode='sync' >\n","comments":"","outputs":1,"x":1296.6665802001953,"y":379.0000057220459,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"65adfd1a.c80ddc","type":"other","name":"activate","xml":"<outcome value='activate'>\n","comments":"","outputs":1,"x":745.6666641235352,"y":466,"z":"8e01e90d.03c0b8","wires":[["9e79cedd.803c8"]]},{"id":"9e79cedd.803c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":929.9048233032227,"y":467.0001220703125,"z":"8e01e90d.03c0b8","wires":[["3e6fbc16.fbfb2c"]]},{"id":"9ba81ac2.6483c","type":"call","name":"call GENERIC-RESOURCE-API:network-topology-operation-activate","xml":"<call module='GENERIC-RESOURCE-API' rpc='network-topology-operation-activate' mode='sync' >\n","comments":"","outputs":1,"x":1862.476342519125,"y":1442.1904754638672,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"1a041f5.60f9561","type":"other","name":"deactivate","xml":"<outcome value='deactivate'>\n","comments":"","outputs":1,"x":754.6667041778564,"y":526.0000581741333,"z":"8e01e90d.03c0b8","wires":[["c6a02ccd.3a8a4"]]},{"id":"c6a02ccd.3a8a4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":935.904863357544,"y":527.0001802444458,"z":"8e01e90d.03c0b8","wires":[["d6368656.a9dc9"]]},{"id":"8f2d181d.e9dd4","type":"call","name":"call GENERIC-RESOURCE-API:network-topology-operation-deactivate","xml":"<call module='GENERIC-RESOURCE-API' rpc='network-topology-operation-deactivate' mode='sync' >\n","comments":"","outputs":1,"x":1868.9762509663906,"y":1557.9404754638672,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"a13e6eac.da9aa8","type":"other","name":"unassign","xml":"<outcome value='unassign'>\n","comments":"","outputs":1,"x":752.66672706604,"y":644.3333978652954,"z":"8e01e90d.03c0b8","wires":[["1ce38c61.56ed3c"]]},{"id":"1ce38c61.56ed3c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":933.9048862457275,"y":645.3335199356079,"z":"8e01e90d.03c0b8","wires":[["df0ce2cc.be0a4"]]},{"id":"138e04fc.67d6a3","type":"call","name":"call GENERIC-RESOURCE-API:network-topology-operation-unassign","xml":"<call module='GENERIC-RESOURCE-API' rpc='network-topology-operation-unassign' mode='sync' >\n","comments":"","outputs":1,"x":1875.7262509663906,"y":1670.6904754638672,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"e5d2641c.f1fb7","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":752.000057220459,"y":704.3333806991577,"z":"8e01e90d.03c0b8","wires":[["ff51f24.baa951"]]},{"id":"ff51f24.baa951","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"sdnc-request-header.svc-action is a required input\" />\n","comments":"","x":934.0000534057617,"y":703.3333902359009,"z":"8e01e90d.03c0b8","wires":[]},{"id":"673a5d62.b6f37c","type":"set","name":"Set final indicator to Y","xml":"<set>\n<parameter name=\"ack-final\" value=\"Y\"/>","comments":"","x":545.7777481079102,"y":868.4444580078125,"z":"8e01e90d.03c0b8","wires":[]},{"id":"1591bdd5.239aaa","type":"for","name":"for nidx..service-data.networks.network[]","xml":"<for index='nidx' start='0' end='`$service-data.networks.network_length`' >\n","comments":"","outputs":1,"x":1764.3971341451015,"y":1336.095230102539,"z":"8e01e90d.03c0b8","wires":[["847a89dc.e4c0d"]]},{"id":"c52d3dc.ceedd4","type":"switchNode","name":"switch service-data.networks.network_length","xml":"<switch test='`$service-data.networks.network_length`'>\n","comments":"","outputs":1,"x":1098.1112302144375,"y":1300.6666107177734,"z":"8e01e90d.03c0b8","wires":[["fa068ef.134e47","2eb4354e.bacee2"]]},{"id":"fa068ef.134e47","type":"other","name":"outcome Null","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1341.1111691792812,"y":1302.6666202545166,"z":"8e01e90d.03c0b8","wires":[["7a71186c.880bf"]]},{"id":"2eb4354e.bacee2","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1295.1111996968593,"y":1335.6666412353516,"z":"8e01e90d.03c0b8","wires":[["5ae3e22f.181e3c"]]},{"id":"847a89dc.e4c0d","type":"switchNode","name":"switch networkid found","xml":"<switch test=\"`$service-data.networks.network[$nidx].network-id == $network-topology-operation-input.network-information.network-id`\">\n\n","comments":"","outputs":1,"x":2054.8256848653164,"y":1335.345314025879,"z":"8e01e90d.03c0b8","wires":[["adf77eb2.a6bef"]]},{"id":"adf77eb2.a6bef","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2243.7780392964687,"y":1336.238052368164,"z":"8e01e90d.03c0b8","wires":[["b5bb9b20.bfcac8"]]},{"id":"b5bb9b20.bfcac8","type":"set","name":"set tmp.nidx and ctx.network-data","xml":"<set>\n<parameter name='tmp.nidx' value='`$nidx`' />\n<parameter name='ctx.network-data.' value='`$service-data.networks.network[$nidx].`' />\n","comments":"","x":2477.309808095297,"y":1334.9880599975586,"z":"8e01e90d.03c0b8","wires":[]},{"id":"dfdb5580.53cbe","type":"comment","name":"Find the index to service data for this network - save id in tmp.nidx, save service-data","info":"","comments":"","x":1221.2223141988125,"y":1269.666633605957,"z":"8e01e90d.03c0b8","wires":[]},{"id":"7a71186c.880bf","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"network-topology-operation-input.network-request-input.network-id not found in service-data\" />\n","comments":"","x":1532.888726552328,"y":1300.5556182861328,"z":"8e01e90d.03c0b8","wires":[]},{"id":"5ae3e22f.181e3c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1462.3811658223476,"y":1335.2212181091309,"z":"8e01e90d.03c0b8","wires":[["1591bdd5.239aaa","586139d7.8852a8"]]},{"id":"586139d7.8852a8","type":"switchNode","name":"switch tmp.nidx ","xml":"<switch test=\"`$tmp.nidx`\">\n\n","comments":"","outputs":1,"x":1682.6985638936367,"y":1378.0784368515015,"z":"8e01e90d.03c0b8","wires":[["15d3790a.886ca7"]]},{"id":"f7113043.4dc108","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"network-topology-operation-input.network-request-input.network-id not found in service-data\" />\n","comments":"","x":2035.5555470784511,"y":1373.7926788330078,"z":"8e01e90d.03c0b8","wires":[]},{"id":"15d3790a.886ca7","type":"outcome","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1854.1270993550625,"y":1376.6498222351074,"z":"8e01e90d.03c0b8","wires":[["f7113043.4dc108"]]},{"id":"4bdb6fd2.39562","type":"switchNode","name":"switch network-level-oper-status","xml":"<switch test='`$service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":1075.4445737202968,"y":1442.1418762207031,"z":"8e01e90d.03c0b8","wires":[["bd001758.5c8da","b56f358b.638728"]]},{"id":"bd001758.5c8da","type":"outcome","name":"outcome PendingCreate","xml":"<outcome value='PendingCreate'>\n","comments":"","outputs":1,"x":1440.4445533752441,"y":1442.141860961914,"z":"8e01e90d.03c0b8","wires":[["9ba81ac2.6483c"]]},{"id":"b56f358b.638728","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1390.4446004231777,"y":1482.1418914794922,"z":"8e01e90d.03c0b8","wires":[["ef3ca8f6.2d1be8"]]},{"id":"ef3ca8f6.2d1be8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Network is not in appropriate state for activate. Current state is ' + $service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`\" />","comments":"","x":1560.4446004231777,"y":1482.1418914794922,"z":"8e01e90d.03c0b8","wires":[]},{"id":"2cef8cb5.8dce54","type":"switchNode","name":"switch network-level-oper-status","xml":"<switch test='`$service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":1082.7460568745937,"y":1558.093276977539,"z":"8e01e90d.03c0b8","wires":[["df811c8b.287138","ee8d6caf.c61f58"]]},{"id":"df811c8b.287138","type":"outcome","name":"outcome Created","xml":"<outcome value='Created'>\n","comments":"","outputs":1,"x":1445.7460263570156,"y":1558.0933074951172,"z":"8e01e90d.03c0b8","wires":[["8f2d181d.e9dd4"]]},{"id":"ee8d6caf.c61f58","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1415.7460263570156,"y":1598.0933074951172,"z":"8e01e90d.03c0b8","wires":[["7ba4729f.e98744"]]},{"id":"7ba4729f.e98744","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Network is not in appropriate state for deactivate. Current state is ' + $service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`\" />","comments":"","x":1581.7460263570156,"y":1600.0933074951172,"z":"8e01e90d.03c0b8","wires":[]},{"id":"386e76f6.8691fa","type":"switchNode","name":"switch network-level-oper-status","xml":"<switch test='`$service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":1082.547631581625,"y":1672.294677734375,"z":"8e01e90d.03c0b8","wires":[["60db2784.a8367","cf88857c.ec7638","ee049e88.66a8e8"]]},{"id":"60db2784.a8367","type":"outcome","name":"outcome PendingCreate","xml":"<outcome value='PendingCreate'>\n","comments":"","outputs":1,"x":1442.5476010640468,"y":1672.2947082519531,"z":"8e01e90d.03c0b8","wires":[["138e04fc.67d6a3"]]},{"id":"cf88857c.ec7638","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1399.5475400288906,"y":1756.2947235107422,"z":"8e01e90d.03c0b8","wires":[["265fb0.353f685"]]},{"id":"265fb0.353f685","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Network is not in appropriate state for unassign. Current state is ' + $service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`\" />","comments":"","x":1590.8809598286953,"y":1754.9613523483276,"z":"8e01e90d.03c0b8","wires":[]},{"id":"ee049e88.66a8e8","type":"outcome","name":"outcome PendingDelete","xml":"<outcome value='PendingDelete'>\n","comments":"","outputs":1,"x":1445.7778256734218,"y":1710.1418762207031,"z":"8e01e90d.03c0b8","wires":[["138e04fc.67d6a3"]]},{"id":"43a8465a.615b","type":"other","name":"create","xml":"<outcome value='create'>\n","comments":"","outputs":1,"x":750.9073715209961,"y":425.6048412322998,"z":"8e01e90d.03c0b8","wires":[["f465062d.77326"]]},{"id":"f465062d.77326","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":932.1455307006836,"y":426.6049633026123,"z":"8e01e90d.03c0b8","wires":[["8386ff96.bd5e8"]]},{"id":"8386ff96.bd5e8","type":"call","name":"call GENERIC-RESOURCE-API:brg-topology-operation-create","xml":"<call module='GENERIC-RESOURCE-API' rpc='brg-topology-operation-create' mode='sync' >\n","comments":"","outputs":1,"x":1298.0502395629883,"y":426.1286849975586,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"acd124f4.75c688","type":"other","name":"delete","xml":"<outcome value='delete'>\n","comments":"","outputs":1,"x":749.2407245635986,"y":587.2715005874634,"z":"8e01e90d.03c0b8","wires":[["5fda9f53.2a83b8"]]},{"id":"5fda9f53.2a83b8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":930.4788837432861,"y":588.2716226577759,"z":"8e01e90d.03c0b8","wires":[["a08d1432.8f8368"]]},{"id":"d6368656.a9dc9","type":"call","name":"call GENERIC-RESOURCE-API:brg-topology-operation-deactivate","xml":"<call module='GENERIC-RESOURCE-API' rpc='brg-topology-operation-deactivate' mode='sync' >\n","comments":"","outputs":1,"x":1317.8147811889648,"y":526.481538772583,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"a08d1432.8f8368","type":"call","name":"call GENERIC-RESOURCE-API:brg-topology-operation-delete","xml":"<call module='GENERIC-RESOURCE-API' rpc='brg-topology-operation-delete' mode='sync' >\n","comments":"","outputs":1,"x":1307.4816303253174,"y":588.1481676101685,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"df0ce2cc.be0a4","type":"call","name":"call GENERIC-RESOURCE-API:brg-topology-operation-unassign","xml":"<call module='GENERIC-RESOURCE-API' rpc='brg-topology-operation-unassign' mode='sync' >\n","comments":"","outputs":1,"x":1313.1481342315674,"y":645.4814939498901,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"3e6fbc16.fbfb2c","type":"call","name":"call GENERIC-RESOURCE-API:brg-topology-operation-activate","xml":"<call module='GENERIC-RESOURCE-API' rpc='brg-topology-operation-activate' mode='sync' >\n","comments":"","outputs":1,"x":1307.4814682006836,"y":467.48146057128906,"z":"8e01e90d.03c0b8","wires":[[]]}]
