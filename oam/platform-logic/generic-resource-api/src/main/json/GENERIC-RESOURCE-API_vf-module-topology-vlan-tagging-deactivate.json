[{"id":"b9fb057.683a5f8","type":"dgstart","name":"DGSTART","outputs":1,"x":104.99999237060547,"y":78.33332824707031,"z":"e8bccc7e.ec2eb","wires":[["8383ed38.cf0d3"]]},{"id":"8383ed38.cf0d3","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":218.28569793701172,"y":118.57143974304199,"z":"e8bccc7e.ec2eb","wires":[["f1e036f3.14b848"]]},{"id":"f1e036f3.14b848","type":"method","name":"method vf-module-topology-vlan-tagging-deactivate","xml":"<method rpc='vf-module-topology-vlan-tagging-deactivate' mode='sync'>\n","comments":"","outputs":1,"x":233.0952911376953,"y":159.99999809265137,"z":"e8bccc7e.ec2eb","wires":[["568006ed.2ce9c8"]]},{"id":"c45fe197.979d1","type":"comment","name":"vf-module-topology-vlan-tagging-deactivate","info":"","comments":"","x":499.3448486328125,"y":25.9196720123291,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"568006ed.2ce9c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":154.99999237060547,"y":458.3333110809326,"z":"e8bccc7e.ec2eb","wires":[["ff21dac3.232098","e5650e13.66738","e46ff220.516ac"]]},{"id":"ff21dac3.232098","type":"for","name":"for each vlan-vnfc-instance-group","xml":"<for index='vvig-index' start='0' end='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group_length`' >\n","comments":"","outputs":1,"x":395.00000381469727,"y":393.3333377838135,"z":"e8bccc7e.ec2eb","wires":[["1de68e82.c55571"]]},{"id":"d7ec6134.cbc82","type":"set","name":"set keys","xml":"<set>\n<parameter name='parent-port-role'\n  value='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[$vnfc-index].vnic-groups.vnic-group[$vnic-group-index].vnic-interface-role`' />\n<parameter name='network-instance-group-function'\n  value='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[$vnfc-index].vnic-groups.vnic-group[$vnic-group-index].network-instance-group-function`' />\n<parameter name='vnfc-instance-group-function'\n  value='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].instance-group-function`' />\n","comments":"","x":1158.333339691162,"y":363.33329677581787,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"1de68e82.c55571","type":"for","name":"for each vnfc","xml":"<for index='vnfc-index' start='0' end='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc_length`' >\n","comments":"","outputs":1,"x":626.6666564941406,"y":393.333309173584,"z":"e8bccc7e.ec2eb","wires":[["16ebf369.701e0d"]]},{"id":"16ebf369.701e0d","type":"for","name":"for each vnic-group","xml":"<for index='vnic-group-index' start='0' end='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[$vnfc-index].vnic-groups.vnic-group_length`' >\n","comments":"","outputs":1,"x":816.6666564941406,"y":393.33331775665283,"z":"e8bccc7e.ec2eb","wires":[["6d6c92f3.4fa04c"]]},{"id":"6d6c92f3.4fa04c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1003.3333129882812,"y":390.9999694824219,"z":"e8bccc7e.ec2eb","wires":[["d7ec6134.cbc82","9deb1267.ebcf4"]]},{"id":"9deb1267.ebcf4","type":"for","name":"for each vnf-sub-interface-group","xml":"<for silentFailure='true' index='vsig-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group_length`' >\n","comments":"","outputs":1,"x":1233.3334655761719,"y":416.66665267944336,"z":"e8bccc7e.ec2eb","wires":[["99d5c99e.678168"]]},{"id":"99d5c99e.678168","type":"switchNode","name":"keys match?","xml":"<switch test='`\n  $parent-port-role == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].parent-port-role\n  and $vnfc-instance-group-function == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfc-instance-group-function\n  and $network-instance-group-function == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].network-instance-group-function\n`'>\n","comments":"","outputs":1,"x":1465.0000610351562,"y":414.9999370574951,"z":"e8bccc7e.ec2eb","wires":[["387a0b42.aa2ef4"]]},{"id":"387a0b42.aa2ef4","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1616.666612625122,"y":413.333309173584,"z":"e8bccc7e.ec2eb","wires":[["2a9028a.ad201d8"]]},{"id":"6c197550.7c94fc","type":"switchNode","name":"switch customer-bonding-request_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].customer-bonding-requests.customer-bonding-request_length`'>\n","comments":"","outputs":1,"x":2043.3332138061523,"y":283.3332691192627,"z":"e8bccc7e.ec2eb","wires":[["1b4769d6.638246","add44603.94aa78","c7402c36.a00f8"]]},{"id":"1b4769d6.638246","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2281.6664428710938,"y":238.33330821990967,"z":"e8bccc7e.ec2eb","wires":[["57d6d382.4db9cc"]]},{"id":"add44603.94aa78","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":2281.6665229797363,"y":283.33329010009766,"z":"e8bccc7e.ec2eb","wires":[["57d6d382.4db9cc"]]},{"id":"57d6d382.4db9cc","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2411.666446685791,"y":258.33332920074463,"z":"e8bccc7e.ec2eb","wires":[[]]},{"id":"c7402c36.a00f8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2281.6667251586914,"y":328.3333320617676,"z":"e8bccc7e.ec2eb","wires":[["d75ff341.8ec86"]]},{"id":"d75ff341.8ec86","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Cannot deactivate module because customer bonding request exists' />\n","comments":"","x":2428.333366394043,"y":328.3333320617676,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"e5650e13.66738","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='' value='' />\n","comments":"","x":333.33333587646484,"y":593.3333339691162,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"2a9028a.ad201d8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1764.9998779296875,"y":413.33331298828125,"z":"e8bccc7e.ec2eb","wires":[["6c197550.7c94fc","1fd81c05.46c034","730f667e.8058f8"]]},{"id":"1fd81c05.46c034","type":"for","name":"for all vnf-sub-interface-group vnfcs","xml":"<for index='vnf-vnfc-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length`' >\n","comments":"","outputs":1,"x":2028.333251953125,"y":453.33336639404297,"z":"e8bccc7e.ec2eb","wires":[["53661795.92c528"]]},{"id":"53661795.92c528","type":"switchNode","name":"vnfcs match?","xml":"<switch test='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[$vnfc-index].vnfc-name\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$vnf-vnfc-index].vnfc-name`'>\n","comments":"","outputs":1,"x":2266.6668014526367,"y":451.66668128967285,"z":"e8bccc7e.ec2eb","wires":[["8ac3ff07.21c3f"]]},{"id":"730f667e.8058f8","type":"break","name":"break","xml":"<break>\n","comments":"","x":1939.999912261963,"y":505.00007247924805,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"8ac3ff07.21c3f","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2416.66650390625,"y":450.9999694824219,"z":"e8bccc7e.ec2eb","wires":[["ed29f8aa.2b2598"]]},{"id":"f0ddcfb9.e87e9","type":"comment","name":"delete this vnfc","info":"","comments":"","x":2729.9997024536133,"y":351.6667013168335,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"ed29f8aa.2b2598","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2549.9999389648438,"y":450.00000762939453,"z":"e8bccc7e.ec2eb","wires":[["82e130f5.9e3d8","6cfa8387.9cdb5c","9c0a204f.831ff"]]},{"id":"82e130f5.9e3d8","type":"for","name":"for remaining vnfcs","xml":"<for index='$idx' start='`$vnf-vnfc-index`'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length - 1`' >\n","comments":"","outputs":1,"x":2721.6666946411133,"y":398.3332586288452,"z":"e8bccc7e.ec2eb","wires":[["b57de70d.1235f8"]]},{"id":"48169c86.b1af44","type":"set","name":"copy next entry down","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$idx].'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$idx + 1].`' />\n","comments":"","x":3066.6667861938477,"y":409.99994468688965,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"6cfa8387.9cdb5c","type":"set","name":"decrement the vnfc length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length - 1`' />\n","comments":"","x":2741.6669387817383,"y":444.9999580383301,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"e46ff220.516ac","type":"set","name":"copy data to tmp.vlan-vnfc-instance-groups.","xml":"<set>\n<parameter name='tmp.vlan-vnfc-instance-groups.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vlan-vnfc-instance-groups.`' />\n","comments":"","x":424.9999694824219,"y":338.33331298828125,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"9c0a204f.831ff","type":"set","name":"clear the last one","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length].' value='' />\n","comments":"","x":2715.0002670288086,"y":494.99991035461426,"z":"e8bccc7e.ec2eb","wires":[]},{"id":"b57de70d.1235f8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2885,"y":396.6666564941406,"z":"e8bccc7e.ec2eb","wires":[["48169c86.b1af44","2170dfeb.f2e8c"]]},{"id":"2170dfeb.f2e8c","type":"set","name":"clear the target","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$idx].'\n  value='' />\n","comments":"","x":3050.0000381469727,"y":361.6666603088379,"z":"e8bccc7e.ec2eb","wires":[]}]