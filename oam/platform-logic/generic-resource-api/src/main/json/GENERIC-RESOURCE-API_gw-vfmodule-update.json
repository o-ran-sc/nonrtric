[{"id":"3806658c.26497a","type":"dgstart","name":"DGSTART","outputs":1,"x":147.88333129882812,"y":88.88333129882812,"z":"bc96058f.0be17","wires":[["45fcd240.2d898c"]]},{"id":"45fcd240.2d898c","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":244.12141036987305,"y":149.8357219696045,"z":"bc96058f.0be17","wires":[["40e26cd9.3c35a4"]]},{"id":"40e26cd9.3c35a4","type":"method","name":"gw-vfmodule-update","xml":"<method rpc='gw-vfmodule-update' mode='sync'>\n","comments":"","outputs":1,"x":128.0382194519043,"y":243.07376194000244,"z":"bc96058f.0be17","wires":[["5bd01702.fa9438"]]},{"id":"5bd01702.fa9438","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":244.8833122253418,"y":342.88333225250244,"z":"bc96058f.0be17","wires":[["d48c04fa.2c4798","624df7c1.860c6","882c4631.3dd488","b22dc7b6.0678d"]]},{"id":"77492a71.217b24","type":"execute","name":"generate vnf service-info url - vnf-d","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-api-url1`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url2\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vnf-id`\"/>\n\n","comments":"","outputs":1,"x":2004.1333923339844,"y":1512.883544921875,"z":"bc96058f.0be17","wires":[[]]},{"id":"9c97aad1.b5c07","type":"execute","name":"execute RestApiCallNode - PUT service into service","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.services.vnf.vfmodule.templatefile`\" />\n   <!--\n   <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vnf-api-url3`' />\n   -->\n   <parameter name='restapiUrl' value='`$tmp.vf-module-object-path`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-vfmodule-vgw\" />\n\n","comments":"","outputs":1,"x":1590.8832702636719,"y":2043.8835144042969,"z":"bc96058f.0be17","wires":[["b5a49632.9fe928"]]},{"id":"5d685b37.cddc0c","type":"execute","name":"generate vnf service-info url - service-instance-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.service.vnf.vfmodule-resource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url1\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-data.service-information.service-instance-id`\"/>\n","comments":"","outputs":1,"x":2049.6333923339844,"y":1470.133544921875,"z":"bc96058f.0be17","wires":[[]]},{"id":"492fb368.715544","type":"execute","name":"generate vnf service-info url - vf-module-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-api-url2`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url3\"/>\n    <parameter name=\"target\" value=\"{vf-module-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vfmodule-id`\"/>\n\n","comments":"","outputs":1,"x":2028.3833923339844,"y":1553.883544921875,"z":"bc96058f.0be17","wires":[[]]},{"id":"52ea6240.b2f2dc","type":"set","name":"set tmp.vgw.vg_mux_tunnel.vni","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[0].allotted-resource-data[0].tunnelxconn-topology[0].tunnelxconn-assignments[0].vni`' />\n<parameter name='tmp.service.vnf.vf-module.vg-lan-ip' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[0].allotted-resource-data[0].tunnelxconn-topology[0].tunnelxconn-assignments[0].vg-ip`' />\n\n\n\n","comments":"","x":1582.1333923339844,"y":1631.383544921875,"z":"bc96058f.0be17","wires":[]},{"id":"77b6a8fb.175e6","type":"set","name":"set tmp.service.vnf.vf-module-id","xml":"<set>\n<parameter name='tmp.service.vnf.vf-module.vf-module-id' value='9aa4ede4-c639-48c4-9386-74c9ff87f8e3' />\n<parameter name='brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vfmodule-id' value='9aa4ede4-c639-48c4-9386-74c9ff87f8e3' />","comments":"","x":2044.6333312988281,"y":1310.9667358398438,"z":"bc96058f.0be17","wires":[]},{"id":"4601a28d.aedf2c","type":"set","name":"set tmp.service-data.vnf-information.vnf-id","xml":"<set>\n<parameter name='tmp.service-data.vnf-information.vnf-id' value='3a3332d1-12ad-4709-ac81-ba32b304a462' />\n<parameter name='brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vnf-id' value='3a3332d1-12ad-4709-ac81-ba32b304a462' />\n","comments":"","x":2010.8833312988281,"y":1270.9667358398438,"z":"bc96058f.0be17","wires":[]},{"id":"5b7201c1.a4887","type":"set","name":"set tmp.service-data.service-information.service-instance-id","xml":"<set>\n<parameter name='tmp.service-data.service-information.service-instance-id' value='6e34b9fb-9ec1-4c95-9e12-0326c434c623' />\n","comments":"","x":2059.633270263672,"y":1215.9665832519531,"z":"bc96058f.0be17","wires":[]},{"id":"5bbba697.75684","type":"set","name":"set tmp.service.vnf.vf-module-id","xml":"<set>\n<parameter name='tmp.restapi.service.vnf.vfmodule-resource' value='`$prop.restapi.service.vnf.vfmodule-resource`' />\n","comments":"","x":1564.6333312988281,"y":1349.7166748046875,"z":"bc96058f.0be17","wires":[]},{"id":"dfa8d8c7.ea1108","type":"execute","name":"execute Propertis gen-res-api-dg","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":1572.1332092285156,"y":1140.9667358398438,"z":"bc96058f.0be17","wires":[[]]},{"id":"b5a49632.9fe928","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1872.1332702636719,"y":2095.133514404297,"z":"bc96058f.0be17","wires":[["80ab6de6.18d81"]]},{"id":"80ab6de6.18d81","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Failed on PUT vf-module parameters to MD0SAL' />\n","comments":"","x":2062.133270263672,"y":2103.883514404297,"z":"bc96058f.0be17","wires":[]},{"id":"b22dc7b6.0678d","type":"set","name":"set  consuming service-instance","xml":"<set>\n<!--\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n\n\n<parameter name='tmp.consuming-service-instance-id' value='b3cb7040-f7a5-4beb-ad2f-2a893b7d374b' />\nservice-data.service-topology.service-topology-identifier.service-instance-id\n\n-->\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n<parameter name='tmp.consuming-service-instance-id' value='`$service-data.service-topology.service-topology-identifier.service-instance-id`' />\n","comments":"","x":512.8833923339844,"y":352.9667663574219,"z":"bc96058f.0be17","wires":[]},{"id":"237b9de9.473f7a","type":"get-resource","name":"get-resource vnfs","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='VNF-API' key='preload-vnfs' pfx='tmp.preloadvnfdata' >\n","comments":"","outputs":1,"x":781.1888732910156,"y":686.63330078125,"z":"bc96058f.0be17","wires":[[]]},{"id":"dc53e24a.603c38","type":"for","name":"for tmp.vnfs","xml":"<for index='vnfidx' start='0' end='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list_length`' >\n\n\n","comments":"","outputs":1,"x":753.0777587890625,"y":773.855712890625,"z":"bc96058f.0be17","wires":[["4ae6c68e.7a2a08"]]},{"id":"acf3fd29.776b08","type":"switchNode","name":"switch parameter name","xml":"<switch test='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].vnf-name == $tmp.brg-mac-address-match`'>\n\n\n","comments":"","outputs":1,"x":1063.0776062011719,"y":804.2444152832031,"z":"bc96058f.0be17","wires":[["f475d495.514cd"]]},{"id":"f475d495.514cd","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1221.7998352050781,"y":950.3833312988281,"z":"bc96058f.0be17","wires":[["de288eb6.69fc3"]]},{"id":"de288eb6.69fc3","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1136.8833312988281,"y":1410.3833312988281,"z":"bc96058f.0be17","wires":[["a6b3e3e9.90a84","dfa8d8c7.ea1108","5bbba697.75684","d86083dc.da76d","a38f37f9.e78618","b822a12f.b44248","68a4fb65.a2c4c4","a19da93c.73dc5","52ea6240.b2f2dc","7c3272df.84a3ac"]]},{"id":"36f176a8.742e0a","type":"comment","name":"vnfidx ","info":"","comments":"","x":1383.1332702636719,"y":824.1333618164062,"z":"bc96058f.0be17","wires":[]},{"id":"a6b3e3e9.90a84","type":"for","name":"for each vnf parameter copy to vf_module_parameter","xml":"<for index='preloadIdx' start='0' end='`$tmp.endLoop1`'>\n<!--\n\n     \"preload-data\": {\n          \"vnf-topology-information\": {\n            \"vnf-parameters\": [\n            \n            -->\n","comments":"","outputs":1,"x":1639.3832702636719,"y":1019.1333312988281,"z":"bc96058f.0be17","wires":[["140e457f.d81f6b"]]},{"id":"a69e097b.7c0ed8","type":"set","name":"set name/values","xml":"<set>\n<parameter name='tmp.vfmodule.param[$preloadIdx].name'  value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters[$preloadIdx].vnf-parameter-name`' />\n<parameter name='tmp.vfmodule.param[$preloadIdx].value' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters[$preloadIdx].vnf-parameter-value`' />","comments":"","x":2144.5223083496094,"y":1088.8555908203125,"z":"bc96058f.0be17","wires":[]},{"id":"d48c04fa.2c4798","type":"get-resource","name":"get-resource tunnelxcon-allotted-resources","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API'    \n         key='tunnelxconn-allotted-resources/' pfx='tmp.txconns' >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","comments":"","outputs":1,"x":561.2468872070312,"y":455.7015380859375,"z":"bc96058f.0be17","wires":[["12acbf73.3ab131"]]},{"id":"5b0bb137.e67718","type":"for","name":"for tmp.xconns.tunnelxconn-allotted-resoruces.tunnelxonn-alloted-resource[]","xml":"<for index='txidx' start='0' end='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource_length`' >\n\n\n","comments":"","outputs":1,"x":1032.3378295898438,"y":478.7923889160156,"z":"bc96058f.0be17","wires":[["34d79c6a.7822fc"]]},{"id":"e278c805.0d6108","type":"switchNode","name":"switch consuming-service-instance-id","xml":"<switch test='`$tmp.test1 == $tmp.consuming-service-instance-id`'>","comments":"","outputs":1,"x":1417.8833312988281,"y":610.6257019042969,"z":"bc96058f.0be17","wires":[["f19bb37c.7732c8"]]},{"id":"f19bb37c.7732c8","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1586.3833312988281,"y":680.9438781738281,"z":"bc96058f.0be17","wires":[["2ce4d935.c2c536"]]},{"id":"14ac448b.1e69bb","type":"set","name":"set thisIsVGW","xml":"<set>\n<parameter name='tmp.thisIsVGW' value='true' />\n","comments":"","x":1933.70166015625,"y":835.4288330078125,"z":"bc96058f.0be17","wires":[]},{"id":"624df7c1.860c6","type":"set","name":"set thisIsVGW false","xml":"<set>\n<parameter name='tmp.thisIsVGW' value='false' />\n","comments":"","x":481.7015075683594,"y":405.7015075683594,"z":"bc96058f.0be17","wires":[]},{"id":"882c4631.3dd488","type":"switchNode","name":"switch thsIsVGW","xml":"<switch test='`$tmp.thisIsVGW`'>\n","comments":"","outputs":1,"x":293.2469787597656,"y":514.2470397949219,"z":"bc96058f.0be17","wires":[["471004f2.b1042c","410482e7.5c2ae4"]]},{"id":"471004f2.b1042c","type":"other","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":315.97424038973713,"y":596.0651494806463,"z":"bc96058f.0be17","wires":[["18c6a218.701ff6"]]},{"id":"18c6a218.701ff6","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":497.5580749511719,"y":784.1770324707031,"z":"bc96058f.0be17","wires":[["237b9de9.473f7a","dc53e24a.603c38"]]},{"id":"4ae6c68e.7a2a08","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":853.5500793457031,"y":838.9945373535156,"z":"bc96058f.0be17","wires":[["acf3fd29.776b08","f1bf508c.bd629"]]},{"id":"34d79c6a.7822fc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1186.8833312988281,"y":542.3277893066406,"z":"bc96058f.0be17","wires":[["e278c805.0d6108","bb4386f8.ea48b8"]]},{"id":"140e457f.d81f6b","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1942.2999572753906,"y":1051.0778198242188,"z":"bc96058f.0be17","wires":[["a69e097b.7c0ed8"]]},{"id":"12acbf73.3ab131","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":646.5499979654946,"y":506.1055535210503,"z":"bc96058f.0be17","wires":[["5b0bb137.e67718"]]},{"id":"bb4386f8.ea48b8","type":"set","name":"set test consuming service id tunnelxconn-allotted-resource-identifiers.consuming-service-instance-id","xml":"<set>\n<parameter name='tmp.test1' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[$txidx].allotted-resource-data.tunnelxconn-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n<!--\nthis is null\n<parameter name='tmp.test2' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource-data[$txidx].tunnelxconn-topology[0].allotted-resource-identifiers[0].consuming-service-instance-id`' />\n-->","comments":"","x":1654.88330078125,"y":543.8832702636719,"z":"bc96058f.0be17","wires":[]},{"id":"f1bf508c.bd629","type":"set","name":"set test3","xml":"<set>\n<parameter name='tmp.test3' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].vnf-name`' />\n<parameter name='tmp.test4' value='`$tmp.brg-mac-address-match`'/>\n\n\n","comments":"","x":1014.8833312988281,"y":729.8833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"d86083dc.da76d","type":"set","name":"set length of for  endLoop1","xml":"<set>\n<parameter name='tmp.endLoop1' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters_length`' />","comments":"","x":1553.1333312988281,"y":945.3833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"a38f37f9.e78618","type":"set","name":"set vf-module-object-path","xml":"<set>\n<parameter name='tmp.vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $service-data.service-topology.service-topology-identifier.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id \n + '/'`\"/>\n","comments":"","x":1489.3833312988281,"y":1410.3833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"b822a12f.b44248","type":"set","name":"copy  vf-module-parameters","xml":"<set>\n<!--\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param.'\n\n                 service-data.vnfs.vnf\\[0\\].       vnf-data.vf-modules.vf-module\\[0\\]             .vf-module-data.vf-module-topology.vf-module-parameters.param.\n   value='$tmp.vfmodule.' />\n-->\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.'\n   value='$tmp.vfmodule.' />","comments":"","x":1526.8833923339844,"y":1816.1332702636719,"z":"bc96058f.0be17","wires":[]},{"id":"a429838.1a19f","type":"execute","name":"execute print context","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bdf-gw-vfmodule.log' />\n","comments":"","outputs":1,"x":1463.1333923339844,"y":1871.6332702636719,"z":"bc96058f.0be17","wires":[[]]},{"id":"68a4fb65.a2c4c4","type":"set","name":"set tmp.vfmodule.param_length","xml":"<set>\n<parameter name='tmp.vfmodule.param_length' value='`$tmp.endLoop1`' />\n","comments":"","x":1573.1335144042969,"y":1082.8833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"42e73536.d72f4c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n","comments":"","x":1214.3833312988281,"y":1630.3833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"a19da93c.73dc5","type":"for","name":"for paramIdx to set VNI","xml":"<for index='paramIdx' start='0' end='`$tmp.vfmodule.param_length`' >\n","comments":"","outputs":1,"x":1561.8833312988281,"y":1730.3833312988281,"z":"bc96058f.0be17","wires":[["7d547fc4.1adf08"]]},{"id":"82836bf9.38d2b","type":"switchNode","name":"switch parameter name vg-mux-tunnel-vni","xml":"<switch test='`$tmp.vfmodule.param[$paramIdx].name == $tmp.vg-mux-tunnel-vni-match`'>","comments":"","outputs":1,"x":2059.383331298828,"y":1799.1333312988281,"z":"bc96058f.0be17","wires":[["45b12bfc.a4b0c4"]]},{"id":"45b12bfc.a4b0c4","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2376.883331298828,"y":1826.6333312988281,"z":"bc96058f.0be17","wires":[["c13aaa81.4af1"]]},{"id":"c13aaa81.4af1","type":"set","name":"set vni in tmp.vfmodule.param","xml":"<set>\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.vg-vgmux-tunnel-vni`' />\n\n<!--\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vni`' />\n-->","comments":"","x":2589.383331298828,"y":1864.1333312988281,"z":"bc96058f.0be17","wires":[]},{"id":"7c3272df.84a3ac","type":"set","name":"set switch test string","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.vg-mux-tunnel-vni-match' value='vg_vgmux_tunnel_vni' />\n<parameter name='tmp.vg-lan-ip-match' value='vgw_private_ip_0' />\n\n\n\n\n","comments":"","x":1551.8833312988281,"y":1680.3833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"7d547fc4.1adf08","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1768.1333312988281,"y":1725.3833312988281,"z":"bc96058f.0be17","wires":[["82836bf9.38d2b","3a91d5b1.ed18e2"]]},{"id":"93a3aef6.595498","type":"set","name":"set to see tmpvfmodule.param[].name","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.test.param[$paramIdx].name' value='`$tmp.vfmodule.param[$paramIdx].name`' />\n\n\n\n","comments":"","x":2046.8833923339844,"y":1717.8833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"32d9e6bc.6b7b1a","type":"comment","name":"let md-sal helper save data so no need for the RESTAPICAll Node","info":"","comments":"","x":1559.3832397460938,"y":1970.3833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"255c43c1.03152c","type":"comment","name":" using path from calling DG - these nodes for testing","info":"","comments":"","x":2041.8833312988281,"y":1421.6333312988281,"z":"bc96058f.0be17","wires":[]},{"id":"d31c84e2.95ef98","type":"set","name":"set MACADDRESS fa:16:3e:8f:ea:68 ","xml":"<set>\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n\n","comments":"","x":538.88330078125,"y":253.88333129882812,"z":"bc96058f.0be17","wires":[]},{"id":"90adc253.a591d","type":"set","name":"set VGW2BRG-MACADDRESs & consuming service-instance","xml":"<set>\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n<parameter name='tmp.consuming-service-instance-id' value='`$service-data.service-topology.service-topology-identifier.service-instance-id`' />\n\n<!--\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n-->\n<!--\n<parameter name='tmp.consuming-service-instance-id' value='b3cb7040-f7a5-4beb-ad2f-2a893b7d374b' />\nservice-data.service-topology.service-topology-identifier.service-instance-id\n\n-->\n","comments":"","x":2075.88330078125,"y":726.88330078125,"z":"bc96058f.0be17","wires":[]},{"id":"2ce4d935.c2c536","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1731.8833312988281,"y":710.8833312988281,"z":"bc96058f.0be17","wires":[["14ac448b.1e69bb","90adc253.a591d","c883d2d4.0b377","7e472b82.55e40c"]]},{"id":"c883d2d4.0b377","type":"set","name":"set MACADDRESS tmp.txconcs...brg-wan-mac-address","xml":"<set>\n<parameter name='tmp.brg-macaddress' \n      value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.allotted-resource-operation-information.tunnelxconn-request-input.brg-wan-mac-address`' />\n\n","comments":"","x":2049.883331298828,"y":664.8833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"410482e7.5c2ae4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":255.88333129882812,"y":754.8833312988281,"z":"bc96058f.0be17","wires":[["c0e9ce09.8d6c28"]]},{"id":"90cc4165.e57f28","type":"returnFailure","name":"return failure Did not find vGW Preload","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Did not find vGW Preload' />\n","comments":"","x":513.8833312988281,"y":920.8833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"c0e9ce09.8d6c28","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":267.8833312988281,"y":832.8833312988281,"z":"bc96058f.0be17","wires":[["90cc4165.e57f28"]]},{"id":"ffcaa277.9c9268","type":"execute","name":"execute print context","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bdf-gw-vfmodule.failure.log' />\n","comments":"","outputs":1,"x":463.8833312988281,"y":869.8833312988281,"z":"bc96058f.0be17","wires":[[]]},{"id":"3a91d5b1.ed18e2","type":"switchNode","name":"switch parameter name vg-mux-tunnel-vni","xml":"<switch test='`$tmp.vfmodule.param[$paramIdx].name == $tmp.vg-lan-ip-match`'>","comments":"","outputs":1,"x":2052.883331298828,"y":1863.8833312988281,"z":"bc96058f.0be17","wires":[["84f06b0c.c3c108"]]},{"id":"84f06b0c.c3c108","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2370.383331298828,"y":1891.3833312988281,"z":"bc96058f.0be17","wires":[["646b48f6.2f6d28"]]},{"id":"646b48f6.2f6d28","type":"set","name":"set lan-ip[ in tmp.vfmodule.param","xml":"<set>\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.vg-ip`' />\n<!--\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vg-ip`' />\n-->","comments":"","x":2582.883331298828,"y":1928.8833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"5231bd00.7e3c04","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n","comments":"","x":1804.8833312988281,"y":1865.8833312988281,"z":"bc96058f.0be17","wires":[]},{"id":"7e472b82.55e40c","type":"set","name":"set VNI and VG-IP","xml":"<set>\n<parameter name='tmp.vg-vgmux-tunnel-vni' \n    value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[$txidx].allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vni`' />\n<parameter name='tmp.vg-ip' \n    value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[$txidx].allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vg-ip`' />\n","comments":"","x":1941.716796875,"y":785.88330078125,"z":"bc96058f.0be17","wires":[]}]