[{"id":"478463f2.df6acc","type":"switchNode","name":"switch request-action","xml":"<switch test='`$service-topology-operation-input.request-information.request-action`'>\n","comments":"","outputs":1,"x":474.2857360839844,"y":311.4285888671875,"z":"7c29bc30.d765f4","wires":[["6a903bca.fe0bc4","15a624e5.c765ab"]]},{"id":"6a903bca.fe0bc4","type":"outcome","name":"DeleteServiceInstance","xml":"<outcome value='DeleteServiceInstance'>\n","comments":"","outputs":1,"x":711.4285507202148,"y":285.7142972946167,"z":"7c29bc30.d765f4","wires":[["ee5fd97d.592188"]]},{"id":"15a624e5.c765ab","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":661.4285163879395,"y":331.4286251068115,"z":"7c29bc30.d765f4","wires":[["53deb4ea.0abeac"]]},{"id":"ee5fd97d.592188","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":890.0000076293945,"y":285.7143325805664,"z":"7c29bc30.d765f4","wires":[[]]},{"id":"53deb4ea.0abeac","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'delete' then request-action must be 'DeleteServiceInstance'\" />\n","comments":"","x":907.1428527832031,"y":331.4285888671875,"z":"7c29bc30.d765f4","wires":[]},{"id":"aef46672.32e008","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":169.99998474121094,"y":639.9999740123749,"z":"7c29bc30.d765f4","wires":[["478463f2.df6acc","68858bf1.c01af4","d0da9c0a.17ef8","b92a5b71.d162a8","259c5f9d.50c88","1695e7ba.b35d28","c99ede40.d4217","892c2ebc.f2f41","defd6c35.e8fab"]]},{"id":"68858bf1.c01af4","type":"switchNode","name":"switch network_length","xml":"<switch test='`$service-data.networks.network_length`'>\n","comments":"","outputs":1,"x":475.7142868041992,"y":501.42855167388916,"z":"7c29bc30.d765f4","wires":[["4cd10559.b0cb6c","6fa72ddd.b467e4","da4bcbd2.83ceb8"]]},{"id":"4cd10559.b0cb6c","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":659.9999465942383,"y":459.99991035461426,"z":"7c29bc30.d765f4","wires":[["4ceb25ac.f6bd4c"]]},{"id":"6fa72ddd.b467e4","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":658.5713577270508,"y":501.42856788635254,"z":"7c29bc30.d765f4","wires":[["4ceb25ac.f6bd4c"]]},{"id":"4ceb25ac.f6bd4c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":807.1428718566895,"y":481.42856884002686,"z":"7c29bc30.d765f4","wires":[[]]},{"id":"da4bcbd2.83ceb8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":658.5714073181152,"y":542.8571557998657,"z":"7c29bc30.d765f4","wires":[["a8c29d46.4823a"]]},{"id":"a8c29d46.4823a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete the service because there are networks defined\" />\n","comments":"","x":825.7143020629883,"y":541.4285440444946,"z":"7c29bc30.d765f4","wires":[]},{"id":"d0da9c0a.17ef8","type":"switchNode","name":"switch vnf_length","xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n","comments":"","outputs":1,"x":464.28572845458984,"y":628.5713357925415,"z":"7c29bc30.d765f4","wires":[["ecf76781.cbaeb8","c9a4b953.c3df58","296eb244.ba1b6e"]]},{"id":"ecf76781.cbaeb8","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":657.1427841186523,"y":587.1427249908447,"z":"7c29bc30.d765f4","wires":[["d6f93db.83137c"]]},{"id":"c9a4b953.c3df58","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":655.7141952514648,"y":628.571382522583,"z":"7c29bc30.d765f4","wires":[["d6f93db.83137c"]]},{"id":"d6f93db.83137c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":804.2857093811035,"y":608.5713834762573,"z":"7c29bc30.d765f4","wires":[[]]},{"id":"296eb244.ba1b6e","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":655.7142448425293,"y":669.9999704360962,"z":"7c29bc30.d765f4","wires":[["8a884ea5.ec393"]]},{"id":"8a884ea5.ec393","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete the service because there are VNFs defined\" />\n","comments":"","x":822.8571395874023,"y":668.5713586807251,"z":"7c29bc30.d765f4","wires":[]},{"id":"b92a5b71.d162a8","type":"set","name":"clear service-data and service-status","xml":"<set>\n<parameter name='service-data.' value='' />\n<parameter name='service-status.' value='' />\n","comments":"","x":517.142936706543,"y":1061.9048373699188,"z":"7c29bc30.d765f4","wires":[]},{"id":"9e32e2cd.2f93f","type":"dgstart","name":"DGSTART","outputs":1,"x":102.38098907470703,"y":81.66665744781494,"z":"7c29bc30.d765f4","wires":[["fe0ea62e.59c648"]]},{"id":"fe0ea62e.59c648","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":216.23812866210938,"y":123.33334136009216,"z":"7c29bc30.d765f4","wires":[["799e4a2f.a2d2e4"]]},{"id":"799e4a2f.a2d2e4","type":"method","name":"method service-topology-operation-delete","xml":"<method rpc='service-topology-operation-delete' mode='sync'>\n","comments":"","outputs":1,"x":202.5239028930664,"y":164.5237967967987,"z":"7c29bc30.d765f4","wires":[["aef46672.32e008"]]},{"id":"21b88544.c785ba","type":"comment","name":"service-topology-operation-delete","info":"","comments":"","x":496.72584533691406,"y":29.25300121307373,"z":"7c29bc30.d765f4","wires":[]},{"id":"259c5f9d.50c88","type":"switchNode","name":"switch service-data.service-topology.service-topology-identifier.service-instance-id","xml":"<switch test='`$service-data.service-topology.service-topology-identifier.service-instance-id`'>\n","comments":"","outputs":1,"x":666.1904983520508,"y":239.52381801605225,"z":"7c29bc30.d765f4","wires":[["e29856c8.930a48"]]},{"id":"e29856c8.930a48","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1037.6191177368164,"y":239.5238344669342,"z":"7c29bc30.d765f4","wires":[["34341e27.4dbad2"]]},{"id":"1d1760c1.03d87f","type":"switchNode","name":"switch service-data.service-level-oper-status.order-status","xml":"<switch test='`$service-data.service-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":586.1904907226562,"y":395.23810863494873,"z":"7c29bc30.d765f4","wires":[["28371aab.9efba6","29a52a3a.2e43b6"]]},{"id":"28371aab.9efba6","type":"outcome","name":"PendingDelete","xml":"<outcome value='PendingDelete'>\n","comments":"","outputs":1,"x":907.6190512520925,"y":379.52380793435236,"z":"7c29bc30.d765f4","wires":[["35f0b1e7.1a890e"]]},{"id":"29a52a3a.2e43b6","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":881.9047584533691,"y":423.8095369338989,"z":"7c29bc30.d765f4","wires":[["49ade992.379b48"]]},{"id":"49ade992.379b48","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Order status is ' + $service-data.service-level-oper-status.order-status\n       + ' but must be PendingDelete'`\" />\n","comments":"","x":1081.904800415039,"y":422.3809595108032,"z":"7c29bc30.d765f4","wires":[]},{"id":"35f0b1e7.1a890e","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1084.761978149414,"y":378.095253944397,"z":"7c29bc30.d765f4","wires":[[]]},{"id":"1695e7ba.b35d28","type":"switchNode","name":"switch provided-allotted-resource length","xml":"<switch test='`$service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n","comments":"","outputs":1,"x":530.7143096923828,"y":754.999927520752,"z":"7c29bc30.d765f4","wires":[["bfa901c7.15423","f2c37277.09bbc","e598c481.9b2198"]]},{"id":"bfa901c7.15423","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":772.380802154541,"y":754.9999074935913,"z":"7c29bc30.d765f4","wires":[["7a223dc8.1e6394"]]},{"id":"f2c37277.09bbc","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":772.3808250427246,"y":796.666615486145,"z":"7c29bc30.d765f4","wires":[["8d60d37d.d73d7"]]},{"id":"8d60d37d.d73d7","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot deactivate this service because there are provided allotted resources\" />\n","comments":"","x":920.714225769043,"y":796.6665353775024,"z":"7c29bc30.d765f4","wires":[]},{"id":"7a223dc8.1e6394","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":902.3808288574219,"y":733.3332815170288,"z":"7c29bc30.d765f4","wires":[[]]},{"id":"c99ede40.d4217","type":"switchNode","name":"switch consumed-allotted-resource length","xml":"<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n","comments":"","outputs":1,"x":535.7142791748047,"y":878.3332653045654,"z":"7c29bc30.d765f4","wires":[["731f21d2.cec17","aa38afff.d1e8e","3ae07b30.2e4444"]]},{"id":"731f21d2.cec17","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":770.7141189575195,"y":878.3332443237305,"z":"7c29bc30.d765f4","wires":[["5628499e.e4eda8"]]},{"id":"aa38afff.d1e8e","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":770.7141571044922,"y":918.3332662582397,"z":"7c29bc30.d765f4","wires":[["b08801cb.37837"]]},{"id":"b08801cb.37837","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot deactivate this service because there are consumed allotted resources\" />\n","comments":"","x":920.7141647338867,"y":919.999852180481,"z":"7c29bc30.d765f4","wires":[]},{"id":"5628499e.e4eda8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":899.0474548339844,"y":854.9999303817749,"z":"7c29bc30.d765f4","wires":[[]]},{"id":"e598c481.9b2198","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":774.0475616455078,"y":713.333291053772,"z":"7c29bc30.d765f4","wires":[["7a223dc8.1e6394"]]},{"id":"3ae07b30.2e4444","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":772.3808631896973,"y":838.3333044052124,"z":"7c29bc30.d765f4","wires":[["5628499e.e4eda8"]]},{"id":"34341e27.4dbad2","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"`'Service ' + $service-topology-operation-input.service-information.service-instance-id + ' is not found'`\" />\n","comments":"","x":1189.0476303100586,"y":239.99997997283936,"z":"7c29bc30.d765f4","wires":[]},{"id":"defd6c35.e8fab","type":"call","name":"call GENERIC-RESOURCE-API:naming-policy-generate-name","xml":"<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n","comments":"","outputs":1,"x":601.4285583496094,"y":1015.8245198726654,"z":"7c29bc30.d765f4","wires":[[]]},{"id":"892c2ebc.f2f41","type":"set","name":"set variables for deleting name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.naming-type' value='SERVICE' />\n<parameter name='naming-policy-generate-name-input.context-id' value='`$service-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='naming-policy-generate-name-input.query-parameter' value='`$service-data.service-topology.onap-model-information.model-uuid`' />\n<parameter name='naming-policy-generate-name-input.action' value='DELETE' />\n","comments":"","x":502.857177734375,"y":968.681590795517,"z":"7c29bc30.d765f4","wires":[]},{"id":"3511dc91.30aac4","type":"comment","name":"check removed with US622450","info":"","comments":"","x":334.28570556640625,"y":357.1428680419922,"z":"7c29bc30.d765f4","wires":[]}]