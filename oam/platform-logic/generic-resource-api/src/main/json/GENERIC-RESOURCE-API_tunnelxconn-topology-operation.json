[{"id":"c5997008.353ab8","type":"dgstart","name":"DGSTART","outputs":1,"x":142,"y":105.41365623474121,"z":"8e01e90d.03c0b8","wires":[["abdbe8b6.e08a78"]]},{"id":"abdbe8b6.e08a78","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":220.61902618408203,"y":145.6517686843872,"z":"8e01e90d.03c0b8","wires":[["e8a7f372.22de48"]]},{"id":"e8a7f372.22de48","type":"method","name":"tunnelxconn-topology-operation","xml":"<method rpc='tunnelxconn-topology-operation' mode='sync'>\n","comments":"","outputs":1,"x":205.09529876708984,"y":205.41365432739258,"z":"8e01e90d.03c0b8","wires":[["e6702a55.7cc68"]]},{"id":"9720859a.3c0db8","type":"comment","name":"TUNNELXCONN-TOPOLOGY-OPERATION ","info":"","comments":"","x":533.0115203857422,"y":53,"z":"8e01e90d.03c0b8","wires":[]},{"id":"e6702a55.7cc68","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":258.3810043334961,"y":288.85711574554443,"z":"8e01e90d.03c0b8","wires":[["ebc169f5.8ce6c","40354611.158cb8","28ec1192.5202fe","13fd24ca.9b546b"]]},{"id":"ebc169f5.8ce6c","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":482.7500534057617,"y":892.6997756958008,"z":"8e01e90d.03c0b8","wires":[]},{"id":"40354611.158cb8","type":"switchNode","name":"switch svc-action","xml":"<switch test='`$tunnelxconn-topology-operation-input.sdnc-request-header.svc-action`'>\n","comments":"","outputs":1,"x":479.3809280395508,"y":499.2708339691162,"z":"8e01e90d.03c0b8","wires":[["e110537f.9e824","a004aa52.e35ad8","c9089335.4b04a","b3ca7c02.e6d98","7444ae44.dcba3","48fe654.5987c1c","960a1a9f.a78d88"]]},{"id":"e110537f.9e824","type":"other","name":"assign","xml":"<outcome value='assign'>\n","comments":"","outputs":1,"x":701.2857551574707,"y":360.1279149055481,"z":"8e01e90d.03c0b8","wires":[["99909182.dd328"]]},{"id":"99909182.dd328","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":881.0952835083008,"y":362.5566062927246,"z":"8e01e90d.03c0b8","wires":[["e1de8938.61cb48"]]},{"id":"28ec1192.5202fe","type":"call","name":"call GENERIC-RESOURCE-API:validate-tunnelxconn-input","xml":"<call module='GENERIC-RESOURCE-API' rpc='validate-tunnelxconn-input' mode='sync' >\n","comments":"","outputs":1,"x":613.9523544311523,"y":280.842248916626,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"e1de8938.61cb48","type":"call","name":"call GENERIC-RESOURCE-API:tunnelxconn-topology-operation-assign","xml":"<call module='GENERIC-RESOURCE-API' rpc='tunnelxconn-topology-operation-assign' mode='sync' >\n","comments":"","outputs":1,"x":1252.6665802001953,"y":362.4136619567871,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"a004aa52.e35ad8","type":"other","name":"activate","xml":"<outcome value='activate'>\n","comments":"","outputs":1,"x":701.6666641235352,"y":449.4136562347412,"z":"8e01e90d.03c0b8","wires":[["cc6a8db0.4795b"]]},{"id":"cc6a8db0.4795b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":885.9048233032227,"y":450.4137783050537,"z":"8e01e90d.03c0b8","wires":[["7c9f0c5c.511f44"]]},{"id":"bee54d8b.c96af8","type":"call","name":"call GENERIC-RESOURCE-API:network-topology-operation-activate","xml":"<call module='GENERIC-RESOURCE-API' rpc='network-topology-operation-activate' mode='sync' >\n","comments":"","outputs":1,"x":1818.476342519125,"y":1425.6041316986084,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"c9089335.4b04a","type":"other","name":"deactivate","xml":"<outcome value='deactivate'>\n","comments":"","outputs":1,"x":710.6667041778564,"y":509.4137144088745,"z":"8e01e90d.03c0b8","wires":[["4a034527.24b8dc"]]},{"id":"4a034527.24b8dc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":891.904863357544,"y":510.413836479187,"z":"8e01e90d.03c0b8","wires":[["a75e1598.4bbc68"]]},{"id":"9b4b1506.0bc638","type":"call","name":"call GENERIC-RESOURCE-API:network-topology-operation-deactivate","xml":"<call module='GENERIC-RESOURCE-API' rpc='network-topology-operation-deactivate' mode='sync' >\n","comments":"","outputs":1,"x":1824.9762509663906,"y":1541.3541316986084,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"b3ca7c02.e6d98","type":"other","name":"unassign","xml":"<outcome value='unassign'>\n","comments":"","outputs":1,"x":708.66672706604,"y":627.7470541000366,"z":"8e01e90d.03c0b8","wires":[["a7efa285.145ec"]]},{"id":"a7efa285.145ec","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":889.9048862457275,"y":628.7471761703491,"z":"8e01e90d.03c0b8","wires":[["a354a8f7.f115e8"]]},{"id":"e6bc3249.9ad08","type":"call","name":"call GENERIC-RESOURCE-API:network-topology-operation-unassign","xml":"<call module='GENERIC-RESOURCE-API' rpc='network-topology-operation-unassign' mode='sync' >\n","comments":"","outputs":1,"x":1831.7262509663906,"y":1654.1041316986084,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"7444ae44.dcba3","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":708.000057220459,"y":687.7470369338989,"z":"8e01e90d.03c0b8","wires":[["aa7590e9.9ce35"]]},{"id":"aa7590e9.9ce35","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"sdnc-request-header.svc-action is a required input\" />\n","comments":"","x":890.0000534057617,"y":686.7470464706421,"z":"8e01e90d.03c0b8","wires":[]},{"id":"13fd24ca.9b546b","type":"set","name":"Set final indicator to Y","xml":"<set>\n<parameter name=\"ack-final\" value=\"Y\"/>","comments":"","x":501.77774810791016,"y":851.8581142425537,"z":"8e01e90d.03c0b8","wires":[]},{"id":"f542bb16.4aae08","type":"for","name":"for nidx..service-data.networks.network[]","xml":"<for index='nidx' start='0' end='`$service-data.networks.network_length`' >\n","comments":"","outputs":1,"x":1720.3971341451015,"y":1319.5088863372803,"z":"8e01e90d.03c0b8","wires":[["f85cf710.908598"]]},{"id":"85d25a09.13b6e8","type":"switchNode","name":"switch service-data.networks.network_length","xml":"<switch test='`$service-data.networks.network_length`'>\n","comments":"","outputs":1,"x":1054.1112302144375,"y":1284.0802669525146,"z":"8e01e90d.03c0b8","wires":[["ed7dceb2.521af8","442e7a57.919cb4"]]},{"id":"ed7dceb2.521af8","type":"other","name":"outcome Null","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1297.1111691792812,"y":1286.0802764892578,"z":"8e01e90d.03c0b8","wires":[["16baa510.6202ab"]]},{"id":"442e7a57.919cb4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1251.1111996968593,"y":1319.0802974700928,"z":"8e01e90d.03c0b8","wires":[["3d31b074.5214c8"]]},{"id":"f85cf710.908598","type":"switchNode","name":"switch networkid found","xml":"<switch test=\"`$service-data.networks.network[$nidx].network-id == $network-topology-operation-input.network-information.network-id`\">\n\n","comments":"","outputs":1,"x":2010.8256848653164,"y":1318.7589702606201,"z":"8e01e90d.03c0b8","wires":[["487f872a.c5f14"]]},{"id":"487f872a.c5f14","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2199.7780392964687,"y":1319.6517086029053,"z":"8e01e90d.03c0b8","wires":[["4fb275ff.c6b394"]]},{"id":"4fb275ff.c6b394","type":"set","name":"set tmp.nidx and ctx.network-data","xml":"<set>\n<parameter name='tmp.nidx' value='`$nidx`' />\n<parameter name='ctx.network-data.' value='`$service-data.networks.network[$nidx].`' />\n","comments":"","x":2433.309808095297,"y":1318.4017162322998,"z":"8e01e90d.03c0b8","wires":[]},{"id":"fc9c1eb8.d3fa38","type":"comment","name":"Find the index to service data for this network - save id in tmp.nidx, save service-data","info":"","comments":"","x":1177.2223141988125,"y":1253.0802898406982,"z":"8e01e90d.03c0b8","wires":[]},{"id":"16baa510.6202ab","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"network-topology-operation-input.network-request-input.network-id not found in service-data\" />\n","comments":"","x":1488.888726552328,"y":1283.969274520874,"z":"8e01e90d.03c0b8","wires":[]},{"id":"3d31b074.5214c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1418.3811658223476,"y":1318.634874343872,"z":"8e01e90d.03c0b8","wires":[["f542bb16.4aae08","9e52b270.218af"]]},{"id":"9e52b270.218af","type":"switchNode","name":"switch tmp.nidx ","xml":"<switch test=\"`$tmp.nidx`\">\n\n","comments":"","outputs":1,"x":1638.6985638936367,"y":1361.4920930862427,"z":"8e01e90d.03c0b8","wires":[["ce4359ae.149468"]]},{"id":"e5ac1296.05ba08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"network-topology-operation-input.network-request-input.network-id not found in service-data\" />\n","comments":"","x":1991.5555470784511,"y":1357.206335067749,"z":"8e01e90d.03c0b8","wires":[]},{"id":"ce4359ae.149468","type":"outcome","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1810.1270993550625,"y":1360.0634784698486,"z":"8e01e90d.03c0b8","wires":[["e5ac1296.05ba08"]]},{"id":"bf493b0c.b8abe8","type":"switchNode","name":"switch network-level-oper-status","xml":"<switch test='`$service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":1031.4445737202968,"y":1425.5555324554443,"z":"8e01e90d.03c0b8","wires":[["e4c98358.a498f","e02cb11a.413f08"]]},{"id":"e4c98358.a498f","type":"outcome","name":"outcome PendingCreate","xml":"<outcome value='PendingCreate'>\n","comments":"","outputs":1,"x":1396.4445533752441,"y":1425.5555171966553,"z":"8e01e90d.03c0b8","wires":[["bee54d8b.c96af8"]]},{"id":"e02cb11a.413f08","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1346.4446004231777,"y":1465.5555477142334,"z":"8e01e90d.03c0b8","wires":[["d11487a6.be8bb"]]},{"id":"d11487a6.be8bb","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Network is not in appropriate state for activate. Current state is ' + $service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`\" />","comments":"","x":1516.4446004231777,"y":1465.5555477142334,"z":"8e01e90d.03c0b8","wires":[]},{"id":"c4b0149b.1a41e8","type":"switchNode","name":"switch network-level-oper-status","xml":"<switch test='`$service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":1038.7460568745937,"y":1541.5069332122803,"z":"8e01e90d.03c0b8","wires":[["458164ed.c9b604","d8c82fb0.7de7"]]},{"id":"458164ed.c9b604","type":"outcome","name":"outcome Created","xml":"<outcome value='Created'>\n","comments":"","outputs":1,"x":1401.7460263570156,"y":1541.5069637298584,"z":"8e01e90d.03c0b8","wires":[["9b4b1506.0bc638"]]},{"id":"d8c82fb0.7de7","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1371.7460263570156,"y":1581.5069637298584,"z":"8e01e90d.03c0b8","wires":[["13499f5e.55e829"]]},{"id":"13499f5e.55e829","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Network is not in appropriate state for deactivate. Current state is ' + $service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`\" />","comments":"","x":1537.7460263570156,"y":1583.5069637298584,"z":"8e01e90d.03c0b8","wires":[]},{"id":"8187a730.57d898","type":"switchNode","name":"switch network-level-oper-status","xml":"<switch test='`$service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":1038.547631581625,"y":1655.7083339691162,"z":"8e01e90d.03c0b8","wires":[["62333e98.d8c27","7876a952.19927","23245147.748e96"]]},{"id":"62333e98.d8c27","type":"outcome","name":"outcome PendingCreate","xml":"<outcome value='PendingCreate'>\n","comments":"","outputs":1,"x":1398.5476010640468,"y":1655.7083644866943,"z":"8e01e90d.03c0b8","wires":[["e6bc3249.9ad08"]]},{"id":"7876a952.19927","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1355.5475400288906,"y":1739.7083797454834,"z":"8e01e90d.03c0b8","wires":[["d2c3c856.cce988"]]},{"id":"d2c3c856.cce988","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Network is not in appropriate state for unassign. Current state is ' + $service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status`\" />","comments":"","x":1546.8809598286953,"y":1738.3750085830688,"z":"8e01e90d.03c0b8","wires":[]},{"id":"23245147.748e96","type":"outcome","name":"outcome PendingDelete","xml":"<outcome value='PendingDelete'>\n","comments":"","outputs":1,"x":1401.7778256734218,"y":1693.5555324554443,"z":"8e01e90d.03c0b8","wires":[["e6bc3249.9ad08"]]},{"id":"48fe654.5987c1c","type":"other","name":"create","xml":"<outcome value='create'>\n","comments":"","outputs":1,"x":706.9073715209961,"y":409.018497467041,"z":"8e01e90d.03c0b8","wires":[["8d784915.6f5648"]]},{"id":"8d784915.6f5648","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":888.1455307006836,"y":410.0186195373535,"z":"8e01e90d.03c0b8","wires":[["9d556b65.dd26f"]]},{"id":"9d556b65.dd26f","type":"call","name":"call GENERIC-RESOURCE-API:tunnelxconn-topology-operation-create","xml":"<call module='GENERIC-RESOURCE-API' rpc='tunnelxconn-topology-operation-create' mode='sync' >\n","comments":"","outputs":1,"x":1254.0502395629883,"y":409.5423412322998,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"960a1a9f.a78d88","type":"other","name":"delete","xml":"<outcome value='delete'>\n","comments":"","outputs":1,"x":705.2407245635986,"y":570.6851568222046,"z":"8e01e90d.03c0b8","wires":[["6c2ddc48.2fd9b4"]]},{"id":"6c2ddc48.2fd9b4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":886.4788837432861,"y":571.6852788925171,"z":"8e01e90d.03c0b8","wires":[["5ed8a66f.8fdf3"]]},{"id":"a75e1598.4bbc68","type":"call","name":"call GENERIC-RESOURCE-API:tunnelxconn-topology-operation-deactivate","xml":"<call module='GENERIC-RESOURCE-API' rpc='tunnelxconn-topology-operation-deactivate' mode='sync' >\n","comments":"","outputs":1,"x":1273.8147811889648,"y":509.8951950073242,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"5ed8a66f.8fdf3","type":"call","name":"call GENERIC-RESOURCE-API:tunnelxconn-topology-operation-delete","xml":"<call module='GENERIC-RESOURCE-API' rpc='tunnelxconn-topology-operation-delete' mode='sync' >\n","comments":"","outputs":1,"x":1263.4816303253174,"y":571.5618238449097,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"a354a8f7.f115e8","type":"call","name":"call GENERIC-RESOURCE-API:tunnelxconn-topology-operation-unassign","xml":"<call module='GENERIC-RESOURCE-API' rpc='tunnelxconn-topology-operation-unassign' mode='sync' >\n","comments":"","outputs":1,"x":1269.1481342315674,"y":628.8951501846313,"z":"8e01e90d.03c0b8","wires":[[]]},{"id":"7c9f0c5c.511f44","type":"call","name":"call GENERIC-RESOURCE-API:tunnelxconn-topology-operation-activate","xml":"<call module='GENERIC-RESOURCE-API' rpc='tunnelxconn-topology-operation-activate' mode='sync' >\n","comments":"","outputs":1,"x":1263.4814682006836,"y":450.8951168060303,"z":"8e01e90d.03c0b8","wires":[[]]}]
