[{"id":"c7e145ff.4a2448","type":"dgstart","name":"DGSTART","outputs":1,"x":117.14286041259766,"y":78.12794303894043,"z":"f8623c76.ed22f","wires":[["4d645b04.22fa54"]]},{"id":"4d645b04.22fa54","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":230.4285659790039,"y":118.36605453491211,"z":"f8623c76.ed22f","wires":[["8e54a82b.88a9a8"]]},{"id":"8e54a82b.88a9a8","type":"method","name":"method vf-module-topology-vlan-tagging-activate","xml":"<method rpc='vf-module-topology-vlan-tagging-activate' mode='sync'>\n","comments":"","outputs":1,"x":240.2381591796875,"y":159.79461288452148,"z":"f8623c76.ed22f","wires":[["128f0aa3.631805"]]},{"id":"23993fe5.d3beb","type":"comment","name":"vf-module-topology-vlan-tagging-activate","info":"","comments":"","x":511.4877166748047,"y":25.71428680419922,"z":"f8623c76.ed22f","wires":[]},{"id":"128f0aa3.631805","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":217.0713119506836,"y":441.8091812133789,"z":"f8623c76.ed22f","wires":[["4de83b3e.7339e4","314c4136.fad54e","994f5fb2.d428e","bfec4006.e78cc","3f5e80f8.43f3d"]]},{"id":"1bd3656.2bf729b","type":"save","name":"custom query: get network data","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n      resource=\"custom-query\"\n      key=\"format = 'resource'\"\n      force=\"true\"\n      local-only=\"false\"\n      pfx=\"tmp.aai.network\">\n      <parameter name=\"start[0]\" value=\"`'/cloud-infrastructure/cloud-regions/cloud-region/' + $prop.cloud-region.cloud-owner + '/' + $tmp.cloud-region-id`\" />\n      <parameter name=\"start_length\" value=\"1\" /> \n      <parameter name=\"query\" value=\"`'/query/network-name-fromNetwork-role?networkRole='  + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].parent-port-role`\" /> \n","comments":"","outputs":1,"x":1313.499927520752,"y":911.5710401535034,"z":"f8623c76.ed22f","wires":[["94461ef4.7a565","4d42768a.5be4e8"]]},{"id":"4de83b3e.7339e4","type":"set","name":"copy data to tmp.vlan-vnfc-instance-groups.","xml":"<set>\n<parameter name='tmp.vlan-vnfc-instance-groups.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vlan-vnfc-instance-groups.`' />\n","comments":"","x":567.7855682373047,"y":415.1425132751465,"z":"f8623c76.ed22f","wires":[]},{"id":"314c4136.fad54e","type":"for","name":"for each vlan-vnfc-instance-group","xml":"<for index='vvig-index' start='0' end='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group_length`' >\n","comments":"","outputs":1,"x":535.1665649414062,"y":565.380690574646,"z":"f8623c76.ed22f","wires":[["bc7425fd.85f968"]]},{"id":"ea000c2b.93031","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1077.547607421875,"y":891.3329725265503,"z":"f8623c76.ed22f","wires":[["82881598.cb97f8","480bafe1.fdbc1","1525986d.5a8cd8","5fd8515d.3ee35","db226bb9.e68798","1bd3656.2bf729b","3bcd4a19.f3bd46","e25841f.c6162c","fa1a8ecb.b1f77","b4588ad2.5d2198","f1a8d7b0.c91308"]]},{"id":"82881598.cb97f8","type":"switchNode","name":"switch vnf-sub-interface-groups_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group_length`'>\n","comments":"","outputs":1,"x":1343.7381286621094,"y":546.8091764450073,"z":"f8623c76.ed22f","wires":[["d09111f.8af6ef"]]},{"id":"d09111f.8af6ef","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1572.3096389770508,"y":545.3806657791138,"z":"f8623c76.ed22f","wires":[["d38a1148.34416"]]},{"id":"d38a1148.34416","type":"set","name":"set vnf-sub-interface-groups_length to 0","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group_length'\n  value='0' />\n","comments":"","x":1809.452407836914,"y":545.3805799484253,"z":"f8623c76.ed22f","wires":[]},{"id":"924e996c.d0bb48","type":"set","name":"set vsig-index to the last entry","xml":"<set>\n<parameter name='vsig-index'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group_length`' />\n","comments":"","x":1758.9762649536133,"y":746.9044075012207,"z":"f8623c76.ed22f","wires":[]},{"id":"bc7425fd.85f968","type":"switchNode","name":"switch vnfc_length","xml":"<switch test='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc_length`'>\n","comments":"","outputs":1,"x":778.0236701965332,"y":563.9521369934082,"z":"f8623c76.ed22f","wires":[["abb1fcfc.281d2","1de529d8.736ff6","26174c8d.8d4ce4"]]},{"id":"abb1fcfc.281d2","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":947.0713443756104,"y":522.9997215270996,"z":"f8623c76.ed22f","wires":[["af404756.1502e8"]]},{"id":"1de529d8.736ff6","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":947.0712356567383,"y":568.7139835357666,"z":"f8623c76.ed22f","wires":[["af404756.1502e8"]]},{"id":"26174c8d.8d4ce4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":928.9761123657227,"y":891.3331460952759,"z":"f8623c76.ed22f","wires":[["ea000c2b.93031"]]},{"id":"af404756.1502e8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1071.35693359375,"y":544.428243637085,"z":"f8623c76.ed22f","wires":[[]]},{"id":"9e16e25c.b3dbd","type":"set","name":"set vnf-sub-interface-groups data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].parent-port-role'\n  value='`$parent-port-role`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfc-instance-group-function'\n  value='`$vnfc-instance-group-function`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].network-instance-group-function'\n  value='`$network-instance-group-function`' />\n","comments":"","x":1765.8808135986328,"y":794.999566078186,"z":"f8623c76.ed22f","wires":[]},{"id":"6c761169.81249","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":806.6666259765625,"y":231.66665649414062,"z":"f8623c76.ed22f","wires":[["bb64e2d0.1df7e"]]},{"id":"bb64e2d0.1df7e","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":979.2380752563477,"y":232.61893367767334,"z":"f8623c76.ed22f","wires":[["b860ab4a.fcb248"]]},{"id":"b860ab4a.fcb248","type":"configure","name":"set error-message","xml":"<set>\n<parameter name=\"error-message\" value=\"Failed call to AAI custom query: cloud-region-fromVnf\" />\n","comments":"","outputs":1,"x":1192.2381057739258,"y":232.6190414428711,"z":"f8623c76.ed22f","wires":[[]]},{"id":"994f5fb2.d428e","type":"save","name":"custom query: get cloud region from vnf","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n      resource=\"custom-query\"\n      key=\"format = 'resource&amp;nodesOnly=true'\"\n      force=\"true\"\n      local-only=\"false\"\n      pfx=\"tmp.aai.vnf\">\n<parameter name=\"start[0]\" value=\"`'/network/generic-vnfs/generic-vnf/' + $vf-module-topology-operation-input.vnf-information.vnf-id `\" />\n<parameter name=\"start_length\" value=\"1\" />\n<parameter name=\"query\" value=\"query/cloud-region-fromVnf\" /> \n","comments":"","outputs":1,"x":562.09521484375,"y":253.66653442382812,"z":"f8623c76.ed22f","wires":[["6c761169.81249","a7d24b92.b65f08"]]},{"id":"a7d24b92.b65f08","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":820.3809204101562,"y":282.5237121582031,"z":"f8623c76.ed22f","wires":[["dd9771e5.d43e1"]]},{"id":"dd9771e5.d43e1","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":984.6666297912598,"y":281.09519386291504,"z":"f8623c76.ed22f","wires":[["98ce4ec2.8c32"]]},{"id":"98ce4ec2.8c32","type":"configure","name":"set error-message","xml":"<set>\n<parameter name=\"error-message\" value=\"No cloud region returned from AAI: cloud-region-fromVnf\" />\n","comments":"","outputs":1,"x":1185.2380905151367,"y":280.80951499938965,"z":"f8623c76.ed22f","wires":[[]]},{"id":"bfec4006.e78cc","type":"for","name":"for each returned result","xml":"<for index='result-idx' start='0' end='`$tmp.aai.vnf.results_length`' >\n","comments":"","outputs":1,"x":510.71429443359375,"y":346.19032764434814,"z":"f8623c76.ed22f","wires":[["bcb365c9.75cbe8"]]},{"id":"bcb365c9.75cbe8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":719.0475921630859,"y":346.19032764434814,"z":"f8623c76.ed22f","wires":[["4a45cd40.974cd4"]]},{"id":"4a45cd40.974cd4","type":"switchNode","name":"switch cloud-region-id","xml":"<switch test='`$tmp.aai.vnf.results[$result-idx].cloud-region.cloud-region-id`'>\n","comments":"","outputs":1,"x":940.7145385742188,"y":346.1904401779175,"z":"f8623c76.ed22f","wires":[["3d6615d0.1256ba","b0a77184.8d1c"]]},{"id":"3d6615d0.1256ba","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1132.3811073303223,"y":326.19039821624756,"z":"f8623c76.ed22f","wires":[["abb75880.9fd958"]]},{"id":"b0a77184.8d1c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1130.7143783569336,"y":365.9524450302124,"z":"f8623c76.ed22f","wires":[["68553cd5.256e34"]]},{"id":"abb75880.9fd958","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1274.0477809906006,"y":326.19043922424316,"z":"f8623c76.ed22f","wires":[[]]},{"id":"68553cd5.256e34","type":"set","name":"set tmp.cloud-region-id","xml":"<set>\n<parameter name='tmp.cloud-region-id' value='`$tmp.aai.vnf.results[$result-idx].cloud-region.cloud-region-id`' />\n","comments":"","x":1320.7144622802734,"y":366.1904640197754,"z":"f8623c76.ed22f","wires":[]},{"id":"4d42768a.5be4e8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1526.666690826416,"y":934.9999370574951,"z":"f8623c76.ed22f","wires":[["fd537148.a0b2f"]]},{"id":"94461ef4.7a565","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1518.3333549499512,"y":886.666600227356,"z":"f8623c76.ed22f","wires":[["fd537148.a0b2f"]]},{"id":"fd537148.a0b2f","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to get network data for network role '\n  + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].parent-port-role`\" />\n","comments":"","x":1689.9999046325684,"y":906.6666431427002,"z":"f8623c76.ed22f","wires":[]},{"id":"3bcd4a19.f3bd46","type":"set","name":"set network-name","xml":"<set>\n<parameter name='network-name' value='`$tmp.aai.network.results[0].l3-network.network-name`' />\n","comments":"","x":1271.6666374206543,"y":988.3332920074463,"z":"f8623c76.ed22f","wires":[]},{"id":"e25841f.c6162c","type":"for","name":"for each source vnfc","xml":"<for index='src-vnfc-index' start='0'\n  end='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc_length`' >\n","comments":"","outputs":1,"x":1276.6664733886719,"y":1316.6666355133057,"z":"f8623c76.ed22f","wires":[["677e7d2a.343fc4"]]},{"id":"677e7d2a.343fc4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1471.666519165039,"y":1314.9999284744263,"z":"f8623c76.ed22f","wires":[["f961adcb.1c2af","9397b293.f8635"]]},{"id":"480bafe1.fdbc1","type":"set","name":"set keys","xml":"<set>\n<parameter name='parent-port-role'\n  value='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[0].vnic-groups.vnic-group[0].vnic-interface-role`' />\n<parameter name='vnfc-instance-group-function'\n  value='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].instance-group-function`' />\n<parameter name='network-instance-group-function'\n  value='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[0].vnic-groups.vnic-group[0].network-instance-group-function`' />\n","comments":"","x":1248.333381652832,"y":598.3333168029785,"z":"f8623c76.ed22f","wires":[]},{"id":"1525986d.5a8cd8","type":"set","name":"set vsig-index to -1","xml":"<set>\n<parameter name='vsig-index' value='-1' />\n","comments":"","x":1283.3334274291992,"y":644.9999847412109,"z":"f8623c76.ed22f","wires":[]},{"id":"5fd8515d.3ee35","type":"for","name":"for each existing vnf-sub-interface-group","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group_length`' >\n","comments":"","outputs":1,"x":1345.0000076293945,"y":691.6667556762695,"z":"f8623c76.ed22f","wires":[["4fbd326c.a9a0cc"]]},{"id":"4fbd326c.a9a0cc","type":"switchNode","name":"keys match?","xml":"<switch test='`\n  $parent-port-role == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$idx].parent-port-role\n  and $vnfc-instance-group-function == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$idx].vnfc-instance-group-function\n  and $network-instance-group-function == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$idx].network-instance-group-function\n`'>\n","comments":"","outputs":1,"x":1593.3332748413086,"y":691.6666736602783,"z":"f8623c76.ed22f","wires":[["28761c8c.b18924"]]},{"id":"28761c8c.b18924","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1738.3333206176758,"y":689.9999866485596,"z":"f8623c76.ed22f","wires":[["8436a64.f3e1958"]]},{"id":"8436a64.f3e1958","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1866.6666259765625,"y":688.3333129882812,"z":"f8623c76.ed22f","wires":[["7aff3935.274a78","bbbc8753.39f638"]]},{"id":"7aff3935.274a78","type":"set","name":"set vsig-index","xml":"<set>\n<parameter name='vsig-index' value='`$idx`' />\n","comments":"","x":2009.9998741149902,"y":663.33331823349,"z":"f8623c76.ed22f","wires":[]},{"id":"bbbc8753.39f638","type":"break","name":"break","xml":"<break>\n","comments":"","x":1990.0000801086426,"y":711.666675567627,"z":"f8623c76.ed22f","wires":[]},{"id":"db226bb9.e68798","type":"switchNode","name":"switch vsig-index","xml":"<switch test='`$vsig-index`'>\n","comments":"","outputs":1,"x":1269.9997825622559,"y":796.6666660308838,"z":"f8623c76.ed22f","wires":[["88036190.85c2d"]]},{"id":"88036190.85c2d","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":1431.6666221618652,"y":796.6666259765625,"z":"f8623c76.ed22f","wires":[["65e1a06b.40c8d"]]},{"id":"65e1a06b.40c8d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1556.6664848327637,"y":795.3333034515381,"z":"f8623c76.ed22f","wires":[["924e996c.d0bb48","9e16e25c.b3dbd","634e9705.eebe18"]]},{"id":"634e9705.eebe18","type":"set","name":"increment vnf-sub-interface-groups_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group_length'\n  value='`$vsig-index + 1`' />\n","comments":"","x":1796.6666870117188,"y":840.0000333786011,"z":"f8623c76.ed22f","wires":[]},{"id":"fa1a8ecb.b1f77","type":"switchNode","name":"switch dest vnfc_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length`'>\n","comments":"","outputs":1,"x":1288.3334197998047,"y":1048.3332529067993,"z":"f8623c76.ed22f","wires":[["820cab8e.b0a978"]]},{"id":"820cab8e.b0a978","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1471.6666259765625,"y":1046.6666259765625,"z":"f8623c76.ed22f","wires":[["c8c6057e.d0ebc8"]]},{"id":"c8c6057e.d0ebc8","type":"set","name":"set dest vnfc_length to 0","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length'\n  value='0' />\n","comments":"","x":1666.666648864746,"y":1045.0000009536743,"z":"f8623c76.ed22f","wires":[]},{"id":"b4588ad2.5d2198","type":"set","name":"set dest-vnfc-index","xml":"<set>\n<parameter name='dest-vnfc-index'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length`' />\n","comments":"","x":1276.6666717529297,"y":1106.6667108535767,"z":"f8623c76.ed22f","wires":[]},{"id":"f961adcb.1c2af","type":"save","name":"custom query: get interfaces","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n      resource=\"custom-query\"\n      key=\"format = 'resource'\"\n      force=\"true\"\n      local-only=\"false\"\n      pfx=\"tmp.aai.interfaces\">\n      <parameter name=\"start[0]\" value=\"`'/network/vnfcs/vnfc/' + $tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[$src-vnfc-index].vnfc-name`\" />\n      <parameter name=\"start_length\" value=\"1\" /> \n      <parameter name=\"query\" value=\"`'/query/vserver-l-interfaces-fromVnfc?networkName=' + $network-name`\" /> \n","comments":"","outputs":1,"x":1741.6666564941406,"y":1200.8333911895752,"z":"f8623c76.ed22f","wires":[["cc75fd6f.53ed","8bb0874e.d41028","35031a2.12d7ee6"]]},{"id":"8bb0874e.d41028","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1954.8333435058594,"y":1201.7622365951538,"z":"f8623c76.ed22f","wires":[["9940332d.0af4b"]]},{"id":"cc75fd6f.53ed","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1946.5000076293945,"y":1153.4288997650146,"z":"f8623c76.ed22f","wires":[["36014b65.267994"]]},{"id":"36014b65.267994","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to get interface data for network name '\n  + $network-name\n  + ' and vnfc '\n  + $tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[$src-vnfc-index].vnfc-name`\" />\n","comments":"","x":2114.83309173584,"y":1152.4290027618408,"z":"f8623c76.ed22f","wires":[]},{"id":"fb0ab57b.9d3938","type":"for","name":"for each result","xml":"<for silentFailure='true' index='idx1' start='0' end='`$tmp.aai.interfaces.results_length`' >\n","comments":"","outputs":1,"x":1844.9999961853027,"y":1390.3332967758179,"z":"f8623c76.ed22f","wires":[["7b84b9a8.a6c2b8"]]},{"id":"7b84b9a8.a6c2b8","type":"switchNode","name":"is this a vserver?","xml":"<switch test='`$tmp.aai.interfaces.results[$idx1].vserver.vserver-id`'>\n","comments":"","outputs":1,"x":2032.1428489685059,"y":1390.3332891464233,"z":"f8623c76.ed22f","wires":[["d1b3ff59.b9bfb","54274d50.c5b564"]]},{"id":"d1b3ff59.b9bfb","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2199.285739353725,"y":1364.6191155569895,"z":"f8623c76.ed22f","wires":[["47972c2.d2955d4"]]},{"id":"54274d50.c5b564","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2199.2856706891744,"y":1416.0477883475169,"z":"f8623c76.ed22f","wires":[["563e6367.89bc2c"]]},{"id":"9e7e51c.18085b","type":"set","name":"set vserver-id and name","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vserver-id'\n  value='`$tmp.aai.interfaces.results[$idx1].vserver.vserver-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vserver-name'\n  value='`$tmp.aai.interfaces.results[$idx1].vserver.vserver-name`' />\n","comments":"","x":2514.1667518615723,"y":1366.6667022705078,"z":"f8623c76.ed22f","wires":[]},{"id":"4927e77b.7b0a38","type":"for","name":"for each l-interface","xml":"<for silentFailure='true' index='int-index' start='0'\n  end='`$tmp.aai.interfaces.results[$idx1].vserver.l-interfaces.l-interface_length`' >\n","comments":"","outputs":1,"x":2495.8334197998047,"y":1456.6667442321777,"z":"f8623c76.ed22f","wires":[["a03b94a5.a12ef8"]]},{"id":"f992641e.69e578","type":"set","name":"set vnic_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic_length'\n  value='`$tmp.aai.interfaces.results[$idx1].vserver.l-interfaces.l-interface_length`' />\n","comments":"","x":2485.8332557678223,"y":1411.6666622161865,"z":"f8623c76.ed22f","wires":[]},{"id":"47972c2.d2955d4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2325.83341217041,"y":1363.9999561309814,"z":"f8623c76.ed22f","wires":[[]]},{"id":"563e6367.89bc2c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2324.166576385498,"y":1415.6666536331177,"z":"f8623c76.ed22f","wires":[["9e7e51c.18085b","f992641e.69e578","4927e77b.7b0a38"]]},{"id":"a03b94a5.a12ef8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2657.499927520752,"y":1456.6667051315308,"z":"f8623c76.ed22f","wires":[["da69715f.94b6a","edceb3b0.14efe"]]},{"id":"da69715f.94b6a","type":"set","name":"set vnic-port-id and name","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic[$int-index].vnic-port-id'\n  value='`$tmp.aai.interfaces.results[$idx1].vserver.l-interfaces.l-interface[$int-index].interface-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic[$int-index].vnic-port-name'\n  value='`$tmp.aai.interfaces.results[$idx1].vserver.l-interfaces.l-interface[$int-index].interface-name`' />\n","comments":"","x":2842.5000953674316,"y":1428.3334112167358,"z":"f8623c76.ed22f","wires":[]},{"id":"edceb3b0.14efe","type":"for","name":"for each result","xml":"<for silentFailure='true' index='idx2' start='0' end='`$tmp.aai.interfaces.results_length`' >\n","comments":"","outputs":1,"x":2809.166736602783,"y":1473.333441734314,"z":"f8623c76.ed22f","wires":[["c43c06df.d5c808"]]},{"id":"c43c06df.d5c808","type":"switchNode","name":"is this our interface?","xml":"<switch test='`$tmp.aai.interfaces.results[$idx2].l-interface.interface-id\n  == $tmp.aai.interfaces.results[$idx1].vserver.l-interfaces.l-interface[$int-index].interface-id`'>\n","comments":"","outputs":1,"x":3002.499858856201,"y":1471.666787147522,"z":"f8623c76.ed22f","wires":[["4c0806f5.32a7c8"]]},{"id":"4c0806f5.32a7c8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3174.166778564453,"y":1470.0000371932983,"z":"f8623c76.ed22f","wires":[["9f6ae548.e06038"]]},{"id":"3777ff14.c0513","type":"for","name":"for each sub l-interface","xml":"<for silentFailure='true' index='sub-int-index' start='0'\n  end='`$tmp.aai.interfaces.results[$idx2].l-interface.l-interfaces.l-interface_length`' >\n","comments":"","outputs":1,"x":2150.83394241333,"y":1662.5001344680786,"z":"f8623c76.ed22f","wires":[["926fef64.9dec8"]]},{"id":"9f6ae548.e06038","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1975.833396911621,"y":1615.8335447311401,"z":"f8623c76.ed22f","wires":[["3777ff14.c0513","4b6cc5aa.4b4eec"]]},{"id":"b1ec7d5.6bc228","type":"set","name":"set sub-interface_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic[$int-index].sub-interfaces.sub-interface_length'\n  value='`$tmp.aai.interfaces.results[$idx2].l-interface.l-interfaces.l-interface_length`' />\n","comments":"","x":2534.1669960021973,"y":1584.1667928695679,"z":"f8623c76.ed22f","wires":[]},{"id":"926fef64.9dec8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2329.167121887207,"y":1660.8335485458374,"z":"f8623c76.ed22f","wires":[["3ddfbe84.bb2f02","e5e18282.8be47"]]},{"id":"3ddfbe84.bb2f02","type":"set","name":"set sub-interface-port-id and name","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic[$int-index].sub-interfaces.sub-interface[$sub-int-index].sub-interface-port-id'\n  value='`$tmp.aai.interfaces.results[$idx2].l-interface.l-interfaces.l-interface[$sub-int-index].interface-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic[$int-index].sub-interfaces.sub-interface[$sub-int-index].sub-interface-port-name'\n  value='`$tmp.aai.interfaces.results[$idx2].l-interface.l-interfaces.l-interface[$sub-int-index].interface-name`' />\n","comments":"","x":2539.1670303344727,"y":1630.833152770996,"z":"f8623c76.ed22f","wires":[]},{"id":"e5e18282.8be47","type":"for","name":"for each result","xml":"<for silentFailure='true' index='idx3' start='0' end='`$tmp.aai.interfaces.results_length`' >\n","comments":"","outputs":1,"x":2482.500217437744,"y":1684.1666793823242,"z":"f8623c76.ed22f","wires":[["7cde3c9c.a7b444"]]},{"id":"7cde3c9c.a7b444","type":"switchNode","name":"is this our sub-interface?","xml":"<switch test='`$tmp.aai.interfaces.results[$idx3].l-interface.interface-id\n  == $tmp.aai.interfaces.results[$idx2].l-interface.l-interfaces.l-interface[$sub-int-index].interface-id`'>\n","comments":"","outputs":1,"x":2687.4999809265137,"y":1682.500054359436,"z":"f8623c76.ed22f","wires":[["2e797ab5.331e56"]]},{"id":"2e797ab5.331e56","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2870.833484649658,"y":1680.833306312561,"z":"f8623c76.ed22f","wires":[["beeb2940.977e28"]]},{"id":"beeb2940.977e28","type":"switchNode","name":"switch vlan-interface","xml":"<switch test='`$tmp.aai.interfaces.results[$idx3].l-interface.vlans.vlan[0].vlan-interface`'>\n","comments":"","outputs":1,"x":3044.1667442321777,"y":1680.8334283828735,"z":"f8623c76.ed22f","wires":[["a886aaa5.a50a88","26296b80.f2c3a4"]]},{"id":"a886aaa5.a50a88","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":3215.833324432373,"y":1654.1667070388794,"z":"f8623c76.ed22f","wires":[["1aa5dd41.0ac273"]]},{"id":"26296b80.f2c3a4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":3215.8332557678223,"y":1705.5953798294067,"z":"f8623c76.ed22f","wires":[["ec1afc13.71ed"]]},{"id":"1aa5dd41.0ac273","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3350.833667755127,"y":1652.5000944137573,"z":"f8623c76.ed22f","wires":[[]]},{"id":"ec1afc13.71ed","type":"for","name":"for each result","xml":"<for silentFailure='true' index='idx4' start='0' end='`$tmp.aai.interfaces.results_length`' >\n","comments":"","outputs":1,"x":3370.833324432373,"y":1704.833333015442,"z":"f8623c76.ed22f","wires":[["a14caea3.219c2"]]},{"id":"a14caea3.219c2","type":"switchNode","name":"is this our vlan-interface?","xml":"<switch test='`$tmp.aai.interfaces.results[$idx4].vlan.vlan-interface\n  == $tmp.aai.interfaces.results[$idx3].l-interface.vlans.vlan[0].vlan-interface`'>\n","comments":"","outputs":1,"x":3577.5002098083496,"y":1702.5000562667847,"z":"f8623c76.ed22f","wires":[["4560edb.1312014"]]},{"id":"4560edb.1312014","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3765.833324432373,"y":1700.833333015442,"z":"f8623c76.ed22f","wires":[["14852af5.9d3e25"]]},{"id":"c6c2c72f.3a89a8","type":"set","name":"set vlan-id-inner","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic[$int-index].sub-interfaces.sub-interface[$sub-int-index].vlan-tags.lower-tag-id'\n  value='`$tmp.aai.interfaces.results[$idx4].vlan.vlan-id-inner`' />\n","comments":"","x":4387.499423980713,"y":1767.5001745224,"z":"f8623c76.ed22f","wires":[]},{"id":"8bad2f56.15d21","type":"set","name":"increment dest-vnfc-index","xml":"<set>\n<parameter name='dest-vnfc-index' value='`$dest-vnfc-index + 1`' />\n","comments":"","x":1882.5000953674316,"y":1721.6665964126587,"z":"f8623c76.ed22f","wires":[]},{"id":"f1a8d7b0.c91308","type":"set","name":"set dest vnfc_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc_length'\n  value='`$dest-vnfc-index`' />\n","comments":"","x":1264.9999313354492,"y":1651.666732788086,"z":"f8623c76.ed22f","wires":[]},{"id":"4b6cc5aa.4b4eec","type":"switchNode","name":"switch sub-interface_length","xml":"<switch test='`$tmp.aai.interfaces.results[$idx2].l-interface.l-interfaces.l-interface_length`'>\n","comments":"","outputs":1,"x":2164.166576385498,"y":1566.6667928695679,"z":"f8623c76.ed22f","wires":[["47257f1c.167e7","a5bf4aca.ad6b78"]]},{"id":"47257f1c.167e7","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2355.8335666656494,"y":1538.333264350891,"z":"f8623c76.ed22f","wires":[["3d39a9b5.2adb26"]]},{"id":"a5bf4aca.ad6b78","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2355.833652496338,"y":1584.7619524002075,"z":"f8623c76.ed22f","wires":[["b1ec7d5.6bc228"]]},{"id":"3d39a9b5.2adb26","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2485.8334980010986,"y":1536.6666955947876,"z":"f8623c76.ed22f","wires":[[]]},{"id":"14852af5.9d3e25","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3895.833148956299,"y":1700.0000495910645,"z":"f8623c76.ed22f","wires":[["c14b73d3.1ad8","7c3e4161.6f73d"]]},{"id":"c14b73d3.1ad8","type":"switchNode","name":"switch vlan-id-outer","xml":"<switch test='`$tmp.aai.interfaces.results[$idx4].vlan.vlan-id-outer`'>\n","comments":"","outputs":1,"x":4064.1665687561035,"y":1649.999966621399,"z":"f8623c76.ed22f","wires":[["e8f9eac.741b218","725f703b.5cee3"]]},{"id":"7c3e4161.6f73d","type":"switchNode","name":"switch vlan-id-inner","xml":"<switch test='`$tmp.aai.interfaces.results[$idx4].vlan.vlan-id-inner`'>\n","comments":"","outputs":1,"x":4059.1664085388184,"y":1739.999888420105,"z":"f8623c76.ed22f","wires":[["8923abb6.2dbd48","62b2ad9b.0fa3b4"]]},{"id":"e8f9eac.741b218","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":4232.499828338623,"y":1623.3332796096802,"z":"f8623c76.ed22f","wires":[["61becc28.cce2e4"]]},{"id":"725f703b.5cee3","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":4232.499759674072,"y":1674.7619524002075,"z":"f8623c76.ed22f","wires":[["a88547d7.d958c8"]]},{"id":"8923abb6.2dbd48","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":4230.833324432373,"y":1716.6666536331177,"z":"f8623c76.ed22f","wires":[["ca757dd6.520e8"]]},{"id":"62b2ad9b.0fa3b4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":4230.833255767822,"y":1768.095326423645,"z":"f8623c76.ed22f","wires":[["c6c2c72f.3a89a8"]]},{"id":"a88547d7.d958c8","type":"set","name":"set vlan-id-outer","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnics.vnic[$int-index].sub-interfaces.sub-interface[$sub-int-index].vlan-tags.upper-tag-id'\n  value='`$tmp.aai.interfaces.results[$idx4].vlan.vlan-id-outer`' />\n","comments":"","x":4389.166744232178,"y":1673.9998865127563,"z":"f8623c76.ed22f","wires":[]},{"id":"61becc28.cce2e4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4365.833080291748,"y":1620.0000276565552,"z":"f8623c76.ed22f","wires":[[]]},{"id":"ca757dd6.520e8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4365.833080291748,"y":1716.6666536331177,"z":"f8623c76.ed22f","wires":[[]]},{"id":"3f5e80f8.43f3d","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='' value='' />\n","comments":"","x":488.3333320617676,"y":1696.6666345596313,"z":"f8623c76.ed22f","wires":[]},{"id":"9940332d.0af4b","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2095.0000019073486,"y":1201.6666316986084,"z":"f8623c76.ed22f","wires":[[]]},{"id":"35031a2.12d7ee6","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1950.0000305175781,"y":1250.0000190734863,"z":"f8623c76.ed22f","wires":[["ddf754e6.0660b8"]]},{"id":"ddf754e6.0660b8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1687.5000228881836,"y":1545.0000228881836,"z":"f8623c76.ed22f","wires":[["fb0ab57b.9d3938","8bad2f56.15d21"]]},{"id":"9397b293.f8635","type":"set","name":"set vnfc-name","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-sub-interface-groups.vnf-sub-interface-group[$vsig-index].vnfcs.vnfc[$dest-vnfc-index].vnfc-name'\n  value='`$tmp.vlan-vnfc-instance-groups.vlan-vnfc-instance-group[$vvig-index].vnfcs.vnfc[$src-vnfc-index].vnfc-name`' />\n","comments":"","x":1698.3333168029785,"y":1123.3332967758179,"z":"f8623c76.ed22f","wires":[]}]