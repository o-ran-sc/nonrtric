[
  {
    "id": "d6f12b23.a89678",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 97,
    "y": 43,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "c865ab04.6af178"
      ]
    ]
  },
  {
    "id": "c865ab04.6af178",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 228.2856903076172,
    "y": 92.23810863494873,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "6872e2ee.d6997c"
      ]
    ]
  },
  {
    "id": "6872e2ee.d6997c",
    "type": "method",
    "name": "method sdwan-vnf-topology-operation-wanport-activate",
    "xml": "<method rpc='sdwan-vnf-topology-operation-wanport-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 231.42861938476562,
    "y": 177.00003242492676,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "e8a5051a.b42f68"
      ]
    ]
  },
  {
    "id": "e8a5051a.b42f68",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 294.66675567626953,
    "y": 782.666989326477,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "8f3957a7.d167f8",
        "4891bde.3538244",
        "ffc944ec.552788",
        "d579e51d.f36088",
        "d09273d4.34d5b",
        "d8cffa08.c70f58",
        "272d2403.37c86c",
        "b6ab2db8.206f6",
        "e9d254c6.c408a8",
        "2a8c1af8.df5bf6",
        "ee4c5d7e.eaa99",
        "455c32c0.dc954c",
        "dc56d269.4a63b",
        "1286c83c.18ccc8",
        "de66785c.628fe8",
        "8b82d2e5.53604",
        "a401887.73e5778",
        "863a36e8.4a5b78",
        "2c809153.c42dee",
        "2c725167.90a60e"
      ]
    ]
  },
  {
    "id": "8f3957a7.d167f8",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 621.334529876709,
    "y": 1514.3347115516663,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "2a8c1af8.df5bf6",
    "type": "execute",
    "name": "execute RestApiCallNode device port create",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-port.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/ports'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"portResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 709.3341102600098,
    "y": 777.889497756958,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "e20e98c1.35cd38",
        "6f78988b.f50df8"
      ]
    ]
  },
  {
    "id": "e20e98c1.35cd38",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 958.3341693878174,
    "y": 791.8897037506104,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "bed4bc3f.f5932"
      ]
    ]
  },
  {
    "id": "6f78988b.f50df8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 958.3341693878174,
    "y": 753.8895392417908,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "8f1b4806.f6c948"
      ]
    ]
  },
  {
    "id": "8f1b4806.f6c948",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
    "comments": "",
    "x": 1102.3345031738281,
    "y": 752.8895387649536,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "bed4bc3f.f5932",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1105.3341808319092,
    "y": 792.8895425796509,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "ee4c5d7e.eaa99",
    "type": "execute",
    "name": "execute RestApiCallNode get transport network info",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/network-orchestration-resources'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"transportNetworksResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 732.0004615783691,
    "y": 957.0006031990051,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "72b3b752.f6bbf8",
        "f75c8efc.5bc38"
      ]
    ]
  },
  {
    "id": "dc56d269.4a63b",
    "type": "execute",
    "name": "execute RestApiCallNode wan port create",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-wan-port.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/transport-network-ports'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"wanPortResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 705.0005531311035,
    "y": 1194.000651359558,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "b358fdc8.47501",
        "e8f33bf4.d74a28"
      ]
    ]
  },
  {
    "id": "4891bde.3538244",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 691.0209350585938,
    "y": 121.02091217041016,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "bba0a2df.9b7fe",
        "f5df4ed9.043ee",
        "ad1fb0e6.30f2b"
      ]
    ]
  },
  {
    "id": "bba0a2df.9b7fe",
    "type": "other",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 943.0209693908691,
    "y": 122.02099323272705,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "2105bad4.c6ead6"
      ]
    ]
  },
  {
    "id": "2105bad4.c6ead6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1104.7987174987793,
    "y": 101.90994024276733,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "f5df4ed9.043ee",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 936.0213775634766,
    "y": 155.02099704742432,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "e4ac49d6.f30708"
      ]
    ]
  },
  {
    "id": "e4ac49d6.f30708",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 959.2908935546875,
    "y": 253.57559204101562,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "3335cf85.18b",
        "646eb0ad.764a7",
        "47895138.250a9",
        "af3fc11d.805b3",
        "38c64027.0dbb1"
      ]
    ]
  },
  {
    "id": "3335cf85.18b",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1239.3070373535156,
    "y": 147.44955825805664,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "a85a6118.25ae3"
      ]
    ]
  },
  {
    "id": "646eb0ad.764a7",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1165.608341217041,
    "y": 293.43279361724854,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "e159f8e9.ab1288"
      ]
    ]
  },
  {
    "id": "e159f8e9.ab1288",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1313.0369834899902,
    "y": 293.0042037963867,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "50911a7c.bcb394"
      ]
    ]
  },
  {
    "id": "ce82d617.853858",
    "type": "switchNode",
    "name": "switch vnfid found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1612.7362670898438,
    "y": 146.69972038269043,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "bc627350.7812f"
      ]
    ]
  },
  {
    "id": "50911a7c.bcb394",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1462.4657096862793,
    "y": 294.14712142944336,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "bc627350.7812f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1767.6882591247559,
    "y": 147.59239959716797,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "2709419e.cb1d4e"
      ]
    ]
  },
  {
    "id": "f97e5dae.1c8e2",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
    "comments": "",
    "x": 2175.220344543457,
    "y": 57.34245777130127,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "ad1fb0e6.30f2b",
    "type": "outcome",
    "name": "0",
    "xml": "<outcome value='0'>\n",
    "comments": "",
    "outputs": 1,
    "x": 944.9897193908691,
    "y": 85.98967933654785,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "2105bad4.c6ead6"
      ]
    ]
  },
  {
    "id": "1286c83c.18ccc8",
    "type": "set",
    "name": "set device PortId to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='devicePortId' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$prop.wan.devicePortId`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 673.9909210205078,
    "y": 1250.9912090301514,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "57e2b01e.38cf7",
    "type": "comment",
    "name": "Get siteId from site resource created for this service",
    "info": "",
    "comments": "",
    "x": 716.9899826049805,
    "y": 306.32321643829346,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "a85a6118.25ae3",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1458.6566696166992,
    "y": 146.98963832855225,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "ce82d617.853858"
      ]
    ]
  },
  {
    "id": "ffc944ec.552788",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-information.vnf-id  + '/vnf-data/'` \" />",
    "comments": "",
    "x": 654.5462341308594,
    "y": 1393.213122844696,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "d579e51d.f36088",
    "type": "set",
    "name": "set vnf-level-oper-status to Active",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
    "comments": "",
    "x": 671.9906959533691,
    "y": 1432.9909586906433,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "2c809153.c42dee",
    "type": "update",
    "name": "update SDWAN wan port instance configuration in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='wan-port-config' \n      key='wan-port-config.wan-port-config-id = $vnf-topology-operation-input.vnf-information.vnf-id' >\n<parameter name=\"wan-port-config-id\" value=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\" />\n<parameter name='operational-status' value='Active' />\n<parameter name='device-port-id' value='`$prop.wan.devicePortId`' />\n<parameter name='wan-port-id' value='`$prop.wan.wanPortId`' />\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 734.653621673584,
    "y": 1472.1384205818176,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "1e8c7f90.773b9",
    "type": "set",
    "name": "set prop.wan.transportNetworkId",
    "xml": "<set>\n<parameter name='prop.wan.transportNetworkId' value='`$transportNetworksResp.data.transportNetworks[$tidx].id`' />\n",
    "comments": "",
    "x": 1486.991542816162,
    "y": 1033.9906749725342,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "863a36e8.4a5b78",
    "type": "for",
    "name": "for loop sidx - Get siteId from servicedata",
    "xml": "<for index=\"sidx\" start=\"0\" end=\"`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 696.9900054931641,
    "y": 456.9898729324341,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "72a58ce.4542a74"
      ]
    ]
  },
  {
    "id": "4130ca31.df2bc4",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1127.990333557129,
    "y": 457.99000358581543,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "8e36b04f.9057d"
      ]
    ]
  },
  {
    "id": "8e36b04f.9057d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1265.9907913208008,
    "y": 455.98998832702637,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "b3f426b3.22a238"
      ]
    ]
  },
  {
    "id": "b3f426b3.22a238",
    "type": "set",
    "name": "set prop.wan.siteId",
    "xml": "<set>\n<parameter name='prop.wan.siteId' value='`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n\n\n",
    "comments": "",
    "x": 1429.9908256530762,
    "y": 457.58984184265137,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "455c32c0.dc954c",
    "type": "execute",
    "name": "execute split ip and mask",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.wan.ipAddress`'/>\n<parameter name=\"regex\" value=\"/\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"ipandMask\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 655.9903297424316,
    "y": 1102.3236436843872,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "33727da5.4478c2",
        "c855dead.051b"
      ]
    ]
  },
  {
    "id": "c855dead.051b",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 856.990348815918,
    "y": 1080.3236351013184,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "fd37a12c.b50dd"
      ]
    ]
  },
  {
    "id": "33727da5.4478c2",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 856.9903526306152,
    "y": 1121.3236389160156,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "92f41c8f.e77c6"
      ]
    ]
  },
  {
    "id": "fd37a12c.b50dd",
    "type": "set",
    "name": "set ipAddress prefixLength",
    "xml": "<set>\n<parameter name='prop.wan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.wan.prefixLength' value='`$ipandMask[1]`' />",
    "comments": "",
    "x": 1053.9903678894043,
    "y": 1078.3236351013184,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "92f41c8f.e77c6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 1011.9903602600098,
    "y": 1118.3236379623413,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "b6ab2db8.206f6",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 671.4901733398438,
    "y": 554.9899291992188,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "a209acee.17706",
        "69e80906.c6c388",
        "4690f303.905dfc"
      ]
    ]
  },
  {
    "id": "a209acee.17706",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 903.4902572631836,
    "y": 518.9899520874023,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "fb6bcdc7.90b7a"
      ]
    ]
  },
  {
    "id": "69e80906.c6c388",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 905.9811401367188,
    "y": 554.5639886856079,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "deef5ce.ffc72a"
      ]
    ]
  },
  {
    "id": "4690f303.905dfc",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 901.3141479492188,
    "y": 590.8973474502563,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "340f62b3.ca041e"
      ]
    ]
  },
  {
    "id": "340f62b3.ca041e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1055.0866394042969,
    "y": 588.3364343643188,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "deef5ce.ffc72a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1051.5525360107422,
    "y": 552.8496761322021,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "fb6bcdc7.90b7a",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1063.9903678894043,
    "y": 516.9898920059204,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "d09273d4.34d5b",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"sdwan-wanport-vnf-topology-operation-activate\"/>\n<parameter name=\"field3\" value=\"SDWAN-Activate\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 609.0000953674316,
    "y": 177.00003004074097,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "d8cffa08.c70f58",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 645.3022193908691,
    "y": 212.00007390975952,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "e9d254c6.c408a8",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 686.0003051757812,
    "y": 642.6669311523438,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "a2457d23.490bb",
        "5d853693.ee5348"
      ]
    ]
  },
  {
    "id": "a2457d23.490bb",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 921.000431060791,
    "y": 628.666919708252,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "7f12a9ec.69af78"
      ]
    ]
  },
  {
    "id": "7f12a9ec.69af78",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1063.0004386901855,
    "y": 627.6669206619263,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "e009ac00.02e288",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1069.0004386901855,
    "y": 665.0599088668823,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "5d853693.ee5348",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 920.250431060791,
    "y": 664.3098268508911,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "e009ac00.02e288"
      ]
    ]
  },
  {
    "id": "693677dc.0ea4c8",
    "type": "switchNode",
    "name": "switch transportNetworkName same",
    "xml": "<switch test=\"`$transportNetworksResp.data.transportNetworks[$tidx].name == $prop.wan.transportNetworkName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1126.0011558532715,
    "y": 991.6670732498169,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "9e43cce2.daed1"
      ]
    ]
  },
  {
    "id": "9e43cce2.daed1",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1339.0006065368652,
    "y": 991.6669912338257,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "1e8c7f90.773b9"
      ]
    ]
  },
  {
    "id": "29298ea3.31ff42",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1553.3336029052734,
    "y": 224.00005722045898,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "fb2628da.07ec78"
      ]
    ]
  },
  {
    "id": "fb2628da.07ec78",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1776.3336124420166,
    "y": 224.00005722045898,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "9e951e79.2dbb"
      ]
    ]
  },
  {
    "id": "252b812c.b944de",
    "type": "set",
    "name": "set tmp.devicevidx",
    "xml": "<set>\n<parameter name='tmp.devicevidx' value='`$vidx`' />\n\n",
    "comments": "",
    "x": 2741.3329467773438,
    "y": 655.0000820159912,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "38c64027.0dbb1",
    "type": "switchNode",
    "name": "switch tmp.devicevidx",
    "xml": "<switch test=\"`$tmp.devicevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1206.3335304260254,
    "y": 382.0001196861267,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "6a752755.afd058"
      ]
    ]
  },
  {
    "id": "6a752755.afd058",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1390.7620964050293,
    "y": 382.57155656814575,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "12b129f0.1b9176"
      ]
    ]
  },
  {
    "id": "12b129f0.1b9176",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"ActivateSDWANDeviceInstance not found in service-data\" />\n",
    "comments": "",
    "x": 1531.1908378601074,
    "y": 382.71443605422974,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "c3c15a47.6f9888",
    "type": "comment",
    "name": "Get deviceId from device resource created for this service",
    "info": "",
    "comments": "",
    "x": 2190.6668853759766,
    "y": 321.33333587646484,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "ebfe3788.f179e8",
    "type": "for",
    "name": "for loop didx - Get deviceId from servicedata",
    "xml": "<for index=\"didx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2176.667095184326,
    "y": 244.99997997283936,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "f245906e.04acd"
      ]
    ]
  },
  {
    "id": "3b8aa7d6.529fd8",
    "type": "switchNode",
    "name": "switch name (DeviceName)",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2194.667694091797,
    "y": 383.0002250671387,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "ce416efb.e644d"
      ]
    ]
  },
  {
    "id": "ce416efb.e644d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2396.668186187744,
    "y": 377.0002851486206,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "f3d4ecf0.f7b57"
      ]
    ]
  },
  {
    "id": "72a58ce.4542a74",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 959.0001983642578,
    "y": 457.66669750213623,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "4130ca31.df2bc4"
      ]
    ]
  },
  {
    "id": "f245906e.04acd",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1968.999984741211,
    "y": 381.6667261123657,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "3b8aa7d6.529fd8"
      ]
    ]
  },
  {
    "id": "ab84c87e.6641a8",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3040.0011444091797,
    "y": 595.6670227050781,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "dad5dabe.45cb08"
      ]
    ]
  },
  {
    "id": "dad5dabe.45cb08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3193.0015144348145,
    "y": 596.6670999526978,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "38c10a48.67b606"
      ]
    ]
  },
  {
    "id": "38c10a48.67b606",
    "type": "set",
    "name": "set prop.wan.deviceId",
    "xml": "<set>\n<parameter name='prop.wan.deviceId' value='`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].value`' />\n",
    "comments": "",
    "x": 3362.0021209716797,
    "y": 595.2671346664429,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "9e951e79.2dbb",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1917.6669311523438,
    "y": 246.00007724761963,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "ebfe3788.f179e8"
      ]
    ]
  },
  {
    "id": "f3d4ecf0.f7b57",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2215.0012283325195,
    "y": 460.0002546310425,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "794ddeb5.82822"
      ]
    ]
  },
  {
    "id": "a5f1b6ac.935608",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2604.0019340515137,
    "y": 463.00037956237793,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "900215dc.3d2d28"
      ]
    ]
  },
  {
    "id": "2709419e.cb1d4e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1906.3337783813477,
    "y": 148.00003337860107,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "f97e5dae.1c8e2",
        "8b284d74.9bbdc",
        "12ee38df.f58297",
        "21551932.828fc6"
      ]
    ]
  },
  {
    "id": "d5734767.c41348",
    "type": "set",
    "name": "set prop.wan.wanPortId",
    "xml": "<set>\n<parameter name='prop.wan.wanPortId' value='`$wanPortResp.success[0].id`' />\n",
    "comments": "",
    "x": 1353.3246459960938,
    "y": 1194.6573886871338,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "de66785c.628fe8",
    "type": "set",
    "name": "set prop.wan.devicePortId",
    "xml": "<set>\n<parameter name='prop.wan.devicePortId' value='`$portResp.success[0].id`' />\n",
    "comments": "",
    "x": 663.9913177490234,
    "y": 839.9906539916992,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "cf3fd46b.92ea68",
    "type": "comment",
    "name": "Create port",
    "info": "",
    "comments": "",
    "x": 611.0000495910645,
    "y": 744.3335218429565,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "712fc701.3b6c28",
    "type": "comment",
    "name": "Get network id",
    "info": "",
    "comments": "",
    "x": 662.0001220703125,
    "y": 922.3334802985191,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "4db86c63.765344",
    "type": "comment",
    "name": "Create wan port",
    "info": "",
    "comments": "",
    "x": 629.0002059936523,
    "y": 1055.3336935043335,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "e8f33bf4.d74a28",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 991.0001220703125,
    "y": 1154.0002393722534,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "18a023ce.91febc"
      ]
    ]
  },
  {
    "id": "b358fdc8.47501",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 991.0001182556152,
    "y": 1194.0004043579102,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "c181c64d.e790a8"
      ]
    ]
  },
  {
    "id": "c181c64d.e790a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1135.0001335144043,
    "y": 1193.000241279602,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "d5734767.c41348"
      ]
    ]
  },
  {
    "id": "2ecf07cd.e22e08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create wan port rest api\" />\n",
    "comments": "",
    "x": 1313.00048828125,
    "y": 1153.0002708435059,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "f75c8efc.5bc38",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1038.0000495910645,
    "y": 905.0001783370972,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "cd3f079c.c86e78"
      ]
    ]
  },
  {
    "id": "72b3b752.f6bbf8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1038.0000457763672,
    "y": 945.0003433227539,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "7039d1d0.8c0e2"
      ]
    ]
  },
  {
    "id": "7039d1d0.8c0e2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1182.0000610351562,
    "y": 944.0001802444458,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "cd3f079c.c86e78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Get transport network info rest api\" />\n",
    "comments": "",
    "x": 1180.0003814697266,
    "y": 904.0001783370972,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "12ee38df.f58297",
    "type": "call",
    "name": "call sdwan-get-wan-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-wan-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2178.666633605957,
    "y": 154.0000762939453,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "8b284d74.9bbdc",
    "type": "set",
    "name": "set vnf-request-input.",
    "xml": "<set>\n<parameter name='vnf-request-input.' value='`$ctx.vnf-data.vnf-data.vnf-request-input.`' />\n\n",
    "comments": "",
    "x": 2147.666633605957,
    "y": 104.00009346008301,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "6fa219f1.a7d198",
    "type": "comment",
    "name": "This is also required for template parameters update",
    "info": "",
    "comments": "",
    "x": 2543.0003967285156,
    "y": 200.00003623962402,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "7a10e528.449ffc",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1516.0004425048828,
    "y": 189.00004959106445,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "8d8e3a.201b51c8"
      ]
    ]
  },
  {
    "id": "8d8e3a.201b51c8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1712.0006256103516,
    "y": 190.00004959106445,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "3f667c94.ca8ee4"
      ]
    ]
  },
  {
    "id": "3f667c94.ca8ee4",
    "type": "set",
    "name": "set tmp.siteVidx",
    "xml": "<set>\n<parameter name='tmp.siteVidx' value='`$vidx`' />\n<parameter name='ctx.site.' value='`$service-data.vnfs.vnf[$vidx].`' />\n\n",
    "comments": "",
    "x": 1897.9999237060547,
    "y": 187.00005340576172,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "af3fc11d.805b3",
    "type": "switchNode",
    "name": "switch tmp.siteVidx",
    "xml": "<switch test=\"`$tmp.siteVidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1189.6667518615723,
    "y": 331.00007009506226,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "bee9b4a0.4631e8"
      ]
    ]
  },
  {
    "id": "bee9b4a0.4631e8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1364.0954627990723,
    "y": 331.5715217590332,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "cf86c583.f350f8"
      ]
    ]
  },
  {
    "id": "cf86c583.f350f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"ActivateSiteInstance not found in service-data\" />\n",
    "comments": "",
    "x": 1506.5241813659668,
    "y": 330.71438455581665,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "794ddeb5.82822",
    "type": "switchNode",
    "name": "switch deviceName match",
    "xml": "<switch test=\"`$prop.wan.deviceName == $service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].value`\">\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2420.667953491211,
    "y": 461.0003185272217,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "a5f1b6ac.935608"
      ]
    ]
  },
  {
    "id": "900215dc.3d2d28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2503.3338928222656,
    "y": 535.0001621246338,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "841824ee.9d9cb8",
        "252b812c.b944de"
      ]
    ]
  },
  {
    "id": "841824ee.9d9cb8",
    "type": "for",
    "name": "for loop deviceidx - Get deviceId from servicedata",
    "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2783.5310440063477,
    "y": 530.0313510894775,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "3d6ed093.e41e3"
      ]
    ]
  },
  {
    "id": "3d6ed093.e41e3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2860.5317764282227,
    "y": 594.0314502716064,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "ab84c87e.6641a8"
      ]
    ]
  },
  {
    "id": "21551932.828fc6",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\".....\"/>\n<parameter name=\"field3\" value=\"prop.wan.deviceName\"/>\n<parameter name=\"field4\" value='`$prop.wan.deviceName`'/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2106.531379699707,
    "y": 202.0312671661377,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "47895138.250a9",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1232.000072479248,
    "y": 225.0000171661377,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "29298ea3.31ff42",
        "7a10e528.449ffc"
      ]
    ]
  },
  {
    "id": "272d2403.37c86c",
    "type": "set",
    "name": "copy input data to service data",
    "xml": "<set>\n<!--parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-id' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' /-->\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />",
    "comments": "",
    "x": 667.0312881469727,
    "y": 1347.5314326286316,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "41e3ce3b.fd6",
    "type": "comment",
    "name": "TODO: split ip/mask",
    "info": "",
    "comments": "",
    "x": 1053,
    "y": 1040.5039072036743,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "bddbd7b0.3cac18",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 905.0008735656738,
    "y": 993.3337669372559,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "693677dc.0ea4c8"
      ]
    ]
  },
  {
    "id": "8b82d2e5.53604",
    "type": "for",
    "name": "for loop tidx - Get transportNetwork ID",
    "xml": "<for index=\"tidx\" start=\"0\" end=\"`$transportNetworksResp.data.transportNetworks_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 689.0004920959473,
    "y": 992.3335227966309,
    "z": "725c7d45.19d1f4",
    "wires": [
      [
        "bddbd7b0.3cac18"
      ]
    ]
  },
  {
    "id": "a401887.73e5778",
    "type": "set",
    "name": "set wan portId to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='wanPortId' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$prop.wan.wanPortId`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 668.0000152587891,
    "y": 1297.250274181366,
    "z": "725c7d45.19d1f4",
    "wires": []
  },
  {
    "id": "2c725167.90a60e",
    "type": "call",
    "name": "call sdwan-get-tenant-auth",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-tenant-auth' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 661,
    "y": 698,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  },
  {
    "id": "18a023ce.91febc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1135.0039672851562,
    "y": 1152.5039310455322,
    "z": "725c7d45.19d1f4",
    "wires": [
      []
    ]
  }
]
