[
    {
        "id": "a0039ac7.2c7d88",
        "type": "method",
        "name": "sdwan-vf-operation-site-activate",
        "xml": "<method rpc='sdwan-vf-operation-site-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 265.00390625,
        "y": 238.9999939496629,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "c22d3a60.7ddaa8"
            ]
        ]
    },
    {
        "id": "27e9fc06.1c68a4",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 266.00390625,
        "y": 138.9999939496629,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "a0039ac7.2c7d88"
            ]
        ]
    },
    {
        "id": "d5e4bca4.474e7",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 107.50391006469727,
        "y": 52.999998688697815,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "27e9fc06.1c68a4"
            ]
        ]
    },
    {
        "id": "c22d3a60.7ddaa8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 321.00390625,
        "y": 394.9999939496629,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "f1b7432.96d6cc",
                "4d30068b.cb8248",
                "a5fa8ed1.f351a",
                "81999ef9.7a265",
                "9e668e87.35152",
                "c78d235f.ab387",
                "887e324d.70c37",
                "bbecde3.6ca5b2",
                "4023f188.867be",
                "536ee31e.2dbb9c",
                "8570b81.0d01d48",
                "a5bc4e1c.1202d",
                "d5f9133b.45a0f"
            ]
        ]
    },
    {
        "id": "f1b7432.96d6cc",
        "type": "set",
        "name": "set prop.site.sdwan false",
        "xml": "<set>\n<parameter name='prop.site.sdwan' value=\"false\" />\n\n",
        "comments": "",
        "x": 712.5078086853027,
        "y": 178.0039163827896,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "a5fa8ed1.f351a",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 674.0078315734863,
        "y": 296.00391483306885,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "35074f40.98b9b"
            ]
        ]
    },
    {
        "id": "35074f40.98b9b",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 927.0079040527344,
        "y": 287.67056906223297,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "501cda7c.262744"
            ]
        ]
    },
    {
        "id": "58a08191.616f9",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1298.6743927001953,
        "y": 289.6705719232559,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "501cda7c.262744",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1145.341220855713,
        "y": 289.67055094242096,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "58a08191.616f9"
            ]
        ]
    },
    {
        "id": "4d30068b.cb8248",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 689.4284057617188,
        "y": 244.5077749490738,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "7bd5f4ce.76777c"
            ]
        ]
    },
    {
        "id": "7bd5f4ce.76777c",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 876.095085144043,
        "y": 243.84107267856598,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "7b0f629c.5a07fc"
            ]
        ]
    },
    {
        "id": "7b0f629c.5a07fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs in MD-SAL\" />\n",
        "comments": "",
        "x": 1057.7617111206055,
        "y": 243.84107267856598,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "a81de15.ac0e82",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1328.0078201293945,
        "y": 459.0038963262923,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "7b05dd5f.af6d94"
            ]
        ]
    },
    {
        "id": "25ac2ea9.1fa992",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1603.2935409545898,
        "y": 458.5753990118392,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "ac802e50.23445"
            ]
        ]
    },
    {
        "id": "50990900.1946a8",
        "type": "set",
        "name": "set vf-module-length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n\n",
        "comments": "",
        "x": 1314.579444885254,
        "y": 422.781782746315,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "39f64e9a.4cae32",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1118.8808403015137,
        "y": 436.1626678411849,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "a81de15.ac0e82",
                "50990900.1946a8",
                "6433e94c.b18f68"
            ]
        ]
    },
    {
        "id": "c412715b.35f49",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 974.523796081543,
        "y": 436.2261558477767,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "39f64e9a.4cae32"
            ]
        ]
    },
    {
        "id": "81999ef9.7a265",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 738.523777961731,
        "y": 363.22616827487946,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "c412715b.35f49",
                "c7523305.ecaa5",
                "87107744.973288"
            ]
        ]
    },
    {
        "id": "c7523305.ecaa5",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 980.0078144073486,
        "y": 335.0038973093033,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "c77fefd.df0431"
            ]
        ]
    },
    {
        "id": "87107744.973288",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 982.0390033721924,
        "y": 372.03520834445953,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "c77fefd.df0431"
            ]
        ]
    },
    {
        "id": "c77fefd.df0431",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vf-module-operation-input.vf-module-request-input.vf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1139.8165187835693,
        "y": 352.9241567850113,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "ac802e50.23445",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1807.0077819824219,
        "y": 457.003905415535,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "62b8a185.3b8a2"
            ]
        ]
    },
    {
        "id": "62b8a185.3b8a2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1977.3510780334473,
        "y": 461.0900408029556,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "d0800c3d.a149d",
                "c55d54ef.05e398",
                "934abf0d.9c8f4"
            ]
        ]
    },
    {
        "id": "d0800c3d.a149d",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2219.2377700805664,
        "y": 431.43245470523834,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "c55d54ef.05e398",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2222.6840286254883,
        "y": 476.0900937318802,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "934abf0d.9c8f4",
        "type": "call",
        "name": "call sdwan-get-vf-module-site-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-site-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2252.324935913086,
        "y": 519.5395450592041,
        "z": "85485d1c.bbd62",
        "wires": [
            []
        ]
    },
    {
        "id": "e56ea967.0d64a8",
        "type": "switchNode",
        "name": "switch ActivateSDWANDeviceInstance",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    ",
        "comments": "",
        "outputs": 1,
        "x": 1635.5079193115234,
        "y": 525.0039278268814,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "7a4ace3.f95e93"
            ]
        ]
    },
    {
        "id": "7a4ace3.f95e93",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1864.507667541504,
        "y": 524.0039049386978,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "7ca1b13d.5aea"
            ]
        ]
    },
    {
        "id": "7ca1b13d.5aea",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1819.920581817627,
        "y": 586.0000458955765,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "3b148280.e830fe"
            ]
        ]
    },
    {
        "id": "3b148280.e830fe",
        "type": "for",
        "name": "for loop deviceidx - Get deviceId from servicedata",
        "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 2101.2543354034424,
        "y": 596.0000663995743,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "c30dfd09.aeccc"
            ]
        ]
    },
    {
        "id": "c30dfd09.aeccc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2217.254119873047,
        "y": 647.0002518892288,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "81c39ef4.3376e"
            ]
        ]
    },
    {
        "id": "81c39ef4.3376e",
        "type": "switchNode",
        "name": "switch deviceId",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2377.2543754577637,
        "y": 649.0001050233841,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "52222e22.86b7"
            ]
        ]
    },
    {
        "id": "52222e22.86b7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2529.2545471191406,
        "y": 648.0001050233841,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "86b2a0ab.20409"
            ]
        ]
    },
    {
        "id": "86b2a0ab.20409",
        "type": "set",
        "name": "set deviceId",
        "xml": "<set>\n<parameter name='prop.site.deviceId[$prop.site.deviceId_length]' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$deviceidx].value`' />\n<parameter name='prop.site.deviceId_length' value='`$prop.site.deviceId_length + 1`' />\n",
        "comments": "",
        "x": 2669.254550933838,
        "y": 647.6000596284866,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "7b05dd5f.af6d94",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1390.5078125,
        "y": 504.00390589237213,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "25ac2ea9.1fa992",
                "e56ea967.0d64a8"
            ]
        ]
    },
    {
        "id": "b93cb489.5e32b8",
        "type": "comment",
        "name": "Get devices",
        "info": "",
        "comments": "",
        "x": 1627.5078125,
        "y": 495.00390589237213,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "6433e94c.b18f68",
        "type": "set",
        "name": "set prop.site.deviceId_length",
        "xml": "<set>\n<parameter name='prop.site.deviceId_length' value='0' />\n",
        "comments": "",
        "x": 1341.0078125,
        "y": 387.00390589237213,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "9e668e87.35152",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 690.0078582763672,
        "y": 452.00391256809235,
        "z": "85485d1c.bbd62",
        "wires": [
            []
        ]
    },
    {
        "id": "b14da696.802af8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1486.0043601989746,
        "y": 868.7539058923721,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "715b60bd.6f62c"
            ]
        ]
    },
    {
        "id": "715b60bd.6f62c",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 1674.5044555664062,
        "y": 862.7539155483246,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "cda4261b.975c18",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1489.4953269958496,
        "y": 916.3279415369034,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "5d5ef9c3.e66358"
            ]
        ]
    },
    {
        "id": "5d5ef9c3.e66358",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1663.066738128662,
        "y": 904.6136776208878,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "15ce450b.53d72b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1481.8283348083496,
        "y": 957.6612545251846,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "10b242b1.35021d"
            ]
        ]
    },
    {
        "id": "10b242b1.35021d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1669.6008911132812,
        "y": 953.1004472970963,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "e838c5da.a148e8",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1219.0042724609375,
        "y": 916.7539117336273,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "b14da696.802af8",
                "cda4261b.975c18",
                "15ce450b.53d72b"
            ]
        ]
    },
    {
        "id": "ef61bc2f.e72cb",
        "type": "execute",
        "name": "execute RestApiCallNode Create  SDWAN site",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-site-' + $template.site.role + '.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/sites'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"site-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1246.5043334960938,
        "y": 1106.7538763284683,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "1bbca445.afcd4c",
                "dd7810f4.d9827"
            ]
        ]
    },
    {
        "id": "4382528a.72cf7c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1662.1709098815918,
        "y": 1075.642806649208,
        "z": "85485d1c.bbd62",
        "wires": [
            []
        ]
    },
    {
        "id": "e4a16c90.a1073",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 1647.615493774414,
        "y": 1135.198154091835,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "dd7810f4.d9827",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1502.615484237671,
        "y": 1132.1981521844864,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "e4a16c90.a1073"
            ]
        ]
    },
    {
        "id": "1bbca445.afcd4c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1503.0598220825195,
        "y": 1075.8649603128433,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "4382528a.72cf7c"
            ]
        ]
    },
    {
        "id": "28c40fdc.d8ec",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1220.2583694458008,
        "y": 1009.7579724788666,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "745b648e.d351dc",
                "de446705.d7ff98"
            ]
        ]
    },
    {
        "id": "745b648e.d351dc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1485.2582511901855,
        "y": 994.7578675746918,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "7f55ea12.ac1244"
            ]
        ]
    },
    {
        "id": "de446705.d7ff98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1477.5082511901855,
        "y": 1036.400750875473,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "a8040204.8ea56"
            ]
        ]
    },
    {
        "id": "a8040204.8ea56",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1603.5917472839355,
        "y": 1036.6467835903168,
        "z": "85485d1c.bbd62",
        "wires": [
            []
        ]
    },
    {
        "id": "7f55ea12.ac1244",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1622.2582511901855,
        "y": 994.7578675746918,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "d0e6b60f.9d8498",
        "type": "comment",
        "name": "tmp.thirdparty-sdnc-id is hardcoded value?",
        "info": "",
        "comments": "",
        "x": 1267.508171081543,
        "y": 870.7578836679459,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "f3e2e0b8.aff3b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 943.5041809082031,
        "y": 845.4204959869385,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "fdcbc7bd.a13598",
                "49ca1a6b.47d2b4",
                "e838c5da.a148e8",
                "28c40fdc.d8ec",
                "e1072ab4.4292c8",
                "ef61bc2f.e72cb"
            ]
        ]
    },
    {
        "id": "fdcbc7bd.a13598",
        "type": "set",
        "name": "set siteId",
        "xml": "<set>\n<parameter name='prop.site.siteId' value=\"\" />\n\n",
        "comments": "",
        "x": 1160.5041847229004,
        "y": 831.753604888916,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "47307892.eb80f8",
        "type": "for",
        "name": "for cpidx..prop.site.controlpoints",
        "xml": "<for index='cpidx' start='0' end='`$prop.site.controlpoints_length`' >\n\t\t\t\t\t\t\t\t\t\n",
        "comments": "",
        "outputs": 1,
        "x": 1236.504379272461,
        "y": 781.7848201990128,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "6433e5be.2bdc0c"
            ]
        ]
    },
    {
        "id": "6433e5be.2bdc0c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1443.50390625,
        "y": 711.7847648859024,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "9d85c0cd.f74a",
                "6f1b0298.c2014c"
            ]
        ]
    },
    {
        "id": "dddca1ae.0aa96",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1885.500316619873,
        "y": 705.7535845041275,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "5f3e8ab6.51b064"
            ]
        ]
    },
    {
        "id": "26937b29.826f14",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1887.7501602172852,
        "y": 744.3964706659317,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "a5bc087a.7a1fa8"
            ]
        ]
    },
    {
        "id": "9d85c0cd.f74a",
        "type": "set",
        "name": "set prop.controlPtId",
        "xml": "<set>\n<parameter name='prop.controlPtId' value='`$prop.site.controlpoints[$cpidx]`' />\n\n",
        "comments": "",
        "x": 1632.5000076293945,
        "y": 684.7535415887833,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "e1072ab4.4292c8",
        "type": "call",
        "name": "call sdwan-get-tenant-auth",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-tenant-auth' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1198.7894897460938,
        "y": 1054.7535101175308,
        "z": "85485d1c.bbd62",
        "wires": [
            []
        ]
    },
    {
        "id": "49ca1a6b.47d2b4",
        "type": "switchNode",
        "name": "switch prop.site.controlpoints ",
        "xml": "<switch test=\"`$prop.site.controlPoint`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1093.7894897460938,
        "y": 664.7535101175308,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "1e813b9c.d1bb24",
                "5e874fed.35cf3"
            ]
        ]
    },
    {
        "id": "5e874fed.35cf3",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1281.7894897460938,
        "y": 686.7535101175308,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "8ca15cae.d821b"
            ]
        ]
    },
    {
        "id": "85141f25.2d6e",
        "type": "comment",
        "name": "should be null in request",
        "info": "",
        "comments": "",
        "x": 1330.5040740966797,
        "y": 824.7535778284073,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "8ca15cae.d821b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1090.7933807373047,
        "y": 729.7574154138565,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "47307892.eb80f8",
                "5fd810ad.7ad7a"
            ]
        ]
    },
    {
        "id": "5fd810ad.7ad7a",
        "type": "set",
        "name": "set template file spoke",
        "xml": "<set>\n<parameter name='template.site.role' value=\"spoke\" />\n\n",
        "comments": "",
        "x": 1269.7933959960938,
        "y": 748.7574754953384,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "1e813b9c.d1bb24",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1289.7894897460938,
        "y": 637.7535101175308,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "41d50201.d63e2c"
            ]
        ]
    },
    {
        "id": "41d50201.d63e2c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1427.7894897460938,
        "y": 639.7535101175308,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "aa5fa9ea.6d1fe8"
            ]
        ]
    },
    {
        "id": "aa5fa9ea.6d1fe8",
        "type": "set",
        "name": "set template file hub",
        "xml": "<set>\n<parameter name='template.site.role' value=\"hub\" />\n\n",
        "comments": "",
        "x": 1596.7934875488281,
        "y": 642.7574306726456,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "c26bdc53.ff98c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 775.5039558410645,
        "y": 825.4201318025589,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "f3e2e0b8.aff3b"
            ]
        ]
    },
    {
        "id": "c78d235f.ab387",
        "type": "switchNode",
        "name": "switch prop.site.sdwan",
        "xml": "<switch test=\"`$prop.site.sdwan`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 681.5039215087891,
        "y": 708.4201065301895,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "c26bdc53.ff98c"
            ]
        ]
    },
    {
        "id": "5f3e8ab6.51b064",
        "type": "set",
        "name": "set siteId in control point",
        "xml": "<set>\n<parameter name='prop.site.controlpoints[$cpidx]' value='`$tmp.aai.controlPoints.generated-site-id`' />\n\n",
        "comments": "",
        "x": 2064.1666679382324,
        "y": 706.75370657444,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "a5bc087a.7a1fa8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2028.1665077209473,
        "y": 742.7535272836685,
        "z": "85485d1c.bbd62",
        "wires": [
            []
        ]
    },
    {
        "id": "bbecde3.6ca5b2",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 675.5079383850098,
        "y": 1382.2541280984879,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "887e324d.70c37",
        "type": "set",
        "name": "set siteId to service data",
        "xml": "<set>\n<parameter name='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length].name' value='siteId' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length].value' value='`$site-result.success[0].id`' />\n",
        "comments": "",
        "x": 713.1783866882324,
        "y": 1060.9140511751175,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "4023f188.867be",
        "type": "set",
        "name": "set vf-module-id and vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 763.5078964233398,
        "y": 1211.7539602518082,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "8570b81.0d01d48",
        "type": "set",
        "name": "set vf-module-level-oper-status",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status'  value='Active' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-rpc-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />",
        "comments": "",
        "x": 729.5078964233398,
        "y": 1260.2539612054825,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "d5f9133b.45a0f",
        "type": "update",
        "name": "update SDWAN VPN status to AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='site-resource' \n      key='site-resource.site-resource-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id' >\n<parameter name='site-resource-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='generated-site-id' value='`$site-result.success[0].id`' /> \n<parameter name='operational-status' value='Active' />\n",
        "comments": "",
        "outputs": 1,
        "x": 734.6154022216797,
        "y": 1314.8460041284561,
        "z": "85485d1c.bbd62",
        "wires": [
            []
        ]
    },
    {
        "id": "536ee31e.2dbb9c",
        "type": "set",
        "name": "copy input data in service-data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.sdnc-request-header.' value='`$vf-module-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.request-information.' value='`$vf-module-topology-operation-input.request-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.service-information.' value='`$vf-module-topology-operation-input.service-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-information.' value='`$vf-module-topology-operation-input.vf-module-information.`' />\n",
        "comments": "",
        "x": 727.5078506469727,
        "y": 1164.003914740868,
        "z": "85485d1c.bbd62",
        "wires": []
    },
    {
        "id": "6f1b0298.c2014c",
        "type": "get-resource",
        "name": "get-resource control pts for sideId",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"site-resource\" \n\t\tkey=\"site-resource.site-resource-name = $prop.controlPtId AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.controlPoints' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1670.8334999084473,
        "y": 748.7536220550537,
        "z": "85485d1c.bbd62",
        "wires": [
            [
                "dddca1ae.0aa96",
                "26937b29.826f14"
            ]
        ]
    },
    {
        "id": "a5bc4e1c.1202d",
        "type": "set",
        "name": "increment param length",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length + 1`' />\n",
        "comments": "",
        "x": 717.6667060852051,
        "y": 1112.6666584014893,
        "z": "85485d1c.bbd62",
        "wires": []
    }
]