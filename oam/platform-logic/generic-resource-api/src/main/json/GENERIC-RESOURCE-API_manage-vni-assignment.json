[{"id":"afcb1bdd.0a5d5","type":"dgstart","name":"DGSTART","outputs":1,"x":157,"y":64,"z":"53860ef1.ddc3b8","wires":[["f5eef8dc.e02d38"]]},{"id":"f5eef8dc.e02d38","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"Reserve/release VNI","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":340,"y":153,"z":"53860ef1.ddc3b8","wires":[["59290e08.4765c"]]},{"id":"59290e08.4765c","type":"method","name":"manage-vni-assignment","xml":"<method rpc='manage-vni-assignment' mode='sync'>\n","comments":"","outputs":1,"x":442,"y":225,"z":"53860ef1.ddc3b8","wires":[["82801607.2fe58"]]},{"id":"c6177ede.bbfd7","type":"switchNode","name":"switch $tmp.manageVni.action","xml":"<switch test='`$tmp.manageVni.action`'>\n","comments":"","outputs":1,"x":916,"y":258,"z":"53860ef1.ddc3b8","wires":[["652560e0.4b8448","962baf42.39bb9"]]},{"id":"652560e0.4b8448","type":"outcome","name":"reserve","xml":"<outcome value='reserve'>\n","comments":"","outputs":1,"x":1198,"y":257,"z":"53860ef1.ddc3b8","wires":[["525e1ab8.dd8ed4"]]},{"id":"525e1ab8.dd8ed4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1370,"y":259,"z":"53860ef1.ddc3b8","wires":[["f1ee91fd.542a6"]]},{"id":"f1ee91fd.542a6","type":"get-resource","name":"get-resource VNI from VLAN_ID_POOL","xml":"<get-resource plugin='`$tmp.sql.plugin`' resource='VNI' key=\"SELECT min(vlan_id) vni from VLAN_ID_POOL where purpose = $tmp.manageVni.pool and status='AVAILABLE'\" pfx=\"tmp.manageVni\" >\n","comments":"","outputs":1,"x":1651,"y":260,"z":"53860ef1.ddc3b8","wires":[["4142f9d2.e06a9"]]},{"id":"82801607.2fe58","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":674,"y":224,"z":"53860ef1.ddc3b8","wires":[["93060fb5.07fc8","c6177ede.bbfd7"]]},{"id":"93060fb5.07fc8","type":"set","name":"set sql plugin name","xml":"<set>\n<parameter name='tmp.sql.plugin' value='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' />\n","comments":"","x":881,"y":183,"z":"53860ef1.ddc3b8","wires":[]},{"id":"4142f9d2.e06a9","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1923,"y":258,"z":"53860ef1.ddc3b8","wires":[["ccc94438.589708"]]},{"id":"ccc94438.589708","type":"save","name":"Mark vni reserved","xml":"<save plugin='`$tmp.sql.plugin`' resource='VNI' key=\"UPDATE VLAN_ID_POOL set status='RESERVED' where purpose='VNI' and vlan_id = $tmp.manageVni.vni\" force='false'>\n\n","comments":"","outputs":1,"x":2105,"y":259,"z":"53860ef1.ddc3b8","wires":[[]]},{"id":"962baf42.39bb9","type":"outcome","name":"release","xml":"<outcome value='release'>\n","comments":"","outputs":1,"x":1196,"y":324,"z":"53860ef1.ddc3b8","wires":[["3b51720c.663216"]]},{"id":"3b51720c.663216","type":"save","name":"Mark vni available","xml":"<save plugin='`$tmp.sql.plugin`' resource='VNI' key=\"UPDATE VLAN_ID_POOL set status='AVAILABLE' where purpose='VNI' and vlan_id=$tmp.manage-vni.vni\" force='false'>\n\n","comments":"","outputs":1,"x":1382,"y":327,"z":"53860ef1.ddc3b8","wires":[[]]}]