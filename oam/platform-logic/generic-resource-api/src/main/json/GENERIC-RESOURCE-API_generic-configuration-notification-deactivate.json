[{"id":"581097fa.f08428","type":"dgstart","name":"DGSTART","outputs":1,"x":109.99999237060547,"y":85,"z":"556dacae.20cff4","wires":[["d9b9ed23.bda82"]]},{"id":"d9b9ed23.bda82","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":225.2856903076172,"y":125.23810863494873,"z":"556dacae.20cff4","wires":[["bb24c20b.23cad"]]},{"id":"bb24c20b.23cad","type":"method","name":"method generic-configuration-notification-deactivate","xml":"<method rpc='generic-configuration-notification-deactivate' mode='sync'>\n","comments":"","outputs":1,"x":239.42861938476562,"y":165.9999942779541,"z":"556dacae.20cff4","wires":[["4bb7c400.4b7fdc"]]},{"id":"d4b5fa2.03e5108","type":"comment","name":"generic-configuration-notification-deactivate","info":"","comments":"","x":504.3448486328125,"y":32.58634376525879,"z":"556dacae.20cff4","wires":[]},{"id":"4bb7c400.4b7fdc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":158.33333587646484,"y":534.9999856948853,"z":"556dacae.20cff4","wires":[["3c635801.633328","625b4226.ce6f6c","f25f3503.b5e368","250622a8.b0928e","bb670b13.22a4e8","55e6d825.5666e8","23046880.f0a148","defede2a.a7fc2","f97342ec.26eae"]]},{"id":"3c635801.633328","type":"execute","name":"execute readProperties","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":408.33331298828125,"y":308.3333501815796,"z":"556dacae.20cff4","wires":[[]]},{"id":"625b4226.ce6f6c","type":"execute","name":"generate gc-configuration url","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.gc-configuration`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.gc-url\"/>\n    <parameter name=\"target\" value=\"{configuration-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.configuration-information.configuration-id`\"/>\n","comments":"","outputs":1,"x":423.3332977294922,"y":360.00000381469727,"z":"556dacae.20cff4","wires":[[]]},{"id":"d8184515.19b268","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":758.3332061767578,"y":411.66652488708496,"z":"556dacae.20cff4","wires":[["ee8e0ca5.c303a"]]},{"id":"f25f3503.b5e368","type":"execute","name":"execute RestApiCallNode - GET gc-configuration","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.gc-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-gc\" />\n\n","comments":"","outputs":1,"x":486.6667175292969,"y":411.66665840148926,"z":"556dacae.20cff4","wires":[["d8184515.19b268"]]},{"id":"ee8e0ca5.c303a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":886.6665267944336,"y":411.6666507720947,"z":"556dacae.20cff4","wires":[["c1f6c677.83fa88","27d67c5a.263724"]]},{"id":"c1f6c677.83fa88","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"Y\" />\n<parameter name=\"input.response-code\"\n  value=\"500\" />\n<parameter name=\"input.response-message\"\n  value=\"`'Cannot find configuration ' + $generic-configuration-notification-input.configuration-information.configuration-id`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":1064.9998397827148,"y":379.9999942779541,"z":"556dacae.20cff4","wires":[[]]},{"id":"27d67c5a.263724","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Cannot find configuration ' + $generic-configuration-notification-input.configuration-information.configuration-id`\" />\n","comments":"","x":1041.666488647461,"y":431.66667652130127,"z":"556dacae.20cff4","wires":[]},{"id":"f97342ec.26eae","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"success\" />\n\n","comments":"","x":381.6666488647461,"y":795.0000114440918,"z":"556dacae.20cff4","wires":[]},{"id":"defede2a.a7fc2","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-gcnotify.log' />\n","comments":"","outputs":1,"x":374.99999618530273,"y":749.080265045166,"z":"556dacae.20cff4","wires":[[]]},{"id":"23046880.f0a148","type":"configure","name":"send success to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"`$generic-configuration-notification-input.ack-final-indicator`\" />\n<parameter name=\"input.response-code\"\n  value=\"`$generic-configuration-notification-input.response-code`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":405.0000534057617,"y":704.0802936553955,"z":"556dacae.20cff4","wires":[[]]},{"id":"55e6d825.5666e8","type":"execute","name":"execute RestApiCallNode - PUT port-mirror-configuration","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.genconfig.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.gc-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-gc\" />\n\n","comments":"","outputs":1,"x":515.0001449584961,"y":630.7469568252563,"z":"556dacae.20cff4","wires":[["7ecf2bec.09b4a4","60e9d18f.0ae6a"]]},{"id":"7ecf2bec.09b4a4","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":815.0699653625488,"y":652.0785121917725,"z":"556dacae.20cff4","wires":[["f40a17d9.9878c8"]]},{"id":"60e9d18f.0ae6a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":807.4986000061035,"y":610.5785322189331,"z":"556dacae.20cff4","wires":[["f40a17d9.9878c8"]]},{"id":"f40a17d9.9878c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":970.488109588623,"y":624.6513586044312,"z":"556dacae.20cff4","wires":[["2433e521.9188fa"]]},{"id":"2433e521.9188fa","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Error updating md-sal for gc-configuration' />\n","comments":"","x":1143.3334999084473,"y":624.0803337097168,"z":"556dacae.20cff4","wires":[]},{"id":"250622a8.b0928e","type":"set","name":"set order-status to PendingDelete","xml":"<set>\n<parameter name='mdsal-gc.gc-configuration[0].configuration-data.configuration-oper-status.order-status'\n  value='PendingDelete' />\n<parameter name='mdsal-gc.gc-configuration[0].configuration-data.configuration-oper-status.last-action'\n  value='DeleteGenericConfigurationInstance' />\n<parameter name='mdsal-gc.gc-configuration[0].configuration-data.configuration-oper-status.last-rpc-action'\n  value='deactivate' />\n","comments":"","x":438.33349609375,"y":477.4137153625488,"z":"556dacae.20cff4","wires":[]},{"id":"bb670b13.22a4e8","type":"set","name":"copy mdsal-gc.gc-configuration[0]. to gc.","xml":"<set>\n<parameter name='gc.' value='mdsal-gc.gc-configuration[0].' />\n","comments":"","x":463.33348083496094,"y":557.4137840270996,"z":"556dacae.20cff4","wires":[]}]