[
    {
        "id": "f03bdbde.4579d8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 175.00390625,
        "y": 104.6666704416275,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "b789d37d.82a2e"
            ]
        ]
    },
    {
        "id": "b789d37d.82a2e",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 321.2419891357422,
        "y": 179.61906397342682,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "245879c2.1bf726"
            ]
        ]
    },
    {
        "id": "245879c2.1bf726",
        "type": "method",
        "name": "contrail-route-topology-operation-create",
        "xml": "<method rpc='contrail-route-topology-operation-create' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 401.1587562561035,
        "y": 248.85711252689362,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "cb6febc8.40d7a8"
            ]
        ]
    },
    {
        "id": "cb6febc8.40d7a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 309.4800910949707,
        "y": 392.1904546022415,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "78592f6d.e5c98",
                "e3ebac4.ab7145",
                "b31530da.30339",
                "ef64ef71.c48f1",
                "41df4f0b.30a5f",
                "af3b175.bb7ece8",
                "478f720.e98ad9",
                "bc7f0404.80df38",
                "bc587a66.feda28",
                "a844f172.05d78",
                "2c4387c0.bbe4d8",
                "bd1d7050.2c7d2",
                "78389040.50c04",
                "3b7c3ee7.892e02",
                "9c87964d.1eedd8",
                "cb3789bb.42da88",
                "96e58f96.3e0dc",
                "bd7a20ba.9bf84",
                "7d144ee0.ee98f",
                "65bdabe8.142354",
                "483287bc.c27a28",
                "29d6c655.17265a",
                "808bf1b8.60d31",
                "cf49ae05.2f29"
            ]
        ]
    },
    {
        "id": "e3ebac4.ab7145",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 507.7183837890625,
        "y": 2060.3935294486582,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "78592f6d.e5c98",
        "type": "set",
        "name": "set output to api handler",
        "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='contrail-route-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $contrail-route-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
        "comments": "",
        "x": 536.4722900390625,
        "y": 2022.8493228293955,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "a844f172.05d78",
        "type": "set",
        "name": "set allotted-resource-oper-status",
        "xml": "<set>\n<parameter name='ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Created' />\n<parameter name='ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$contrail-route-topology-operation-input.request-information.request-action`' />\n<parameter name='ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$contrail-route-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$contrail-route-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
        "comments": "",
        "x": 569.8056755065918,
        "y": 1895.2302031852305,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "ef64ef71.c48f1",
        "type": "set",
        "name": "set tmp.ar.self-link",
        "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:contrail-route-allotted-resources/contrail-route-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/contrail-route-topology/'` \" />\n\n",
        "comments": "",
        "x": 571.7419624328613,
        "y": 365.9999920129776,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "b31530da.30339",
        "type": "set",
        "name": "set tmp.ar.allotted-resource-id,etc",
        "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$contrail-route-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$contrail-route-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 619.0012359619141,
        "y": 332.2592588663101,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "41df4f0b.30a5f",
        "type": "execute",
        "name": "execute Properties - pull properties file",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 633.4258880615234,
        "y": 401.89820539951324,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "478f720.e98ad9",
        "type": "execute",
        "name": "execute RestApiCallNode - Get AR by id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 651.8560028076172,
        "y": 573.4595466852188,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "aebb7490.69e928",
                "cfd4b50e.a5e6b8"
            ]
        ]
    },
    {
        "id": "af3b175.bb7ece8",
        "type": "execute",
        "name": "generate allotted-resource url",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.cr-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 606.0687713623047,
        "y": 457.68387281894684,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "aebb7490.69e928",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 893.8187561035156,
        "y": 570.9339929819107,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "a22ae59.4cc7418"
            ]
        ]
    },
    {
        "id": "bc7f0404.80df38",
        "type": "execute",
        "name": "execute RestApiCallNode - PUT AR by id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cr.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 587.0809020996094,
        "y": 1979.755991578102,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "1f0721b.9b811de",
                "e79eeaaa.e7dcb8",
                "1d4083e3.1dc26c"
            ]
        ]
    },
    {
        "id": "1f0721b.9b811de",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 869.8889007568359,
        "y": 2015.6111840568483,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "d062f84e.64a6c8"
            ]
        ]
    },
    {
        "id": "e79eeaaa.e7dcb8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 860.8889503479004,
        "y": 1984.1112098060548,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "d062f84e.64a6c8"
            ]
        ]
    },
    {
        "id": "1d4083e3.1dc26c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 864.638988494873,
        "y": 1954.4683146812022,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "5be66386.866e6c"
            ]
        ]
    },
    {
        "id": "d062f84e.64a6c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for contrail-route-allotted-resource\" />\n",
        "comments": "",
        "x": 1030.638988494873,
        "y": 1984.8612336479127,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "a22ae59.4cc7418",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1062.818759918213,
        "y": 569.4338937997818,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "3b15ea01.810756"
            ]
        ]
    },
    {
        "id": "3b15ea01.810756",
        "type": "switchNode",
        "name": "switch cr length",
        "xml": "<switch test='`$mdsal-ar.contrail-route-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1273.6760025024414,
        "y": 569.05302298069,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "9e98b320.e152c",
                "8b7088ef.449658"
            ]
        ]
    },
    {
        "id": "9e98b320.e152c",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1463.0093078613281,
        "y": 569.0529810190201,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "a5eacd9b.7855d"
            ]
        ]
    },
    {
        "id": "ad98339.532aad",
        "type": "set",
        "name": "set ar from get",
        "xml": "<set>\n<parameter name='ar.' value='$mdsal-ar.contrail-route-allotted-resource[0].' />\n",
        "comments": "",
        "x": 1886.2001152038574,
        "y": 600.6245447397232,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "a5eacd9b.7855d",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic='true'>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1647.533197402954,
        "y": 565.9578148126602,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "ad98339.532aad",
                "3870bad1.110186"
            ]
        ]
    },
    {
        "id": "2d62b33d.718e0c",
        "type": "comment",
        "name": "GET contrail-route-allotted-resource from mdsal",
        "info": "",
        "comments": "",
        "x": 661.8186988830566,
        "y": 537.43388235569,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "cb3789bb.42da88",
        "type": "set",
        "name": "set ar-assignments.contrail-id",
        "xml": "<set>\n<parameter name='ar-assignments.contrail-id' value=\"`$contrailResp.network-policy.uuid`\" />\n\n\n\n",
        "comments": "",
        "x": 591.6760177612305,
        "y": 1456.2319885492325,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "3870bad1.110186",
        "type": "set",
        "name": "save backup copy of mdsal-ar for rollback",
        "xml": "<set>\n<parameter name='bk-cr-ar' value='$mdsal-ar.' />\n",
        "comments": "",
        "x": 1974.0571670532227,
        "y": 567.4340368509293,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "d436744f.3d37d8",
        "type": "comment",
        "name": "Create urls for restapi",
        "info": "",
        "comments": "",
        "x": 576.9615592956543,
        "y": 431.29102289676666,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "5be66386.866e6c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1006.2949562072754,
        "y": 1950.6604838706553,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "bc587a66.feda28",
        "type": "execute",
        "name": "execute getTime",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 518.9616737365723,
        "y": 1928.3269076682627,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "ca916db.f325d9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Contrail Route not found\" />\n    \n",
        "comments": "",
        "x": 1613.3376388549805,
        "y": 653.6667238473892,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "cfd4b50e.a5e6b8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 885.6705589294434,
        "y": 606.0000778436661,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "18936b2c.da7865"
            ]
        ]
    },
    {
        "id": "18936b2c.da7865",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1065.670509338379,
        "y": 606.6666284799576,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "ca916db.f325d9"
            ]
        ]
    },
    {
        "id": "2c4387c0.bbe4d8",
        "type": "set",
        "name": "set ar data",
        "xml": "<set>\n<parameter name='ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='ar.allotted-resource-status.action' value=\"`$contrail-route-topology-operation-input.request-information.request-action` \" />\n<parameter name='ar.allotted-resource-status.rpc-name' value=\"contrail-route-topology-operation\" />\n<parameter name='ar.allotted-resource-status.rpc-action' value=\"`$contrail-route-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$contrail-route-topology-operation-input.request-information.` \" />\n<parameter name='ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$contrail-route-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$contrail-route-topology-operation-input.service-information.` \" />\n<parameter name='ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$contrail-route-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='ar.allotted-resource-data.allotted-resource-operation-information.contrail-route-request-input.' value=\"`$contrail-route-topology-operation-input.contrail-route-request-input.` \" />\n",
        "comments": "",
        "x": 558.5277328491211,
        "y": 611.4761854410172,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "8b7088ef.449658",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1451.3372611999512,
        "y": 606.3333412408829,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "ca916db.f325d9"
            ]
        ]
    },
    {
        "id": "bd7a20ba.9bf84",
        "type": "set",
        "name": "set cloud-region-id for input to contrail",
        "xml": "<set>\n<parameter name='cloud-region-id' value='`$tmp.ar.cloud-region-id`' />\n",
        "comments": "",
        "x": 615.3849792480469,
        "y": 1262.6431738138199,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "ca1182bc.7b6ef",
        "type": "comment",
        "name": "Call contrail api here",
        "info": "",
        "comments": "",
        "x": 559.0516815185547,
        "y": 1229.3096767663956,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "76519ed6.4be52",
        "type": "comment",
        "name": "Rollback - rollback contrail/AAI",
        "info": "",
        "comments": "",
        "x": 1243.8612670898438,
        "y": 1189.714376091957,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "396c22cf.fd071e",
        "type": "comment",
        "name": "Create  network policy in AAI",
        "info": "",
        "comments": "",
        "x": 565.7659301757812,
        "y": 1664.8929439783096,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "3b7c3ee7.892e02",
        "type": "save",
        "name": "save AnAI - network-policy",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\" \n\t\tkey=\"network-policy.network-policy-id = $ar-assignments.contrail-id\" >\n<!-- Create l3-network object -->\n<parameter name=\"network-policy-id\" value=\"`$ar-assignments.contrail-id`\" />\n<parameter name=\"network-policy-fqdn\" value=\"`$ar-assignments.fq-name`\" />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 581.1428146362305,
        "y": 1701.960508942604,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "178286.09ba5d7b",
                "916ae281.f5ee2"
            ]
        ]
    },
    {
        "id": "6b68050d.217ccc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failed to save network policy in AAI\" />\n",
        "comments": "",
        "x": 1053.48832321167,
        "y": 1692.2421222925186,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "178286.09ba5d7b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 824.9169311523438,
        "y": 1691.257859826088,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "6b68050d.217ccc"
            ]
        ]
    },
    {
        "id": "916ae281.f5ee2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 828.7264289855957,
        "y": 1720.7342764139175,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "6b68050d.217ccc"
            ]
        ]
    },
    {
        "id": "13fbc501.526acb",
        "type": "comment",
        "name": "MDSal adaptor only saves consuming service so parent service and AR are done by Rest api calls",
        "info": "",
        "comments": "",
        "x": 681.6705322265625,
        "y": 102.99999868869781,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "9c87964d.1eedd8",
        "type": "execute",
        "name": "execute Contrail API create network policy",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.contrail.ContrailAdaptor' method='sendContrailRequest' emitsOutcome='true' >\n<parameter name='api-name' value='network-policy' />\n<parameter name='api-action' value='create' />\n<parameter name='resp-prefix' value='contrailResp' />\n<parameter name='default-domain' value='default-domain' />\n<parameter name='policy-name' value='`$ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.fq-name`' />\n<parameter name='default-project' value='`$tmp.ar.tenant-name`' /> \n<!-- dummy for dev <parameter name='default-project' value='default-project' /> -->\n<parameter name='vipr-service-instance' value='`$ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.contrail-applied-service.contrail-fqdn`' />\n<parameter name='dst-virtual-network' value='`$aai.dest-network.contrail-network-fqdn`' />\n<parameter name='src-virtual-network' value='`$aai.src-network.contrail-network-fqdn`' />\n<parameter name='direction' value='&lt;&gt;' />\n<parameter name='cloud-region-id' value='`$tmp.ar.cloud-region-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 620.0039978027344,
        "y": 1345.5005213022232,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "2fb2335a.cbd49c",
                "a5da0427.0c5768"
            ]
        ]
    },
    {
        "id": "2fb2335a.cbd49c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 901.384880065918,
        "y": 1313.6428172923625,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "1c40ddfb.ac3da2"
            ]
        ]
    },
    {
        "id": "a5da0427.0c5768",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 899.4802017211914,
        "y": 1346.6427570581436,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "a4c8be00.baf52"
            ]
        ]
    },
    {
        "id": "bd1d7050.2c7d2",
        "type": "switchNode",
        "name": "switch source-network.network-id",
        "xml": "<switch test='`$ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.source-network.network-id`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 622.0039520263672,
        "y": 817.6667934656143,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "16cf3207.6919ae",
                "4972ee2e.1e371"
            ]
        ]
    },
    {
        "id": "16cf3207.6919ae",
        "type": "other",
        "name": "Other",
        "xml": "<outcome value='Other'>",
        "comments": "",
        "outputs": 1,
        "x": 978.0041694641113,
        "y": 816.333172917366,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "4d7f64a6.3f3e3c"
            ]
        ]
    },
    {
        "id": "4972ee2e.1e371",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 973.6709861755371,
        "y": 779.3329731225967,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "f8faa309.794be"
            ]
        ]
    },
    {
        "id": "7af5889b.368718",
        "type": "for",
        "name": "for nidx..service-data.networks.network[]",
        "xml": "<for index='nidx' start='0' end='`$service-data.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2113.448944091797,
        "y": 856.1109507083893,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "a1094de3.d998d"
            ]
        ]
    },
    {
        "id": "e0a0a8a2.ee5b68",
        "type": "switchNode",
        "name": "switch service-data.networks.network_length",
        "xml": "<switch test='`$service-data.networks.network_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1369.829605102539,
        "y": 816.3490000963211,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "25b29885.305408",
                "d2c788cf.79feb8"
            ]
        ]
    },
    {
        "id": "25b29885.305408",
        "type": "other",
        "name": "outcome Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1658.829605102539,
        "y": 818.3490611314774,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "25abf517.021e9a"
            ]
        ]
    },
    {
        "id": "d2c788cf.79feb8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1638.829605102539,
        "y": 853.3490611314774,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "d2c2c0a9.d8b2c"
            ]
        ]
    },
    {
        "id": "d2c2c0a9.d8b2c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1843.4329071044922,
        "y": 857.2369349002838,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "7af5889b.368718"
            ]
        ]
    },
    {
        "id": "4d7f64a6.3f3e3c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1112.1154251098633,
        "y": 816.7775775194168,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "e0a0a8a2.ee5b68"
            ]
        ]
    },
    {
        "id": "f8faa309.794be",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error assigning contrail route.  Source network not found\" />\n",
        "comments": "",
        "x": 1127.8044509887695,
        "y": 779.999875664711,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "25abf517.021e9a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error assigning contrail route.  Source network not found\" />\n",
        "comments": "",
        "x": 1851.9376831054688,
        "y": 818.6665213108063,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "d6797d24.acfca",
        "type": "comment",
        "name": "Find tenant id/cloud region from source network",
        "info": "",
        "comments": "",
        "x": 659.4042739868164,
        "y": 784.333109498024,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "a1094de3.d998d",
        "type": "switchNode",
        "name": "switch networkid found",
        "xml": "<switch test=\"`$service-data.networks.network[$nidx].network-id == $ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.source-network.network-id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2406.0037536621094,
        "y": 853.0000774860382,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "2fc2f6cc.52811a",
                "bd8b1543.d5feb8"
            ]
        ]
    },
    {
        "id": "cf465404.bca108",
        "type": "set",
        "name": "set tmp vals",
        "xml": "<set>\n<parameter name='tmp.ar.tenant-id' value='`$service-data.networks.network[$nidx].network-data.network-topology.tenant`' />\n<parameter name='tmp.ar.cloud-region-id' value='`$service-data.networks.network[$nidx].network-data.network-topology.aic-cloud-region`' />\n\n\n",
        "comments": "",
        "x": 2945.670425415039,
        "y": 843.0000545978546,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "18df3dec.3762c2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2755.736867904663,
        "y": 856.0000660419464,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "cf465404.bca108",
                "a77873a9.58a3d"
            ]
        ]
    },
    {
        "id": "2fc2f6cc.52811a",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2600.2702445983887,
        "y": 855.9999287128448,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "18df3dec.3762c2"
            ]
        ]
    },
    {
        "id": "bd8b1543.d5feb8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2601.069854736328,
        "y": 893.9999315738678,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "12777d15.58b793"
            ]
        ]
    },
    {
        "id": "12777d15.58b793",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error assigning contrail route.  Source network not found\" />\n",
        "comments": "",
        "x": 2779.070011138916,
        "y": 893.9999973773956,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "a77873a9.58a3d",
        "type": "get-resource",
        "name": "get-resource tenant",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tenant\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $tmp.ar.cloud-region-id AND\n\t\t     tenant.tenant-id = $tmp.ar.tenant-id\"\n        pfx='aai.tenant' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2968.1369705200195,
        "y": 878.9997503757477,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "d053a66e.8a2958",
                "f2ee2fa9.2bf8d",
                "d188bc90.da64f"
            ]
        ]
    },
    {
        "id": "d053a66e.8a2958",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3188.998359680176,
        "y": 871.6108648777008,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "fb3363cd.b2365"
            ]
        ]
    },
    {
        "id": "f2ee2fa9.2bf8d",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3184.331386566162,
        "y": 904.9441788196564,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "fb3363cd.b2365"
            ]
        ]
    },
    {
        "id": "fb3363cd.b2365",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Tenant not found in AAI\" />\n\n",
        "comments": "",
        "x": 3358.507308959961,
        "y": 892.9997379779816,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "d188bc90.da64f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3184.507392883301,
        "y": 840.0368292331696,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "a5dbc0a1.7ca4b"
            ]
        ]
    },
    {
        "id": "a5dbc0a1.7ca4b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3364.507392883301,
        "y": 838.0368292331696,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "3eca1514.f49d8a"
            ]
        ]
    },
    {
        "id": "3eca1514.f49d8a",
        "type": "set",
        "name": "set tenant name",
        "xml": "<set>\n<parameter name='tmp.ar.tenant-name' value='`$aai.tenant.tenant-name`' />\n\n\n",
        "comments": "",
        "x": 3551.4704971313477,
        "y": 835.6665709018707,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "78389040.50c04",
        "type": "update",
        "name": "update AAI allotted-resource",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $service-data.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $service-data.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $service-data.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"operational-status\" value=\"out-of-service-path\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 568.4326171875,
        "y": 1801.274008154869,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "ee05ecac.f85f4",
                "76238400.885e4c"
            ]
        ]
    },
    {
        "id": "ee05ecac.f85f4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 824.1945114135742,
        "y": 1778.512227654457,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "9a72cd34.8de84"
            ]
        ]
    },
    {
        "id": "76238400.885e4c",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 829.5039405822754,
        "y": 1814.0836454629898,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "9a72cd34.8de84"
            ]
        ]
    },
    {
        "id": "9a72cd34.8de84",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
        "comments": "",
        "x": 1039.2897262573242,
        "y": 1780.1312719583511,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "3ebda3d1.60c63c",
        "type": "comment",
        "name": "Update AAI AR",
        "info": "",
        "comments": "",
        "x": 524.6326179504395,
        "y": 1770.416758980602,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "a4c8be00.baf52",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create policy in Contrail. '+ $contrailResp.resp-code + ':' +$contrailResp.resp-message `\" />\n",
        "comments": "",
        "x": 1059.385009765625,
        "y": 1345.9762045145035,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "96e58f96.3e0dc",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.contrail-route-topology-operation-create\"/>\n<parameter name='field3' value='network-policy' />\n<parameter name='field4' value='create' />\n<parameter name='field5' value='contrailResp' />\n<parameter name='field6' value='default-domain' />\n<parameter name='field7' value='`$ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.fq-name`' />\n<parameter name='field8' value='`$tmp.ar.tenant-name`' />\n<parameter name='field9' value='`$ar.allotted-resource-data.allotted-resource-operation-information.contrail-route-request-input.contrail-applied-service-info.contrail-fqdn`' />\n<parameter name='field10' value='$aai.dest-network.contrail-network-fqdn' />\n<parameter name='field11' value='$aai.src-network.contrail-network-fqdn' />\n<parameter name='field12' value='&lt;&gt;' />\n<parameter name='field13' value='$tmp.ar.cloud-region-id' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 508.09918212890625,
        "y": 1315.2619215250015,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "f4f87407.7b7138",
        "type": "not-found",
        "name": "not found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 904.2896728515625,
        "y": 895.5955168008804,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "81772977.20deb8"
            ]
        ]
    },
    {
        "id": "29d6c655.17265a",
        "type": "get-resource",
        "name": "get AnAI - l3-network by network-id",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\t\tkey=\"l3-network.network-id = $ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.source-network.network-id\" \n\t\tlocal-only=\"false\" \n\t\tpfx=\"aai.src-network\">\n",
        "comments": "",
        "outputs": 1,
        "x": 632.9165954589844,
        "y": 903.1277776956558,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "678eae69.b9714",
                "f4f87407.7b7138",
                "5e43af76.092db"
            ]
        ]
    },
    {
        "id": "678eae69.b9714",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 897.0117797851562,
        "y": 930.0801206827164,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "81772977.20deb8"
            ]
        ]
    },
    {
        "id": "81772977.20deb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"500\" />\n\t<parameter name=\"error-message\" value=\"`'Error retrieving source network with network-id=' + $ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.source-network.network-id + ' from AnAI'`\" />",
        "comments": "",
        "x": 1049.1227416992188,
        "y": 926.3023496866226,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "5e43af76.092db",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 902.2897338867188,
        "y": 961.5955168008804,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "aa41ec1c.71542"
            ]
        ]
    },
    {
        "id": "aa41ec1c.71542",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1054.956298828125,
        "y": 959.9288450479507,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "ffbc6d1d.bd87f",
        "type": "comment",
        "name": "GET source network from AAI",
        "info": "",
        "comments": "",
        "x": 605.7182312011719,
        "y": 871.3097540140152,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "a32f696b.7ff868",
        "type": "not-found",
        "name": "not found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 908.5753784179688,
        "y": 1002.7382913827896,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "8a6cd51f.44caa8"
            ]
        ]
    },
    {
        "id": "808bf1b8.60d31",
        "type": "get-resource",
        "name": "get AnAI - l3-network by network-id",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\t\tkey=\"l3-network.network-id = $ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.dest-network.network-id\" \n\t\tlocal-only=\"false\" \n\t\tpfx=\"aai.dest-network\">\n",
        "comments": "",
        "outputs": 1,
        "x": 637.2023162841797,
        "y": 1013.6038881540298,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "9ad6ea77.f2aad8",
                "a32f696b.7ff868",
                "4dcfd8c5.d1f5f8"
            ]
        ]
    },
    {
        "id": "9ad6ea77.f2aad8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 901.2974853515625,
        "y": 1037.2228952646255,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "8a6cd51f.44caa8"
            ]
        ]
    },
    {
        "id": "8a6cd51f.44caa8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"500\" />\n\t<parameter name=\"error-message\" value=\"`'Error retrieving destination network with network-id=' + $ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.source-network.network-id + ' from AnAI'`\" />",
        "comments": "",
        "x": 1053.408447265625,
        "y": 1033.4451242685318,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "4dcfd8c5.d1f5f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 901.575439453125,
        "y": 1073.7382627725601,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "532eb226.00307c"
            ]
        ]
    },
    {
        "id": "532eb226.00307c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1054.2420043945312,
        "y": 1072.0715910196304,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "f7c80e16.0bab8",
        "type": "comment",
        "name": "GET dest network from AAI",
        "info": "",
        "comments": "",
        "x": 610.0039367675781,
        "y": 978.4525285959244,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "2a90d119.3eaf9e",
        "type": "set",
        "name": "set temp contrail fqdn for input to contrail",
        "xml": "<set>\n<parameter name='aai.src-network.contrail-network-fqdn' value='`tmpsourcecontrailfqdn`' />\n<parameter name='aai.dest-network.contrail-network-fqdn' value='`tmpdestinationcontrailfqdn`' />",
        "comments": "",
        "x": 643.0039710998535,
        "y": 1160.5954176187515,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "1c40ddfb.ac3da2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1053.5753631591797,
        "y": 1314.309542298317,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "7d144ee0.ee98f",
        "type": "set",
        "name": "set ar-assignments",
        "xml": "<set>\n<parameter name='ar-assignments.' value=\"`$ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.`\" />\n\n\n\n",
        "comments": "",
        "x": 584.2896690368652,
        "y": 642.2381588220596,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "65bdabe8.142354",
        "type": "set",
        "name": "set ar-assignments",
        "xml": "<set>\n<parameter name='ar.allotted-resource-data.contrail-route-topology.contrail-route-assignments.' value='`$ar-assignments.`' />\n\n\n\n",
        "comments": "",
        "x": 531.4326019287109,
        "y": 1861.2740770578384,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "483287bc.c27a28",
        "type": "switchNode",
        "name": "switch contrailResp.resp-code",
        "xml": "<switch test='`$contrailResp.resp-code`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 586.611083984375,
        "y": 1410.9167677164078,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "5959bd36.12d064",
                "f8777e5b.220e7"
            ]
        ]
    },
    {
        "id": "5959bd36.12d064",
        "type": "outcome",
        "name": "outcome 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 863.7540863752365,
        "y": 1410.9168983697891,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "ba0eee80.bc27f"
            ]
        ]
    },
    {
        "id": "f8777e5b.220e7",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 843.7539978027344,
        "y": 1438.4168020486832,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "f5b88fb1.136b5"
            ]
        ]
    },
    {
        "id": "f5b88fb1.136b5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create policy in Contrail. '+ $contrailResp.resp-code + ':' +$contrailResp.resp-message `\" />\n",
        "comments": "",
        "x": 1016.2540969848633,
        "y": 1440.9169002771378,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "ba0eee80.bc27f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1008.7539978027344,
        "y": 1410.9168001413345,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "6e33a9b5.9b7438",
        "type": "comment",
        "name": "Dummy values for dev/dev",
        "info": "",
        "comments": "",
        "x": 590.0039176940918,
        "y": 1123.666897892952,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "cf49ae05.2f29",
        "type": "call",
        "name": "call policy-manager-create-policy",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='policy-manager-create-policy' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 605.1466903686523,
        "y": 1545.0951210260391,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "eefb278d.613d48",
                "526e4a66.638b34"
            ]
        ]
    },
    {
        "id": "eefb278d.613d48",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 840.7260513305664,
        "y": 1542.4370886087418,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "f9ba847c.ff2c28"
            ]
        ]
    },
    {
        "id": "526e4a66.638b34",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 846.718318939209,
        "y": 1583.2381640672684,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "7657e814.bd32b8"
            ]
        ]
    },
    {
        "id": "7657e814.bd32b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 999.3848838806152,
        "y": 1581.5714923143387,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "bc667334.be1b7",
        "type": "execute",
        "name": "execute Contrail API delete network policy",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.contrail.ContrailAdaptor' method='sendContrailRequest' emitsOutcome='true' >\n<parameter name='api-name' value='network-policy' />\n<parameter name='api-action' value='delete' />\n<parameter name='resp-prefix' value='contrailResp' />\n<parameter name='cloud-region-id' value='`$tmp.ar.cloud-region-id`' />\n<parameter name='contrail-network-policy-id' value='`$ar-assignments.contrail-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1293.7182312011719,
        "y": 1540.809497475624,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "f2a919a7.bd34a8",
                "7bf7079a.433c68"
            ]
        ]
    },
    {
        "id": "f2a919a7.bd34a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1570.813377380371,
        "y": 1510.3803775645792,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "f667916c.8d17b"
            ]
        ]
    },
    {
        "id": "7bf7079a.433c68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1568.9086990356445,
        "y": 1543.3803173303604,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "bae7bbac.394ad8"
            ]
        ]
    },
    {
        "id": "bae7bbac.394ad8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create Policy in Policy Mgr.  Rollback failed to delete policy in Contrail. '+ $contrailResp.resp-code + ':' +$contrailResp.resp-message `\" />\n",
        "comments": "",
        "x": 1728.8135070800781,
        "y": 1540.7137647867203,
        "z": "fbc4119e.39c3b",
        "wires": []
    },
    {
        "id": "f667916c.8d17b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1723.0038604736328,
        "y": 1511.0471025705338,
        "z": "fbc4119e.39c3b",
        "wires": [
            []
        ]
    },
    {
        "id": "f9ba847c.ff2c28",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 999.4324951171875,
        "y": 1536.5238481760025,
        "z": "fbc4119e.39c3b",
        "wires": [
            [
                "bc667334.be1b7",
                "1ae7d1e2.6be47e"
            ]
        ]
    },
    {
        "id": "1ae7d1e2.6be47e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create policy in PolicyMgr. '+ $error-message  + 'Contrail network policy rolled back.'`\" />\n",
        "comments": "",
        "x": 1198.0038833618164,
        "y": 1580.8096100091934,
        "z": "fbc4119e.39c3b",
        "wires": []
    }
]