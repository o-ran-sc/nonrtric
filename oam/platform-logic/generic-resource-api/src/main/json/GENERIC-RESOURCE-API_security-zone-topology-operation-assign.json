[
    {
        "id": "3aa7dd53.c23282",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 113.75662612915039,
        "y": 48.518513679504395,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "d95c10eb.dc1d4"
            ]
        ]
    },
    {
        "id": "d95c10eb.dc1d4",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 209.9947052001953,
        "y": 109.47090435028076,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "9ec57dff.79a3e"
            ]
        ]
    },
    {
        "id": "9ec57dff.79a3e",
        "type": "method",
        "name": "security-zone-topology-operation-assign",
        "xml": "<method rpc='security-zone-topology-operation-assign' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 255.91148376464844,
        "y": 144.70895957946777,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "b469237.21f31e"
            ]
        ]
    },
    {
        "id": "b469237.21f31e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 164.23281860351562,
        "y": 288.0423016548157,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "da8bc6b3.f36008",
                "dd46184f.c5ad68",
                "19bd4a95.82d635",
                "7ff7d11f.c2ff8",
                "5082e4fd.fb398c",
                "44a8ff0c.4ea4",
                "3f7399d.1a38166",
                "df2b47bc.dad938",
                "29f6546e.b6ab2c",
                "cd2238ce.a361f8",
                "f37960af.a307",
                "676f8458.1ceddc",
                "41c3e1d7.688b9",
                "bf0c5aa1.d23018",
                "bb728435.7fabc8",
                "db115202.e2393",
                "773fe048.c730b",
                "995418ca.5fe778",
                "422fade5.4f8814",
                "83f71044.bcea7",
                "4f2b0053.cbdf5",
                "14e2f5f2.92d2fa",
                "121f5121.c5ff2f",
                "a4891e73.c917",
                "a62f34b1.dd5738",
                "87ceb4de.ec7128",
                "c025c3c9.338f6"
            ]
        ]
    },
    {
        "id": "dd46184f.c5ad68",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 380.75672149658203,
        "y": 2301.73295211792,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "da8bc6b3.f36008",
        "type": "set",
        "name": "set output to api handler",
        "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='security-zone-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $security-zone-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
        "comments": "",
        "x": 409.51063537597656,
        "y": 2265.855498313904,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "a62f34b1.dd5738",
        "type": "set",
        "name": "set allotted-resource-oper-status",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='PendingCreate' />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$security-zone-topology-operation-input.request-information.request-action`' />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$security-zone-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$security-zone-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
        "comments": "",
        "x": 469.0821876525879,
        "y": 1642.569899559021,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "7ff7d11f.c2ff8",
        "type": "set",
        "name": "set tmp.ar.self-link",
        "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:security-zone-allotted-resources/security-zone-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/security-zone-topology/'` \" />\n\n",
        "comments": "",
        "x": 426.49468994140625,
        "y": 261.85183906555176,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "19bd4a95.82d635",
        "type": "set",
        "name": "set tmp.ar.allotted-resource-id,etc",
        "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$security-zone-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$security-zone-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n<parameter name='tmp.ar.sz-vnf-id' value='`$security-zone-topology-operation-input.allotted-resource-data.security-zone-topology.security-zone-assignments.security-zone-vnf-id`' />\n\n\n",
        "comments": "",
        "x": 473.7539520263672,
        "y": 228.11110496520996,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "5082e4fd.fb398c",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 432.7500457763672,
        "y": 297.75003814697266,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "3f7399d.1a38166",
        "type": "execute",
        "name": "execute RestApiCallNode - Get AR by id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 513.2753753662109,
        "y": 520.9779777526855,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "5afe88e8.32e0a8",
                "4a737d1.caa4e84"
            ]
        ]
    },
    {
        "id": "44a8ff0c.4ea4",
        "type": "execute",
        "name": "generate allotted-resource url",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.sz-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 460.8214797973633,
        "y": 357.5357427597046,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "5afe88e8.32e0a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 758.5715179443359,
        "y": 523.7857661247253,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "b6853767.ffe678"
            ]
        ]
    },
    {
        "id": "14e2f5f2.92d2fa",
        "type": "execute",
        "name": "execute RestApiCallNode - PUT AR by id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sz.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 487.61922454833984,
        "y": 1847.2859721183777,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "975af54b.31fe88",
                "615e377.16035c8",
                "3777cc93.f26b94"
            ]
        ]
    },
    {
        "id": "975af54b.31fe88",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 756.2606010437012,
        "y": 1898.6173838600516,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "a456aa59.071ed8"
            ]
        ]
    },
    {
        "id": "615e377.16035c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 747.2606506347656,
        "y": 1867.1174096092582,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "a456aa59.071ed8"
            ]
        ]
    },
    {
        "id": "3777cc93.f26b94",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 751.0106887817383,
        "y": 1837.4745144844055,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "4593956d.d1f3ec"
            ]
        ]
    },
    {
        "id": "a456aa59.071ed8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for security-zone-allotted-resource\" />\n",
        "comments": "",
        "x": 917.0106887817383,
        "y": 1867.867433451116,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "b6853767.ffe678",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 939.5714721679688,
        "y": 524.2857155799866,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f8ae24aa.f00bb8",
                "a0673b92.f4f7c8"
            ]
        ]
    },
    {
        "id": "f8ae24aa.f00bb8",
        "type": "switchNode",
        "name": "switch sz length",
        "xml": "<switch test='`$mdsal-ar.security-zone-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1185.4287185668945,
        "y": 558.571478843689,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "b691cae6.eefd08"
            ]
        ]
    },
    {
        "id": "b691cae6.eefd08",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1376.4287223815918,
        "y": 558.5714764595032,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "c71c7fc0.fb074"
            ]
        ]
    },
    {
        "id": "9e2ca7ca.004578",
        "type": "set",
        "name": "set sz-ar from get",
        "xml": "<set>\n<parameter name='sz-ar.' value='$mdsal-ar.security-zone-allotted-resource[0].' />\n",
        "comments": "",
        "x": 1770.286018371582,
        "y": 493.14292335510254,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "c71c7fc0.fb074",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic='true'>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1563.2858505249023,
        "y": 527.1428961753845,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "9e2ca7ca.004578",
                "577032f2.5c728c",
                "f6f446f7.eb6e38"
            ]
        ]
    },
    {
        "id": "577032f2.5c728c",
        "type": "set",
        "name": "set oper-status",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$sz-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$sz-ar.allotted-resource-status.rpc-action`' />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$sz-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
        "comments": "",
        "x": 1770.286018371582,
        "y": 572.5714111328125,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "b73d4268.63b59",
        "type": "comment",
        "name": "Save consumed-allotted-resources to mdsal",
        "info": "",
        "comments": "",
        "x": 491.0000915527344,
        "y": 1490.238136291504,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "9c87c693.6b7aa8",
        "type": "comment",
        "name": "GET security-zone-allotted-resource from mdsal",
        "info": "",
        "comments": "",
        "x": 526.5714416503906,
        "y": 488.28570652008057,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "f6f446f7.eb6e38",
        "type": "switchNode",
        "name": "switch order-status",
        "xml": "<switch test='`$sz-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1778.2858810424805,
        "y": 526.1428985595703,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "1ba18b9c.c66c64",
                "e561c273.b01c"
            ]
        ]
    },
    {
        "id": "1ba18b9c.c66c64",
        "type": "outcome",
        "name": "outcome Created",
        "xml": "<outcome value='Created'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1989.8858375549316,
        "y": 487.1428985595703,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "ace0f78a.8c4198"
            ]
        ]
    },
    {
        "id": "e561c273.b01c",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2015.600212097168,
        "y": 522.5714893341064,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "ace0f78a.8c4198"
            ]
        ]
    },
    {
        "id": "ace0f78a.8c4198",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing security-zone-allotted-resource with order status of ' + $sz-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
        "comments": "",
        "x": 2277.885810852051,
        "y": 495.14288544654846,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "df2b47bc.dad938",
        "type": "set",
        "name": "set sz-ar-identifiers",
        "xml": "<set>\n<parameter name='sz-ar-identifiers.consuming-service-instance-id' value=\"`$security-zone-topology-operation-input.service-information.service-instance-id` \" />\n<parameter name='sz-ar-identifiers.parent-service-instance-id' value=\"`$security-zone-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n<parameter name='sz-ar-identifiers.allotted-resource-type' value=\"`$security-zone-topology-operation-input.allotted-resource-information.allotted-resource-type` \" />\n<parameter name='sz-ar-identifiers.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n\n",
        "comments": "",
        "x": 437.1429138183594,
        "y": 677.1428809165955,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "c09b6648.7720b8",
        "type": "comment",
        "name": "Set allotted-resource-identifiers",
        "info": "",
        "comments": "",
        "x": 478.0952682495117,
        "y": 622.8571615219116,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "29f6546e.b6ab2c",
        "type": "set",
        "name": "set identifiers in overal structure",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.security-zone-topology.allotted-resource-identifiers.' \nvalue=\"`$sz-ar-identifiers.`\" />\n\n\n",
        "comments": "",
        "x": 474.1428756713867,
        "y": 951.428858757019,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "cd2238ce.a361f8",
        "type": "set",
        "name": "set ecomp model information from input",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.security-zone-topology.onap-model-information.' \nvalue=\"`$security-zone-topology-operation-input.allotted-resource-information.onap-model-information.`\" />\n\n\n",
        "comments": "",
        "x": 505.7143325805664,
        "y": 711.4285831451416,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "f37960af.a307",
        "type": "switchNode",
        "name": "switch model-invariant-uuid is null",
        "xml": "<switch test='$security-zone-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid'>\n",
        "comments": "",
        "outputs": 1,
        "x": 488.5714416503906,
        "y": 745.714301109314,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "cdaca375.86687"
            ]
        ]
    },
    {
        "id": "cdaca375.86687",
        "type": "outcome",
        "name": "outcome null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 715.7143211364746,
        "y": 747.1428184509277,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "ca95e15f.7a282"
            ]
        ]
    },
    {
        "id": "ca95e15f.7a282",
        "type": "set",
        "name": "set model-invariant-uuid",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.security-zone-topology.onap-model-information.model-invariant-uuid' \nvalue=\"`$ar-model.invariant-uuid`\" />\n\n\n",
        "comments": "",
        "x": 917.142894744873,
        "y": 746.5713710784912,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "676f8458.1ceddc",
        "type": "switchNode",
        "name": "switch model-uuid is null",
        "xml": "<switch test='$security-zone-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid'>\n",
        "comments": "",
        "outputs": 1,
        "x": 460.00003814697266,
        "y": 780.0000019073486,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "c051003f.4d255"
            ]
        ]
    },
    {
        "id": "c051003f.4d255",
        "type": "outcome",
        "name": "outcome null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 661.4286041259766,
        "y": 780.5714235305786,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "17a9ad79.daf043"
            ]
        ]
    },
    {
        "id": "17a9ad79.daf043",
        "type": "set",
        "name": "set model-uuid",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.security-zone-topology.onap-model-information.model-uuid' \nvalue=\"`$ar-model.uuid`\" />\n\n\n",
        "comments": "",
        "x": 854.2857627868652,
        "y": 780.5713453292847,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "41c3e1d7.688b9",
        "type": "switchNode",
        "name": "switch model-version is null",
        "xml": "<switch test='$security-zone-topology-operation-input.allotted-resource-information.onap-model-information.model-version'>\n",
        "comments": "",
        "outputs": 1,
        "x": 468.5714416503906,
        "y": 812.8571290969849,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "834cdb5d.a611a8"
            ]
        ]
    },
    {
        "id": "834cdb5d.a611a8",
        "type": "outcome",
        "name": "outcome null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 718.5714225769043,
        "y": 812.8571138381958,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "6df03ba1.da4d84"
            ]
        ]
    },
    {
        "id": "6df03ba1.da4d84",
        "type": "set",
        "name": "set model-version",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.security-zone-topology.onap-model-information.model-version' \nvalue=\"`$ar-model.version`\" />\n\n\n",
        "comments": "",
        "x": 911.428581237793,
        "y": 812.8570356369019,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "bf0c5aa1.d23018",
        "type": "switchNode",
        "name": "switch ar-model.ecomp-generated-naming",
        "xml": "<switch test='`$ar-model.ecomp-generated-naming`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 507.1428413391113,
        "y": 914.2858047485352,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "8263bea9.21776",
                "31dce175.8172ce"
            ]
        ]
    },
    {
        "id": "8263bea9.21776",
        "type": "other",
        "name": "outcome Y",
        "xml": "<outcome value='Y'>\n",
        "comments": "",
        "outputs": 1,
        "x": 857.1429061889648,
        "y": 913.7143549919128,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "6d3862a4.def2cc"
            ]
        ]
    },
    {
        "id": "6d3862a4.def2cc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1025.8929481506348,
        "y": 914.214343547821,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "340cfc26.1a1d64"
            ]
        ]
    },
    {
        "id": "31dce175.8172ce",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 848.3651962280273,
        "y": 946.7143549919128,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "79411f72.37cc4"
            ]
        ]
    },
    {
        "id": "79411f72.37cc4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error in allotted-resource-model data.  Ecomp-generated-naming should be true\" />\n\n",
        "comments": "",
        "x": 1026.3651962280273,
        "y": 945.7143549919128,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "340cfc26.1a1d64",
        "type": "switchNode",
        "name": "switch ar-model.ecomp-generated-naming",
        "xml": "<switch test='`$ar-model.naming-policy`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1327.1428527832031,
        "y": 914.2858171463013,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "c60923e3.e3226",
                "5fb6c973.79b708"
            ]
        ]
    },
    {
        "id": "c60923e3.e3226",
        "type": "other",
        "name": "outcome oam_security_zone_name",
        "xml": "<outcome value='oam_security_zone_name'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1668.000617980957,
        "y": 914.8638672828674,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "64919905.bc8708"
            ]
        ]
    },
    {
        "id": "5fb6c973.79b708",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1579.4285507202148,
        "y": 945.714367389679,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "64919905.bc8708"
            ]
        ]
    },
    {
        "id": "47d880dc.e5c98",
        "type": "set",
        "name": "set ar_name",
        "xml": "<set>\n<parameter name='tmp.ar-name' value='$TenantOAMNetworkRole_$LandingNetworkRole_SZ' />\n",
        "comments": "",
        "x": 2108.8573417663574,
        "y": 914.2857584953308,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "e616a9fb.2ba0a8",
        "type": "execute",
        "name": "execute SliStringUtils - replace TenantOAMNetworkRole",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ar-name`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-name\"/>\n    <parameter name=\"target\" value=\"$TenantOAMNetworkRole\"/>\n    <parameter name=\"replacement\" value=\"`$security-zone-topology-operation-input.security-zone-request-input.untrusted-network-role`\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2246.0004119873047,
        "y": 947.1429333686829,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "c3a0064f.e2bfc8",
        "type": "execute",
        "name": "execute SliStringUtils - replace LandingNetworkRole",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ar-name`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-name\"/>\n    <parameter name=\"target\" value=\"$LandingNetworkRole\"/>\n    <parameter name=\"replacement\" value=\"`$security-zone-topology-operation-input.security-zone-request-input.trusted-network-role`\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2229.0004272460938,
        "y": 979.2858099937439,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "64919905.bc8708",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic='true'>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1910.2858276367188,
        "y": 942.8572659492493,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "47d880dc.e5c98",
                "e616a9fb.2ba0a8",
                "c3a0064f.e2bfc8",
                "3ea93d43.94b532"
            ]
        ]
    },
    {
        "id": "3ea93d43.94b532",
        "type": "set",
        "name": "set identifiers.allotted-resource-name",
        "xml": "<set>\n<parameter name='sz-ar-identifiers.allotted-resource-name' value='`$tmp.ar-name`' />\n",
        "comments": "",
        "x": 2178.8573150634766,
        "y": 1008.571485042572,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "db115202.e2393",
        "type": "set",
        "name": "set assignments in overal structure",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-data.security-zone-topology.security-zone-assignments.' \nvalue=\"`$sz-ar-assignments.`\" />\n\n\n",
        "comments": "",
        "x": 482.61910247802734,
        "y": 1117.1431503295898,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "bb728435.7fabc8",
        "type": "set",
        "name": "set sz-ar-assignments",
        "xml": "<set>\n<parameter name='sz-ar-assignments.vlan-tag' value=\"`$security-zone-topology-operation-input.security-zone-request-input.vlan-tag` \" />\n<parameter name='sz-ar-assignments.trusted-network-role' value=\"`$security-zone-topology-operation-input.security-zone-request-input.trusted-network-role` \" />\n<parameter name='sz-ar-assignments.untrusted-network-role' value=\"`$security-zone-topology-operation-input.security-zone-request-input.untrusted-network-role` \" />\n<parameter name='sz-ar-assignments.security-zone-service-instance-id' value=\"`$tmp.ar.parent-service-instance-id` \" />\n\n",
        "comments": "",
        "x": 444.28570556640625,
        "y": 988.5715227127075,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "cae22b42.18c468",
        "type": "for",
        "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
        "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1360.572135925293,
        "y": 1564.8096537590027,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "7553ad4e.ad7d94"
            ]
        ]
    },
    {
        "id": "773fe048.c730b",
        "type": "switchNode",
        "name": "switch service-data.consumed-allotted-resources_length",
        "xml": "<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 534.5714721679688,
        "y": 1524.5236463546753,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "38c33f23.a99c8",
                "61a487f.6f30978"
            ]
        ]
    },
    {
        "id": "38c33f23.a99c8",
        "type": "other",
        "name": "outcome Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 840.7143859863281,
        "y": 1529.3809938430786,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "3413dfa5.ea0b8"
            ]
        ]
    },
    {
        "id": "61a487f.6f30978",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 820.7143859863281,
        "y": 1564.3809938430786,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "a9ef602f.19524"
            ]
        ]
    },
    {
        "id": "7553ad4e.ad7d94",
        "type": "switchNode",
        "name": "switch allotted-resource-id",
        "xml": "<switch test=\"`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1812.6673278808594,
        "y": 1562.869366645813,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "2bfef68b.19fdca"
            ]
        ]
    },
    {
        "id": "2bfef68b.19fdca",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2004.4769649505615,
        "y": 1562.3335065841675,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "2e1ed2f6.15d1fe"
            ]
        ]
    },
    {
        "id": "a9ef602f.19524",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 974.8415298461914,
        "y": 1564.5069856643677,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "cae22b42.18c468",
                "91a87775.758588"
            ]
        ]
    },
    {
        "id": "2e1ed2f6.15d1fe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2160.238296508789,
        "y": 1562.1907081604004,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "e679b033.de33f",
                "4d5ec78f.74ab88"
            ]
        ]
    },
    {
        "id": "3413dfa5.ea0b8",
        "type": "set",
        "name": "set cidx",
        "xml": "<set>\n<parameter name='tmp.cidx' value=\"`0`\" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value=\"1\" />\n\n\n",
        "comments": "",
        "x": 999.5713996887207,
        "y": 1529.0952253341675,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "e679b033.de33f",
        "type": "set",
        "name": "set tmp.cidx and ctx.consumed-ar",
        "xml": "<set>\n<parameter name='tmp.cidx' value='`$cidx`' />\n<parameter name='ctx.consumed-ar.' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].`' />\n<parameter name='tmp.found-cidx' value='true' />",
        "comments": "",
        "x": 2406.0957565307617,
        "y": 1556.7621870040894,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "995418ca.5fe778",
        "type": "set",
        "name": "set consumed allotted resources",
        "xml": "<set>\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-type' value=\"`$security-zone-topology-operation-input.allotted-resource-information.allotted-resource-type` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-pointer' value=\"`$tmp.ar.self-link` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value='`$tmp.cidx + 1`' />\n\n",
        "comments": "",
        "x": 462.42862701416016,
        "y": 1565.0951986312866,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "59610fb0.0a244",
        "type": "execute",
        "name": "execute RestApiCallNode - PUT SZ VNF Provided Allotted Resource",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vnf-p-ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-prov-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 575.9049606323242,
        "y": 2049.0955414772034,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "ae04f7b.eed3208",
                "5027b5f7.e37cbc"
            ]
        ]
    },
    {
        "id": "a0673b92.f4f7c8",
        "type": "set",
        "name": "save backup copy of mdsal-ar for rollback",
        "xml": "<set>\n<parameter name='bk-sz-ar' value='$mdsal-ar.' />\n",
        "comments": "",
        "x": 1265.143051147461,
        "y": 524.2858076095581,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "422fade5.4f8814",
        "type": "execute",
        "name": "generate vnf provided ar url",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vnf-provided-allottedresource`\" />\n    <parameter name=\"outputPath\" value=\"tmp.vnf-p-ar-url\" />\n    <parameter name=\"target\" value=\"{service-instance-id}\" />\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 452.8571472167969,
        "y": 388.57141876220703,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "83f71044.bcea7",
        "type": "execute",
        "name": "execute SliStringUtils",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-p-ar-url`\" />\n    <parameter name=\"outputPath\" value=\"tmp.vnf-p-ar-url\" />\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.sz-vnf-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 443.1428985595703,
        "y": 419.99999809265137,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "ec9be6aa.494588",
        "type": "comment",
        "name": "Create urls for restapi",
        "info": "",
        "comments": "",
        "x": 431.7142868041992,
        "y": 327.1428699493408,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "ae04f7b.eed3208",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 934.4763298034668,
        "y": 2049.666941165924,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f9fdf5f9.8e4668"
            ]
        ]
    },
    {
        "id": "f9fdf5f9.8e4668",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1144.047706604004,
        "y": 2048.738305568695,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "3eccb358.12c2dc",
                "968252db.ccc84"
            ]
        ]
    },
    {
        "id": "3eccb358.12c2dc",
        "type": "switchNode",
        "name": "switch sz length",
        "xml": "<switch test='`$mdsal-ar.security-zone-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1389.9049530029297,
        "y": 2083.0240688323975,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "452ba5e6.956fcc"
            ]
        ]
    },
    {
        "id": "452ba5e6.956fcc",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1580.904956817627,
        "y": 2083.0240664482117,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "968252db.ccc84",
        "type": "set",
        "name": "save backup copy of mdsal-ar for rollback",
        "xml": "<set>\n<parameter name='bk-sz-ar' value='$mdsal-ar.' />\n",
        "comments": "",
        "x": 1469.619285583496,
        "y": 2048.7383975982666,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "5027b5f7.e37cbc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 933.047721862793,
        "y": 2139.6668133735657,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "ce01090.f9b9af8"
            ]
        ]
    },
    {
        "id": "f1ea7873.944388",
        "type": "comment",
        "name": "Need to rollback?",
        "info": "",
        "comments": "",
        "x": 935.9049758911133,
        "y": 2088.238205432892,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "e06b36.87ea84c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for security-zone-allotted-resource\" />\n",
        "comments": "",
        "x": 1310.1905517578125,
        "y": 2181.0956473350525,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "eeb0dfbd.307f7",
        "type": "execute",
        "name": "execute RestApiCallNode - DELETE AR by id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='DELETE' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1411.6191864013672,
        "y": 2142.5242981910706,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "ce01090.f9b9af8",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1107.3334274291992,
        "y": 2142.523895740509,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "eeb0dfbd.307f7",
                "e06b36.87ea84c8"
            ]
        ]
    },
    {
        "id": "bde153f5.6a65",
        "type": "comment",
        "name": "Generate Security zone Panorama names",
        "info": "",
        "comments": "",
        "x": 494.8095932006836,
        "y": 1016.1907386779785,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "4f2b0053.cbdf5",
        "type": "set",
        "name": "set sz-ar-assignments",
        "xml": "<set>\n<parameter name='sz-ar-assignments.security-zone-name-untrusted' value=\"`$tmp.untrust-sz` \" />\n<parameter name='sz-ar-assignments.security-zone-name-trusted' value=\"`$tmp.trust-sz` \" />\n\n\n",
        "comments": "",
        "x": 444.0953140258789,
        "y": 1080.7148094177246,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "c28eabf9.0410c8",
        "type": "execute",
        "name": "execute SliStringUtils",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-p-ar-url`\" />\n    <parameter name=\"outputPath\" value=\"tmp.vnf-p-ar-url\" />\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.sz-vnf-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 444.28570556640625,
        "y": 451.4285583496094,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "121f5121.c5ff2f",
        "type": "call",
        "name": "call generate-panorama-name",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='generate-panorama-name' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 465.00001525878906,
        "y": 1046.66672706604,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "4593956d.d1f3ec",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 892.6666564941406,
        "y": 1833.6666836738586,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "297e2310.b99eec"
            ]
        ]
    },
    {
        "id": "a64508aa.c4e898",
        "type": "comment",
        "name": "Add SZ AR to mdsal",
        "info": "",
        "comments": "",
        "x": 416.9048080444336,
        "y": 1808.3808569908142,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "a4891e73.c917",
        "type": "execute",
        "name": "execute getTime",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 424.66665840148926,
        "y": 1602.3333406448364,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "4a737d1.caa4e84",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 758.3333129882812,
        "y": 559.9999389648438,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f20f59c0.b02038"
            ]
        ]
    },
    {
        "id": "f20f59c0.b02038",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 938.3332633972168,
        "y": 560.6664896011353,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "87ceb4de.ec7128",
        "type": "set",
        "name": "set id",
        "xml": "<set>\n<parameter name='sz-ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='sz-ar.allotted-resource-status.action' value=\"`$security-zone-topology-operation-input.request-information.request-action` \" />\n<parameter name='sz-ar.allotted-resource-status.rpc-name' value=\"security-zone-topology-operation\" />\n<parameter name='sz-ar.allotted-resource-status.rpc-action' value=\"`$security-zone-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$security-zone-topology-operation-input.request-information.` \" />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$security-zone-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$security-zone-topology-operation-input.service-information.` \" />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$security-zone-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='sz-ar.allotted-resource-data.allotted-resource-operation-information.security-zone-request-input.' value=\"`$security-zone-topology-operation-input.security-zone-request-input.` \" />",
        "comments": "",
        "x": 405.000057220459,
        "y": 585.9523229598999,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "c025c3c9.338f6",
        "type": "update",
        "name": "update AAI allotted-resource",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $service-data.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $service-data.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $service-data.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$security-zone-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$ar-model.invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$ar-model.uuid`\" />\n\t<parameter name=\"operational-status\" value=\"null\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 446.66668701171875,
        "y": 1730.238124847412,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "78f280c9.aa658",
                "3206f266.94f28e"
            ]
        ]
    },
    {
        "id": "78f280c9.aa658",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 702.428596496582,
        "y": 1713.190628528595,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "e21aa9c5.4ebb08"
            ]
        ]
    },
    {
        "id": "e21aa9c5.4ebb08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
        "comments": "",
        "x": 868.9524765014648,
        "y": 1724.8096995353699,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "3206f266.94f28e",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 709.5238838195801,
        "y": 1745.9525961875916,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "e21aa9c5.4ebb08"
            ]
        ]
    },
    {
        "id": "91a87775.758588",
        "type": "switchNode",
        "name": "switch tmp.found-cidx",
        "xml": "<switch test='`$tmp.found-cidx`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1177.999984741211,
        "y": 1596.0000410079956,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f9327230.fb919"
            ]
        ]
    },
    {
        "id": "f9327230.fb919",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1367.9999389648438,
        "y": 1595.9999780654907,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "fde4a6ad.8b8798"
            ]
        ]
    },
    {
        "id": "fde4a6ad.8b8798",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1533.9999389648438,
        "y": 1595.9999780654907,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f243be1.0d9664"
            ]
        ]
    },
    {
        "id": "f243be1.0d9664",
        "type": "set",
        "name": "set tmp.cidx ",
        "xml": "<set>\n<parameter name='tmp.cidx' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' />\n",
        "comments": "",
        "x": 1779.8572673797607,
        "y": 1596.571452140808,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "4d5ec78f.74ab88",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2324.000057220459,
        "y": 1588.0000791549683,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "297e2310.b99eec",
        "type": "execute",
        "name": "execute RestApiCallNode - Update parent provided service AR",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.parentsvc.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.parent-ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='DELETE' />\n    <parameter name=\"responsePrefix\" value=\"parent\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1243.708797454834,
        "y": 1833.3755688667297,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "90eb7941.4e6d28",
                "529b5fcc.fe782",
                "5dd2303d.8c34d"
            ]
        ]
    },
    {
        "id": "c07fd6c.a7d3c28",
        "type": "comment",
        "name": "Rollback parent",
        "info": "",
        "comments": "",
        "x": 1087.708724975586,
        "y": 1803.0421993732452,
        "z": "d9f8bc54.6ca48",
        "wires": []
    },
    {
        "id": "90eb7941.4e6d28",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1615.016845703125,
        "y": 1894.040535211563,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f889d017.68c21"
            ]
        ]
    },
    {
        "id": "529b5fcc.fe782",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1606.0168952941895,
        "y": 1862.5405609607697,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f889d017.68c21"
            ]
        ]
    },
    {
        "id": "5dd2303d.8c34d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1609.766933441162,
        "y": 1832.897665835917,
        "z": "d9f8bc54.6ca48",
        "wires": [
            [
                "f889d017.68c21"
            ]
        ]
    },
    {
        "id": "f889d017.68c21",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1751.4229011535645,
        "y": 1829.0898350253701,
        "z": "d9f8bc54.6ca48",
        "wires": [
            []
        ]
    },
    {
        "id": "d41e8d9f.684df",
        "type": "comment",
        "name": "Generate naming",
        "info": "",
        "comments": "",
        "x": 438.00001525878906,
        "y": 876.0000257492065,
        "z": "d9f8bc54.6ca48",
        "wires": []
    }
]