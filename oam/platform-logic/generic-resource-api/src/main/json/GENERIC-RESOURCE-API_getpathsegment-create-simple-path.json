[{"id":"22afe3b6.ac42ec","type":"dgstart","name":"DGSTART","outputs":1,"x":101.42857360839844,"y":85.71428680419922,"z":"5629d16d.2ad96","wires":[["aba57bc5.dd8d18"]]},{"id":"aba57bc5.dd8d18","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":216.71427154541016,"y":125.95239543914795,"z":"5629d16d.2ad96","wires":[["dd9830af.1b7fc"]]},{"id":"dd9830af.1b7fc","type":"method","name":"method getpathsegment-create-simple-path","xml":"<method rpc='getpathsegment-create-simple-path' mode='sync'>\n","comments":"","outputs":1,"x":209.8572006225586,"y":166.71428108215332,"z":"5629d16d.2ad96","wires":[["54f62c1c.ee8494"]]},{"id":"39e0fc73.43bb24","type":"comment","name":"getpathsegment-create-simple-path","info":"","comments":"","x":495.77342987060547,"y":33.30063056945801,"z":"5629d16d.2ad96","wires":[]},{"id":"54f62c1c.ee8494","type":"block","name":"block","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":116.09528350830078,"y":290.7412042617798,"z":"5629d16d.2ad96","wires":[["727b4caf.1cdc94","41d349bc.0562d8","a1cc7312.325ce"]]},{"id":"a1cc7312.325ce","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":257.91658782958984,"y":2895.298070907593,"z":"5629d16d.2ad96","wires":[]},{"id":"727b4caf.1cdc94","type":"get-resource","name":"get-resource PATH_SEGMENT","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from PATH_SEGMENT WHERE service_uuid = $getpathsegment-topology-operation-input.service-information.onap-model-information.model-uuid\n    AND path_name = $db.forwarding-path[$path-index].path-name ORDER BY path_segment_seq'\n  pfx='db.path-segment[]'>\n\n","comments":"","outputs":1,"x":343.5476188659668,"y":356.4761791229248,"z":"5629d16d.2ad96","wires":[["891f7699.dad768","2e7bfd35.86d932","5581a414.fb2c9c"]]},{"id":"891f7699.dad768","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":572.6663970947266,"y":313.8094177246094,"z":"5629d16d.2ad96","wires":[["a32e6237.6daf3"]]},{"id":"2e7bfd35.86d932","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":581.2378273010254,"y":357.09513092041016,"z":"5629d16d.2ad96","wires":[["39c3eea1.efd8a2"]]},{"id":"6ae56929.26b358","type":"for","name":"for each path segment","xml":"<for index='path-segment-index' start='0' end='`$db.path-segment_length`' >\n","comments":"","outputs":1,"x":508.8691101074219,"y":548.1547451019287,"z":"5629d16d.2ad96","wires":[["544711c4.26d07"]]},{"id":"544711c4.26d07","type":"block","name":"block","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":707.0238647460938,"y":547.9761257171631,"z":"5629d16d.2ad96","wires":[["caa83c5c.69383","72870d7a.a57af4"]]},{"id":"1570d296.5420fd","type":"set","name":"set vnf-ids_length to 0","xml":"<set>\n<parameter name='vnf-ids_length' value='0' />\n","comments":"","x":508.51195526123047,"y":500.2975969314575,"z":"5629d16d.2ad96","wires":[]},{"id":"caa83c5c.69383","type":"set","name":"add source vnf to vnf-ids","xml":"<set>\n<parameter name='vnf-ids[$vnf-ids_length]' value='`$db.path-segment[$path-segment-index].source-association-uuid`' />\n<parameter name='vnf-ids_length' value='`$vnf-ids_length + 1`' />\n","comments":"","x":921.0119667053223,"y":526.5475978851318,"z":"5629d16d.2ad96","wires":[]},{"id":"72870d7a.a57af4","type":"switchNode","name":"is this the last path-segment?","xml":"<switch test='`$path-segment-index == ( $db.path-segment_length - 1) `'>\n","comments":"","outputs":1,"x":936.0119705200195,"y":571.5475997924805,"z":"5629d16d.2ad96","wires":[["a92ddc01.5347d"]]},{"id":"a92ddc01.5347d","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1132.2619724273682,"y":571.2975997924805,"z":"5629d16d.2ad96","wires":[["7160408b.72538"]]},{"id":"7160408b.72538","type":"set","name":"add target vnf to vnf-ids","xml":"<set>\n<parameter name='vnf-ids[$vnf-ids_length]' value='`$db.path-segment[$path-segment-index].target-association-uuid`' />\n<parameter name='vnf-ids_length' value='`$vnf-ids_length + 1`' />\n","comments":"","x":1308.761978149414,"y":570.5475997924805,"z":"5629d16d.2ad96","wires":[]},{"id":"c46f5c01.ea23","type":"comment","name":"create list of vnf ids","info":"","comments":"","x":1061.5119667053223,"y":486.46427059173584,"z":"5629d16d.2ad96","wires":[]},{"id":"4e5c686c.598f68","type":"get-resource","name":"custom query - get runtime service-instances","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"custom-query\"\n\tkey=\"format = 'resource'\"\n\tforce=\"true\"\n\tlocal-only=\"false\"\n\tpfx=\"aai.service-instances\" >\n\t<parameter name=\"start[0]\" value=\"`'nodes/service-instances?model-invariant-id=' + $getpathsegment-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"start_length\" value=\"1\" />\n","comments":"","outputs":1,"x":578.5119247436523,"y":656.5476264953613,"z":"5629d16d.2ad96","wires":[["50c8b7f0.7a0d88","a18652d3.89a29","30dab3b9.4e949c"]]},{"id":"a18652d3.89a29","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":846.5081748962402,"y":658.4484806060791,"z":"5629d16d.2ad96","wires":[["f673ab2c.5baed8"]]},{"id":"50c8b7f0.7a0d88","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":855.4367713928223,"y":616.7342138290405,"z":"5629d16d.2ad96","wires":[["fb8a502b.b988a"]]},{"id":"2cea7227.951c0e","type":"for","name":"for each runtime service-instance","xml":"<for index='runtime-index' start='0' end='`$runtime_length`' >\n","comments":"","outputs":1,"x":700.7143859863281,"y":1168.2143034934998,"z":"5629d16d.2ad96","wires":[["fd97fac0.40b238"]]},{"id":"fd97fac0.40b238","type":"block","name":"block","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":939.4643936157227,"y":1168.2143034934998,"z":"5629d16d.2ad96","wires":[["11207a1.3861786","2605dfb2.94c51","507014d7.88ea1c","38a95673.ed10aa","64270aaa.060174"]]},{"id":"11207a1.3861786","type":"execute","name":"generate port-mirror-configuration url","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.service`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.service-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$serv-inst.service-instance-id`\"/>\n","comments":"","outputs":1,"x":1210.9525451660156,"y":1253.1548552513123,"z":"5629d16d.2ad96","wires":[[]]},{"id":"2605dfb2.94c51","type":"execute","name":"execute RestApiCallNode - get service","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.service-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-service\" />\n\n","comments":"","outputs":1,"x":1215.1191101074219,"y":1319.1666865348816,"z":"5629d16d.2ad96","wires":[["ddfea20f.b1765","25f8aad7.178826"]]},{"id":"ddfea20f.b1765","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1462.4983558654785,"y":1192.5340704917908,"z":"5629d16d.2ad96","wires":[["7d24215a.3f9a"]]},{"id":"25f8aad7.178826","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1456.547752380371,"y":1450.4166073799133,"z":"5629d16d.2ad96","wires":[["fb3d69b8.66a0c8"]]},{"id":"a34a7c52.b74ff","type":"comment","name":"Is this service in GENERIC-RESOURCE-API?","info":"","comments":"","x":1258.2143859863281,"y":1113.750009059906,"z":"5629d16d.2ad96","wires":[]},{"id":"d312f25b.03d12","type":"call","name":"call GENERIC-RESOURCE-API:getpathsegment-populate-from-grapi","xml":"<call module='GENERIC-RESOURCE-API' rpc='getpathsegment-populate-from-grapi' mode='sync' >\n","comments":"","outputs":1,"x":2421.7858123779297,"y":1237.5000100135803,"z":"5629d16d.2ad96","wires":[[]]},{"id":"f82d1a28.9d5758","type":"call","name":"call GENERIC-RESOURCE-API:getpathsegment-populate-from-vnfapi","xml":"<call module='GENERIC-RESOURCE-API' rpc='getpathsegment-populate-from-vnfapi' mode='sync' >\n","comments":"","outputs":1,"x":2259.464401245117,"y":1437.1428742408752,"z":"5629d16d.2ad96","wires":[[]]},{"id":"41d349bc.0562d8","type":"set","name":"set match-type","xml":"<set>\n<parameter name='match-type' value='network-name' />\n","comments":"","x":293.8452491760254,"y":244.21429347991943,"z":"5629d16d.2ad96","wires":[]},{"id":"d5e62d12.0598","type":"call","name":"call GENERIC-RESOURCE-API:getpathsegment-simple-match-pair","xml":"<call module='GENERIC-RESOURCE-API' rpc='getpathsegment-simple-match-pair' mode='sync' >\n","comments":"","outputs":1,"x":803.0359039306641,"y":1643.3930268287659,"z":"5629d16d.2ad96","wires":[[]]},{"id":"d93608d4.fa2628","type":"set","name":"set serv-insts_length to 0","xml":"<set>\n<parameter name='serv-insts_length' value='0' />\n","comments":"","x":683.6786804199219,"y":906.0715222358704,"z":"5629d16d.2ad96","wires":[]},{"id":"507014d7.88ea1c","type":"set","name":"clear mdsal-service and serv-inst.api","xml":"<set>\n<parameter name='mdsal-service.' value='' />\n<parameter name='serv-inst.api' value='' />\n","comments":"","x":1211.2857971191406,"y":1157.6785979270935,"z":"5629d16d.2ad96","wires":[]},{"id":"38a95673.ed10aa","type":"set","name":"set serv-inst.service-instance-id","xml":"<set>\n<parameter name='serv-inst.service-instance-id' value='`$runtime-ids[$runtime-index]`' />\n","comments":"","x":1202.4286346435547,"y":950.5357565879822,"z":"5629d16d.2ad96","wires":[]},{"id":"1025d445.92700c","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"`'Failure finding service instance ' + $serv-inst.service-instance-id + ' in either GENERIC-REOURCE-API or VNF-API'`\" />\n","comments":"","x":2494.285732269287,"y":1490.357096672058,"z":"5629d16d.2ad96","wires":[]},{"id":"8cb5384e.5fac18","type":"success","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2298.035873413086,"y":1562.0238308906555,"z":"5629d16d.2ad96","wires":[["e596d283.d108"]]},{"id":"36bbfe53.27e322","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2298.0357093811035,"y":1491.6071996688843,"z":"5629d16d.2ad96","wires":[["1025d445.92700c"]]},{"id":"d0b3e656.49f5b8","type":"switchNode","name":"switch serv-inst.api","xml":"<switch test='`$serv-inst.api`'>\n","comments":"","outputs":1,"x":2098.3930053710938,"y":1532.1428451538086,"z":"5629d16d.2ad96","wires":[["36bbfe53.27e322","8cb5384e.5fac18"]]},{"id":"fb3d69b8.66a0c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1587.678623199463,"y":1453.214307308197,"z":"5629d16d.2ad96","wires":[["63df2c22.43c924"]]},{"id":"36ccefea.23688","type":"set","name":"copy serv-inst to serv-insts array","xml":"<set>\n<parameter name='serv-insts[$serv-insts_length].' value='`$serv-inst.`' />\n","comments":"","x":2685.5358352661133,"y":1536.607204914093,"z":"5629d16d.2ad96","wires":[]},{"id":"b01279d.0b32c88","type":"set","name":"increment serv-insts_length","xml":"<set>\n<parameter name='serv-insts_length' value='`$serv-insts_length + 1`' />\n","comments":"","x":2670.7858123779297,"y":1591.6071934700012,"z":"5629d16d.2ad96","wires":[]},{"id":"848cf29d.edb6a","type":"set","name":"copy serv-inst to serv-insts array","xml":"<set>\n<parameter name='serv-insts[$serv-insts_length].' value='`$serv-inst.`' />\n","comments":"","x":2306.4286346435547,"y":1281.9643054008484,"z":"5629d16d.2ad96","wires":[]},{"id":"50bf0848.ed4ac8","type":"set","name":"increment serv-insts_length","xml":"<set>\n<parameter name='serv-insts_length' value='`$serv-insts_length + 1`' />\n","comments":"","x":2286.6786346435547,"y":1330.7143063545227,"z":"5629d16d.2ad96","wires":[]},{"id":"7d24215a.3f9a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1593.9286193847656,"y":1191.964292049408,"z":"5629d16d.2ad96","wires":[["2bf6e158.bfceae","d0db37ac.abed08","313a3809.e4ff88"]]},{"id":"e596d283.d108","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2449.285804748535,"y":1561.6071877479553,"z":"5629d16d.2ad96","wires":[["36ccefea.23688","b01279d.0b32c88"]]},{"id":"954eddda.d0e1c","type":"for","name":"for each runtime service-instance from A&AI","xml":"<for index='runtime-index' start='0' end='`$aai.service-instances.results_length`' >\n","comments":"","outputs":1,"x":741.4286499023438,"y":839.4642996788025,"z":"5629d16d.2ad96","wires":[["f18dec3.470431"]]},{"id":"f18dec3.470431","type":"switchNode","name":"switch orchestration-status","xml":"<switch test='`$aai.service-instances.results[$runtime-index].service-instance.orchestration-status`'>\n","comments":"","outputs":1,"x":1050.1786193847656,"y":839.4642987251282,"z":"5629d16d.2ad96","wires":[["bf73912e.28721"]]},{"id":"bf73912e.28721","type":"outcome","name":"Active","xml":"<outcome value='Active'>\n","comments":"","outputs":1,"x":1248.9286041259766,"y":838.214289188385,"z":"5629d16d.2ad96","wires":[["dd9206a2.3c51c8"]]},{"id":"dd9206a2.3c51c8","type":"block","name":"block","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":1410.1786041259766,"y":835.714289188385,"z":"5629d16d.2ad96","wires":[["b75aacd8.aff2a","7e6d7170.bd2ef"]]},{"id":"b75aacd8.aff2a","type":"set","name":"store service-instance-id","xml":"<set>\n<parameter name='runtime-ids[$runtime_length]' value='`$aai.service-instances.results[$runtime-index].service-instance.service-instance-id`' />\n","comments":"","x":1601.4286193847656,"y":812.7976064682007,"z":"5629d16d.2ad96","wires":[]},{"id":"f1440634.84c218","type":"set","name":"set runtime_length to 0","xml":"<set>\n<parameter name='runtime_length' value='0' />\n","comments":"","x":676.4286041259766,"y":789.464289188385,"z":"5629d16d.2ad96","wires":[]},{"id":"7e6d7170.bd2ef","type":"set","name":"set increment runtime_length","xml":"<set>\n<parameter name='runtime_length' value='`$runtime_length + 1`' />\n","comments":"","x":1616.0119132995605,"y":855.2976288795471,"z":"5629d16d.2ad96","wires":[]},{"id":"2e8ac8c0.7d70a8","type":"for","name":"for each serv-insts","xml":"<for index='serv-index' start='0' end='`$serv-insts_length`' >\n","comments":"","outputs":1,"x":624.1666488647461,"y":2187.2023816108704,"z":"5629d16d.2ad96","wires":[["627c4436.c6363c"]]},{"id":"6a089d93.c561b4","type":"comment","name":"Create forwarding-path structure","info":"","comments":"","x":1850.2380981445312,"y":1713.9880814552307,"z":"5629d16d.2ad96","wires":[]},{"id":"67d6eb5d.aecaf4","type":"set","name":"set top-level data","xml":"<set>\n<parameter name='forwarding-path.forwarding-path-name' value='`$db.path-segment[0].path-name`' />\n<parameter name='forwarding-path.forwarding-path-type' value='VNF' />\n<parameter name='forwarding-path.onap-model-information.model-name' value='`$db.path-segment[0].path-name`' />\n<parameter name='forwarding-path.service-paths.service-path_length' value='1' />\n<parameter name='forwarding-path.service-paths.service-path[0].service-path-instance-name'\n  value='`$db.path-segment[0].path-name + $forwarding-path.service-paths.service-path[0].service-path-instance-id`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service_length' value='1' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].service-instance-id'\n  value='`$serv-insts[$serv-index].service-instance-id`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].service-path-sequence-id' value='1' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf_length'\n  value='`$serv-insts[$serv-index].path-segments_length`' />\n","comments":"","x":1713.9284362792969,"y":1845.2976641654968,"z":"5629d16d.2ad96","wires":[]},{"id":"df485e3e.9e56d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1496.2498931884766,"y":2203.452546596527,"z":"5629d16d.2ad96","wires":[["67d6eb5d.aecaf4","6d4773c1.e5744c","214e6fa8.67a2d","11af2729.a769f9","19011bc0.d12e74","d098ba8b.a3df28","f0d2a389.89135","491426c8.70e218","5bdb2ffa.bd158","29c194e4.ffaaec","b4ae1cfc.2d5e8","4177217a.70cc7","9b387be2.dc2b18","1f8a0d2b.888443"]]},{"id":"627c4436.c6363c","type":"switchNode","name":"switch api","xml":"<switch test='`$serv-insts[$serv-index].api`'>\n","comments":"","outputs":1,"x":797.9166488647461,"y":2187.2023816108704,"z":"5629d16d.2ad96","wires":[["426b047f.dbd57c","9059fd9c.5d30b"]]},{"id":"426b047f.dbd57c","type":"outcome","name":"GR","xml":"<outcome value='GR'>\n","comments":"","outputs":1,"x":937.9166526794434,"y":2164.7023816108704,"z":"5629d16d.2ad96","wires":[["c67bb294.bc315"]]},{"id":"9059fd9c.5d30b","type":"outcome","name":"VNF","xml":"<outcome value='VNF'>\n","comments":"","outputs":1,"x":937.9166526794434,"y":2205.952383518219,"z":"5629d16d.2ad96","wires":[["c67bb294.bc315"]]},{"id":"6d4773c1.e5744c","type":"for","name":"for each subsequent path segment","xml":"<for index='ps-index' start='1' end='`$serv-insts[$serv-index].path-segments_length`' >\n","comments":"","outputs":1,"x":1763.9284362792969,"y":1979.0476641654968,"z":"5629d16d.2ad96","wires":[["902c5891.668ab8"]]},{"id":"b6018a90.ab7608","type":"set","name":"set vnf level data","xml":"<set>\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index].vnf-path-sequence-id'\n  value='`$ps-index + 1`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index].vnf-instance-id'\n  value='`$serv-insts[$serv-index].path-segments[$ps-index].left-vnf-instance-id`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index].left-network-name'\n  value='`$prev-network-name`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index].left-network-role'\n  value='`$prev-network-role`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index].right-network-name'\n  value='`$serv-insts[$serv-index].path-segments[$ps-index].network-name`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index].right-network-role'\n  value='`$serv-insts[$serv-index].path-segments[$ps-index].network-role`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index].vf-module-instance.vf-module-id'\n  value='`$serv-insts[$serv-index].path-segments[$ps-index].left-vf-module-id`' />\n","comments":"","x":2142.6784439086914,"y":1952.7976660728455,"z":"5629d16d.2ad96","wires":[]},{"id":"214e6fa8.67a2d","type":"set","name":"set first vnf data","xml":"<set>\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[0].vnf-path-sequence-id'\n  value='1' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[0].vnf-instance-id'\n  value='`$serv-insts[$serv-index].path-segments[0].left-vnf-instance-id`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[0].right-network-name'\n  value='`$serv-insts[$serv-index].path-segments[0].network-name`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[0].right-network-role'\n  value='`$serv-insts[$serv-index].path-segments[0].network-role`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[0].vf-module-instance.vf-module-id'\n  value='`$serv-insts[$serv-index].path-segments[0].left-vf-module-id`' />\n","comments":"","x":1710.1784362792969,"y":1887.7976632118225,"z":"5629d16d.2ad96","wires":[]},{"id":"11af2729.a769f9","type":"set","name":"set prev values","xml":"<set>\n<parameter name='prev-network-name' value='`$serv-insts[$serv-index].path-segments[0].network-name`' />\n<parameter name='prev-network-role' value='`$serv-insts[$serv-index].path-segments[0].network-role`' />\n","comments":"","x":1707.6784362792969,"y":1932.7976641654968,"z":"5629d16d.2ad96","wires":[]},{"id":"548baaaf.cc4134","type":"set","name":"set prev values","xml":"<set>\n<parameter name='prev-network-name' value='`$serv-insts[$serv-index].path-segments[$ps-index].network-name`' />\n<parameter name='prev-network-role' value='`$serv-insts[$serv-index].path-segments[$ps-index].network-role`' />\n","comments":"","x":2137.6784439086914,"y":2000.297667980194,"z":"5629d16d.2ad96","wires":[]},{"id":"902c5891.668ab8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1975.1784210205078,"y":1977.7976431846619,"z":"5629d16d.2ad96","wires":[["b6018a90.ab7608","548baaaf.cc4134"]]},{"id":"19011bc0.d12e74","type":"set","name":"set last vnf data","xml":"<set>\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index + 1].vnf-path-sequence-id'\n  value='`$ps-index + 2`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index + 1].vnf-instance-id'\n  value='`$serv-insts[$serv-index].path-segments[$ps-index].right-vnf-instance-id`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index + 1].left-network-name'\n  value='`$prev-network-name`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index + 1].left-network-role'\n  value='`$prev-network-role`' />\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$ps-index + 1].vf-module-instance.vf-module-id'\n  value='`$serv-insts[$serv-index].path-segments[$ps-index].right-vf-module-id`' />\n","comments":"","x":1705.1784362792969,"y":2027.7976660728455,"z":"5629d16d.2ad96","wires":[]},{"id":"d098ba8b.a3df28","type":"set","name":"set vnf_length","xml":"<set>\n<parameter name='forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf_length'\n  value='`$serv-insts[$serv-index].path-segments_length + 1`' />\n","comments":"","x":1696.4284362792969,"y":2076.54766702652,"z":"5629d16d.2ad96","wires":[]},{"id":"29c194e4.ffaaec","type":"execute","name":"execute RestApiCallNode - PUT forwarding-path","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.forwardingpath.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.fp-url + $forwarding-path.forwarding-path-id`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-fp\" />\n\n","comments":"","outputs":1,"x":1797.797264099121,"y":2602.5596022605896,"z":"5629d16d.2ad96","wires":[["6b24d135.106e5","6756a9be.3589b8"]]},{"id":"6b24d135.106e5","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2068.2837982177734,"y":2626.807873249054,"z":"5629d16d.2ad96","wires":[["6be686e3.d317a8"]]},{"id":"6756a9be.3589b8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2060.712432861328,"y":2585.3078932762146,"z":"5629d16d.2ad96","wires":[["6be686e3.d317a8"]]},{"id":"6be686e3.d317a8","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"Failure writing forwarding-path to MD-SAL\" />\n","comments":"","x":2280.2972717285156,"y":2600.0596022605896,"z":"5629d16d.2ad96","wires":[]},{"id":"2bf6e158.bfceae","type":"switchNode","name":"for each existing forwarding path","xml":"<for silentFailure='true' index='fp-index' start='0' end='`$mdsal-service.service[0].service-data.forwarding-paths.forwarding-path_length`' >\n","comments":"","outputs":1,"x":1833.9286270141602,"y":1176.9643034934998,"z":"5629d16d.2ad96","wires":[["f7c714ad.2bad38"]]},{"id":"d0db37ac.abed08","type":"set","name":"set found-path = false","xml":"<set>\n<parameter name='found-path' value='false' />\n","comments":"","x":1801.4286270141602,"y":1121.9643034934998,"z":"5629d16d.2ad96","wires":[]},{"id":"f7c714ad.2bad38","type":"switchNode","name":"does the forwarding path name match?","xml":"<switch test='`$mdsal-service.service[0].service-data.forwarding-paths.forwarding-path[$fp-index].forwarding-path-name\n  == $db.path-segment[0].path-name`'>\n","comments":"","outputs":1,"x":2156.42862701416,"y":1175.7143034934998,"z":"5629d16d.2ad96","wires":[["eea9da0f.918148"]]},{"id":"eea9da0f.918148","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2386.4286346435547,"y":1174.4643034934998,"z":"5629d16d.2ad96","wires":[["7cb3f8f1.85eb48"]]},{"id":"7cb3f8f1.85eb48","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2515.178638458252,"y":1173.2143034934998,"z":"5629d16d.2ad96","wires":[["5754527f.58050c","8adff36e.3c1ee"]]},{"id":"5754527f.58050c","type":"set","name":"set found-path = true","xml":"<set>\n<parameter name='found-path' value='true' />\n","comments":"","x":2692.678638458252,"y":1145.7143034934998,"z":"5629d16d.2ad96","wires":[]},{"id":"8adff36e.3c1ee","type":"break","name":"break","xml":"<break>\n","comments":"","x":2645.1786041259766,"y":1193.2142901420593,"z":"5629d16d.2ad96","wires":[]},{"id":"313a3809.e4ff88","type":"switchNode","name":"switch found-path","xml":"<switch test='`$found-path`'>\n","comments":"","outputs":1,"x":1785.1786270141602,"y":1276.9643054008484,"z":"5629d16d.2ad96","wires":[["97b04b5c.cc2cb8"]]},{"id":"97b04b5c.cc2cb8","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1952.6786270141602,"y":1275.7143054008484,"z":"5629d16d.2ad96","wires":[["cb6588b3.927c18"]]},{"id":"cb6588b3.927c18","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2083.9286041259766,"y":1274.4642901420593,"z":"5629d16d.2ad96","wires":[["d312f25b.03d12","848cf29d.edb6a","50bf0848.ed4ac8"]]},{"id":"f0d2a389.89135","type":"execute","name":"generate forwarding-path-id","xml":"<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"forwarding-path.forwarding-path-id\" />\n","comments":"","outputs":1,"x":1746.0117454528809,"y":1757.7975754737854,"z":"5629d16d.2ad96","wires":[[]]},{"id":"491426c8.70e218","type":"execute","name":"generate service-path-instance-id","xml":"<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"forwarding-path.service-paths.service-path[0].service-path-instance-id\" />\n","comments":"","outputs":1,"x":1764.3450775146484,"y":1800.2977395057678,"z":"5629d16d.2ad96","wires":[[]]},{"id":"5bdb2ffa.bd158","type":"switchNode","name":"switch api","xml":"<switch test='`$serv-insts[$serv-index].api`'>\n","comments":"","outputs":1,"x":1680.1188850402832,"y":2255.893068790436,"z":"5629d16d.2ad96","wires":[["a1a0cae2.cf1708","7db03a9d.ab68a4"]]},{"id":"a1a0cae2.cf1708","type":"outcome","name":"GR","xml":"<outcome value='GR'>\n","comments":"","outputs":1,"x":1831.7855987548828,"y":2141.7262177467346,"z":"5629d16d.2ad96","wires":[["f2ab2652.039508"]]},{"id":"7db03a9d.ab68a4","type":"outcome","name":"VNF","xml":"<outcome value='VNF'>\n","comments":"","outputs":1,"x":1827.4403438568115,"y":2382.869236469269,"z":"5629d16d.2ad96","wires":[["4b154329.3644ec"]]},{"id":"4b154329.3644ec","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1961.1903285980225,"y":2382.6192116737366,"z":"5629d16d.2ad96","wires":[["f9ae246a.e84cd8","983ef71a.da7d78","4c9a08e9.01d9f8","80ee9321.e385d","ae5db14f.68538"]]},{"id":"f9ae246a.e84cd8","type":"execute","name":"generate service-instance-id","xml":"<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"tmp.service-instance-id\" />\n","comments":"","outputs":1,"x":2167.8570671081543,"y":2281.9049582481384,"z":"5629d16d.2ad96","wires":[[]]},{"id":"1f8a0d2b.888443","type":"execute","name":"generate forwarding-path url","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.forwarding-path`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.fp-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-instance-id`\"/>\n","comments":"","outputs":1,"x":1735.714096069336,"y":2545.47572183609,"z":"5629d16d.2ad96","wires":[[]]},{"id":"8d090eb7.070a8","type":"comment","name":"Make a new service instance in GR-API","info":"","comments":"","x":2274.1069869995117,"y":2244.8214716911316,"z":"5629d16d.2ad96","wires":[]},{"id":"a46d416f.1a345","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/gps.log' />\n","comments":"","outputs":1,"x":632.2619171142578,"y":1701.964307308197,"z":"5629d16d.2ad96","wires":[[]]},{"id":"c67bb294.bc315","type":"switchNode","name":"switch path-segments_length","xml":"<switch test='`$serv-insts[$serv-index].path-segments_length`'>\n","comments":"","outputs":1,"x":1139.1667098999023,"y":2182.2023825645447,"z":"5629d16d.2ad96","wires":[["85251f33.38b5d","208c3acb.b76f26","eb2e3f83.248d9"]]},{"id":"eb2e3f83.248d9","type":"success","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1352.499927520752,"y":2207.2023844718933,"z":"5629d16d.2ad96","wires":[["df485e3e.9e56d"]]},{"id":"85251f33.38b5d","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1354.999927520752,"y":2110.952624797821,"z":"5629d16d.2ad96","wires":[["b2a1f74e.a0d9f8"]]},{"id":"208c3acb.b76f26","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":1354.166675567627,"y":2153.869128704071,"z":"5629d16d.2ad96","wires":[["b2a1f74e.a0d9f8"]]},{"id":"b2a1f74e.a0d9f8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1495.8332252502441,"y":2132.2024211883545,"z":"5629d16d.2ad96","wires":[[]]},{"id":"683c3990.4dec28","type":"block","name":"block","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":1565.357032775879,"y":1020.8928046226501,"z":"5629d16d.2ad96","wires":[["45c3f393.2082bc","477131b1.1c0c2"]]},{"id":"64270aaa.060174","type":"save","name":"custom query: get service instance","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n      resource=\"custom-query\"\n      key=\"format = 'resource_and_url'\"\n      force=\"true\"\n      local-only=\"false\"\n      pfx=\"tmp.AnAI-data.si\">\n\t<parameter name=\"start[0]\" value=\"`'nodes/service-instance/' + $serv-inst.service-instance-id `\" />\n\t<parameter name=\"start_length\" value=\"1\" />\n","comments":"","outputs":1,"x":1210.3569946289062,"y":1022.559576511383,"z":"5629d16d.2ad96","wires":[["b6eca96f.d32ca8"]]},{"id":"45c3f393.2082bc","type":"execute","name":"execute split","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n\t<parameter name=\"original_string\" value=\"`$tmp.AnAI-data.si.results[0].url`\" />\n\t<parameter name=\"regex\" value=\"/\"/>\n\t<parameter name=\"limit\" value=\"11\" />\n\t<parameter name=\"ctx_memory_result_key\" value=\"split\" />\n","comments":"","outputs":1,"x":1714.4045639038086,"y":996.8453507423401,"z":"5629d16d.2ad96","wires":[[]]},{"id":"b6eca96f.d32ca8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1432.0237197875977,"y":1022.2261891365051,"z":"5629d16d.2ad96","wires":[["683c3990.4dec28"]]},{"id":"477131b1.1c0c2","type":"set","name":"set global-customer-id, etc","xml":"<set>\n<parameter name='output-global-customer-id' value='`$split[6]`' />\n<parameter name='output-service-type' value='`$split[9]`' />\n<parameter name='output-service-role' value='`$tmp.AnAI-data.si.results[0].service-instance.service-role`' />\n","comments":"","x":1758.2141189575195,"y":1047.5595059394836,"z":"5629d16d.2ad96","wires":[]},{"id":"80ee9321.e385d","type":"save","name":"save service-instance to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\" \n\tkey=\"customer.global-customer-id = $output-global-customer-id\n\t  AND service-subscription.service-type = $output-service-type\n\t  AND service-instance.service-instance-id = $tmp.service-instance-id\" >\n<parameter name=\"service-instance-id\" value=\"`$tmp.service-instance-id`\" />\n<parameter name=\"global-customer-id\" value=\"`$output-global-customer-id`\" />\n<parameter name=\"service-type\" value=\"`$output-service-type`\" />\n<parameter name=\"service-role\" value=\"`$output-service-role`\" />\n","comments":"","outputs":1,"x":2173.452423095703,"y":2455.4165325164795,"z":"5629d16d.2ad96","wires":[["d5fedeb1.c6453","2cc58f82.b2f37"]]},{"id":"b329030f.6943d","type":"comment","name":"Make a new service instance in A&AI","info":"","comments":"","x":2262.500144958496,"y":2405.892997264862,"z":"5629d16d.2ad96","wires":[]},{"id":"b4ae1cfc.2d5e8","type":"save","name":"save forwarding-path to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"forwarding-path\" \n\tkey=\"forwarding-path.forwarding-path-id = $forwarding-path.service-paths.service-path[0].service-path-instance-id\" >\n<parameter name=\"forwarding-path-id\" value=\"`$forwarding-path.service-paths.service-path[0].service-path-instance-id`\" />\n<parameter name=\"forwarding-path-name\" value=\"`$forwarding-path.service-paths.service-path[0].service-path-instance-name`\" />\n<parameter name=\"selflink\" value=\"`'/restconf/config/GENERIC-RESOURCE-API:services/service/'\n  + $tmp.service-instance-id\n  + '/forwarding-paths/forwarding-path/'\n  + $forwarding-path.forwarding-path-id\n  + '/services-paths/service-path/'\n  + $forwarding-path.service-paths.service-path[0].service-path-instance-id`\" />\n","comments":"","outputs":1,"x":1737.4999694824219,"y":2695.416627883911,"z":"5629d16d.2ad96","wires":[["570c5c1d.a84184","100184f6.a8fcdb"]]},{"id":"4177217a.70cc7","type":"save","name":"save forwarding-path relationship to service-instance","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"forwarding-path:relationship-list\"\n   key=\"forwarding-path.forwarding-path-id = $forwarding-path.service-paths.service-path[0].service-path-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"service-instance\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/business/customers/customer/'\n        + $output-global-customer-id\n        + '/service-subscriptions/service-subscription/'\n        + $output-service-type\n        + '/service-instances/service-instance/'\n        + $tmp.service-instance-id`\" />\n","comments":"","outputs":1,"x":1807.5000610351562,"y":2777.321086883545,"z":"5629d16d.2ad96","wires":[["e5653651.b903c8","eebbf2de.ab99c"]]},{"id":"9b387be2.dc2b18","type":"for","name":"for each vnf","xml":"<for index='vnf-index' start='0' end='`$forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf_length`' >\n","comments":"","outputs":1,"x":1678.9283981323242,"y":2904.464366912842,"z":"5629d16d.2ad96","wires":[["f601972.d913268"]]},{"id":"f601972.d913268","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1830.3570861816406,"y":2904.035620689392,"z":"5629d16d.2ad96","wires":[["ad9f625f.82ae3","86151834.e1db48"]]},{"id":"ad9f625f.82ae3","type":"save","name":"save forwarder to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"forwarder\" \n\tkey=\"forwarding-path.forwarding-path-id = $forwarding-path.service-paths.service-path[0].service-path-instance-id AND forwarder.sequence = $forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$vnf-index].vnf-path-sequence-id\" >\n<parameter name=\"sequence\" value=\"`$forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$vnf-index].vnf-path-sequence-id`\" />\n","comments":"","outputs":1,"x":2006.3570861816406,"y":2861.60693359375,"z":"5629d16d.2ad96","wires":[["4bd05c77.8bf2c4","cb4dc21b.d4dc6"]]},{"id":"86151834.e1db48","type":"save","name":"save forwarder relationship to generic-vnf","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"forwarder:relationship-list\"\n   key=\"forwarding-path.forwarding-path-id = $forwarding-path.service-paths.service-path[0].service-path-instance-id\n     AND forwarder.sequence = $forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$vnf-index].vnf-path-sequence-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/'\n        + $forwarding-path.service-paths.service-path[0].service[0].vnfs.vnf[$vnf-index].vnf-instance-id`\" />\n","comments":"","outputs":1,"x":2060.357048034668,"y":2947.55947971344,"z":"5629d16d.2ad96","wires":[["5201ac9b.81d914","cf4a6c9f.ce33c"]]},{"id":"4c9a08e9.01d9f8","type":"execute","name":"execute RestApiCallNode - PUT service-instance","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.csm.serviceinstance.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.service-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-sr\" />\n\n","comments":"","outputs":1,"x":2232.857192993164,"y":2368.571464061737,"z":"5629d16d.2ad96","wires":[["67e628d8.b9a9b8"]]},{"id":"983ef71a.da7d78","type":"execute","name":"generate service-instance url","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.service`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.service-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-instance-id`\"/>\n","comments":"","outputs":1,"x":2169.107192993164,"y":2326.0714631080627,"z":"5629d16d.2ad96","wires":[[]]},{"id":"f2ab2652.039508","type":"set","name":"set tmp.service-instance-id","xml":"<set>\n<parameter name='tmp.service-instance-id' value='`$serv-insts[$serv-index].service-instance-id`' />\n","comments":"","x":2023.9287490844727,"y":2141.1785759925842,"z":"5629d16d.2ad96","wires":[]},{"id":"ae5db14f.68538","type":"save","name":"save SERVICE_INSTANCE_TO_COMPOSITE_INSTANCE_MAPPING ","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO SERVICE_INSTANCE_TO_COMPOSITE_INSTANCE_MAPPING\n  (simple_service_instance_id, forwarding_path_service_instance_id)\n  VALUES ( $serv-insts[$serv-index].service-instance-id , $tmp.service-instance-id )\" >","comments":"","outputs":1,"x":2297.9761810302734,"y":2511.6070461273193,"z":"5629d16d.2ad96","wires":[[]]},{"id":"83141530.82c518","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2316.785617828369,"y":1379.1786713600159,"z":"5629d16d.2ad96","wires":[["b3cd7e32.1311e"]]},{"id":"63df2c22.43c924","type":"get-resource","name":"get-resource SERVICE_INSTANCE_TO_COMPOSITE_INSTANCE_MAPPING","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='select forwarding_path_service_instance_id\n    from SERVICE_INSTANCE_TO_COMPOSITE_INSTANCE_MAPPING\n    where simple_service_instance_id = $serv-inst.service-instance-id'\n  pfx='db.sitcim'>\n","comments":"","outputs":1,"x":1955.2857208251953,"y":1378.7979912757874,"z":"5629d16d.2ad96","wires":[["83141530.82c518"]]},{"id":"b3cd7e32.1311e","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1929.6429634094238,"y":1485.8929257392883,"z":"5629d16d.2ad96","wires":[["f82d1a28.9d5758","d0b3e656.49f5b8"]]},{"id":"a32e6237.6daf3","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":725.9285316467285,"y":312.1309576034546,"z":"5629d16d.2ad96","wires":[["3e23f4b0.7933cc"]]},{"id":"39c3eea1.efd8a2","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":725.9285545349121,"y":357.1309471130371,"z":"5629d16d.2ad96","wires":[["9ec522bf.66732"]]},{"id":"3e23f4b0.7933cc","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"`'System error reading PATH_SEGMENT table for uuid '\n  + $getpathsegment-topology-operation-input.service-information.onap-model-information.model-uuid\n  + ' and path '\n  + $db.forwarding-path[$path-index].path-name`\" />\n","comments":"","x":925.9286766052246,"y":310.4642915725708,"z":"5629d16d.2ad96","wires":[]},{"id":"9ec522bf.66732","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"`'No entries in PATH_SEGMENT table for uuid '\n  + $getpathsegment-topology-operation-input.service-information.onap-model-information.model-uuid\n  + ' and path '\n  + $db.forwarding-path[$path-index].path-name`\" />\n","comments":"","x":925.9284934997559,"y":357.1309471130371,"z":"5629d16d.2ad96","wires":[]},{"id":"5581a414.fb2c9c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":577.5952529907227,"y":400.46430587768555,"z":"5629d16d.2ad96","wires":[["6ce2ff77.93b44"]]},{"id":"6ce2ff77.93b44","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":312.26190185546875,"y":574.4642467498779,"z":"5629d16d.2ad96","wires":[["1570d296.5420fd","6ae56929.26b358","4e5c686c.598f68"]]},{"id":"fb8a502b.b988a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":997.2618865966797,"y":616.1309127807617,"z":"5629d16d.2ad96","wires":[["c62d489d.61a668"]]},{"id":"f673ab2c.5baed8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":997.2619094848633,"y":659.1309022903442,"z":"5629d16d.2ad96","wires":[["709cc4e9.5f8a1c"]]},{"id":"709cc4e9.5f8a1c","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"`'System error calling AAI to get run-time service instances for invariant uuid '\n  + $getpathsegment-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`\" />\n","comments":"","x":1187.2621154785156,"y":659.4642295837402,"z":"5629d16d.2ad96","wires":[]},{"id":"c62d489d.61a668","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"`'No run-time service instances in AAI for invariant uuid '\n  + $getpathsegment-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`\" />\n","comments":"","x":1185.59525680542,"y":616.1309595108032,"z":"5629d16d.2ad96","wires":[]},{"id":"30dab3b9.4e949c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":848.9285125732422,"y":702.7975997924805,"z":"5629d16d.2ad96","wires":[["cf0a30ca.a8fbb"]]},{"id":"cf0a30ca.a8fbb","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":297.26189041137695,"y":1471.1309490203857,"z":"5629d16d.2ad96","wires":[["f1440634.84c218","954eddda.d0e1c","d93608d4.fa2628","2cea7227.951c0e","d5e62d12.0598","a46d416f.1a345","2e8ac8c0.7d70a8"]]},{"id":"100184f6.a8fcdb","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1945.595199584961,"y":2714.464129447937,"z":"5629d16d.2ad96","wires":[["d60f0907.9fd4d8"]]},{"id":"570c5c1d.a84184","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1938.0238342285156,"y":2672.9641494750977,"z":"5629d16d.2ad96","wires":[["d60f0907.9fd4d8"]]},{"id":"d60f0907.9fd4d8","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"Failure writing forwarding-path to AAI\" />\n","comments":"","x":2157.608673095703,"y":2687.7158584594727,"z":"5629d16d.2ad96","wires":[]},{"id":"eebbf2de.ab99c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2085.5952072143555,"y":2794.4642028808594,"z":"5629d16d.2ad96","wires":[["bf35846c.fd3a28"]]},{"id":"e5653651.b903c8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2078.02384185791,"y":2752.96422290802,"z":"5629d16d.2ad96","wires":[["bf35846c.fd3a28"]]},{"id":"bf35846c.fd3a28","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"Failure writing forwarding-path relationship to AAI\" />\n","comments":"","x":2297.6086807250977,"y":2767.715931892395,"z":"5629d16d.2ad96","wires":[]},{"id":"cb4dc21b.d4dc6","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2188.928421020508,"y":2881.1309871673584,"z":"5629d16d.2ad96","wires":[["d39c3493.921458"]]},{"id":"4bd05c77.8bf2c4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2181.3570556640625,"y":2839.631007194519,"z":"5629d16d.2ad96","wires":[["d39c3493.921458"]]},{"id":"d39c3493.921458","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"Failure writing forwarder to AAI\" />\n","comments":"","x":2400.94189453125,"y":2854.382716178894,"z":"5629d16d.2ad96","wires":[]},{"id":"cf4a6c9f.ce33c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2297.261878967285,"y":2967.7974796295166,"z":"5629d16d.2ad96","wires":[["6613e9ab.9c4918"]]},{"id":"5201ac9b.81d914","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2289.69051361084,"y":2926.2974996566772,"z":"5629d16d.2ad96","wires":[["6613e9ab.9c4918"]]},{"id":"6613e9ab.9c4918","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"Failure writing forwarder relationship to AAI\" />\n","comments":"","x":2509.2753524780273,"y":2941.0492086410522,"z":"5629d16d.2ad96","wires":[]},{"id":"67e628d8.b9a9b8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2495.5950775146484,"y":2367.797538757324,"z":"5629d16d.2ad96","wires":[["d3a89de0.7df88"]]},{"id":"d3a89de0.7df88","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"Failure creating service instance in MD-SAL\" />\n","comments":"","x":2685.5950775146484,"y":2366.130790710449,"z":"5629d16d.2ad96","wires":[]},{"id":"2cc58f82.b2f37","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2383.9285736083984,"y":2472.797538757324,"z":"5629d16d.2ad96","wires":[["36de329d.4c51fe"]]},{"id":"d5fedeb1.c6453","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2376.357208251953,"y":2431.297558784485,"z":"5629d16d.2ad96","wires":[["36de329d.4c51fe"]]},{"id":"36de329d.4c51fe","type":"set","name":"set error (for logging only)","xml":"<set>\n<parameter name='error-message' value=\"Failure creating service instance in AAI\" />\n","comments":"","x":2579.2754077911377,"y":2446.049120903015,"z":"5629d16d.2ad96","wires":[]}]