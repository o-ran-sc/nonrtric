[{"id":"253897fe.9804d8","type":"dgstart","name":"DGSTART","outputs":1,"x":104.28571319580078,"y":82.41365623474121,"z":"a513164d.b587e8","wires":[["1277bad9.c9dc65"]]},{"id":"1277bad9.c9dc65","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":217.57141876220703,"y":122.65176773071289,"z":"a513164d.b587e8","wires":[["d0cd4638.a8e048"]]},{"id":"d0cd4638.a8e048","type":"method","name":"method vf-module-topology-operation-activate","xml":"<method rpc='vf-module-topology-operation-activate' mode='sync'>\n","comments":"","outputs":1,"x":217.71434020996094,"y":162.4136562347412,"z":"a513164d.b587e8","wires":[["c2a3b593.0a5d08"]]},{"id":"670ca3d7.f1798c","type":"comment","name":"vf-module-topology-operation-activate","info":"","comments":"","x":498.6305694580078,"y":30,"z":"a513164d.b587e8","wires":[]},{"id":"9f59000e.f6806","type":"switchNode","name":"switch request-action","xml":"<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n","comments":"","outputs":1,"x":507.8095245361328,"y":261.2707939147949,"z":"a513164d.b587e8","wires":[["a5ccb0a8.2cff4","ebb895aa.7188a8"]]},{"id":"a5ccb0a8.2cff4","type":"outcome","name":"CreateVfModuleInstance","xml":"<outcome value='CreateVfModuleInstance'>\n","comments":"","outputs":1,"x":758.8571395874023,"y":238.41368007659912,"z":"a513164d.b587e8","wires":[["121e0698.42b439"]]},{"id":"ebb895aa.7188a8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":702.5237846374512,"y":283.79466915130615,"z":"a513164d.b587e8","wires":[["9e326f10.6579d"]]},{"id":"121e0698.42b439","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":948.7143039703369,"y":238.41371154785156,"z":"a513164d.b587e8","wires":[[]]},{"id":"9e326f10.6579d","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'activate' then request-action must be 'CreateVfModuleInstance'\" />\n","comments":"","x":967.5237922668457,"y":284.12798166275024,"z":"a513164d.b587e8","wires":[]},{"id":"c2a3b593.0a5d08","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":159.28571319580078,"y":620.746940612793,"z":"a513164d.b587e8","wires":[["9f59000e.f6806","5a0c9e05.4c26d","120bbfec.5c7f5","62b75892.7f6148","30ab0690.1e23ea","7b205f57.6b2df","d2e05e08.6a7b6","9e432be5.4df7d8","ab8cd40.1cfff3","61692b8e.2508d4","c6388c88.2261c","59a1858f.55a5ac","fbfd66a7.490a98","9eef55da.15a338","4f0ef078.36dfd","66b49245.76614c"]]},{"id":"120bbfec.5c7f5","type":"switchNode","name":"switch service-data.vnfs.vnf_length","xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n","comments":"","outputs":1,"x":552.6190414428711,"y":392.4136209487915,"z":"a513164d.b587e8","wires":[["8e94d387.5f49a","ad72ff68.ef906"]]},{"id":"8e94d387.5f49a","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":793.3333129882812,"y":369.5563611984253,"z":"a513164d.b587e8","wires":[["374fb247.1fdefe"]]},{"id":"ad72ff68.ef906","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":793.0951538085938,"y":410.50887966156006,"z":"a513164d.b587e8","wires":[["786c1667.ed7d38"]]},{"id":"374fb247.1fdefe","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n","comments":"","x":959.999927520752,"y":368.842116355896,"z":"a513164d.b587e8","wires":[]},{"id":"786c1667.ed7d38","type":"for","name":"for each vnf","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n","comments":"","outputs":1,"x":955.3332977294922,"y":410.175498008728,"z":"a513164d.b587e8","wires":[["6cabe9b0.cf5628"]]},{"id":"6cabe9b0.cf5628","type":"switchNode","name":"switch service data vnf == input vnf","xml":"<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n","comments":"","outputs":1,"x":1206.6665153503418,"y":409.8421850204468,"z":"a513164d.b587e8","wires":[["c9085c8b.10988"]]},{"id":"c9085c8b.10988","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1436.6666069030762,"y":409.17553901672363,"z":"a513164d.b587e8","wires":[["faa4e358.17a12"]]},{"id":"5a0c9e05.4c26d","type":"set","name":"set vnf-index to -1","xml":"<set>\n<parameter name='vnf-index' value='-1' />\n","comments":"","x":496.66664123535156,"y":330.50879287719727,"z":"a513164d.b587e8","wires":[]},{"id":"e7a79cb9.7fe04","type":"set","name":"set vnf-index to idx","xml":"<set>\n<parameter name='vnf-index' value='`$idx`' />\n","comments":"","x":1758.3332443237305,"y":380.1754970550537,"z":"a513164d.b587e8","wires":[]},{"id":"59a1858f.55a5ac","type":"switchNode","name":"switch vnf-index","xml":"<switch test='`$vnf-index`'>\n","comments":"","outputs":1,"x":488.33332443237305,"y":457.1754951477051,"z":"a513164d.b587e8","wires":[["659357d5.3ce228"]]},{"id":"659357d5.3ce228","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":666.6667098999023,"y":456.5088710784912,"z":"a513164d.b587e8","wires":[["392aa8f.a19d758"]]},{"id":"392aa8f.a19d758","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n","comments":"","x":826.666618347168,"y":455.8421745300293,"z":"a513164d.b587e8","wires":[]},{"id":"faa4e358.17a12","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1585.0000686645508,"y":408.0952377319336,"z":"a513164d.b587e8","wires":[["e7a79cb9.7fe04","d2abc3b6.2fd2c"]]},{"id":"d2abc3b6.2fd2c","type":"break","name":"break","xml":"<break>\n","comments":"","x":1720.0000343322754,"y":429.7618236541748,"z":"a513164d.b587e8","wires":[]},{"id":"30ab0690.1e23ea","type":"switchNode","name":"switch service-data...vf-module_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n","comments":"","outputs":1,"x":560.9523544311523,"y":555.746992111206,"z":"a513164d.b587e8","wires":[["b4a7388e.909e78","80a063f6.2f01e"]]},{"id":"b4a7388e.909e78","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":811.6666641235352,"y":534.5563955307007,"z":"a513164d.b587e8","wires":[["bb37ec27.eb40e"]]},{"id":"80a063f6.2f01e","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":811.4285049438477,"y":575.5089139938354,"z":"a513164d.b587e8","wires":[["3a471dfe.805fa2"]]},{"id":"bb37ec27.eb40e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'There are no VF modules defined in MD-SAL for VNF ' + $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n","comments":"","x":978.3332786560059,"y":533.8421506881714,"z":"a513164d.b587e8","wires":[]},{"id":"3a471dfe.805fa2","type":"for","name":"for each vf-module","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n","comments":"","outputs":1,"x":973.6666488647461,"y":575.1755323410034,"z":"a513164d.b587e8","wires":[["75a4ece.d91fd14"]]},{"id":"75a4ece.d91fd14","type":"switchNode","name":"switch service data vf-module == input vf-module","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`'>\n","comments":"","outputs":1,"x":1279.9998092651367,"y":574.8422679901123,"z":"a513164d.b587e8","wires":[["cd38f5fd.973228"]]},{"id":"cd38f5fd.973228","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1549.9998626708984,"y":572.5088729858398,"z":"a513164d.b587e8","wires":[["6e925a0e.9bad64"]]},{"id":"62b75892.7f6148","type":"set","name":"set vf-module-index to -1","xml":"<set>\n<parameter name='vf-module-index' value='-1' />\n","comments":"","x":516.6666259765625,"y":505.5088310241699,"z":"a513164d.b587e8","wires":[]},{"id":"7819b897.9b8788","type":"set","name":"set vf-module-index to idx","xml":"<set>\n<parameter name='vf-module-index' value='`$idx`' />\n","comments":"","x":1879.9999542236328,"y":543.5088520050049,"z":"a513164d.b587e8","wires":[]},{"id":"7b205f57.6b2df","type":"switchNode","name":"switch vf-module-index","xml":"<switch test='`$vf-module-index`'>\n","comments":"","outputs":1,"x":513.3333282470703,"y":623.8422508239746,"z":"a513164d.b587e8","wires":[["7e534d10.70f0c4"]]},{"id":"7e534d10.70f0c4","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":691.6667137145996,"y":623.1756267547607,"z":"a513164d.b587e8","wires":[["d2e9e465.4b0f08"]]},{"id":"d2e9e465.4b0f08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VF module ID ' + $vf-module-topology-operation-input.vf-module-information.vf-module-id + ' in MD-SAL'`\" />\n","comments":"","x":851.6666221618652,"y":622.5089302062988,"z":"a513164d.b587e8","wires":[]},{"id":"6e925a0e.9bad64","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1683.3334045410156,"y":571.4286127090454,"z":"a513164d.b587e8","wires":[["7819b897.9b8788","431f8c87.56adf4"]]},{"id":"431f8c87.56adf4","type":"break","name":"break","xml":"<break>\n","comments":"","x":1818.3333702087402,"y":593.0951986312866,"z":"a513164d.b587e8","wires":[]},{"id":"d2e05e08.6a7b6","type":"set","name":"set order-status to Created","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='Created' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n","comments":"","x":528.5714797973633,"y":1216.22327709198,"z":"a513164d.b587e8","wires":[]},{"id":"588ce565.39dd2c","type":"switchNode","name":"switch order-status","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":504.2856674194336,"y":714.7469882965088,"z":"a513164d.b587e8","wires":[["6be401d0.b3524","56615580.a8db5c","5c68b194.1aa58"]]},{"id":"6be401d0.b3524","type":"outcome","name":"PendingCreate","xml":"<outcome value='PendingCreate'>\n","comments":"","outputs":1,"x":715.9524192810059,"y":671.4136371612549,"z":"a513164d.b587e8","wires":[["42b04be7.605cf4"]]},{"id":"56615580.a8db5c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":691.2857513427734,"y":756.7946605682373,"z":"a513164d.b587e8","wires":[["33b17b74.98d924"]]},{"id":"42b04be7.605cf4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":870.8095207214355,"y":689.0803823471069,"z":"a513164d.b587e8","wires":[[]]},{"id":"33b17b74.98d924","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Order status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status + ' instead of PendingCreate or PendingDelete'`\" />\n","comments":"","x":885.2857398986816,"y":755.1280536651611,"z":"a513164d.b587e8","wires":[]},{"id":"9e432be5.4df7d8","type":"set","name":"copy input data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n","comments":"","x":493.57141876220703,"y":1167.8899221420288,"z":"a513164d.b587e8","wires":[]},{"id":"ab8cd40.1cfff3","type":"save","name":"update vf-module to Active","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"orchestration-status\" value=\"Active\" />\n","comments":"","outputs":1,"x":526.904655456543,"y":970.2708263397217,"z":"a513164d.b587e8","wires":[["78e7a6a8.082428","ea900719.fbc578"]]},{"id":"1f016e5b.1ac382","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n","comments":"","x":923.5714149475098,"y":993.6041955947876,"z":"a513164d.b587e8","wires":[]},{"id":"78e7a6a8.082428","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":736.2619819641113,"y":950.5566654205322,"z":"a513164d.b587e8","wires":[["76a4fbff.34ca44"]]},{"id":"ea900719.fbc578","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":744.8334121704102,"y":994.842378616333,"z":"a513164d.b587e8","wires":[["1f016e5b.1ac382"]]},{"id":"76a4fbff.34ca44","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n","comments":"","x":926.2620086669922,"y":950.366400718689,"z":"a513164d.b587e8","wires":[]},{"id":"61692b8e.2508d4","type":"update","name":"Update EIPAM_IP_ASSIGNMENTS to ACTIVE","xml":"<update resource='SQL' force='true' plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' \n  key='UPDATE EIPAM_IP_ASSIGNMENTS SET status = \"ACTIVE\" WHERE info = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'>\n","comments":"","outputs":1,"x":590.2380752563477,"y":1124.5565662384033,"z":"a513164d.b587e8","wires":[["a400120c.32d8b"]]},{"id":"a400120c.32d8b","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":856.9047470092773,"y":1122.8899059295654,"z":"a513164d.b587e8","wires":[["2d90cf92.ce7de"]]},{"id":"2d90cf92.ce7de","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating EIPAM_IP_ASSIGNMENTS table\" />\n","comments":"","x":1006.9047470092773,"y":1121.2232189178467,"z":"a513164d.b587e8","wires":[]},{"id":"c6388c88.2261c","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":490.71422576904297,"y":1313.8423299789429,"z":"a513164d.b587e8","wires":[]},{"id":"5c68b194.1aa58","type":"outcome","name":"PendingDelete","xml":"<outcome value='PendingDelete'>\n","comments":"","outputs":1,"x":715.9523696899414,"y":713.3333053588867,"z":"a513164d.b587e8","wires":[["42b04be7.605cf4"]]},{"id":"fbfd66a7.490a98","type":"switchNode","name":"switch vlan-vnfc-instance-group_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vlan-vnfc-instance-groups.vlan-vnfc-instance-group_length`'>\n","comments":"","outputs":1,"x":566.6666793823242,"y":854.3184928894043,"z":"a513164d.b587e8","wires":[["bacf35b7.11ac18","49ee94e2.45f87c","880d861c.b8cce8"]]},{"id":"bacf35b7.11ac18","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":799.5238571166992,"y":807.1755809783936,"z":"a513164d.b587e8","wires":[["5c899c3f.07e234"]]},{"id":"49ee94e2.45f87c","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":799.5237483978271,"y":852.8898429870605,"z":"a513164d.b587e8","wires":[["5c899c3f.07e234"]]},{"id":"880d861c.b8cce8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":798.0951995849609,"y":901.9375038146973,"z":"a513164d.b587e8","wires":[["958797c2.5ae5a8"]]},{"id":"5c899c3f.07e234","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":928.0952529907227,"y":827.17555809021,"z":"a513164d.b587e8","wires":[[]]},{"id":"9eef55da.15a338","type":"execute","name":"execute PropertiesNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":520.9523849487305,"y":201.4612865447998,"z":"a513164d.b587e8","wires":[[]]},{"id":"4f0ef078.36dfd","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleactivate.log' />\n","comments":"","outputs":1,"x":486.4285888671875,"y":1264.318528175354,"z":"a513164d.b587e8","wires":[[]]},{"id":"958797c2.5ae5a8","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-vlan-tagging-activate","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-vlan-tagging-activate' mode='sync' >\n","comments":"","outputs":1,"x":1132.6191024780273,"y":901.4135723114014,"z":"a513164d.b587e8","wires":[["56f9841d.9bbbec"]]},{"id":"56f9841d.9bbbec","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1470.9523658752441,"y":900.7471504211426,"z":"a513164d.b587e8","wires":[["9d2071d5.2c25c"]]},{"id":"9d2071d5.2c25c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1620.952262878418,"y":899.0803050994873,"z":"a513164d.b587e8","wires":[]},{"id":"66b49245.76614c","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":497.85715103149414,"y":1057.2856426239014,"z":"a513164d.b587e8","wires":[["280c9cb0.667b24"]]},{"id":"280c9cb0.667b24","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":674.5238914489746,"y":1056.6668376922607,"z":"a513164d.b587e8","wires":[["184691ab.6cf73e"]]},{"id":"184691ab.6cf73e","type":"save","name":"update vnfc to Active","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vnfc\"\n   key=\"vnfc.vnfc-name = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"orchestration-status\" value=\"Active\" />\n<parameter name=\"prov-status\" value=\"NVTPROV\" />\n","comments":"","outputs":1,"x":889.2857627868652,"y":1055.8571224212646,"z":"a513164d.b587e8","wires":[["997c88da.d2aad8","cae348fb.2f2c48"]]},{"id":"434861b1.ae452","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vnfc found in AAI for vnfc name ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n","comments":"","x":1252.142807006836,"y":1074.8572216033936,"z":"a513164d.b587e8","wires":[]},{"id":"997c88da.d2aad8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1089.1191673278809,"y":1031.381106376648,"z":"a513164d.b587e8","wires":[["da3fd75c.7374d8"]]},{"id":"cae348fb.2f2c48","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1097.6905975341797,"y":1075.6668195724487,"z":"a513164d.b587e8","wires":[["434861b1.ae452"]]},{"id":"da3fd75c.7374d8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vnfc in AAI\" />\n","comments":"","x":1254.8334007263184,"y":1031.619426727295,"z":"a513164d.b587e8","wires":[]},{"id":"de1a984f.167338","type":"comment","name":"check removed with US622450","info":"","comments":"","x":434.2857360839844,"y":677.1428833007812,"z":"a513164d.b587e8","wires":[]}]