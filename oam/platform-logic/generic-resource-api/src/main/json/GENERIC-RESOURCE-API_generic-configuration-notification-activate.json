[{"id":"748c5e12.ee05f","type":"dgstart","name":"DGSTART","outputs":1,"x":98.33332824707031,"y":78.33332824707031,"z":"f39a1209.6ec59","wires":[["75ce25e8.a289dc"]]},{"id":"75ce25e8.a289dc","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":213.61902618408203,"y":118.57143688201904,"z":"f39a1209.6ec59","wires":[["752ca0e8.9e0c2"]]},{"id":"752ca0e8.9e0c2","type":"method","name":"method generic-configuration-notification-activate","xml":"<method rpc='generic-configuration-notification-activate' mode='sync'>\n","comments":"","outputs":1,"x":221.76195526123047,"y":159.3333225250244,"z":"f39a1209.6ec59","wires":[["43784d88.bf3334"]]},{"id":"81b84b04.741458","type":"comment","name":"generic-configuration-notification-activate","info":"","comments":"","x":492.67818450927734,"y":25.9196720123291,"z":"f39a1209.6ec59","wires":[]},{"id":"43784d88.bf3334","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":146.6666717529297,"y":528.3333139419556,"z":"f39a1209.6ec59","wires":[["689f4588.4fb38c","6b66e766.d901c8","ecdec83a.0eea48","c0c55ed4.616a4","598a34a2.6f524c","9985c36c.7c9c1","bf385492.e7b548","f0a42717.253648","c53c80e.cc1d68"]]},{"id":"689f4588.4fb38c","type":"execute","name":"execute readProperties","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":396.6666488647461,"y":301.6666784286499,"z":"f39a1209.6ec59","wires":[[]]},{"id":"6b66e766.d901c8","type":"execute","name":"generate gc-configuration url","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.gc-configuration`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.gc-url\"/>\n    <parameter name=\"target\" value=\"{configuration-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.configuration-information.configuration-id`\"/>\n","comments":"","outputs":1,"x":411.66663360595703,"y":353.3333320617676,"z":"f39a1209.6ec59","wires":[[]]},{"id":"56854966.d5ae88","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":746.6665420532227,"y":404.9998531341553,"z":"f39a1209.6ec59","wires":[["8c7d47d8.35cfc8"]]},{"id":"ecdec83a.0eea48","type":"execute","name":"execute RestApiCallNode - GET gc-configuration","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.gc-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-gc\" />\n\n","comments":"","outputs":1,"x":475.0000534057617,"y":404.99998664855957,"z":"f39a1209.6ec59","wires":[["56854966.d5ae88"]]},{"id":"8c7d47d8.35cfc8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":874.9998626708984,"y":404.99997901916504,"z":"f39a1209.6ec59","wires":[["6c3e40a9.1ac7d","7e782342.e3086c"]]},{"id":"6c3e40a9.1ac7d","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"Y\" />\n<parameter name=\"input.response-code\"\n  value=\"500\" />\n<parameter name=\"input.response-message\"\n  value=\"`'Cannot find configuration ' + $generic-configuration-notification-input.configuration-information.configuration-id`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":1053.3331756591797,"y":373.3333225250244,"z":"f39a1209.6ec59","wires":[[]]},{"id":"7e782342.e3086c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Cannot find configuration ' + $generic-configuration-notification-input.configuration-information.configuration-id`\" />\n","comments":"","x":1029.9998245239258,"y":425.0000047683716,"z":"f39a1209.6ec59","wires":[]},{"id":"c53c80e.cc1d68","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"success\" />\n\n","comments":"","x":370,"y":788.3333129882812,"z":"f39a1209.6ec59","wires":[]},{"id":"f0a42717.253648","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-gcnotify.log' />\n","comments":"","outputs":1,"x":363.3333320617676,"y":742.4135932922363,"z":"f39a1209.6ec59","wires":[[]]},{"id":"bf385492.e7b548","type":"configure","name":"send success to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"`$generic-configuration-notification-input.ack-final-indicator`\" />\n<parameter name=\"input.response-code\"\n  value=\"`$generic-configuration-notification-input.response-code`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":393.33338928222656,"y":697.4136219024658,"z":"f39a1209.6ec59","wires":[[]]},{"id":"9985c36c.7c9c1","type":"execute","name":"execute RestApiCallNode - PUT port-mirror-configuration","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.genconfig.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.gc-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-gc\" />\n\n","comments":"","outputs":1,"x":503.33348083496094,"y":624.0802850723267,"z":"f39a1209.6ec59","wires":[["7f4b784c.bb4798","6c51d8f0.b04b08"]]},{"id":"7f4b784c.bb4798","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":803.4033012390137,"y":645.4118404388428,"z":"f39a1209.6ec59","wires":[["41d31794.266388"]]},{"id":"6c51d8f0.b04b08","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":795.8319358825684,"y":603.9118604660034,"z":"f39a1209.6ec59","wires":[["41d31794.266388"]]},{"id":"41d31794.266388","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":958.8214454650879,"y":617.9846868515015,"z":"f39a1209.6ec59","wires":[["9014b16d.c022e"]]},{"id":"9014b16d.c022e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Error updating md-sal for gc-configuration' />\n","comments":"","x":1131.666835784912,"y":617.4136619567871,"z":"f39a1209.6ec59","wires":[]},{"id":"c0c55ed4.616a4","type":"set","name":"set order-status to Active","xml":"<set>\n<parameter name='mdsal-gc.gc-configuration[0].configuration-data.configuration-oper-status.order-status'\n  value='Active' />\n<parameter name='mdsal-gc.gc-configuration[0].configuration-data.configuration-oper-status.last-action'\n  value='CreateGenericConfigurationInstance' />\n<parameter name='mdsal-gc.gc-configuration[0].configuration-data.configuration-oper-status.last-rpc-action'\n  value='activate' />\n","comments":"","x":410.0001754760742,"y":469.0803680419922,"z":"f39a1209.6ec59","wires":[]},{"id":"598a34a2.6f524c","type":"set","name":"copy mdsal-gc.gc-configuration[0]. to gc.","xml":"<set>\n<parameter name='gc.' value='mdsal-gc.gc-configuration[0].' />\n","comments":"","x":451.6668167114258,"y":550.7471122741699,"z":"f39a1209.6ec59","wires":[]}]