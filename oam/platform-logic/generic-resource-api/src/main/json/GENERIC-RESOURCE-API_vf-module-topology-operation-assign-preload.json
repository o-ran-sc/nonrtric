[{"id":"710d7cb4.eb0774","type":"dgstart","name":"DGSTART","outputs":1,"x":101.42857360839844,"y":85.71428680419922,"z":"12fa1652.31064a","wires":[["19ecd48f.9d352b"]]},{"id":"19ecd48f.9d352b","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":215.28570938110352,"y":125.52382469177246,"z":"12fa1652.31064a","wires":[["65563387.25435c"]]},{"id":"65563387.25435c","type":"method","name":"method vf-module-topology-operation-assign-preload","xml":"<method rpc='vf-module-topology-operation-assign-preload' mode='sync'>\n","comments":"","outputs":1,"x":236.8572006225586,"y":165.71428680419922,"z":"12fa1652.31064a","wires":[["1beaf4b3.212b0b"]]},{"id":"21bc25a8.14c9ba","type":"comment","name":"vf-module-topology-operation-assign-preload","info":"","comments":"","x":506.74967193603516,"y":28.68998622894287,"z":"12fa1652.31064a","wires":[]},{"id":"1beaf4b3.212b0b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":113.0952377319336,"y":1360.3566846847534,"z":"12fa1652.31064a","wires":[["cb4f7999.d9e4c8","8df98e43.91582","f24637ec.ea6448","d3298aef.821078","c922e93c.ce67a8","6436811c.f7b6f","7930ae51.69171","852c8af1.197bc8","5bc32471.aadd3c"]]},{"id":"cb4f7999.d9e4c8","type":"set","name":"set from-preload flag to true","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.from-preload' value='true' />\n","comments":"","x":400.71424865722656,"y":343.6899881362915,"z":"12fa1652.31064a","wires":[]},{"id":"8df98e43.91582","type":"set","name":"copy vf-module-topology from preload structure","xml":"<set>\n<parameter name='tmp.vf-module-topology.'\n  value='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vf-module-topology.`' />\n","comments":"","x":460.71431732177734,"y":399.4042491912842,"z":"12fa1652.31064a","wires":[]},{"id":"7930ae51.69171","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-preload.log' />\n","comments":"","outputs":1,"x":310.71422576904297,"y":2702.880202293396,"z":"12fa1652.31064a","wires":[[]]},{"id":"f24637ec.ea6448","type":"get-resource","name":"get-resource VF_MODULE_TO_VFC_MAPPING","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_TO_VFC_MAPPING WHERE vf_module_customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-to-vfc-mapping[]'>\n\n","comments":"","outputs":1,"x":464.7618942260742,"y":507.0232820510864,"z":"12fa1652.31064a","wires":[["a4bf99dd.135018","e8d97ca9.49cc3"]]},{"id":"a4bf99dd.135018","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":730.5475044250488,"y":487.404109954834,"z":"12fa1652.31064a","wires":[["71b093a0.e0ad2c"]]},{"id":"e8d97ca9.49cc3","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":739.1189346313477,"y":531.6898231506348,"z":"12fa1652.31064a","wires":[["c7a9a780.3f9868"]]},{"id":"71b093a0.e0ad2c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_TO_VFC_MAPPING table\" />\n","comments":"","x":905.547435760498,"y":486.54701042175293,"z":"12fa1652.31064a","wires":[]},{"id":"c7a9a780.3f9868","type":"set","name":"set vf-module-to-vfc-mapping length to 0","xml":"<set>\n<parameter name='db.vf-module-to-vfc-mapping_length' value='0' />\n","comments":"","x":988.9999084472656,"y":531.3084602355957,"z":"12fa1652.31064a","wires":[]},{"id":"d3298aef.821078","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":359.7619094848633,"y":835.3565883636475,"z":"12fa1652.31064a","wires":[["3deaf862.f775d8"]]},{"id":"3deaf862.f775d8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":551.6667022705078,"y":833.9279947280884,"z":"12fa1652.31064a","wires":[["db5f31b7.9b0d8","c9f43b26.cf95a8","95f5b341.3e634","8d757725.9164f8","80c39aa5.c11278","be45f752.943938","8f68eac5.8283a8"]]},{"id":"8e0c51ba.2a0ae","type":"for","name":"for each vm","xml":"<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":1129.762035369873,"y":1017.3564701080322,"z":"12fa1652.31064a","wires":[["cd5f0aba.a794c8"]]},{"id":"c9f43b26.cf95a8","type":"set","name":"set vnfc-names_length","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' />\n","comments":"","x":801.4287109375,"y":972.0234613418579,"z":"12fa1652.31064a","wires":[]},{"id":"db5f31b7.9b0d8","type":"get-resource","name":"get-resource VFC_MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_MODEL WHERE customization_uuid = $db.vf-module-to-vfc-mapping[$vm-type-index].vfc-customization-uuid'\n  pfx='db.vfc-model'>\n\n","comments":"","outputs":1,"x":814.7617645263672,"y":852.0233163833618,"z":"12fa1652.31064a","wires":[["7014c553.4a705c","a2d29d20.ac5ef"]]},{"id":"7014c553.4a705c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1010.5474090576172,"y":832.4039192199707,"z":"12fa1652.31064a","wires":[["957c44b.2c20cb8"]]},{"id":"a2d29d20.ac5ef","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1019.118839263916,"y":876.6896324157715,"z":"12fa1652.31064a","wires":[["64f3e60b.9bc548"]]},{"id":"3e44d7d6.d54548","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_MODEL table\" />\n","comments":"","x":1338.8806610107422,"y":834.8800859451294,"z":"12fa1652.31064a","wires":[]},{"id":"a87ad3e9.ec603","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No entries found in VFC_MODEL table for customization UUID ' + $db.vf-module-to-vfc-mapping[$db-vm-index].vfc_customization_uuid`\" />\n","comments":"","x":1338.0951538085938,"y":878.6898260116577,"z":"12fa1652.31064a","wires":[]},{"id":"9c45499c.064018","type":"comment","name":"Find this vm-type in the TOSCA data","info":"","comments":"","x":1109.7620010375977,"y":678.690034866333,"z":"12fa1652.31064a","wires":[]},{"id":"95f5b341.3e634","type":"set","name":"set db-vm-type-index to -1","xml":"<set>\n<parameter name='db-vm-type-index' value='-1' />\n","comments":"","x":811.428596496582,"y":672.0233907699585,"z":"12fa1652.31064a","wires":[]},{"id":"8d757725.9164f8","type":"for","name":"for each db vm-type","xml":"<for index='tmp-idx' start='0' end='`$db.vf-module-to-vfc-mapping_length`' >\n","comments":"","outputs":1,"x":789.7619094848633,"y":722.0233316421509,"z":"12fa1652.31064a","wires":[["8d887d24.fc061"]]},{"id":"8d887d24.fc061","type":"switchNode","name":"vm-types equal?","xml":"<switch test='`$db.vf-module-to-vfc-mapping[$tmp-idx].vm-type\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-type`'>\n","comments":"","outputs":1,"x":1018.0952682495117,"y":720.3566036224365,"z":"12fa1652.31064a","wires":[["8f915d23.ddb28"]]},{"id":"8f915d23.ddb28","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1196.4285507202148,"y":718.6899900436401,"z":"12fa1652.31064a","wires":[["5202ed9f.35e3f4"]]},{"id":"5202ed9f.35e3f4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1331.4285125732422,"y":717.0233316421509,"z":"12fa1652.31064a","wires":[["2921fb14.672284","f7267660.fa7548"]]},{"id":"f7267660.fa7548","type":"break","name":"break","xml":"<break>\n","comments":"","x":1471.4286003112793,"y":737.0233736038208,"z":"12fa1652.31064a","wires":[]},{"id":"2921fb14.672284","type":"set","name":"set db-vm-type-index to this index","xml":"<set>\n<parameter name='db-vm-type-index' value='`$tmp-idx`' />\n","comments":"","x":1555.7617683410645,"y":688.6899566650391,"z":"12fa1652.31064a","wires":[]},{"id":"80c39aa5.c11278","type":"switchNode","name":"switch db-vm-type-index","xml":"<switch test='`$db-vm-type-index`'>\n","comments":"","outputs":1,"x":806.7618942260742,"y":775.3566665649414,"z":"12fa1652.31064a","wires":[["8cd39913.f23228"]]},{"id":"8cd39913.f23228","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":1026.4286422729492,"y":775.3566465377808,"z":"12fa1652.31064a","wires":[["a89fa43d.9bb628"]]},{"id":"a3308ad5.11d848","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Preload data contains vm-type ' + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-type + ' but VF_MODULE_TO_VFC_MAPPING table does not have this vm-type'`\" />\n","comments":"","x":1349.761947631836,"y":772.0231647491455,"z":"12fa1652.31064a","wires":[]},{"id":"be45f752.943938","type":"switchNode","name":"switch naming-policy","xml":"<switch test='`$db.vfc-model.naming-policy`'>\n","comments":"","outputs":1,"x":796.428466796875,"y":1065.6899499893188,"z":"12fa1652.31064a","wires":[["c572d795.28f748","31d3de85.02eef2"]]},{"id":"c572d795.28f748","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":978.0952224731445,"y":1019.0233221054077,"z":"12fa1652.31064a","wires":[["8e0c51ba.2a0ae"]]},{"id":"31d3de85.02eef2","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":976.1904144287109,"y":1109.97549533844,"z":"12fa1652.31064a","wires":[["8b2e5d89.9a1aa"]]},{"id":"cd5f0aba.a794c8","type":"set","name":"set vnfc name to vm name","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vm-index].vnfc-name'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-type-index]`' />\n","comments":"","x":1354.7618789672852,"y":1017.356593132019,"z":"12fa1652.31064a","wires":[]},{"id":"e082e88d.784ca8","type":"call","name":"call GENERIC-RESOURCE-API:naming-policy-generate-name","xml":"<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n","comments":"","outputs":1,"x":1610.5951843261719,"y":1129.8566722869873,"z":"12fa1652.31064a","wires":[["3ad3c57a.a9b1fa","6dbcf922.de03b8"]]},{"id":"3b3fca2d.6db346","type":"set","name":"set variables for generating name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.policy-instance-name' value='`$db.vfc-model.naming-policy`' />\n<parameter name='naming-policy-generate-name-input.naming-type' value='VNFC' />\n<parameter name='naming-policy-generate-name-input.context-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='naming-policy-generate-name-input.query-parameter' value='`$db.vf-module-to-vfc-mapping[$vm-type-index].vf-module-customization-uuid`' />\n<parameter name='naming-policy-generate-name-input.action' value='ASSIGN' />\n<parameter name='naming-policy-generate-name-input.vnf-name' value='`$vf-module-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='naming-policy-generate-name-input.vm-name' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]`' />\n","comments":"","x":1520.5950622558594,"y":1084.1422319412231,"z":"12fa1652.31064a","wires":[]},{"id":"f4cc50d3.26695","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to generate VNFC name: ' + $error-message`\" />\n","comments":"","x":2242.7379150390625,"y":1100.8089056015015,"z":"12fa1652.31064a","wires":[]},{"id":"cd517df1.447c3","type":"set","name":"set vnfc-name to generated name","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vm-index].vnfc-name'\n  value='`$naming-policy-generate-name-output.vnfc-name`' />\n","comments":"","x":2135.547317504883,"y":1149.094633102417,"z":"12fa1652.31064a","wires":[]},{"id":"8b2e5d89.9a1aa","type":"for","name":"for each vm","xml":"<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":1128.9285507202148,"y":1109.023274421692,"z":"12fa1652.31064a","wires":[["2a95f2dd.0370be"]]},{"id":"2a95f2dd.0370be","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1290.5951843261719,"y":1109.8566493988037,"z":"12fa1652.31064a","wires":[["3b3fca2d.6db346","e082e88d.784ca8"]]},{"id":"db5c587c.0ccaa8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2936.4284019470215,"y":662.0233678817749,"z":"12fa1652.31064a","wires":[["2296bb15.a1c234","7a8570f1.b8e03"]]},{"id":"7a8570f1.b8e03","type":"call","name":"call GENERIC-RESOURCE-API:naming-policy-generate-name","xml":"<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n","comments":"","outputs":1,"x":3260.7141075134277,"y":688.5948991775513,"z":"12fa1652.31064a","wires":[[]]},{"id":"2296bb15.a1c234","type":"set","name":"set variables for deleting name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.naming-type' value='VNFC' />\n<parameter name='naming-policy-generate-name-input.context-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='naming-policy-generate-name-input.action' value='DELETE' />\n","comments":"","x":3162.1427268981934,"y":641.4519701004028,"z":"12fa1652.31064a","wires":[]},{"id":"eb951168.0fa3a","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":2252.7620391845703,"y":629.3566608428955,"z":"12fa1652.31064a","wires":[["99139193.020a8"]]},{"id":"99139193.020a8","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":2431.7621154785156,"y":629.3566360473633,"z":"12fa1652.31064a","wires":[["39a3d2db.90ad1e"]]},{"id":"39a3d2db.90ad1e","type":"switchNode","name":"switch vnfc-name","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`'>\n","comments":"","outputs":1,"x":2614.762046813965,"y":628.6899538040161,"z":"12fa1652.31064a","wires":[["69f3e35.4c48e1c","583536f.86c70c8"]]},{"id":"69f3e35.4c48e1c","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2783.0953063964844,"y":595.3566598892212,"z":"12fa1652.31064a","wires":[["4b1a4758.a1ae08"]]},{"id":"583536f.86c70c8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2784.761978149414,"y":661.5471725463867,"z":"12fa1652.31064a","wires":[["db5c587c.0ccaa8"]]},{"id":"4b1a4758.a1ae08","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2913.0951499938965,"y":593.6900119781494,"z":"12fa1652.31064a","wires":[[]]},{"id":"a89fa43d.9bb628","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1179.761920928955,"y":775.3566055297852,"z":"12fa1652.31064a","wires":[["a3308ad5.11d848","eb951168.0fa3a"]]},{"id":"957c44b.2c20cb8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1169.761833190918,"y":833.6899290084839,"z":"12fa1652.31064a","wires":[["3e44d7d6.d54548","eb951168.0fa3a"]]},{"id":"64f3e60b.9bc548","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1169.761833190918,"y":877.0233030319214,"z":"12fa1652.31064a","wires":[["a87ad3e9.ec603","eb951168.0fa3a"]]},{"id":"420f3ecc.4b938","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2073.928466796875,"y":1103.1900043487549,"z":"12fa1652.31064a","wires":[["f4cc50d3.26695","eb951168.0fa3a"]]},{"id":"40410f3e.29024","type":"comment","name":"Rollback any generated VNFC names","info":"","comments":"","x":2428.095169067383,"y":582.0233116149902,"z":"12fa1652.31064a","wires":[]},{"id":"2ea59c9e.768714","type":"for","name":"for each vm-network","xml":"<for silentFailure='true' index='vm-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n","comments":"","outputs":1,"x":871.4285659790039,"y":1262.523151397705,"z":"12fa1652.31064a","wires":[["386d3d72.1b5e82"]]},{"id":"c922e93c.ce67a8","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":353.0952453613281,"y":1242.1898851394653,"z":"12fa1652.31064a","wires":[["1d53cd4b.5f7d63"]]},{"id":"44651758.5c8428","type":"set","name":"set vnfc-network-data_length","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' />\n","comments":"","x":896.4286270141602,"y":1203.8563995361328,"z":"12fa1652.31064a","wires":[]},{"id":"1d53cd4b.5f7d63","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":538.0952453613281,"y":1241.523310661316,"z":"12fa1652.31064a","wires":[["2fdadfd6.dbc9f"]]},{"id":"2fdadfd6.dbc9f","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":689.7619514465332,"y":1240.5232706069946,"z":"12fa1652.31064a","wires":[["44651758.5c8428","2ea59c9e.768714"]]},{"id":"386d3d72.1b5e82","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1058.0952987670898,"y":1261.8565635681152,"z":"12fa1652.31064a","wires":[["1010480b.d08c18","8a45e464.f972b8","e53b91c7.7b5b6","c881b3dd.d344e"]]},{"id":"1010480b.d08c18","type":"set","name":"set vnfc-network-role","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-network-role'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-role`' />\n","comments":"","x":1244.761848449707,"y":1217.189935684204,"z":"12fa1652.31064a","wires":[]},{"id":"c881b3dd.d344e","type":"set","name":"set vnfc-subnet-role to NA","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet[0].vnfc-subnet-role'\n  value='NA' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet_length'\n  value='1' />\n","comments":"","x":1260.000057220459,"y":1265.2850093841553,"z":"12fa1652.31064a","wires":[]},{"id":"8a45e464.f972b8","type":"set","name":"set vnfc-ip-assignments_length","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet[0].vnfc-ip-assignments_length'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-information-items.network-information-item_length`' />\n","comments":"","x":1274.7619285583496,"y":1312.189778327942,"z":"12fa1652.31064a","wires":[]},{"id":"e53b91c7.7b5b6","type":"for","name":"for each ip-version","xml":"<for silentFailure='true' index='ip-version-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-information-items.network-information-item_length`' >\n","comments":"","outputs":1,"x":1234.7619705200195,"y":1363.856608390808,"z":"12fa1652.31064a","wires":[["721dbdd7.791a84"]]},{"id":"721dbdd7.791a84","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1408.09521484375,"y":1363.8565111160278,"z":"12fa1652.31064a","wires":[["3bf78e5c.d52ef2","636f1fd0.0e89c"]]},{"id":"3bf78e5c.d52ef2","type":"set","name":"set ip-version, dhcp, ip-count","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet[0].vnfc-ip-assignments[$ip-version-index].vnfc-address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-information-items.network-information-item[$ip-version-index].ip-version`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet[0].vnfc-ip-assignments[$ip-version-index].vnfc-subnet-dhcp'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-information-items.network-information-item[$ip-version-index].use-dhcp`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet[0].vnfc-ip-assignments[$ip-version-index].vnfc-subnet-ip-count'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-information-items.network-information-item[$ip-version-index].ip-count`' />\n","comments":"","x":1603.0953178405762,"y":1333.8566884994507,"z":"12fa1652.31064a","wires":[]},{"id":"636f1fd0.0e89c","type":"for","name":"for each ip address","xml":"<for silentFailure='true' index='ip-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-information-items.network-information-item[$ip-version-index].network-ips.network-ip_length`' >\n","comments":"","outputs":1,"x":1573.0950736999512,"y":1383.8566102981567,"z":"12fa1652.31064a","wires":[["5eb141f0.08442"]]},{"id":"5eb141f0.08442","type":"set","name":"set IP address","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet[0].vnfc-ip-assignments[$ip-version-index].vnfc-subnet-ips[$ip-index].vnfc-ip-address'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-information-items.network-information-item[$ip-version-index].network-ips.network-ip[$ip-index]`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vm-network-index].vnfc-subnet[0].vnfc-ip-assignments[$ip-version-index].vnfc-subnet-ips[$ip-index].ip-type'\n  value='FIXED' />\n","comments":"","x":1764.7617492675781,"y":1383.8565282821655,"z":"12fa1652.31064a","wires":[]},{"id":"3ad3c57a.a9b1fa","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1913.9286499023438,"y":1103.1900849342346,"z":"12fa1652.31064a","wires":[["420f3ecc.4b938"]]},{"id":"6dbcf922.de03b8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1917.2618675231934,"y":1149.8566703796387,"z":"12fa1652.31064a","wires":[["cd517df1.447c3"]]},{"id":"6436811c.f7b6f","type":"for","name":"for each preload vnf-network","xml":"<for silentFailure='true' index='vnf-network-index' start='0'\n  end='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":367.0952911376953,"y":1798.690022945404,"z":"12fa1652.31064a","wires":[["489e6b61.5ed4b4"]]},{"id":"489e6b61.5ed4b4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":576.7618560791016,"y":1797.6899008750916,"z":"12fa1652.31064a","wires":[["4cb75157.ed3f8","eb154868.b2eb08","bf625347.3faf2"]]},{"id":"4cb75157.ed3f8","type":"set","name":"set found-network-name to false","xml":"<set>\n<parameter name='found-network-name' value='false' />\n","comments":"","x":816.4286804199219,"y":1438.6900005340576,"z":"12fa1652.31064a","wires":[]},{"id":"eb154868.b2eb08","type":"for","name":"for each existing vnf network","xml":"<for silentFailure='true' index='ex-vnf-network-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":804.7620162963867,"y":1488.6900854110718,"z":"12fa1652.31064a","wires":[["8b9298e1.145a48"]]},{"id":"8b9298e1.145a48","type":"switchNode","name":"switch network-names match?","xml":"<switch test='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-name\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].network-name`'>\n","comments":"","outputs":1,"x":1081.7620849609375,"y":1488.6900434494019,"z":"12fa1652.31064a","wires":[["f5401d97.d742f"]]},{"id":"f5401d97.d742f","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1285.0955352783203,"y":1488.023377418518,"z":"12fa1652.31064a","wires":[["a6191a44.3e3a78"]]},{"id":"3e55a7b2.a51328","type":"set","name":"set found-network-name to true","xml":"<set>\n<parameter name='found-network-name' value='true' />\n","comments":"","x":1659.7618942260742,"y":1465.3567094802856,"z":"12fa1652.31064a","wires":[]},{"id":"a6191a44.3e3a78","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1433.0952987670898,"y":1487.0233373641968,"z":"12fa1652.31064a","wires":[["3e55a7b2.a51328","c988f241.6ba0e"]]},{"id":"c988f241.6ba0e","type":"break","name":"break","xml":"<break>\n","comments":"","x":1586.4286880493164,"y":1510.3568361997604,"z":"12fa1652.31064a","wires":[]},{"id":"bf625347.3faf2","type":"switchNode","name":"switch found-network-name","xml":"<switch test='`$found-network-name`'>\n","comments":"","outputs":1,"x":786.4285202026367,"y":2119.35649394989,"z":"12fa1652.31064a","wires":[["b206c980.70b6f8","608eac4.0288254"]]},{"id":"b206c980.70b6f8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":993.4284744262695,"y":1735.3565855026245,"z":"12fa1652.31064a","wires":[["7be5eb0d.034284"]]},{"id":"7be5eb0d.034284","type":"switchNode","name":"switch network-roles match?","xml":"<switch test='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].network-role`'>\n","comments":"","outputs":1,"x":1196.7616729736328,"y":1735.3563804626465,"z":"12fa1652.31064a","wires":[["f43759aa.1fb938"]]},{"id":"f43759aa.1fb938","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1396.7617225646973,"y":1735.3565435409546,"z":"12fa1652.31064a","wires":[["ce923577.439d28"]]},{"id":"ce923577.439d28","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1570.095085144043,"y":1735.3564939498901,"z":"12fa1652.31064a","wires":[["b5c5e69.cdda018","fe21ec89.87ead","87756b21.ef62b8","70be9e10.72ae7","8c373e2d.03cca"]]},{"id":"b5c5e69.cdda018","type":"set","name":"set new vnf-network data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].network-role'\n  value='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].network-name'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].network-name`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].network-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].neutron-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].neutron-id`' />\n","comments":"","x":1828.0950355529785,"y":1612.0233144760132,"z":"12fa1652.31064a","wires":[]},{"id":"fe21ec89.87ead","type":"set","name":"set cur-vnf-network-index","xml":"<set>\n<parameter name='cur-vnf-network-index'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' />\n","comments":"","x":1829.7618255615234,"y":1563.689736366272,"z":"12fa1652.31064a","wires":[]},{"id":"87756b21.ef62b8","type":"set","name":"increment current vnf-network length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length'\n  value='`$cur-vnf-network-index + 1`' />\n","comments":"","x":1861.4284133911133,"y":1658.6900148391724,"z":"12fa1652.31064a","wires":[]},{"id":"c816157a.9f7e68","type":"for","name":"for each preload subnet","xml":"<for index='subnet-index' start='0'\n  end='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":2503.4285202026367,"y":2085.0231618881226,"z":"12fa1652.31064a","wires":[["2905b9f.a43aa46"]]},{"id":"82055682.392668","type":"switchNode","name":"switch subnet-ids match?","xml":"<switch test='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-index].subnet-id\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-id`'>\n","comments":"","outputs":1,"x":4107.927658081055,"y":1966.0233840942383,"z":"12fa1652.31064a","wires":[["79c97dcd.b47344"]]},{"id":"5738f507.814e7c","type":"switchNode","name":"switch subnet-names match?","xml":"<switch test='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-index].subnet-name\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-name`'>\n","comments":"","outputs":1,"x":4119.5944900512695,"y":2066.023063659668,"z":"12fa1652.31064a","wires":[["b4c1c7fa.c1b8d8"]]},{"id":"70be9e10.72ae7","type":"set","name":"set cur-subnet-index to 0","xml":"<set>\n<parameter name='cur-subnet-index' value='0' />\n","comments":"","x":1824.7617645263672,"y":1705.3565168380737,"z":"12fa1652.31064a","wires":[]},{"id":"5597bc8c.17abe4","type":"switchNode","name":"switch subnet-id","xml":"<switch test='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-index].subnet-id`'>\n","comments":"","outputs":1,"x":3729.594680786133,"y":1942.3565292358398,"z":"12fa1652.31064a","wires":[["d9ef280d.9e6328","494ea68b.c1f408"]]},{"id":"d9ef280d.9e6328","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":3917.9279861450195,"y":1917.3562803268433,"z":"12fa1652.31064a","wires":[["fa6d89c9.d73cf8"]]},{"id":"494ea68b.c1f408","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":3917.6899490356445,"y":1966.6417655944824,"z":"12fa1652.31064a","wires":[["82055682.392668"]]},{"id":"2e9b3a87.471216","type":"switchNode","name":"switch subnet-name","xml":"<switch test='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-index].subnet-name`'>\n","comments":"","outputs":1,"x":3739.595169067383,"y":2039.022915840149,"z":"12fa1652.31064a","wires":[["5f10ed16.b667f4","661bc495.853a7c"]]},{"id":"5f10ed16.b667f4","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":3914.5949325561523,"y":2017.3560857772827,"z":"12fa1652.31064a","wires":[["3903073b.90ca38"]]},{"id":"661bc495.853a7c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":3914.3568954467773,"y":2066.641571044922,"z":"12fa1652.31064a","wires":[["5738f507.814e7c"]]},{"id":"73a010dc.11d51","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3537.9280128479004,"y":1991.689860343933,"z":"12fa1652.31064a","wires":[["5597bc8c.17abe4","2e9b3a87.471216","c36b38d4.da9f08","7488330e.ae075c"]]},{"id":"852c8af1.197bc8","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":321.4285659790039,"y":2886.6899852752686,"z":"12fa1652.31064a","wires":[["36587c5a.374214"]]},{"id":"36587c5a.374214","type":"for","name":"for each vm-network","xml":"<for index='vm-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n","comments":"","outputs":1,"x":527.6190757751465,"y":2886.4517936706543,"z":"12fa1652.31064a","wires":[["5f533bab.b3a6e4"]]},{"id":"5f533bab.b3a6e4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":733.3333015441895,"y":2885.0233001708984,"z":"12fa1652.31064a","wires":[["ce7af9b8.cab5c8","bdfbd2a2.f0c23","b00da185.c29ca","3812a1fc.76e38e"]]},{"id":"ce7af9b8.cab5c8","type":"set","name":"set tmp.network-role","xml":"<set>\n<parameter name='tmp.network-role'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-role`' />\n","comments":"","x":929.0475997924805,"y":2837.880365371704,"z":"12fa1652.31064a","wires":[]},{"id":"bdfbd2a2.f0c23","type":"for","name":"for each vnf-network","xml":"<for index='vnf-network-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":926.1904640197754,"y":2892.16632270813,"z":"12fa1652.31064a","wires":[["ca0b8fd4.7749d"]]},{"id":"b00da185.c29ca","type":"set","name":"set found-network to false","xml":"<set>\n<parameter name='found-network' value='false' />\n","comments":"","x":946.1904487609863,"y":2789.3090076446533,"z":"12fa1652.31064a","wires":[]},{"id":"ca0b8fd4.7749d","type":"switchNode","name":"network-role matches?","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role\n  == $tmp.network-role`'>\n","comments":"","outputs":1,"x":1150.4761390686035,"y":2892.1661491394043,"z":"12fa1652.31064a","wires":[["a77f691c.58cd28"]]},{"id":"a77f691c.58cd28","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1327.6188888549805,"y":2891.7376823425293,"z":"12fa1652.31064a","wires":[["92338465.d78118"]]},{"id":"92338465.d78118","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1476.1904792785645,"y":2890.7376556396484,"z":"12fa1652.31064a","wires":[["7529d138.b3c64","bd0bbace.4b4578","f57907cf.0ebc48"]]},{"id":"7529d138.b3c64","type":"set","name":"set network-id","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`' />\n","comments":"","x":1643.3334465026855,"y":2847.880609512329,"z":"12fa1652.31064a","wires":[]},{"id":"bd0bbace.4b4578","type":"set","name":"set found-network to true","xml":"<set>\n<parameter name='found-network' value='true' />\n","comments":"","x":1680.476245880127,"y":2889.3089447021484,"z":"12fa1652.31064a","wires":[]},{"id":"f57907cf.0ebc48","type":"break","name":"break","xml":"<break>\n","comments":"","x":1620.4760780334473,"y":2932.1661834716797,"z":"12fa1652.31064a","wires":[]},{"id":"3812a1fc.76e38e","type":"switchNode","name":"switch found-network","xml":"<switch test='`$found-network`'>\n","comments":"","outputs":1,"x":926.1904640197754,"y":2973.5945110321045,"z":"12fa1652.31064a","wires":[["13e8d11b.10877f"]]},{"id":"13e8d11b.10877f","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1100.4761199951172,"y":2973.59468460083,"z":"12fa1652.31064a","wires":[["61cb14f9.f0fadc"]]},{"id":"61cb14f9.f0fadc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1251.904712677002,"y":2972.1661224365234,"z":"12fa1652.31064a","wires":[["eb951168.0fa3a","c6664d05.c2339"]]},{"id":"c6664d05.c2339","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Unable to find network-id for network with network-role ' + $tmp.network-role`\" />\n","comments":"","x":1433.0952033996582,"y":2971.6899070739746,"z":"12fa1652.31064a","wires":[]},{"id":"608eac4.0288254","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":983.0953674316406,"y":2505.356367111206,"z":"12fa1652.31064a","wires":[["13d87860.cdb998"]]},{"id":"13d87860.cdb998","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1129.7619438171387,"y":2505.35652923584,"z":"12fa1652.31064a","wires":[["682a3cc.9cd4cc4","f3276db4.466d1","86a3405e.9eb5d"]]},{"id":"682a3cc.9cd4cc4","type":"set","name":"set new vnf-network data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].network-role'\n  value='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].network-name'\n  value='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-name`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].network-id'\n  value='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].neutron-id'\n  value='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].neutron-id`' />\n","comments":"","x":1343.0953178405762,"y":2503.689781188965,"z":"12fa1652.31064a","wires":[]},{"id":"42ba8f62.0c3b1","type":"set","name":"set cur-vnf-network-index","xml":"<set>\n<parameter name='cur-vnf-network-index'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' />\n","comments":"","x":1728.0953750610352,"y":2465.3558807373047,"z":"12fa1652.31064a","wires":[]},{"id":"f3276db4.466d1","type":"set","name":"increment current vnf-network length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length'\n  value='`$cur-vnf-network-index + 1`' />\n","comments":"","x":1376.4287643432617,"y":2553.689929008484,"z":"12fa1652.31064a","wires":[]},{"id":"8f68eac5.8283a8","type":"set","name":"set data for vm","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code'\n  value='`$db.vfc-model.nfc-naming-code`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function'\n  value='`$db.vfc-model.nfc-function`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid'\n  value='`$db.vfc-model.invariant-uuid`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].uuid'\n  value='`$db.vfc-model.uuid`' />\n","comments":"","x":777.0952606201172,"y":923.6899862289429,"z":"12fa1652.31064a","wires":[]},{"id":"86a3405e.9eb5d","type":"switchNode","name":"switch vnf-network_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`'>\n","comments":"","outputs":1,"x":1346.428539276123,"y":2432.023359298706,"z":"12fa1652.31064a","wires":[["6eddfd74.49f4f4","7c38cb2b.2116b4","3b87c567.23389a"]]},{"id":"6eddfd74.49f4f4","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1538.0951232910156,"y":2387.02352142334,"z":"12fa1652.31064a","wires":[["b339bde7.dc09e"]]},{"id":"7c38cb2b.2116b4","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":1538.0953273773193,"y":2427.023443222046,"z":"12fa1652.31064a","wires":[["b339bde7.dc09e"]]},{"id":"3b87c567.23389a","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1536.428581237793,"y":2467.023281097412,"z":"12fa1652.31064a","wires":[["42ba8f62.0c3b1"]]},{"id":"b339bde7.dc09e","type":"set","name":"set cur-vnf-network-index to 0","xml":"<set>\n<parameter name='cur-vnf-network-index' value='0' />\n","comments":"","x":1729.7619743347168,"y":2402.0231761932373,"z":"12fa1652.31064a","wires":[]},{"id":"8c373e2d.03cca","type":"switchNode","name":"switch subnet-data[0].sdnc-subnet-id","xml":"<switch test=\"`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[0].sdnc-subnet-id`\">\n","comments":"","outputs":1,"x":1864.595817565918,"y":1953.5231199264526,"z":"12fa1652.31064a","wires":[["52f64978.b78868","b9dc1667.6bc068"]]},{"id":"52f64978.b78868","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2111.428367614746,"y":1787.5232667922974,"z":"12fa1652.31064a","wires":[["21e19628.b86eda"]]},{"id":"b9dc1667.6bc068","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2104.761863708496,"y":2135.523271560669,"z":"12fa1652.31064a","wires":[["c90b05e8.00a658"]]},{"id":"f6db4323.ce19b","type":"for","name":"for every existing subnet","xml":"<for index='ex-subnet-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":2498.9280700683594,"y":1762.5235090255737,"z":"12fa1652.31064a","wires":[["6478d14e.ad367"]]},{"id":"6478d14e.ad367","type":"set","name":"copy subnet data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].sdnc-subnet-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].sdnc-subnet-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].ip-version'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].ip-version`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-name'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-name`' />\n","comments":"","x":2715.594825744629,"y":1760.8568019866943,"z":"12fa1652.31064a","wires":[]},{"id":"21e19628.b86eda","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2276.428367614746,"y":1786.1898927688599,"z":"12fa1652.31064a","wires":[["f6db4323.ce19b","a93819a1.e5bdb8"]]},{"id":"a93819a1.e5bdb8","type":"set","name":"set subnet-data length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data_length'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data_length`' />\n","comments":"","x":2493.094955444336,"y":1809.189974784851,"z":"12fa1652.31064a","wires":[]},{"id":"5f454f7.d5c62b","type":"comment","name":"no subnets in preload, copy all of them","info":"","comments":"","x":2244.7616958618164,"y":1729.190011024475,"z":"12fa1652.31064a","wires":[]},{"id":"242ab477.0be38c","type":"switchNode","name":"switch ip-version matches?","xml":"<switch test='`$mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-index].ip-version\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].ip-version`'>\n","comments":"","outputs":1,"x":3172.928642272949,"y":1994.3563585281372,"z":"12fa1652.31064a","wires":[["12828404.8769ec"]]},{"id":"12828404.8769ec","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3372.9287338256836,"y":1993.3565216064453,"z":"12fa1652.31064a","wires":[["73a010dc.11d51"]]},{"id":"5efc21e1.13e11","type":"for","name":"for every existing subnet","xml":"<for index='ex-subnet-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":2916.26163482666,"y":1995.6898975372314,"z":"12fa1652.31064a","wires":[["242ab477.0be38c"]]},{"id":"2905b9f.a43aa46","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2704.5950469970703,"y":2084.023313522339,"z":"12fa1652.31064a","wires":[["5efc21e1.13e11","19550d0c.5e1f83","69b02c7d.dd3ca4","9a10c321.41189","5efb3a03.d86314"]]},{"id":"19550d0c.5e1f83","type":"set","name":"set tmp.found-match to false","xml":"<set>\n<parameter name='tmp.found-match' value='false' />\n","comments":"","x":2927.5950469970703,"y":1945.3568096160889,"z":"12fa1652.31064a","wires":[]},{"id":"fa6d89c9.d73cf8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4049.595100402832,"y":1917.3567657470703,"z":"12fa1652.31064a","wires":[[]]},{"id":"3903073b.90ca38","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4052.9282760620117,"y":2017.3565654754639,"z":"12fa1652.31064a","wires":[[]]},{"id":"c36b38d4.da9f08","type":"set","name":"set match to true","xml":"<set>\n<parameter name='match' value='true' />\n","comments":"","x":3736.261993408203,"y":1857.3566818237305,"z":"12fa1652.31064a","wires":[]},{"id":"79c97dcd.b47344","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":4317.928848266602,"y":1964.0233116149902,"z":"12fa1652.31064a","wires":[["522677d0.7b7a78"]]},{"id":"b4c1c7fa.c1b8d8","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":4317.928520202637,"y":2064.023313522339,"z":"12fa1652.31064a","wires":[["440bbb49.74a244"]]},{"id":"522677d0.7b7a78","type":"set","name":"set match to false","xml":"<set>\n<parameter name='match' value='false' />\n","comments":"","x":4486.261528015137,"y":1962.3566875457764,"z":"12fa1652.31064a","wires":[]},{"id":"440bbb49.74a244","type":"set","name":"set match to false","xml":"<set>\n<parameter name='match' value='false' />\n","comments":"","x":4484.595024108887,"y":2062.356565475464,"z":"12fa1652.31064a","wires":[]},{"id":"7488330e.ae075c","type":"switchNode","name":"switch match","xml":"<switch test='`$match`'>\n","comments":"","outputs":1,"x":3716.261993408203,"y":2139.0233993530273,"z":"12fa1652.31064a","wires":[["7b9f2fb1.02d5e"]]},{"id":"7b9f2fb1.02d5e","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3867.9283561706543,"y":2137.356565475464,"z":"12fa1652.31064a","wires":[["631e756c.5d1c1c"]]},{"id":"631e756c.5d1c1c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":4019.5951042175293,"y":2137.356565475464,"z":"12fa1652.31064a","wires":[["94203d36.7288","bc4876b1.4bf468"]]},{"id":"94203d36.7288","type":"set","name":"set tmp.found-match to true","xml":"<set>\n<parameter name='tmp.found-match' value='true' />\n","comments":"","x":4236.261528015137,"y":2110.690061569214,"z":"12fa1652.31064a","wires":[]},{"id":"bc4876b1.4bf468","type":"break","name":"break","xml":"<break>\n","comments":"","x":4171.261852264404,"y":2157.356735229492,"z":"12fa1652.31064a","wires":[]},{"id":"69b02c7d.dd3ca4","type":"switchNode","name":"switch tmp.found-match","xml":"<switch test='`$tmp.found-match`'>\n","comments":"","outputs":1,"x":2906.2617950439453,"y":2165.689987182617,"z":"12fa1652.31064a","wires":[["423962f8.56b9bc"]]},{"id":"423962f8.56b9bc","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":3094.5950241088867,"y":2164.023313522339,"z":"12fa1652.31064a","wires":[["110c975b.70b889"]]},{"id":"110c975b.70b889","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3246.2617721557617,"y":2162.356565475464,"z":"12fa1652.31064a","wires":[["eb951168.0fa3a","404634d4.2421ac","d753f57b.2e1858"]]},{"id":"404634d4.2421ac","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Could not find subnet match for network-name '\n      + $mdsal-preload.preload-list[0].preload-data.preload-vf-module-topology-information.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-name`\" />\n","comments":"","x":3421.2617721557617,"y":2175.690061569214,"z":"12fa1652.31064a","wires":[]},{"id":"9a10c321.41189","type":"set","name":"copy subnet data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$cur-subnet-index].sdnc-subnet-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].sdnc-subnet-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$cur-subnet-index].subnet-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$cur-subnet-index].ip-version'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].ip-version`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data[$cur-subnet-index].subnet-name'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$ex-vnf-network-index].subnets-data.subnet-data[$ex-subnet-index].subnet-name`' />\n","comments":"","x":2887.9285202026367,"y":2214.023313522339,"z":"12fa1652.31064a","wires":[]},{"id":"5efb3a03.d86314","type":"set","name":"increment cur-subnet-index","xml":"<set>\n<parameter name='cur-subnet-index' value='`$cur-subnet-index + 1`' />\n","comments":"","x":2917.92862701416,"y":2257.356575012207,"z":"12fa1652.31064a","wires":[]},{"id":"115868de.991a07","type":"set","name":"set subnet-data length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$cur-vnf-network-index].subnets-data.subnet-data_length'\n  value='`$cur-subnet-index`' />\n","comments":"","x":2499.9286193847656,"y":2184.190022468567,"z":"12fa1652.31064a","wires":[]},{"id":"473ab719.346838","type":"comment","name":"copy matching subnet","info":"","comments":"","x":2646.928466796875,"y":2036.3566846847534,"z":"12fa1652.31064a","wires":[]},{"id":"c90b05e8.00a658","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2270.428581237793,"y":2136.18999004364,"z":"12fa1652.31064a","wires":[["c816157a.9f7e68","115868de.991a07"]]},{"id":"5bc32471.aadd3c","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-preload-x.log' />\n","comments":"","outputs":1,"x":338.42858123779297,"y":1373.6899900436401,"z":"12fa1652.31064a","wires":[[]]},{"id":"d753f57b.2e1858","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-preloadxxx.log' />\n","comments":"","outputs":1,"x":3420.714168548584,"y":2128.927816390991,"z":"12fa1652.31064a","wires":[[]]}]