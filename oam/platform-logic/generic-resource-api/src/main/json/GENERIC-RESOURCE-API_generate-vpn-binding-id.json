[{"id":"1a17b23a.398bee","type":"execute","name":"execute: generateUUID","xml":"<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n\t<parameter name=\"ctx-destination\" value=\"tmp.return.generate-vpn-binding-id.uuid\" />","comments":"","outputs":1,"x":590.00390625,"y":504.00390625,"z":"9bc3cabb.e50c08","wires":[["ac061fd2.f40dc"]]},{"id":"ac061fd2.f40dc","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":789.7539138793945,"y":502.00391006469727,"z":"9bc3cabb.e50c08","wires":[["50437676.be3b28"]]},{"id":"50437676.be3b28","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<!-- Used to work around execute node bug -->\n\t<parameter name=\"execute_failure\" value=\"false\" />\n\n\t<!-- return parameters -->\n\t<parameter name=\"error-message.generate-vpn-binding-id\" value=\"An error occured while generating a UUID for VPN-BINDING.\" />","comments":"","x":954.7539138793945,"y":502.2539072036743,"z":"9bc3cabb.e50c08","wires":[]},{"id":"11d9fee1.397451","type":"get-resource","name":"Query AnAI -  vpn-binding","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n              resource=\"vpn-binding\"\n              key=\"vpn-binding.vpn-id = $tmp.return.generate-vpn-binding-id.uuid\"\n              local-only=\"false\"\n              pfx=\"tmp.local-variables.generate-vpn-binding-id.VPNBINDING\" >","comments":"","outputs":1,"x":719.2539138793945,"y":593.2539072036743,"z":"9bc3cabb.e50c08","wires":[["dfc2747e.ba2038","51b22a2f.6bf894","12ade5c4.1b0faa","696eb74c.68c8f8"]]},{"id":"b3abd428.d17188","type":"for","name":"for n: true","xml":"<for atomic=\"true\" index=\"n\" start=\"0\" end=\"1\" >","comments":"","outputs":1,"x":543.2539138793945,"y":593.2539072036743,"z":"9bc3cabb.e50c08","wires":[["11d9fee1.397451"]]},{"id":"dfc2747e.ba2038","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":923.7539138793945,"y":593.2539072036743,"z":"9bc3cabb.e50c08","wires":[["1ede93e1.58a0ac"]]},{"id":"51b22a2f.6bf894","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":919.7539138793945,"y":673.2539072036743,"z":"9bc3cabb.e50c08","wires":[["250b4141.5700fe"]]},{"id":"12ade5c4.1b0faa","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":928.7539138793945,"y":633.2539072036743,"z":"9bc3cabb.e50c08","wires":[["fe51a67a.13b8e8"]]},{"id":"250b4141.5700fe","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<!-- return parameters -->\n\t<parameter name=\"error-message.generate-vpn-binding-id\" value=\"`'An error occured while checking if a generated vpn-binding-id was unique. vpn-id = ' + $tmp.local-variables.generate-vpn-binding-id.uuid`\" />","comments":"","x":1086.253921508789,"y":698.2539129257202,"z":"9bc3cabb.e50c08","wires":[]},{"id":"1ede93e1.58a0ac","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1081.7539138793945,"y":593.2539072036743,"z":"9bc3cabb.e50c08","wires":[["18f3303f.51929","84dadf6d.8d15a"]]},{"id":"18f3303f.51929","type":"set","name":"set: ...local...is-unique = 0","xml":"<set>\n\t<parameter name=\"tmp.local-variables.generate-vpn-binding-id.is-unique\" value=\"0\" />","comments":"","x":1299.2539672851562,"y":593.2539129257202,"z":"9bc3cabb.e50c08","wires":[]},{"id":"84dadf6d.8d15a","type":"execute","name":"execute: generateUUID","xml":"<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n\t<parameter name=\"ctx-destination\" value=\"tmp.return.generate-vpn-binding-id.uuid\" />","comments":"","outputs":1,"x":1292.7539138793945,"y":633.2539072036743,"z":"9bc3cabb.e50c08","wires":[["d9152ade.264048"]]},{"id":"d9152ade.264048","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1479.7539138793945,"y":633.2539072036743,"z":"9bc3cabb.e50c08","wires":[["9921f2ce.1a66b"]]},{"id":"9921f2ce.1a66b","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<!-- return parameters -->\n\t<parameter name=\"error-message.generate-vpn-binding-id\" value=\"An error occured while generating a UUID for VPN-BINDING.\" />","comments":"","x":1633.7539138793945,"y":633.2539072036743,"z":"9bc3cabb.e50c08","wires":[]},{"id":"fe51a67a.13b8e8","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1059.7539138793945,"y":633.2539072036743,"z":"9bc3cabb.e50c08","wires":[[]]},{"id":"9006edb0.5ad67","type":"dgstart","name":"DGSTART","outputs":1,"x":300.25391006469727,"y":189.50390625,"z":"9bc3cabb.e50c08","wires":[["955ef40d.b75168"]]},{"id":"955ef40d.b75168","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":324.25390625,"y":235.75390625,"z":"9bc3cabb.e50c08","wires":[["1bda7a11.ba70b6"]]},{"id":"1bda7a11.ba70b6","type":"method","name":"method generate-vpn-binding-id","xml":"<method rpc=\"generate-vpn-binding-id\" mode=\"sync\">","comments":"","outputs":1,"x":341.00392150878906,"y":302.25392055511475,"z":"9bc3cabb.e50c08","wires":[["f99e10ed.a3ff1"]]},{"id":"586fb295.3f906c","type":"comment","name":"GENERIC-RESOURCE-API: GENERATE-L3NETWORK-NETWORK-ID","info":"","comments":"","x":851.7539215087891,"y":195.75390434265137,"z":"9bc3cabb.e50c08","wires":[]},{"id":"f99e10ed.a3ff1","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":361.75391387939453,"y":413.2539072036743,"z":"9bc3cabb.e50c08","wires":[["1a17b23a.398bee","b3abd428.d17188","3c008100.ccda4e","ae4c9e12.036ca"]]},{"id":"f9cf86ae.e11878","type":"comment","name":"LOOP UNTIL GENERATED VPN-BINDING-ID ISN'T FOUND IN A&AI","info":"","comments":"","x":763.00390625,"y":549.5039110183716,"z":"9bc3cabb.e50c08","wires":[]},{"id":"b7af4772.fef138","type":"comment","name":"GENERATE A VPN-BINDING-ID","info":"","comments":"","x":626.75390625,"y":459.50390911102295,"z":"9bc3cabb.e50c08","wires":[]},{"id":"3c008100.ccda4e","type":"set","name":"unset: local-variables & return","xml":"<set>\n\t<parameter name=\"tmp.local-variables.generate-vpn-binding-id.\" value=\"\" />\n\t<parameter name=\"tmp.return.generate-vpn-binding-id.\" value=\"\" />","comments":"","x":612.7539138793945,"y":413.2539072036743,"z":"9bc3cabb.e50c08","wires":[]},{"id":"ccbe8c66.d109a","type":"comment","name":"CLEANUP LOCAL VARIABLES TO BE USED","info":"","comments":"","x":697.00390625,"y":369.50390815734863,"z":"9bc3cabb.e50c08","wires":[]},{"id":"83e132e1.812b7","type":"comment","name":"GLOBAL VARIABLES USED","info":"// RETURN VALUES\nerror-message.generate-l3network-network-id\ntmp.return.generate-l3network-network-id.uuid\n\n// LOCAL VARIABLES (erased at beginning & end of DG)\ntmp.local-variables.generate-l3network-network-id.*\ntmp.return.generate-l3network-network-id.*\n","comments":"","x":838.2539367675781,"y":235.75390434265137,"z":"9bc3cabb.e50c08","wires":[]},{"id":"ae4c9e12.036ca","type":"set","name":"unset: local-variables & return","xml":"<set>\n\t<parameter name=\"tmp.local-variables.generate-vpn-binding-id.\" value=\"\" />","comments":"","x":612.7539138793945,"y":693.2539072036743,"z":"9bc3cabb.e50c08","wires":[]},{"id":"6844957a.c26bbc","type":"comment","name":"CLEANUP LOCAL VARIABLES","info":"","comments":"","x":654.25390625,"y":650.7539119720459,"z":"9bc3cabb.e50c08","wires":[]},{"id":"696eb74c.68c8f8","type":"other","name":"Other","xml":"<outcome value=\"Other\">","comments":"","outputs":1,"x":919.7539138793945,"y":713.2539072036743,"z":"9bc3cabb.e50c08","wires":[["250b4141.5700fe"]]}]