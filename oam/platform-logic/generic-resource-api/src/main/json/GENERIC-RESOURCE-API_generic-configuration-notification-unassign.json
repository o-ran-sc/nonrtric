[{"id":"201ea6db.6a157a","type":"dgstart","name":"DGSTART","outputs":1,"x":103.33332824707031,"y":83.33332824707031,"z":"462a845d.7a55ec","wires":[["6373faef.9fa8d4"]]},{"id":"6373faef.9fa8d4","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":218.61902618408203,"y":123.57143688201904,"z":"462a845d.7a55ec","wires":[["a586e6ad.c379d8"]]},{"id":"a586e6ad.c379d8","type":"method","name":"method generic-configuration-notification-unassign","xml":"<method rpc='generic-configuration-notification-unassign' mode='sync'>\n","comments":"","outputs":1,"x":232.76195526123047,"y":164.3333225250244,"z":"462a845d.7a55ec","wires":[["5157a50e.bfb98c"]]},{"id":"7182ac18.2a8da4","type":"comment","name":"generic-configuration-notification-unassign","info":"","comments":"","x":497.67818450927734,"y":30.9196720123291,"z":"462a845d.7a55ec","wires":[]},{"id":"5157a50e.bfb98c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":119.99999237060547,"y":896.6666278839111,"z":"462a845d.7a55ec","wires":[["feb106b8.185f08","743bcc3f.3da104","3bc8a57a.fffb6a","15e56521.8bda1b","232ddbdd.dd7dd4","be916a84.c5bca8","7a624451.7c32dc","99aec2bc.e7b95","4283d7ba.9952f8","ebc4f87b.eab5e8","9a8cd3f.4488d3","bcd4a78e.93b5c8","2de89f29.06878","4196df91.f32b6","a5f8fb7a.8abc58","fc495104.33dc3","7139e5d3.00113c","daafa96f.aa2648","18e5598d.08c946","605d38fd.0f4688","e7df9303.b3ed4","aa8c2298.733db","fdcad0e0.6c236"]]},{"id":"feb106b8.185f08","type":"for","name":"for each provided-configuration","xml":"<for silentFailure='true' index='pc-index' start='0' end='`$service-data.provided-configurations.provided-configuration_length`' >\n","comments":"","outputs":1,"x":398.3333168029785,"y":348.33334732055664,"z":"462a845d.7a55ec","wires":[["d390f9b0.7081f8"]]},{"id":"d390f9b0.7081f8","type":"switchNode","name":"switch configuration-ids match?","xml":"<switch test='`$service-data.provided-configurations.provided-configuration[$pc-index].configuration-id\n  == $generic-configuration-notification-input.configuration-information.configuration-id`'>\n","comments":"","outputs":1,"x":678.3333587646484,"y":348.3333168029785,"z":"462a845d.7a55ec","wires":[["d31ad60e.b1f1f8"]]},{"id":"d31ad60e.b1f1f8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":879.9999961853027,"y":347.33325576782227,"z":"462a845d.7a55ec","wires":[["6a4df8fe.70aab8"]]},{"id":"6a4df8fe.70aab8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1001.6665649414062,"y":346.66658878326416,"z":"462a845d.7a55ec","wires":[["af80512.cac3db","70ebbfad.95d07"]]},{"id":"af80512.cac3db","type":"for","name":"for each subsequent provided-configuration","xml":"<for index='pc2-index' start='`$pc-index + 1`' end='`$service-data.provided-configurations.provided-configuration_length`' >\n","comments":"","outputs":1,"x":1244.9999237060547,"y":308.33337593078613,"z":"462a845d.7a55ec","wires":[["4b371501.33929c"]]},{"id":"d89c75f4.daac28","type":"set","name":"copy provided-configuration down 1","xml":"<set>\n<parameter name='service-data.provided-configurations.provided-configuration[$prev-index].'\n  value='`$service-data.provided-configurations.provided-configuration[$pc2-index].`' />\n","comments":"","x":1698.333480834961,"y":329.9999828338623,"z":"462a845d.7a55ec","wires":[]},{"id":"a41927b6.539518","type":"set","name":"set prev-index","xml":"<set>\n<parameter name='prev-index' value='`$pc2-index - 1`' />\n","comments":"","x":1630.0000648498535,"y":283.3333330154419,"z":"462a845d.7a55ec","wires":[]},{"id":"4b371501.33929c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1483.3333129882812,"y":308.33329486846924,"z":"462a845d.7a55ec","wires":[["a41927b6.539518","d89c75f4.daac28"]]},{"id":"70ebbfad.95d07","type":"set","name":"decrement provided-configuration_length","xml":"<set>\n<parameter name='service-data.provided-configurations.provided-configuration_length'\n  value='`$service-data.provided-configurations.provided-configuration_length - 1`' />\n","comments":"","x":1238.3333587646484,"y":369.99998474121094,"z":"462a845d.7a55ec","wires":[]},{"id":"743bcc3f.3da104","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-gcnotify.log' />\n","comments":"","outputs":1,"x":334.9999809265137,"y":1706.6665802001953,"z":"462a845d.7a55ec","wires":[[]]},{"id":"3bc8a57a.fffb6a","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"success\" />\n\n","comments":"","x":340.0000114440918,"y":1763.3332171440125,"z":"462a845d.7a55ec","wires":[]},{"id":"15e56521.8bda1b","type":"execute","name":"execute readProperties","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":374.9999771118164,"y":294.9999809265137,"z":"462a845d.7a55ec","wires":[[]]},{"id":"61329315.59089c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":730,"y":461.6666564941406,"z":"462a845d.7a55ec","wires":[["8c8877e4.459b28"]]},{"id":"232ddbdd.dd7dd4","type":"execute","name":"execute RestApiCallNode - GET gc-configuration","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.gc-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-gc\" />\n\n","comments":"","outputs":1,"x":461.6668167114258,"y":461.6668071746826,"z":"462a845d.7a55ec","wires":[["61329315.59089c"]]},{"id":"be916a84.c5bca8","type":"switchNode","name":"switch response-code","xml":"<switch test='`$generic-configuration-notification-input.response-code`'>\n","comments":"","outputs":1,"x":376.66673278808594,"y":570.0001449584961,"z":"462a845d.7a55ec","wires":[["363cba9.0083046","a644d93e.546118"]]},{"id":"363cba9.0083046","type":"outcome","name":"200","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":563.3335113525391,"y":601.6668043136597,"z":"462a845d.7a55ec","wires":[["a7987d23.c7534"]]},{"id":"a644d93e.546118","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":566.6667594909668,"y":541.6668109893799,"z":"462a845d.7a55ec","wires":[["60956527.03093c"]]},{"id":"de12b292.1d4d8","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"`$generic-configuration-notification-input.ack-final-indicator`\" />\n<parameter name=\"input.response-code\"\n  value=\"`$generic-configuration-notification-input.response-code`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":871.6668167114258,"y":518.3334560394287,"z":"462a845d.7a55ec","wires":[[]]},{"id":"a7987d23.c7534","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":698.3334045410156,"y":600.0001354217529,"z":"462a845d.7a55ec","wires":[[]]},{"id":"60956527.03093c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":698.3334045410156,"y":541.6667919158936,"z":"462a845d.7a55ec","wires":[["de12b292.1d4d8","daa831f1.ce526"]]},{"id":"8c8877e4.459b28","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":858.3333206176758,"y":461.6667823791504,"z":"462a845d.7a55ec","wires":[["b12fb0d2.3cd05","82d9f693.6d4228"]]},{"id":"b12fb0d2.3cd05","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"Y\" />\n<parameter name=\"input.response-code\"\n  value=\"500\" />\n<parameter name=\"input.response-message\"\n  value=\"`'Cannot find configuration ' + $generic-configuration-notification-input.configuration-information.configuration-id`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":1036.666633605957,"y":430.00012588500977,"z":"462a845d.7a55ec","wires":[[]]},{"id":"82d9f693.6d4228","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Cannot find configuration ' + $generic-configuration-notification-input.configuration-information.configuration-id`\" />\n","comments":"","x":1013.333251953125,"y":476.66680812835693,"z":"462a845d.7a55ec","wires":[]},{"id":"daa831f1.ce526","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`$generic-configuration-notification-input.response-message`\" />\n","comments":"","x":850.0000915527344,"y":565.0001049041748,"z":"462a845d.7a55ec","wires":[]},{"id":"9d3fc40a.429ad8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":786.6665992736816,"y":891.6666259765625,"z":"462a845d.7a55ec","wires":[["fe1afab9.59d2c8"]]},{"id":"bcd4a78e.93b5c8","type":"execute","name":"execute RestApiCallNode - GET vnf-sub-interface-group","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vsig-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-vsig\" />\n\n","comments":"","outputs":1,"x":484.9999656677246,"y":893.3334865570068,"z":"462a845d.7a55ec","wires":[["9d3fc40a.429ad8"]]},{"id":"7a624451.7c32dc","type":"execute","name":"generate vnf-sub-interface-group URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vnf-sub-interface-group`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.part\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.vnf-service-instance-id`\"/>\n","comments":"","outputs":1,"x":428.33327865600586,"y":648.3332614898682,"z":"462a845d.7a55ec","wires":[[]]},{"id":"99aec2bc.e7b95","type":"execute","name":"generate vnf-sub-interface-group URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.part`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.part\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.vnf-id`\"/>\n","comments":"","outputs":1,"x":428.33325576782227,"y":698.333306312561,"z":"462a845d.7a55ec","wires":[[]]},{"id":"4283d7ba.9952f8","type":"execute","name":"generate vnf-sub-interface-group URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.part`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.part\"/>\n    <parameter name=\"target\" value=\"{vnfc-instance-group-function}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.vnfc-instance-group-function`\"/>\n","comments":"","outputs":1,"x":428.33324813842773,"y":748.3332281112671,"z":"462a845d.7a55ec","wires":[[]]},{"id":"ebc4f87b.eab5e8","type":"execute","name":"generate vnf-sub-interface-group URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.part`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.part\"/>\n    <parameter name=\"target\" value=\"{network-instance-group-function}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.network-instance-group-function`\"/>\n","comments":"","outputs":1,"x":428.3332710266113,"y":796.666524887085,"z":"462a845d.7a55ec","wires":[[]]},{"id":"9a8cd3f.4488d3","type":"execute","name":"generate vnf-sub-interface-group URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.part`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vsig-url\"/>\n    <parameter name=\"target\" value=\"{parent-port-role}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.parent-port-role`\"/>\n","comments":"","outputs":1,"x":428.33324813842773,"y":844.9999847412109,"z":"462a845d.7a55ec","wires":[[]]},{"id":"68d41889.f26408","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Cannot find vnf-sub-interface-group in service ' + $generic-configuration-notification-input.vnr-parameters.vnf-service-instance-id`\" />\n","comments":"","x":1073.3337059020996,"y":909.9998378753662,"z":"462a845d.7a55ec","wires":[]},{"id":"fe1afab9.59d2c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":926.6665840148926,"y":891.666618347168,"z":"462a845d.7a55ec","wires":[["68d41889.f26408","d5349d79.2f912"]]},{"id":"d5349d79.2f912","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"Y\" />\n<parameter name=\"input.response-code\"\n  value=\"500\" />\n<parameter name=\"input.response-message\"\n  value=\"`'Cannot find vnf-sub-interface-group in service ' + $generic-configuration-notification-input.vnr-parameters.vnf-service-instance-id`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":1093.333209991455,"y":864.999870300293,"z":"462a845d.7a55ec","wires":[[]]},{"id":"2de89f29.06878","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$mdsal-vsig.vnf-sub-interface-group[0].vnfcs.vnfc_length`' >\n","comments":"","outputs":1,"x":350,"y":966.666576385498,"z":"462a845d.7a55ec","wires":[["bf4c44a8.d8c458"]]},{"id":"bf4c44a8.d8c458","type":"for","name":"for each vnic","xml":"<for silentFailure='true' index='vnic-index' start='0' end='`$mdsal-vsig.vnf-sub-interface-group[0].vnfcs.vnfc[$vnfc-index].vnics.vnic_length`' >\n","comments":"","outputs":1,"x":518.333309173584,"y":964.9999408721924,"z":"462a845d.7a55ec","wires":[["3bfe2398.75c6ac"]]},{"id":"3bfe2398.75c6ac","type":"for","name":"for each subinterface","xml":"<for silentFailure='true' index='si-index' start='0' end='`$mdsal-vsig.vnf-sub-interface-group[0].vnfcs.vnfc[$vnfc-index].vnics.vnic[$vnic-index].sub-interfaces.sub-interface_length`' >\n","comments":"","outputs":1,"x":709.9999656677246,"y":964.9999904632568,"z":"462a845d.7a55ec","wires":[["a28308b1.7f8368"]]},{"id":"a28308b1.7f8368","type":"switchNode","name":"switch lower-tag-ids equal?","xml":"<switch test='`$mdsal-vsig.vnf-sub-interface-group[0].vnfcs.vnfc[$vnfc-index].vnics.vnic[$vnic-index].sub-interfaces.sub-interface[$si-index].vlan-tags.lower-tag-id\n  == $generic-configuration-notification-input.vnr-parameters.lower-tag-id`'>\n","comments":"","outputs":1,"x":946.6666145324707,"y":963.3332023620605,"z":"462a845d.7a55ec","wires":[["eec5958.2c75968"]]},{"id":"eec5958.2c75968","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1141.6666526794434,"y":961.6666584014893,"z":"462a845d.7a55ec","wires":[["67f77c07.c29934"]]},{"id":"67f77c07.c29934","type":"set","name":"set sub-interface-status to 'unassigned'","xml":"<set>\n<parameter name='mdsal-vsig.vnf-sub-interface-group[0].vnfcs.vnfc[$vnfc-index].vnics.vnic[$vnic-index].sub-interfaces.sub-interface[$si-index].sub-interface-status'\n  value='unassigned' />\n","comments":"","x":1366.6664924621582,"y":959.9998273849487,"z":"462a845d.7a55ec","wires":[]},{"id":"4196df91.f32b6","type":"for","name":"for each customer-bonding-request","xml":"<for index='cbr-index' start='0' end='`$mdsal-vsig.vnf-sub-interface-group[0].customer-bonding-requests.customer-bonding-request_length`' >\n","comments":"","outputs":1,"x":418.3333168029785,"y":1054.9999599456787,"z":"462a845d.7a55ec","wires":[["2f1abe51.e1c4a2"]]},{"id":"2f1abe51.e1c4a2","type":"switchNode","name":"switch configuration-ids equal?","xml":"<switch test='`$mdsal-vsig.vnf-sub-interface-group[0].customer-bonding-requests.customer-bonding-request[$cbr-index].configuration-id\n  == $generic-configuration-notification-input.configuration-information.configuration-id`'>\n","comments":"","outputs":1,"x":713.3333396911621,"y":1054.9998798370361,"z":"462a845d.7a55ec","wires":[["1778fe32.933392"]]},{"id":"1778fe32.933392","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":914.9999580383301,"y":1054.9999027252197,"z":"462a845d.7a55ec","wires":[["b61ca28e.22135"]]},{"id":"b61ca28e.22135","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1051.66654586792,"y":1054.9999141693115,"z":"462a845d.7a55ec","wires":[["29b16af.c298e96","493e3e18.a8299"]]},{"id":"29b16af.c298e96","type":"for","name":"for each subsequent customer-bonding-request","xml":"<for index='cbr2-index' start='`$cbr-index + 1`' end='`$mdsal-vsig.vnf-sub-interface-group[0].customer-bonding-requests.customer-bonding-request_length`' >\n","comments":"","outputs":1,"x":1308.3333129882812,"y":1025.0000410079956,"z":"462a845d.7a55ec","wires":[["5e184404.a0005c"]]},{"id":"af6f633f.1bf22","type":"set","name":"copy customer-bonding-request down 1","xml":"<set>\n<parameter name='mdsal-vsig.vnf-sub-interface-group[0].customer-bonding-requests.customer-bonding-request[$cbr-index].[$prev-index].'\n  value='`$mdsal-vsig.vnf-sub-interface-group[0].customer-bonding-requests.customer-bonding-request[$cbr-index].[$cbr2-index].`' />\n","comments":"","x":1788.3335647583008,"y":1043.333254814148,"z":"462a845d.7a55ec","wires":[]},{"id":"10512a43.f555c6","type":"set","name":"set prev-index","xml":"<set>\n<parameter name='prev-index' value='`$cbr2-index - 1`' />\n","comments":"","x":1711.666732788086,"y":996.666624546051,"z":"462a845d.7a55ec","wires":[]},{"id":"5e184404.a0005c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1559.9999809265137,"y":1023.3332109451294,"z":"462a845d.7a55ec","wires":[["10512a43.f555c6","af6f633f.1bf22"]]},{"id":"493e3e18.a8299","type":"set","name":"decrement customer-bonding-request_length","xml":"<set>\n<parameter name='mdsal-vsig.vnf-sub-interface-group[0].customer-bonding-requests.customer-bonding-request_length'\n  value='`$mdsal-vsig.vnf-sub-interface-group[0].customer-bonding-requests.customer-bonding-request_length - 1`' />\n","comments":"","x":1298.3333435058594,"y":1086.6666278839111,"z":"462a845d.7a55ec","wires":[]},{"id":"a5f8fb7a.8abc58","type":"execute","name":"execute RestApiCallNode - PUT vnf-sub-interface-group","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vnfsubinterfacegroup.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vsig-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-vsig\" />\n\n","comments":"","outputs":1,"x":481.6666564941406,"y":1163.333251953125,"z":"462a845d.7a55ec","wires":[["5c3a8408.94105c"]]},{"id":"5c3a8408.94105c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":768.3333129882812,"y":1161.6666259765625,"z":"462a845d.7a55ec","wires":[["27b02686.17ee3a"]]},{"id":"3e1f0516.25a45a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"Failure writing vnf-sub-interface-group\" />\n","comments":"","x":1053.3331565856934,"y":1178.333293914795,"z":"462a845d.7a55ec","wires":[]},{"id":"27b02686.17ee3a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":899.9999618530273,"y":1159.9999771118164,"z":"462a845d.7a55ec","wires":[["3e1f0516.25a45a","a9a8b082.418af"]]},{"id":"a9a8b082.418af","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"Y\" />\n<parameter name=\"input.response-code\"\n  value=\"500\" />\n<parameter name=\"input.response-message\"\n  value=\"Failure writing vnf-sub-interface-group\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":1075.0000228881836,"y":1131.6667251586914,"z":"462a845d.7a55ec","wires":[[]]},{"id":"fc495104.33dc3","type":"execute","name":"generate network-instance-group-network URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.network-instance-group-network`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.part\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.network-collection-service-instance-id`\"/>\n","comments":"","outputs":1,"x":449.9999694824219,"y":1225,"z":"462a845d.7a55ec","wires":[[]]},{"id":"7139e5d3.00113c","type":"execute","name":"generate network-instance-group-network URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.part`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.part\"/>\n    <parameter name=\"target\" value=\"{network-instance-group-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.network-instance-group-id`\"/>\n","comments":"","outputs":1,"x":449.9999542236328,"y":1271.666829109192,"z":"462a845d.7a55ec","wires":[[]]},{"id":"daafa96f.aa2648","type":"execute","name":"generate network-instance-group-network URL","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.part`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.nign-url\"/>\n    <parameter name=\"target\" value=\"{network-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.vnr-parameters.network-id`\"/>\n","comments":"","outputs":1,"x":449.99993896484375,"y":1315.0000429153442,"z":"462a845d.7a55ec","wires":[[]]},{"id":"b267769a.522148","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":813.666748046875,"y":1387.6669368743896,"z":"462a845d.7a55ec","wires":[["c3a172b7.4a32"]]},{"id":"18e5598d.08c946","type":"execute","name":"execute RestApiCallNode - GET network-instance-group-network","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.nign-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-nign\" />\n\n","comments":"","outputs":1,"x":503.3334274291992,"y":1388.333797454834,"z":"462a845d.7a55ec","wires":[["b267769a.522148"]]},{"id":"f9692724.b9c848","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Cannot find network-instance-group-network in service ' + $generic-configuration-notification-input.vnr-parameters.network-collection-service-instance-id`\" />\n","comments":"","x":1090.000576019287,"y":1411.6668195724487,"z":"462a845d.7a55ec","wires":[]},{"id":"c3a172b7.4a32","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":945.0000457763672,"y":1386.6669292449951,"z":"462a845d.7a55ec","wires":[["f9692724.b9c848","10ebce63.454392"]]},{"id":"10ebce63.454392","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"Y\" />\n<parameter name=\"input.response-code\"\n  value=\"500\" />\n<parameter name=\"input.response-message\"\n  value=\"`'Cannot find network-instance-group-network in service ' + $generic-configuration-notification-input.vnr-parameters.network-collection-service-instance-id`\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":1111.6666946411133,"y":1365.0002307891846,"z":"462a845d.7a55ec","wires":[[]]},{"id":"605d38fd.0f4688","type":"set","name":"set network-status to unassigned","xml":"<set>\n<parameter name='mdsal-nign.network[0].network-status' value='unassigned' />\n","comments":"","x":404.99996185302734,"y":1451.6666431427002,"z":"462a845d.7a55ec","wires":[]},{"id":"e7df9303.b3ed4","type":"for","name":"for each customer-bonding-request","xml":"<for index='cbr-index' start='0' end='`$mdsal-nign.network[0].customer-bonding-requests.customer-bonding-request_length`' >\n","comments":"","outputs":1,"x":411.6666564941406,"y":1525,"z":"462a845d.7a55ec","wires":[["bc3a07a0.b0f0a8"]]},{"id":"bc3a07a0.b0f0a8","type":"switchNode","name":"switch configuration-ids equal?","xml":"<switch test='`$mdsal-nign.network[0].customer-bonding-requests.customer-bonding-request[$cbr-index].configuration-id\n  == $generic-configuration-notification-input.configuration-information.configuration-id`'>\n","comments":"","outputs":1,"x":706.6666793823242,"y":1524.9999198913574,"z":"462a845d.7a55ec","wires":[["e2828627.9da258"]]},{"id":"e2828627.9da258","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":908.3332977294922,"y":1524.999942779541,"z":"462a845d.7a55ec","wires":[["7d6ffcd0.c7d9d4"]]},{"id":"7d6ffcd0.c7d9d4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1044.999885559082,"y":1524.9999542236328,"z":"462a845d.7a55ec","wires":[["e5828168.c3282","c09d77aa.e01ed8"]]},{"id":"e5828168.c3282","type":"for","name":"for each subsequent customer-bonding-request","xml":"<for index='cbr2-index' start='`$cbr-index + 1`' end='`$mdsal-nign.network[0].customer-bonding-requests.customer-bonding-request_length`' >\n","comments":"","outputs":1,"x":1300,"y":1500,"z":"462a845d.7a55ec","wires":[["574acab7.cf9ec4"]]},{"id":"53bd2896.a56ae8","type":"set","name":"copy customer-bonding-request down 1","xml":"<set>\n<parameter name='mdsal-nign.network[0].customer-bonding-requests.customer-bonding-request[$cbr-index].[$prev-index].'\n  value='`$mdsal-nign.network[0].customer-bonding-requests.customer-bonding-request[$cbr-index].[$cbr2-index].`' />\n","comments":"","x":1785.0002708435059,"y":1518.33323097229,"z":"462a845d.7a55ec","wires":[]},{"id":"d477fb7.3840808","type":"set","name":"set prev-index","xml":"<set>\n<parameter name='prev-index' value='`$cbr2-index - 1`' />\n","comments":"","x":1711.666835784912,"y":1471.666563987732,"z":"462a845d.7a55ec","wires":[]},{"id":"574acab7.cf9ec4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1551.6666679382324,"y":1498.3331699371338,"z":"462a845d.7a55ec","wires":[["d477fb7.3840808","53bd2896.a56ae8"]]},{"id":"c09d77aa.e01ed8","type":"set","name":"decrement customer-bonding-request_length","xml":"<set>\n<parameter name='mdsal-nign.network[0].customer-bonding-requests.customer-bonding-request_length'\n  value='`$mdsal-nign.network[0].customer-bonding-requests.customer-bonding-request_length - 1`' />\n","comments":"","x":1290.0000305175781,"y":1561.6665868759155,"z":"462a845d.7a55ec","wires":[]},{"id":"53f7902d.9645e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":811.6665802001953,"y":1636.6666259765625,"z":"462a845d.7a55ec","wires":[["be62c173.ab2f6"]]},{"id":"39a45b74.1e8284","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"Failure writing network-instance-group network\" />\n","comments":"","x":1096.6664237976074,"y":1653.333293914795,"z":"462a845d.7a55ec","wires":[]},{"id":"be62c173.ab2f6","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":943.3332290649414,"y":1634.9999771118164,"z":"462a845d.7a55ec","wires":[["39a45b74.1e8284","596e5185.7c17a"]]},{"id":"aa8c2298.733db","type":"execute","name":"execute RestApiCallNode - PUT network-instance-group-network","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.network-instance-group-network.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.nign-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-nign\" />\n\n","comments":"","outputs":1,"x":501.6666259765625,"y":1638.3332796096802,"z":"462a845d.7a55ec","wires":[["53f7902d.9645e"]]},{"id":"596e5185.7c17a","type":"configure","name":"send failure to MSO","xml":"<configure activate=\"true\" adaptor=\"com.att.sdnctl.sli.adaptor.mso.MSOAdaptor\" key=\"__READ_FROM_PARAMETERS__\">\n<parameter name=\"notification-url\"\n  value=\"`$mdsal-gc.gc-configuration[0].configuration-data.configuration-operation-information.sdnc-request-header.svc-notification-url`\" />\n<parameter name=\"input.ack-final-indicator\"\n  value=\"Y\" />\n<parameter name=\"input.response-code\"\n  value=\"500\" />\n<parameter name=\"input.response-message\"\n  value=\"Failure writing network-instance-group network\" />\n<parameter name=\"input.svc-request-id\"\n  value=\"`$generic-configuration-notification-input.svc-request-id`\" />\n<parameter name=\"input.service-information.service-type\"\n  value=\"`$generic-configuration-notification-input.service-information.subscription-service-type`\" />\n<parameter name=\"input.service-information.service-instance-id\"\n  value=\"`$generic-configuration-notification-input.service-information.service-instance-id`\" />\n","comments":"","outputs":1,"x":1119.9999542236328,"y":1608.3334302902222,"z":"462a845d.7a55ec","wires":[[]]},{"id":"fdcad0e0.6c236","type":"execute","name":"generate gc-configuration url","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.gc-configuration`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.gc-url\"/>\n    <parameter name=\"target\" value=\"{configuration-id}\"/>\n    <parameter name=\"replacement\" value=\"`$generic-configuration-notification-input.configuration-information.configuration-id`\"/>\n","comments":"","outputs":1,"x":398.3333206176758,"y":404.99999618530273,"z":"462a845d.7a55ec","wires":[[]]}]