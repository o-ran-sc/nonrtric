[{"id":"ddaa8377.fa22a8","type":"dgstart","name":"DGSTART","outputs":1,"x":162.74999809265137,"y":128.33333349227905,"z":"293895e6.5ef0e2","wires":[["bee866d7.34a87"]]},{"id":"bee866d7.34a87","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":356.03568267822266,"y":188.09525346755981,"z":"293895e6.5ef0e2","wires":[["a4b64377.84e858"]]},{"id":"a4b64377.84e858","type":"method","name":"network-topology-operation-assign-automated","xml":"<method rpc='network-topology-operation-assign-automated' mode='sync'>\n","comments":"","outputs":1,"x":366.38106536865234,"y":293.8928370475769,"z":"293895e6.5ef0e2","wires":[["52e034b0.745ae4"]]},{"id":"32bd1ba1.6415a4","type":"comment","name":"Called from assign when network name is NOT passed in from mso","info":"","comments":"","x":546.6071319580078,"y":126.00000143051147,"z":"293895e6.5ef0e2","wires":[]},{"id":"52e034b0.745ae4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":278.74996185302734,"y":434.9999842643738,"z":"293895e6.5ef0e2","wires":[["f1fc9d62.38b5c","2966d0e0.8b25e8","e8da6f16.71f9b8","ad4ff9.5fa67008","2c27032c.5e2204","f827107c.d87818","2c6c62c8.5a4c2e","3d53982a.567ae","5768ac10.171294","3420d2a4.657bee","fd6db351.edfb","4db8414c.fd2348","c87d3fb.61607c","fe0c8615.109c78","67411a15.4513fc","16bcfe02.a78002","4acd25ef.ab1094","78d9149.661776c","6fc56656.d3bba","f387ea7a.cb332","74426281.f93a14","6c88ef63.8cc9","b853c9fb.a4b158","2688708b.68097","22bd05cf.445f7a","44cca957.3504a8","ece618e.04a51e8","ddf2d1ad.9086d","7852b58.654cd4c","31213429.ff2f4c","4c3863ea.780a64","f43b1f67.085098","88aa0e0f.278a3","c6bc7f3a.1e281","cb4086d2.f6774"]]},{"id":"f1fc9d62.38b5c","type":"set","name":"set tmp.l3-network","xml":"<set>\n<parameter name='tmp.l3-network.network-id' value=\"`$tmp.return.generate-l3network-network-id.uuid`\" />\n<parameter name='tmp.l3-network.network-name' value=\"`$tmp.network-instance-name`\" />\n<parameter name='tmp.l3-network.network-type' value=\"`$network-model.network-type`\" />\n<parameter name='tmp.l3-network.network-role' value=\"`$network-model.network-role`\" />\n<parameter name='tmp.l3-network.network-technology' value=\"`$network-model.network-technology`\" />\n<parameter name='tmp.l3-network.is-bound-to-vpn' value=\"`$network-model.is-bound-to-vpn`\" />\n<parameter name='tmp.l3-network.orchestration-status' value=\"PendingCreate\" />\n<parameter name='tmp.l3-network.model-invariant-id' value=\"`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`\" />\n<parameter name='tmp.l3-network.model-version-id' value=\"`$network-topology-operation-input.network-information.onap-model-information.model-version`\" />\n<parameter name='tmp.l3-network.model-customization-id' value=\"`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`\" />\n<parameter name='tmp.l3-network.is-provider-network' value=\"`$network-model.is-provider-network`\" />\n<parameter name='tmp.l3-network.is-shared-network' value=\"`$network-model.is-shared-network`\" />\n<parameter name='tmp.l3-network.is-external-network' value=\"`$network-model.is-external-network`\" />\n<parameter name='tmp.l3-network.eipam-v6-address-plan' value=\"`$network-model.eipam-v6-address-plan`\" />\n<parameter name='tmp.l3-network.eipam-v4-address-plan' value=\"`$network-model.eipam-v4-address-plan`\" />\n<parameter name='tmp.l3-network.service-id' value=\"`$service-data.service-information.service-id`\" />\n<parameter name='tmp.l3-network.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $network-topology-operation-input.service-information.service-instance-id\n + '/service-data/networks/network/'\n + $tmp.l3-network.network-id\n + '/network-data/network-topology/'` \" />\n","comments":"","x":781.7499313354492,"y":815.9999651908875,"z":"293895e6.5ef0e2","wires":[]},{"id":"2966d0e0.8b25e8","type":"switchNode","name":"switch network--model.is-provider-network","xml":"<switch test='`$network-model.is-provider-network`'>\n","comments":"","outputs":1,"x":859.2410736083984,"y":910.285710811615,"z":"293895e6.5ef0e2","wires":[["e7b008a0.418ec","d5dd32b7.555628"]]},{"id":"e7b008a0.418ec","type":"other","name":"outcome Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1164.3842239379883,"y":890.1111559867859,"z":"293895e6.5ef0e2","wires":[["2dfcff6c.e57a48"]]},{"id":"2dfcff6c.e57a48","type":"set","name":"set tmp.l3-network.physical-network-name","xml":"<set>\n<parameter name='tmp.l3-network.physical-network-name' value=\"`$network-model.physical-network-name`\" />\n<parameter name='tmp.l3-network.is-provider-network-boolean' value='true' />","comments":"","x":1432.3840789794922,"y":887.1111216545105,"z":"293895e6.5ef0e2","wires":[]},{"id":"d5dd32b7.555628","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1151.749282836914,"y":920.9841771125793,"z":"293895e6.5ef0e2","wires":[["642fce71.9bd878"]]},{"id":"642fce71.9bd878","type":"set","name":"set tmp.l3-network.physical-network-name","xml":"<set>\n<parameter name='tmp.l3-network.physical-network-name' value=\"\" />\n<parameter name='tmp.l3-network.is-provider-network-boolean' value='false' />","comments":"","x":1436.0352401733398,"y":919.5556082725525,"z":"293895e6.5ef0e2","wires":[]},{"id":"e8da6f16.71f9b8","type":"switchNode","name":"switch network--model.is-shared-network","xml":"<switch test='`$network-model.is-shared-network`'>\n","comments":"","outputs":1,"x":856.9075927734375,"y":955.9205183982849,"z":"293895e6.5ef0e2","wires":[["c85002b3.dfee48","73fec284.227f6c"]]},{"id":"c85002b3.dfee48","type":"other","name":"outcome Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1162.5267944335938,"y":955.9841294288635,"z":"293895e6.5ef0e2","wires":[["72e5d36e.94fdfc"]]},{"id":"72e5d36e.94fdfc","type":"set","name":"set tmp.l3-network.is-shared-network-boolean","xml":"<set>\n<parameter name='tmp.l3-network.is-shared-network-boolean' value='true' />","comments":"","x":1454.8125076293945,"y":955.9839768409729,"z":"293895e6.5ef0e2","wires":[]},{"id":"73fec284.227f6c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1151.3208198547363,"y":991.2856364250183,"z":"293895e6.5ef0e2","wires":[["2a0962ea.47f27e"]]},{"id":"2a0962ea.47f27e","type":"set","name":"set tmp.l3-network.is-shared-network-boolean","xml":"<set>\n<parameter name='tmp.l3-network.is-shared-network-boolean' value='false' />","comments":"","x":1455.6067390441895,"y":991.1428141593933,"z":"293895e6.5ef0e2","wires":[]},{"id":"ad4ff9.5fa67008","type":"switchNode","name":"switch network--model.is-external-network","xml":"<switch test='`$network-model.is-external-network`'>\n","comments":"","outputs":1,"x":865.5908966064453,"y":1027.968159198761,"z":"293895e6.5ef0e2","wires":[["644c8ab8.07217c","5d3c03a7.b87cbc"]]},{"id":"644c8ab8.07217c","type":"other","name":"outcome Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1164.5433616638184,"y":1034.698477268219,"z":"293895e6.5ef0e2","wires":[["5ede0098.42a888"]]},{"id":"5ede0098.42a888","type":"set","name":"set tmp.l3-network.is-external-network-boolean","xml":"<set>\n<parameter name='tmp.l3-network.is-external-network-boolean' value='true' />","comments":"","x":1456.8290748596191,"y":1034.6983246803284,"z":"293895e6.5ef0e2","wires":[]},{"id":"5d3c03a7.b87cbc","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1153.337387084961,"y":1069.9999842643738,"z":"293895e6.5ef0e2","wires":[["73e4d14e.10bed"]]},{"id":"73e4d14e.10bed","type":"set","name":"set tmp.l3-network.is-external-network-boolean","xml":"<set>\n<parameter name='tmp.l3-network.is-external-network-boolean' value='false' />","comments":"","x":1457.623306274414,"y":1069.8571619987488,"z":"293895e6.5ef0e2","wires":[]},{"id":"f827107c.d87818","type":"set","name":"set tmp.complex-found","xml":"<set>\n<parameter name='tmp.complex-found' value='false' />\n\n","comments":"","x":811.0614624023438,"y":1165.5421195030212,"z":"293895e6.5ef0e2","wires":[]},{"id":"2c27032c.5e2204","type":"switchNode","name":"switch network--model.is-bound-to-vpn","xml":"<switch test='`$network-model.is-bound-to-vpn`'>\n","comments":"","outputs":1,"x":857.1724243164062,"y":1104.0422587394714,"z":"293895e6.5ef0e2","wires":[["f59632be.ab57","e3b1b631.14c4b8"]]},{"id":"f59632be.ab57","type":"other","name":"outcome Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1162.7916221618652,"y":1109.1058259010315,"z":"293895e6.5ef0e2","wires":[["3a84d6bc.f116aa"]]},{"id":"3a84d6bc.f116aa","type":"set","name":"set tmp.l3-network.is-bound-to-vpn-boolean","xml":"<set>\n<parameter name='tmp.l3-network.is-bound-to-vpn-boolean' value='true' />","comments":"","x":1455.077335357666,"y":1109.1056733131409,"z":"293895e6.5ef0e2","wires":[]},{"id":"e3b1b631.14c4b8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1151.5856475830078,"y":1144.4073328971863,"z":"293895e6.5ef0e2","wires":[["30af655.b903c9a"]]},{"id":"30af655.b903c9a","type":"set","name":"set tmp.l3-network.is-bound-to-vpn-boolean","xml":"<set>\n<parameter name='tmp.l3-network.is-bound-to-vpn-boolean' value='false' />","comments":"","x":1455.871566772461,"y":1144.2645106315613,"z":"293895e6.5ef0e2","wires":[]},{"id":"16bcfe02.a78002","type":"set","name":"set tmp.network-topology","xml":"<set>\n<parameter name='tmp.network-topology.network-topology-identifier-structure.network-id' value=\"`$tmp.l3-network.network-name`\" />\n<parameter name='tmp.network-topology.network-topology-identifier-structure.network-name' value=\"`$tmp.l3-network.network-name`\" />\n<parameter name='tmp.network-topology.network-topology-identifier-structure.network-type' value=\"`$tmp.l3-network.network-type`\" />\n<parameter name='tmp.network-topology.network-topology-identifier-structure.network-role' value=\"`$tmp.l3-network.network-role`\" />\n<parameter name='tmp.network-topology.network-topology-identifier-structure.network-technology' value=\"`$tmp.l3-network.network-technology`\" />\n<parameter name='tmp.network-topology.network-topology-identifier-structure.eipam-v4-address-plan' value=\"`$network-model.eipam-v4-address-plan`\" />\n<parameter name='tmp.network-topology.network-topology-identifier-structure.eipam-v6-address-plan' value=\"`$network-model.eipam-v6-address-plan`\" />\n<parameter name='tmp.network-topology.region-identifier.tenant' value=\"`$network-topology-operation-input.network-request-input.tenant`\" />\n<parameter name='tmp.network-topology.region-identifier.aic-cloud-region' value=\"`$network-topology-operation-input.network-request-input.aic-cloud-region`\" />\n<parameter name='tmp.network-topology.region-identifier.aic-clli' value=\"`$network-topology-operation-input.network-request-input.aic-clli`\" />\n<parameter name='tmp.network-topology.onap-model-information.' value=\"`$network-topology-operation-input.network-information.onap-model-information.`\" />\n<parameter name='tmp.network-topology.network-parameters.' value=\"`$network-topology-operation-input.network-request-input.network-input-parameters.`\" />\n","comments":"","x":828.5831727981567,"y":2704.2797265052795,"z":"293895e6.5ef0e2","wires":[]},{"id":"f7696e6a.52691","type":"switchNode","name":"switch network-model.eipam-v4-address-plan (VIPR)","xml":"<switch test='`$network-model.eipam-v4-address-plan`'>\n","comments":"","outputs":1,"x":2312.4011001586914,"y":1729.882297039032,"z":"293895e6.5ef0e2","wires":[["dae3b0b5.b40e7","2be63d31.a0fc1a","ec03d835.f8721","51656656.ba094"]]},{"id":"dae3b0b5.b40e7","type":"other","name":"AIC_ATM_UNPROTECTED_V4","xml":"<outcome value='AIC_ATM_UNPROTECTED_V4'>","comments":"","outputs":1,"x":2772.400520324707,"y":1698.8821139335632,"z":"293895e6.5ef0e2","wires":[["1f720674.eca1b2"]]},{"id":"2be63d31.a0fc1a","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2696.067485809326,"y":1814.2157225608826,"z":"293895e6.5ef0e2","wires":[["a31343ec.e76f08"]]},{"id":"ec03d835.f8721","type":"other","name":"AIC_ATM_PROTECTED_V4","xml":"<outcome value='AIC_ATM_PROTECTED_V4'>","comments":"","outputs":1,"x":2762.289131164551,"y":1736.4379525184631,"z":"293895e6.5ef0e2","wires":[["1f720674.eca1b2"]]},{"id":"71eecbd.b148b34","type":"switchNode","name":"switch network-model.eipam-v4-address-plan (SRIOV)","xml":"<switch test='`$network-model.eipam-v4-address-plan`'>\n","comments":"","outputs":1,"x":2348.1351013183594,"y":2078.4893565177917,"z":"293895e6.5ef0e2","wires":[["af18a1b8.3f9da","48638a1d.044944","bcb2da26.868168","b190ce.c871bf3"]]},{"id":"af18a1b8.3f9da","type":"other","name":"AIC_DATA_PLANE_UNPROTECTED_V4","xml":"<outcome value='AIC_DATA_PLANE_UNPROTECTED_V4'>","comments":"","outputs":1,"x":2815.385040283203,"y":2077.7392830848694,"z":"293895e6.5ef0e2","wires":[["25845c0e.13752c"]]},{"id":"48638a1d.044944","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2707.992322921753,"y":2192.560908317566,"z":"293895e6.5ef0e2","wires":[["cc9dd635.98df68"]]},{"id":"bcb2da26.868168","type":"other","name":"AIC_DATA_PLANE_PROTECTED_V4","xml":"<outcome value='AIC_DATA_PLANE_PROTECTED_V4'>","comments":"","outputs":1,"x":2811.773712158203,"y":2114.544826030731,"z":"293895e6.5ef0e2","wires":[["25845c0e.13752c"]]},{"id":"b190ce.c871bf3","type":"other","name":"AIC_DATA_PLANE_PRIVATE_V4","xml":"<outcome value='AIC_DATA_PLANE_PRIVATE_V4'>","comments":"","outputs":1,"x":2793.9923248291016,"y":2153.3107810020447,"z":"293895e6.5ef0e2","wires":[["25845c0e.13752c"]]},{"id":"34c49751.1e7d6","type":"switchNode","name":"switch network-model.eipam-v6-address-plan","xml":"<switch test='`$network-model.eipam-v6-address-plan`'>\n","comments":"","outputs":1,"x":2292.3330612182617,"y":1897.4740328788757,"z":"293895e6.5ef0e2","wires":[["2321c9f0.8a0d9e","82367816.ed7db8","16e5d844.ab3f38","a6bdf612.22b0f8"]]},{"id":"da0609b1.dd66e","type":"switchNode","name":"switch network-model.eipam-v6-address-plan (SRIOV)","xml":"<switch test='`$network-model.eipam-v6-address-plan`'>\n","comments":"","outputs":1,"x":2384.1824951171875,"y":2296.680191516876,"z":"293895e6.5ef0e2","wires":[["2c5a63b9.3f81d4","6f253e2d.578688","66a6717f.0e464","12e3c9ff.f116ee","d57691f9.5e2ff","eb0937db.b0b998"]]},{"id":"2c5a63b9.3f81d4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2718.8966121673584,"y":2486.1807163357735,"z":"293895e6.5ef0e2","wires":[["418a0270.b2cdfc"]]},{"id":"6f253e2d.578688","type":"other","name":"AIC_ATM_UNPROTECTED_V6","xml":"<outcome value=\"AIC_ATM_UNPROTECTED_V6\">","comments":"","outputs":1,"x":2787.448028564453,"y":2297.8825373649597,"z":"293895e6.5ef0e2","wires":[["ba3daf8e.1a127"]]},{"id":"66a6717f.0e464","type":"other","name":"AIC_ATM_PROTECTED_V6","xml":"<outcome value=\"AIC_ATM_PROTECTED_V6\">","comments":"","outputs":1,"x":2782.733383178711,"y":2339.8825602531433,"z":"293895e6.5ef0e2","wires":[["ba3daf8e.1a127"]]},{"id":"12e3c9ff.f116ee","type":"other","name":"AIC_DATA_PLANE_UNPROTECTED_V6","xml":"<outcome value=\"AIC_DATA_PLANE_UNPROTECTED_V6\">","comments":"","outputs":1,"x":2822.6350326538086,"y":2378.025414943695,"z":"293895e6.5ef0e2","wires":[["ba3daf8e.1a127"]]},{"id":"eb0937db.b0b998","type":"other","name":"AIC_DATA_PLANE_PROTECTED_V6","xml":"<outcome value=\"AIC_DATA_PLANE_PROTECTED_V6\">","comments":"","outputs":1,"x":2811.6356048583984,"y":2440.0256450772285,"z":"293895e6.5ef0e2","wires":[["ba3daf8e.1a127"]]},{"id":"d57691f9.5e2ff","type":"other","name":"AIC_DATA_PLANE_PRIVATE_V6","xml":"<outcome value=\"AIC_DATA_PLANE_PRIVATE_V6\">","comments":"","outputs":1,"x":2799.9211807250977,"y":2407.4543509483337,"z":"293895e6.5ef0e2","wires":[["ba3daf8e.1a127"]]},{"id":"fd6db351.edfb","type":"switchNode","name":"switch network-technology","xml":"<switch test='`$network-model.network-technology`'>\n","comments":"","outputs":1,"x":829.9508438110352,"y":1730.4166598320007,"z":"293895e6.5ef0e2","wires":[["bc99eab5.63fc78","98ca247b.003d6","878c8d61.5c11c"]]},{"id":"2c6c62c8.5a4c2e","type":"get-resource","name":"get-resource cloud region","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $network-topology-operation-input.network-request-input.aic-cloud-region AND \n\t\t     depth = '0'\"\n        pfx='aai.cloud-region' local-only='false' >\n\n","comments":"","outputs":1,"x":827.2842483520508,"y":1323.4166903495789,"z":"293895e6.5ef0e2","wires":[["ac17137c.6c1968","364976ad.55413a"]]},{"id":"364976ad.55413a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1049.673355102539,"y":1360.1388583183289,"z":"293895e6.5ef0e2","wires":[["cdcb6a66.a11cf"]]},{"id":"ac17137c.6c1968","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1056.1733512878418,"y":1324.138919353485,"z":"293895e6.5ef0e2","wires":[["48995ae5.67c19c"]]},{"id":"106bd669.56604a","type":"comment","name":"Per test failure in IT, need to throw error if relationships don't exist","info":"","comments":"","x":945.5344848632812,"y":1280.4999976158142,"z":"293895e6.5ef0e2","wires":[]},{"id":"a4857175.d87198","type":"get-resource","name":"get-resource complex","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"complex\" \n\t\tkey=\"complex.physical-location-id = $aai.cloud-region.relationship-list.relationship[$ridx].relationship-data[$rdidx].relationship-value\"\n        pfx='aai.complex' local-only='false' >\n        \n\n\n","comments":"","outputs":1,"x":1917.7286224365234,"y":1544.527916431427,"z":"293895e6.5ef0e2","wires":[["635ae7ba.6c555","4c24ef82.82de3","586982ec.1e8c34"]]},{"id":"4c24ef82.82de3","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2150.4789810180664,"y":1602.88871717453,"z":"293895e6.5ef0e2","wires":[["54196261.94e404"]]},{"id":"635ae7ba.6c555","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2152.978977203369,"y":1562.8887782096863,"z":"293895e6.5ef0e2","wires":[["cffd5f4a.151d08"]]},{"id":"5768ac10.171294","type":"for","name":"for relationship list","xml":"<for silentFailure='false' index='ridx' start='0' end=\"`$aai.cloud-region.relationship-list.relationship_length`\" >\n","comments":"","outputs":1,"x":793.7013320922852,"y":1499.6470789909363,"z":"293895e6.5ef0e2","wires":[["798003f7.3d8904"]]},{"id":"ca236a12.216ce","type":"switchNode","name":"switch","xml":"<switch test='`$aai.cloud-region.relationship-list.relationship[$ridx].relationship-data[$rdidx].relationship-key`'>\n","comments":"","outputs":1,"x":1199.2009963989258,"y":1503.3611903190613,"z":"293895e6.5ef0e2","wires":[["977e56b3.9b15b"]]},{"id":"798003f7.3d8904","type":"for","name":"for relationship data","xml":"<for silentFailure='false' index='rdidx' start='0' end=\"`$aai.cloud-region.relationship-list.relationship[$ridx].relationship-data_length`\" >\n","comments":"","outputs":1,"x":1016.6177749633789,"y":1500.6113123893738,"z":"293895e6.5ef0e2","wires":[["ca236a12.216ce"]]},{"id":"977e56b3.9b15b","type":"other","name":"complex.physical-location-id","xml":"<outcome value='complex.physical-location-id'>\n","comments":"","outputs":1,"x":1421.701057434082,"y":1501.7778162956238,"z":"293895e6.5ef0e2","wires":[["16d6abf6.083fac"]]},{"id":"16d6abf6.083fac","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1661.1173782348633,"y":1499.5279383659363,"z":"293895e6.5ef0e2","wires":[["a4857175.d87198","53e77c9e.f7a794","d6907b4c.cf3028"]]},{"id":"586982ec.1e8c34","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2145.506773206922,"y":1516.9444912274676,"z":"293895e6.5ef0e2","wires":[["33454633.eca53a"]]},{"id":"33454633.eca53a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2322.649642944336,"y":1518.194444179535,"z":"293895e6.5ef0e2","wires":[["47e7c181.61d528"]]},{"id":"53e77c9e.f7a794","type":"set","name":"set aic-clli","xml":"<set>\n<parameter name='service-data.network-request-input.aic-clli' value='`$aai.complex.physical-location-id`' />\n\n","comments":"","x":1885.617935180664,"y":1506.4723238945007,"z":"293895e6.5ef0e2","wires":[]},{"id":"3d53982a.567ae","type":"switchNode","name":"switch relationship_length","xml":"<switch test='`$aai.cloud-region.relationship-list.relationship_length`'>\n","comments":"","outputs":1,"x":823.7287673950195,"y":1422.6945033073425,"z":"293895e6.5ef0e2","wires":[["184aa09c.2e8457","a9b6a010.eba4d8"]]},{"id":"184aa09c.2e8457","type":"other","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":1017.7288394504121,"y":1421.6945921050178,"z":"293895e6.5ef0e2","wires":[["6c249175.f5d028"]]},{"id":"a9b6a010.eba4d8","type":"other","name":"null","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1019.7288360595703,"y":1460.6946234703064,"z":"293895e6.5ef0e2","wires":[["6c249175.f5d028"]]},{"id":"d6907b4c.cf3028","type":"set","name":"set tmp.complex-found","xml":"<set>\n<parameter name='tmp.complex-found' value='true' />\n\n","comments":"","x":1923.950942993164,"y":1474.8056979179382,"z":"293895e6.5ef0e2","wires":[]},{"id":"3420d2a4.657bee","type":"switchNode","name":"switch tmp.complex-found","xml":"<switch test='`$tmp.complex-found`'>\n","comments":"","outputs":1,"x":821.728889465332,"y":1582.9167323112488,"z":"293895e6.5ef0e2","wires":[["c4def4b4.63fea"]]},{"id":"c4def4b4.63fea","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1039.228889465332,"y":1582.2778162956238,"z":"293895e6.5ef0e2","wires":[["62b19f9d.67a67"]]},{"id":"bc99eab5.63fc78","type":"outcome","name":"outcome Contrail","xml":"<outcome value='Contrail'>\n","comments":"","outputs":1,"x":1072.8397598266602,"y":1730.8609957695007,"z":"293895e6.5ef0e2","wires":[["ad2de5e.0feaf98"]]},{"id":"98ca247b.003d6","type":"outcome","name":"outcome AIC_SR_IOV","xml":"<outcome value='AIC_SR_IOV'>\n","comments":"","outputs":1,"x":1106.8397903442383,"y":2073.8611178398132,"z":"293895e6.5ef0e2","wires":[["f42f3f68.8503f8"]]},{"id":"47e7c181.61d528","type":"switchNode","name":"switch region","xml":"<switch test='`$aai.complex.region`'>\n","comments":"","outputs":1,"x":2519.7289123535156,"y":1517.8609776496887,"z":"293895e6.5ef0e2","wires":[["eeb7c55f.544058","e483bf22.b6c018","6194657.fd9b99c","bd683dd1.b3f298","88a51647.0a80d8","d24339dd.e70008","78064e5a.452108","fa0d0769.128ad8"]]},{"id":"eeb7c55f.544058","type":"other","name":"CA","xml":"<outcome value='CA'>\n","comments":"","outputs":1,"x":2762.9591522216797,"y":1458.8888869285583,"z":"293895e6.5ef0e2","wires":[["6b7a7bfb.ed67c4"]]},{"id":"e483bf22.b6c018","type":"other","name":"US","xml":"<outcome value='US'>\n","comments":"","outputs":1,"x":2761.0343704223633,"y":1490.932584285736,"z":"293895e6.5ef0e2","wires":[["6b7a7bfb.ed67c4"]]},{"id":"6194657.fd9b99c","type":"other","name":"LA","xml":"<outcome value='LA'>\n","comments":"","outputs":1,"x":2759.605728149414,"y":1524.8611035346985,"z":"293895e6.5ef0e2","wires":[["6b7a7bfb.ed67c4"]]},{"id":"bd683dd1.b3f298","type":"other","name":"EMEA","xml":"<outcome value='EMEA'>\n","comments":"","outputs":1,"x":2759.7844581604004,"y":1556.1111493110657,"z":"293895e6.5ef0e2","wires":[["6b7a7bfb.ed67c4"]]},{"id":"88a51647.0a80d8","type":"other","name":"AP","xml":"<outcome value='AP'>\n","comments":"","outputs":1,"x":2759.605796813965,"y":1589.8611550331116,"z":"293895e6.5ef0e2","wires":[["6b7a7bfb.ed67c4"]]},{"id":"d24339dd.e70008","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2761.0343132019043,"y":1621.1110577583313,"z":"293895e6.5ef0e2","wires":[["de868ff7.e2f398"]]},{"id":"6b7a7bfb.ed67c4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2918.7285770840117,"y":1486.3612209426033,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"878c8d61.5c11c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1056.8398056030273,"y":2360.3060030937195,"z":"293895e6.5ef0e2","wires":[["964d0759.ba21c"]]},{"id":"1f720674.eca1b2","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3029.839500427246,"y":1706.0834078788757,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"25845c0e.13752c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3086.840057373047,"y":2086.083400249481,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"ba3daf8e.1a127","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3128.8395919799805,"y":2344.083531200886,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"c87d3fb.61607c","type":"call","name":"call process-eipam-pools","xml":"<call module='GENERIC-RESOURCE-API' rpc='process-eipam-pools' mode='sync' >\n","comments":"tmp.level should be set to 1","outputs":1,"x":817.4753398895264,"y":2476.4619154930115,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"67411a15.4513fc","type":"call","name":"call GENERIC-RESOURCE-API:create-l3-subnet","xml":"<call module='GENERIC-RESOURCE-API' rpc='create-l3-subnet' mode='sync' >\n","comments":"tmp.level should be set to 1","outputs":1,"x":904.6861925125122,"y":2648.2196526527405,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"4db8414c.fd2348","type":"set","name":"set process-eipam-action","xml":"<set>\n<parameter name='tmp.process-eipam-action' value='assign' />\n","comments":"","x":820.9407939910889,"y":2437.4621596336365,"z":"293895e6.5ef0e2","wires":[]},{"id":"fe0c8615.109c78","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.process-eipam-pools:REQID\"/>\n<parameter name=\"field3\" value=\"`$network-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Values after process-eipam\"/>\n<parameter name=\"field5\" value=\"`level1-v4-mask`\"/>\n<parameter name=\"field6\" value=\"`$tmp.l3-network.level1.v4.mask`\"/>\n<parameter name=\"field7\" value=\"`level1-v4-ipprefix`\"/>\n<parameter name=\"field8\" value=\"`$tmp.l3-network.level1.v4.ip-prefix`\"/>\n<parameter name=\"field9\" value=\"`level1-v4-entity-id`\"/>\n<parameter name=\"field10\" value=\"`$tmp.l3-network.level1.v4.entity-id`\"/>\n<parameter name=\"field11\" value=\"`level2-v4-mask`\"/>\n<parameter name=\"field12\" value=\"`$tmp.l3-network.level2.v4.mask`\"/>\n<parameter name=\"field13\" value=\"`level2-v4-ipprefix`\"/>\n<parameter name=\"field14\" value=\"`$tmp.l3-network.level2.v4.ip-prefix`\"/>\n<parameter name=\"field15\" value=\"`level2-v4-entity-id`\"/>\n<parameter name=\"field16\" value=\"`$tmp.l3-network.level2.v4.entity-id`\"/>\n\n\n","comments":"","outputs":1,"x":767.5917949676514,"y":2512.2438979148865,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"ad2de5e.0feaf98","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1284.8397903442383,"y":1729.8611178398132,"z":"293895e6.5ef0e2","wires":[["e335a0be.901ca","bbedd6ee.89d8b8"]]},{"id":"f42f3f68.8503f8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1332.839729309082,"y":2073.8611178398132,"z":"293895e6.5ef0e2","wires":[["1581aae3.4fadd5","18d89bc5.ccc5bc"]]},{"id":"e335a0be.901ca","type":"switchNode","name":"switch: network-model.use-ipv4","xml":"<switch test=\"`$network-model.use-ipv4`\">","comments":"","outputs":1,"x":1540.8396682739258,"y":1728.4169039726257,"z":"293895e6.5ef0e2","wires":[["8105ec47.183e"]]},{"id":"8105ec47.183e","type":"other","name":"Y","xml":"<outcome value='Y'>","comments":"","outputs":1,"x":1795.8397941589355,"y":1728.8454604148865,"z":"293895e6.5ef0e2","wires":[["3c8a3bf6.f3d274"]]},{"id":"3c8a3bf6.f3d274","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1968.4111137390137,"y":1729.274064540863,"z":"293895e6.5ef0e2","wires":[["f7696e6a.52691"]]},{"id":"1581aae3.4fadd5","type":"switchNode","name":"switch: network-model.use-ipv4","xml":"<switch test=\"`$network-model.use-ipv4`\">","comments":"","outputs":1,"x":1607.9509735107422,"y":2074.4169363975525,"z":"293895e6.5ef0e2","wires":[["d961b200.afc68"]]},{"id":"d961b200.afc68","type":"other","name":"Y","xml":"<outcome value='Y'>","comments":"","outputs":1,"x":1862.951099395752,"y":2077.8454928398132,"z":"293895e6.5ef0e2","wires":[["f24844ce.f2b368"]]},{"id":"f24844ce.f2b368","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2035.52241897583,"y":2078.27409696579,"z":"293895e6.5ef0e2","wires":[["71eecbd.b148b34"]]},{"id":"18d89bc5.ccc5bc","type":"switchNode","name":"switch: network-model.use-ipv6","xml":"<switch test=\"`$network-model.use-ipv6`\">","comments":"","outputs":1,"x":1627.9509353637695,"y":2295.4168429374695,"z":"293895e6.5ef0e2","wires":[["8e75cddf.18434"]]},{"id":"8e75cddf.18434","type":"other","name":"Y","xml":"<outcome value='Y'>","comments":"","outputs":1,"x":1882.9510612487793,"y":2298.84539937973,"z":"293895e6.5ef0e2","wires":[["587f23be.ee01f4"]]},{"id":"587f23be.ee01f4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2079.522392272949,"y":2297.2740817070007,"z":"293895e6.5ef0e2","wires":[["da0609b1.dd66e"]]},{"id":"bbedd6ee.89d8b8","type":"switchNode","name":"switch: network-model.use-ipv6","xml":"<switch test=\"`$network-model.use-ipv6`\">","comments":"","outputs":1,"x":1549.9509353637695,"y":1897.4168429374695,"z":"293895e6.5ef0e2","wires":[["3d360ef.f0501f2"]]},{"id":"3d360ef.f0501f2","type":"other","name":"Y","xml":"<outcome value='Y'>","comments":"","outputs":1,"x":1804.9510612487793,"y":1900.8453993797302,"z":"293895e6.5ef0e2","wires":[["cd4df9ff.6b5c6"]]},{"id":"cd4df9ff.6b5c6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2001.5223922729492,"y":1899.2740817070007,"z":"293895e6.5ef0e2","wires":[["34c49751.1e7d6"]]},{"id":"51656656.ba094","type":"other","name":"AIC_AIM_LANDING_NETWORK_V4","xml":"<outcome value='AIC_AIM_LANDING_NETWORK_V4'>","comments":"","outputs":1,"x":2786.8396224975586,"y":1770.9722323417664,"z":"293895e6.5ef0e2","wires":[["1f720674.eca1b2"]]},{"id":"82367816.ed7db8","type":"other","name":"AIC_ATM_UNPROTECTED_V6","xml":"<outcome value='AIC_ATM_UNPROTECTED_V6'>","comments":"","outputs":1,"x":2777.639846801758,"y":1875.972312450409,"z":"293895e6.5ef0e2","wires":[["9d1ac85b.f8dfc"]]},{"id":"16e5d844.ab3f38","type":"other","name":"AIC_ATM_PROTECTED_V6","xml":"<outcome value='AIC_ATM_PROTECTED_V6'>","comments":"","outputs":1,"x":2767.5284576416016,"y":1913.5281510353088,"z":"293895e6.5ef0e2","wires":[["9d1ac85b.f8dfc"]]},{"id":"9d1ac85b.f8dfc","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3035.078826904297,"y":1883.1736063957214,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"a6bdf612.22b0f8","type":"other","name":"AIC_AIM_LANDING_NETWORK_V6","xml":"<outcome value='AIC_AIM_LANDING_NETWORK_V6'>","comments":"","outputs":1,"x":2792.0789489746094,"y":1948.062430858612,"z":"293895e6.5ef0e2","wires":[["9d1ac85b.f8dfc"]]},{"id":"2321c9f0.8a0d9e","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2698.083278656006,"y":1985.6404280662537,"z":"293895e6.5ef0e2","wires":[["f448e026.7558"]]},{"id":"78064e5a.452108","type":"other","name":"USA","xml":"<outcome value='USA'>\n","comments":"","outputs":1,"x":2760.823974609375,"y":1375.0516905784607,"z":"293895e6.5ef0e2","wires":[["4c37cf50.e01f5"]]},{"id":"4c37cf50.e01f5","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2921.617383956909,"y":1375.5278687477112,"z":"293895e6.5ef0e2","wires":[["8c6aee9f.d4174"]]},{"id":"8c6aee9f.d4174","type":"set","name":"set USA to US as work around","xml":"<set>\n<parameter name='aai.complex.region' value='US' />\n","comments":"","x":3134.951187133789,"y":1375.527936220169,"z":"293895e6.5ef0e2","wires":[]},{"id":"fa0d0769.128ad8","type":"other","name":"CALA","xml":"<outcome value='CALA'>\n","comments":"","outputs":1,"x":2759.839797973633,"y":1406.972312450409,"z":"293895e6.5ef0e2","wires":[["fd734913.d51d4"]]},{"id":"fd734913.d51d4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2920.633207321167,"y":1407.4484906196594,"z":"293895e6.5ef0e2","wires":[["343172b0.f8f56e"]]},{"id":"343172b0.f8f56e","type":"set","name":"set CALA to LA as work around","xml":"<set>\n<parameter name='aai.complex.region' value='LA' />\n","comments":"","x":3133.967010498047,"y":1407.4485580921173,"z":"293895e6.5ef0e2","wires":[]},{"id":"ece618e.04a51e8","type":"set","name":"set object-path","xml":"<set>\n<parameter name='network-object-path'\n value=\"`$tmp.l3-network.self-link`\"/>\n \n","comments":"","x":657.9166507720947,"y":3737.571755886078,"z":"293895e6.5ef0e2","wires":[]},{"id":"44cca957.3504a8","type":"set","name":"set networkId","xml":"<set>\n<parameter name='networkId' value='`$tmp.l3-network.network-id`' />\n","comments":"","x":659.3451709747314,"y":3691.8573746681213,"z":"293895e6.5ef0e2","wires":[]},{"id":"ddf2d1ad.9086d","type":"set","name":"set network-level-oper-status","xml":"<set>\n<parameter name='service-data.networks.network[$nidx].network-data.network-level-oper-status.order-status' value='PendingCreate' />\n<parameter name='service-data.networks.network[$nidx].network-data.network-level-oper-status.last-rpc-action' value='`$network-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.networks.network[$nidx].network-data.network-level-oper-status.last-action' value='`$network-topology-operation-input.request-information.request-action`' />\n","comments":"","x":705.6308841705322,"y":3783.2860283851624,"z":"293895e6.5ef0e2","wires":[]},{"id":"2688708b.68097","type":"set","name":"set network in service-data","xml":"<set>\n<parameter name=\"service-data.networks.network[$nidx].network-id\" value='`$tmp.l3-network.network-id`' />\n<parameter name=\"service-data.networks.network[$nidx].network-data.network-topology.\" value='$network-topology.' />\n<parameter name=\"service-data.networks.network[$nidx].network-data.network-request-input.\" value='$x.' />\n<parameter name=\"service-data.networks.network_length\" value='`$nidx_len`' />\n\n","comments":"","x":729.1667032241821,"y":3611.6787384450436,"z":"293895e6.5ef0e2","wires":[]},{"id":"22bd05cf.445f7a","type":"set","name":"copy input to service-data","xml":"<set>\n<parameter name='service-data.networks.network[$nidx].network-data.sdnc-request-header.' value='`$network-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.networks.network[$nidx].network-data.request-information.' value='`$network-topology-operation-input.request-information.`' />\n<parameter name='service-data.networks.network[$nidx].network-data.service-information.' value='`$network-topology-operation-input.service-information.`' />\n<parameter name='service-data.networks.network[$nidx].network-data.network-information.' value='`$network-topology-operation-input.network-information.`' />\n<parameter name='service-data.networks.network[$nidx].network-data.network-request-input.' value='`$network-topology-operation-input.network-request-input.`' />\n","comments":"","x":808.0120086669922,"y":617.4404835700989,"z":"293895e6.5ef0e2","wires":[]},{"id":"b853c9fb.a4b158","type":"set","name":"set network-topology-identifier-structure in service-data","xml":"<set>\n<parameter name='network-topology.network-topology-identifier-structure.' value='`$tmp.l3-network.`' />\n<parameter name='network-topology.tenant' value='`$network-topology-operation-input.network-request-input.tenant`' />\n<parameter name='network-topology.onap-model-information.' value='`$network-topology-operation-input.network-information.onap-model-information.`' />\n<parameter name='network-topology.network-parameters.' value='`$network-topology-operation-input.network-request-input.network-parameters.`' />\n<parameter name='network-topology.aic-cloud-region' value='`$network-topology-operation-input.network-request-input.aic-cloud-region`' />","comments":"","x":833.9524354934692,"y":3475.4297680854797,"z":"293895e6.5ef0e2","wires":[]},{"id":"f387ea7a.cb332","type":"save","name":"save relationship: service-instance","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.l3-network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"service-instance\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"customer.global-customer-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$service-data.service-information.global-customer-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-key\" value=\"service-subscription.service-type\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-value\" value=\"`$service-data.service-information.subscription-service-type`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-key\" value=\"service-instance.service-instance-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-value\" value=\"`$service-data.service-information.service-instance-id`\" />","comments":"","outputs":1,"x":845.3147430419922,"y":3082.7002577781677,"z":"293895e6.5ef0e2","wires":[["7eb3a40a.7e9414","d1dfe3a9.bb9198"]]},{"id":"39ae8d85.6e5642","type":"save","name":"save AnAI - l3-network","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\t\tkey=\"l3-network.network-id = $tmp.l3-network.network-id\" >\n<!-- Create l3-network object -->\n<parameter name=\"network-id\" value=\"`$tmp.l3-network.network-id`\" />\n<parameter name=\"network-name\" value=\"`$tmp.l3-network.network-name`\" />\n<parameter name=\"network-type\" value=\"`$tmp.l3-network.network-type`\" />\n<parameter name=\"network-role\" value=\"`$tmp.l3-network.network-role`\" />\n<parameter name=\"network-technology\" value=\"`$tmp.l3-network.network-technology`\" />\n<parameter name=\"is-bound-to-vpn\" value=\"`$tmp.l3-network.is-bound-to-vpn-boolean`\" />\n<parameter name=\"service-id\" value=\"`$tmp.l3-network.service-id`\" />\n<parameter name=\"tenant-id\" value=\"`$network-topology-operation-input.network-request-information.tenant`\" />\n<parameter name=\"orchestration-status\" value=\"PendingCreate\" />\n<parameter name=\"persona-model-id\" value=\"`$tmp.l3-network.persona-model-id`\" />\n<parameter name=\"persona-model-version\" value=\"`$tmp.l3-network.persona-model-version`\" />\n<parameter name=\"persona-model-customization-id\" value=\"`$tmp.l3-network.persona-model-customization-id`\" />\n<parameter name=\"physical-network-name\" value=\"`$tmp.l3-network.physical-network-name`\" />\n<parameter name=\"is-provider-network\" value=\"`$tmp.l3-network.is-provider-network-boolean`\" />\n<parameter name=\"is-shared-network\" value=\"`$tmp.l3-network.is-shared-network-boolean`\" />\n<parameter name=\"is-external-network\" value=\"`$tmp.l3-network.is-external-network-boolean`\" />\n<parameter name=\"selflink\" value=\"`$tmp.l3-network.self-link`\" />\n","comments":"","outputs":1,"x":1171.1640014648438,"y":2786.46630859375,"z":"293895e6.5ef0e2","wires":[["17d2413.1f4be3f","eb5b34d1.4537b8"]]},{"id":"79a2f133.fd6f08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to save l3-network in AAI for network-id = ' + $tmp.l3-network.network-id`\" />\n","comments":"","x":1856.84326171875,"y":2660.759765625,"z":"293895e6.5ef0e2","wires":[]},{"id":"17d2413.1f4be3f","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1414.271484375,"y":2751.525390625,"z":"293895e6.5ef0e2","wires":[["6fed3d50.bda79c"]]},{"id":"efd11375.9b214","type":"save","name":"save AnAI - l3-network.subnets","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.l3-network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.subnet-id\" >\n<!-- Create l3-network object -->\n<parameter name=\"network-id\" value=\"`$tmp.l3-network.network-id`\" />\n<parameter name=\"subnet-id\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-id`\" />\n<parameter name=\"subnet-name\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-name`\" />\n<parameter name=\"gateway-address\" value=\"`$tmp.l3-network.subnet[$sidx].gateway-address`\" />\n<parameter name=\"network-start-address\" value=\"`$tmp.l3-network.subnet[$sidx].network-start-address`\" />\n<parameter name=\"cidr-mask\" value=\"`$tmp.l3-network.subnet[$sidx].cidr-mask`\" />\n<parameter name=\"ip-version\" value=\"`$tmp.l3-network.subnet[$sidx].ip-version`\" />\n<parameter name=\"dhcp-enabled\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-enabled`\" />\n<parameter name=\"orchestration-status\" value=\"PendingCreate\" />","comments":"","outputs":1,"x":2641.6993265151978,"y":2963.048982143402,"z":"293895e6.5ef0e2","wires":[["3828c6d6.552ef2","94c217d1.df75c8"]]},{"id":"78d9149.661776c","type":"for","name":"for 0..subnet_length","xml":"<for index='sidx' start='0' end='`$tmp.l3-network.subnet_length`' >\n","comments":"","outputs":1,"x":790.2557344436646,"y":2941.525412082672,"z":"293895e6.5ef0e2","wires":[["5be49735.084798"]]},{"id":"5be49735.084798","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1017.3984146118164,"y":2940.414363384247,"z":"293895e6.5ef0e2","wires":[["fcd830c9.2b335","aa132056.6dc0b8"]]},{"id":"3828c6d6.552ef2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2993.254143714905,"y":2922.381850719452,"z":"293895e6.5ef0e2","wires":[["cfb1639.9c505a"]]},{"id":"74426281.f93a14","type":"save","name":"save relationship: tenant and cloud-region","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.l3-network.network-id\" \n\tforce=\"true\" \n\tlocal-only=\"false\">\n\t<!-- create relationship-list -->\n\t<parameter name=\"relationship-list.relationship[0].related-to\" value=\"tenant\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"cloud-region.cloud-owner\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.cloud-region.cloud-owner`\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-key\" value=\"cloud-region.cloud-region-id\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-value\" value=\"`$network-topology-operation-input.network-request-input.aic-cloud-region`\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-key\" value=\"tenant.tenant-id\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-value\" value=\"`$network-topology-operation-input.network-request-input.tenant`\" />\n\t<parameter name=\"relationship-list.relationship[1].related-to\" value=\"cloud-region\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-key\" value=\"cloud-region.cloud-owner\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-value\" value=\"`$prop.cloud-region.cloud-owner`\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[1].relationship-key\" value=\"cloud-region.cloud-region-id\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[1].relationship-value\" value=\"`$network-topology-operation-input.network-request-input.aic-cloud-region`\" />\n\t\n\t","comments":"","outputs":1,"x":819.3033876419067,"y":3221.0969166755676,"z":"293895e6.5ef0e2","wires":[["a91d8420.27c3d","ff3870a3.9a1f6"]]},{"id":"a91d8420.27c3d","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1067.3033609390259,"y":3223.0968651771545,"z":"293895e6.5ef0e2","wires":[["f1d931a1.d7cc9"]]},{"id":"f1d931a1.d7cc9","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1255.6961889266968,"y":3222.732983112335,"z":"293895e6.5ef0e2","wires":[["567e8b7c.83f8bc","cd23b00b.cf80e"]]},{"id":"567e8b7c.83f8bc","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving tenant and cloud-region relationship for l3-network in AnAI where network-id = ' + $tmp.l3-network.network-id`\"/>","comments":"","x":1536.6843843460083,"y":3185.5465258061886,"z":"293895e6.5ef0e2","wires":[]},{"id":"94c217d1.df75c8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":3001.977288246155,"y":2960.0250391960144,"z":"293895e6.5ef0e2","wires":[["cfb1639.9c505a"]]},{"id":"ff3870a3.9a1f6","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1075.311203956604,"y":3264.930187702179,"z":"293895e6.5ef0e2","wires":[["f1d931a1.d7cc9"]]},{"id":"7eb3a40a.7e9414","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1081.4617080688477,"y":3081.8426909446716,"z":"293895e6.5ef0e2","wires":[["84965dc9.8283b"]]},{"id":"d1dfe3a9.bb9198","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1197.1847200393677,"y":3122.1523509025574,"z":"293895e6.5ef0e2","wires":[["84965dc9.8283b"]]},{"id":"718d3d64.92a56c","type":"delete","name":"delete l3-network","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\tkey=\"l3-network.network-id = $tmp.l3-network.network-id\">","comments":"","outputs":1,"x":2147.7791681289673,"y":3789.731879711151,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"c44d21c.69791e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Error writing to l3-network - ' + $tmp.error-message`\"/>","comments":"","x":2136.3833017349243,"y":3832.9278903007507,"z":"293895e6.5ef0e2","wires":[]},{"id":"cd23b00b.cf80e","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1839.2055559158325,"y":3793.733643054962,"z":"293895e6.5ef0e2","wires":[["718d3d64.92a56c","c44d21c.69791e","8a3142fd.49439","bccef547.3b91c"]]},{"id":"d329b682.7e474","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving subnet relationship for l3-network in AnAI where network-id = ' + $tmp.l3-network.network-id`\"/>","comments":"","x":3433.127190589905,"y":2937.239272594452,"z":"293895e6.5ef0e2","wires":[]},{"id":"cfb1639.9c505a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":3177.9844484329224,"y":2936.6677346229553,"z":"293895e6.5ef0e2","wires":[["d329b682.7e474","cd23b00b.cf80e"]]},{"id":"eb5b34d1.4537b8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1420.0809326171875,"y":2780.001708984375,"z":"293895e6.5ef0e2","wires":[["6fed3d50.bda79c"]]},{"id":"fcd830c9.2b335","type":"set","name":"set: tmp.subnet-id","xml":"<set>\n<parameter name=\"tmp.subnet-id\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-id`\"/>\n\t","comments":"","x":1239.1763610839844,"y":2909.239589214325,"z":"293895e6.5ef0e2","wires":[]},{"id":"aa132056.6dc0b8","type":"switchNode","name":"switch dhcp-enabled","xml":"<switch test='`$tmp.l3-network.subnet[$sidx].dhcp-enabled`'>\n","comments":"","outputs":1,"x":1246.8110847473145,"y":2945.5369839668274,"z":"293895e6.5ef0e2","wires":[["46412666.490af","71945c2.83a5c24"]]},{"id":"71945c2.83a5c24","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1482.9538803100586,"y":2875.3940329551697,"z":"293895e6.5ef0e2","wires":[["25aa1229.98f47e"]]},{"id":"46412666.490af","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1478.8110847473145,"y":2957.53710603714,"z":"293895e6.5ef0e2","wires":[["7387a680.64d7c8"]]},{"id":"603e3edd.83a648","type":"save","name":"save AnAI - l3-network.subnets","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.l3-network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.subnet-id\" >\n<!-- Create l3-network object -->\n<parameter name=\"network-id\" value=\"`$tmp.l3-network.network-id`\" />\n<parameter name=\"subnet-id\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-id`\" />\n<parameter name=\"subnet-name\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-name`\" />\n<parameter name=\"gateway-address\" value=\"`$tmp.l3-network.subnet[$sidx].gateway-address`\" />\n<parameter name=\"network-start-address\" value=\"`$tmp.l3-network.subnet[$sidx].network-start-address`\" />\n<parameter name=\"cidr-mask\" value=\"`$tmp.l3-network.subnet[$sidx].cidr-mask`\" />\n<parameter name=\"ip-version\" value=\"`$tmp.l3-network.subnet[$sidx].ip-version`\" />\n<parameter name=\"dhcp-start\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-start`\" />\n<parameter name=\"dhcp-end\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-end`\" />\n<parameter name=\"dhcp-enabled\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-enabled`\" />\n<parameter name=\"orchestration-status\" value=\"PendingCreate\" />","comments":"","outputs":1,"x":2678.9533462524414,"y":2884.7750086784363,"z":"293895e6.5ef0e2","wires":[["94c217d1.df75c8","3828c6d6.552ef2"]]},{"id":"25aa1229.98f47e","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1673.8423080444336,"y":2875.6163840293884,"z":"293895e6.5ef0e2","wires":[["e9475920.9956e8"]]},{"id":"7387a680.64d7c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1671.6997566223145,"y":2961.7594571113586,"z":"293895e6.5ef0e2","wires":[["2086000.752238"]]},{"id":"21dcdad4.c9af16","type":"for","name":"for 0..vpn-bindings_length","xml":"<for index='vidx' start='0' end='`$vpn-bindings_length`' >\n","comments":"","outputs":1,"x":1372.9954986572266,"y":3021.0925307273865,"z":"293895e6.5ef0e2","wires":[["64ff0d18.410094"]]},{"id":"6fc56656.d3bba","type":"switchNode","name":"switch hasVpnBindings","xml":"<switch test='`$hasVpnBindings`'>\n","comments":"","outputs":1,"x":813.6626319885254,"y":3022.0559372901917,"z":"293895e6.5ef0e2","wires":[["aae2ae89.17beb8"]]},{"id":"a022b704.0f945","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1174.329360961914,"y":3023.3889174461365,"z":"293895e6.5ef0e2","wires":[["21dcdad4.c9af16"]]},{"id":"44d0134d.af865c","type":"save","name":"save relationship: vpn_bindings","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.l3-network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"vpn-binding\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"vpn-binding.vpn-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$vpn-bindings[$vidx].binding-uuid`\" />","comments":"","outputs":1,"x":1834.329116821289,"y":3021.0556654930115,"z":"293895e6.5ef0e2","wires":[["26719dab.73de8a","359616a1.9e9092"]]},{"id":"26719dab.73de8a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2171.0686922073364,"y":3026.5311121940613,"z":"293895e6.5ef0e2","wires":[["86119166.1b5a6"]]},{"id":"86119166.1b5a6","type":"block","name":"block","xml":"<block>","atomic":"false","outputs":1,"x":2327.9615716934204,"y":3026.1672196388245,"z":"293895e6.5ef0e2","wires":[["cd23b00b.cf80e","f91a0178.d1d88"]]},{"id":"359616a1.9e9092","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2180.099091529846,"y":3060.8095412254333,"z":"293895e6.5ef0e2","wires":[["86119166.1b5a6"]]},{"id":"64ff0d18.410094","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1590.6622467041016,"y":3023.0554213523865,"z":"293895e6.5ef0e2","wires":[["44d0134d.af865c"]]},{"id":"84965dc9.8283b","type":"block","name":"block","xml":"<block>","atomic":"false","outputs":1,"x":1273.6255340576172,"y":3081.389070034027,"z":"293895e6.5ef0e2","wires":[["cd23b00b.cf80e","aab89d3a.4c2d68"]]},{"id":"aab89d3a.4c2d68","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving service instance relationship for l3-network in AnAI where network-id = ' + $tmp.l3-network.network-id`\"/>","comments":"","x":1498.6255340576172,"y":3080.0556960105896,"z":"293895e6.5ef0e2","wires":[]},{"id":"f91a0178.d1d88","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving vpn binding relationship for l3-network in AnAI where network-id = ' + $tmp.l3-network.network-id`\"/>","comments":"","x":2555.6254663467407,"y":3025.388970851898,"z":"293895e6.5ef0e2","wires":[]},{"id":"aae2ae89.17beb8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1007.0435943603516,"y":3022.8532729148865,"z":"293895e6.5ef0e2","wires":[["a022b704.0f945"]]},{"id":"6c88ef63.8cc9","type":"switchNode","name":"switch network-technology","xml":"<switch test='`$network-model.network-technology`'>\n","comments":"","outputs":1,"x":776.376935005188,"y":3304.8531613349915,"z":"293895e6.5ef0e2","wires":[["748972ed.d13a4c"]]},{"id":"748972ed.d13a4c","type":"outcome","name":"outcome AIC_SR_IOV","xml":"<outcome value='AIC_SR_IOV'>\n","comments":"","outputs":1,"x":1079.2659120559692,"y":3306.2974972724915,"z":"293895e6.5ef0e2","wires":[["57356804.69abb"]]},{"id":"57356804.69abb","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1297.2656679153442,"y":3304.297619342804,"z":"293895e6.5ef0e2","wires":[["5b36388c.88f4b8","bf9ed5a9.b8b25"]]},{"id":"5b36388c.88f4b8","type":"save","name":"save AnAI - segmentation-assignment","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"segmentation-assignment\" \n\t\tkey=\"l3-network.network-id = $tmp.l3-network.network-id \n\t\t\tAND segmentation-assignment.segmentation-id = $tmp.l3-network.segmentation-id\" >\n<!-- Create segmentation-assignment object -->\n<parameter name=\"network-id\" value=\"`$tmp.l3-network.network-id`\" />\n<parameter name=\"segmentation-id\" value=\"`$tmp.l3-network.segmentation-id`\" />\n","comments":"","outputs":1,"x":1576.3768129348755,"y":3360.631115436554,"z":"293895e6.5ef0e2","wires":[["a98c5ab8.58a478","940d5b93.11a8e8"]]},{"id":"a98c5ab8.58a478","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1845.3768129348755,"y":3337.6312375068665,"z":"293895e6.5ef0e2","wires":[["fd0ca65b.b97618"]]},{"id":"940d5b93.11a8e8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1854.0999574661255,"y":3375.274425983429,"z":"293895e6.5ef0e2","wires":[["fd0ca65b.b97618"]]},{"id":"4829eae1.9d750c","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving segmentation-assignment for l3-network in AnAI where network-id = ' + $tmp.l3-network.network-id`\"/>","comments":"","x":2416.91649723053,"y":3354.1553416252136,"z":"293895e6.5ef0e2","wires":[]},{"id":"fd0ca65b.b97618","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2161.77391910553,"y":3353.5838084220886,"z":"293895e6.5ef0e2","wires":[["4829eae1.9d750c","cd23b00b.cf80e"]]},{"id":"449b0da0.8a9ffc","type":"execute","name":"execute readProperties","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties'>\n                  <parameter name='contextPrefix' value='prop'/>\n                  <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api.properties'/>\n","comments":"","outputs":1,"x":1551.3770570755005,"y":3254.519915431738,"z":"293895e6.5ef0e2","wires":[["25ce2041.ac8048","d0a813d7.fa3ff"]]},{"id":"25ce2041.ac8048","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1752.3769273757935,"y":3225.5199093818665,"z":"293895e6.5ef0e2","wires":[["1ae3834b.4454e5"]]},{"id":"d0a813d7.fa3ff","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1746.3769273757935,"y":3261.5199093818665,"z":"293895e6.5ef0e2","wires":[["2ca720cb.3108a8"]]},{"id":"e9c5ff44.a1485","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while reading default segmentation-assignment for l3-network in AnAI where network-id = ' + $tmp.l3-network.network-id`\"/>","comments":"","x":2286.0435724258423,"y":3247.1863474845886,"z":"293895e6.5ef0e2","wires":[]},{"id":"2ca720cb.3108a8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2054.9009866714478,"y":3262.6150584220886,"z":"293895e6.5ef0e2","wires":[["e9c5ff44.a1485","cd23b00b.cf80e"]]},{"id":"e34c5712.24c058","type":"set","name":"set: tmp.l3-network.segmentation-id","xml":"<set>\n\t<parameter name=\"tmp.l3-network.segmentation-id\" value=\"`$prop.default.segmentation-assignment`\"/>","comments":"","x":2318.0435724258423,"y":3215.1863474845886,"z":"293895e6.5ef0e2","wires":[]},{"id":"1ae3834b.4454e5","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2060.9009866714478,"y":3226.6150584220886,"z":"293895e6.5ef0e2","wires":[["e34c5712.24c058"]]},{"id":"bf9ed5a9.b8b25","type":"set","name":"set: segmentionat-d=1","xml":"<set>\n\t<parameter name=\"tmp.l3-network.segmentation-id\" value=\"1\"/>","comments":"","x":1531.3611116409302,"y":3327.7104182243347,"z":"293895e6.5ef0e2","wires":[]},{"id":"7fa6dac9.08cd2c","type":"comment","name":"future if need from property","info":"","comments":"","x":1549.9327211380005,"y":3219.853167384863,"z":"293895e6.5ef0e2","wires":[]},{"id":"e9475920.9956e8","type":"switchNode","name":"switch gateway-address","xml":"<switch test='`$tmp.l3-network.subnet[$sidx].gateway-address`'>\n","comments":"","outputs":1,"x":1893.8055953979492,"y":2875.9485545158386,"z":"293895e6.5ef0e2","wires":[["d00c210f.09e218","73807347.1a078c"]]},{"id":"d00c210f.09e218","type":"outcome","name":"outcome NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2220.2341089248657,"y":2848.3294129371643,"z":"293895e6.5ef0e2","wires":[["cc593137.6c9098"]]},{"id":"73807347.1a078c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2195.9483766555786,"y":2884.0438027381897,"z":"293895e6.5ef0e2","wires":[["293cfd18.c5497a"]]},{"id":"293cfd18.c5497a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2432.376754760742,"y":2884.472623348236,"z":"293895e6.5ef0e2","wires":[["603e3edd.83a648"]]},{"id":"6aed81c2.0cf788","type":"save","name":"save AnAI - l3-network.subnets","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.l3-network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.subnet-id\" >\n<!-- Create l3-network object -->\n<parameter name=\"network-id\" value=\"`$tmp.l3-network.network-id`\" />\n<parameter name=\"subnet-id\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-id`\" />\n<parameter name=\"subnet-name\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-name`\" />\n<parameter name=\"network-start-address\" value=\"`$tmp.l3-network.subnet[$sidx].network-start-address`\" />\n<parameter name=\"cidr-mask\" value=\"`$tmp.l3-network.subnet[$sidx].cidr-mask`\" />\n<parameter name=\"ip-version\" value=\"`$tmp.l3-network.subnet[$sidx].ip-version`\" />\n<parameter name=\"dhcp-start\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-start`\" />\n<parameter name=\"dhcp-end\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-end`\" />\n<parameter name=\"dhcp-enabled\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-enabled`\" />\n<parameter name=\"orchestration-status\" value=\"PendingCreate\" />","comments":"","outputs":1,"x":2676.662612915039,"y":2849.329619884491,"z":"293895e6.5ef0e2","wires":[["3828c6d6.552ef2","94c217d1.df75c8"]]},{"id":"cc593137.6c9098","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2445.8001747131348,"y":2850.5987181663513,"z":"293895e6.5ef0e2","wires":[["6aed81c2.0cf788"]]},{"id":"2086000.752238","type":"switchNode","name":"switch gateway-address","xml":"<switch test='`$tmp.l3-network.subnet[$sidx].gateway-address`'>\n","comments":"","outputs":1,"x":1903.091323852539,"y":2960.663068294525,"z":"293895e6.5ef0e2","wires":[["9af99333.562788","9a5f4664.851838"]]},{"id":"9af99333.562788","type":"outcome","name":"outcome NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2229.519814491272,"y":2927.329685688019,"z":"293895e6.5ef0e2","wires":[["2d9e9ce0.f017a4"]]},{"id":"9a5f4664.851838","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2205.234082221985,"y":2963.044075489044,"z":"293895e6.5ef0e2","wires":[["98a4ceda.f14d78"]]},{"id":"98a4ceda.f14d78","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2406.6626710891724,"y":2964.4727396965027,"z":"293895e6.5ef0e2","wires":[["efd11375.9b214"]]},{"id":"2d9e9ce0.f017a4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2414.3718156814575,"y":2927.7416338920593,"z":"293895e6.5ef0e2","wires":[["acec681.34a3c18"]]},{"id":"acec681.34a3c18","type":"save","name":"save AnAI - l3-network.subnets","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.l3-network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.subnet-id\" >\n<!-- Create l3-network object -->\n<parameter name=\"network-id\" value=\"`$tmp.l3-network.network-id`\" />\n<parameter name=\"subnet-id\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-id`\" />\n<parameter name=\"subnet-name\" value=\"`$tmp.l3-network.subnet[$sidx].subnet-name`\" />\n<parameter name=\"network-start-address\" value=\"`$tmp.l3-network.subnet[$sidx].network-start-address`\" />\n<parameter name=\"cidr-mask\" value=\"`$tmp.l3-network.subnet[$sidx].cidr-mask`\" />\n<parameter name=\"ip-version\" value=\"`$tmp.l3-network.subnet[$sidx].ip-version`\" />\n<parameter name=\"dhcp-enabled\" value=\"`$tmp.l3-network.subnet[$sidx].dhcp-enabled`\" />\n<parameter name=\"orchestration-status\" value=\"PendingCreate\" />","comments":"","outputs":1,"x":2639.5196352005005,"y":2924.472321987152,"z":"293895e6.5ef0e2","wires":[["3828c6d6.552ef2","94c217d1.df75c8"]]},{"id":"4acd25ef.ab1094","type":"switchNode","name":"switch service-id","xml":"<switch test='`$tmp.l3-network.service-id`'>\n","comments":"","outputs":1,"x":781.0436401367188,"y":2772.853515625,"z":"293895e6.5ef0e2","wires":[["7f021e9b.a5c1c8","3b389f88.ce9ab8"]]},{"id":"7f021e9b.a5c1c8","type":"outcome","name":"outcome NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":970.0436401367188,"y":2751.853515625,"z":"293895e6.5ef0e2","wires":[["eb4c65af.abd668"]]},{"id":"3b389f88.ce9ab8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":945.0436401367188,"y":2786.853515625,"z":"293895e6.5ef0e2","wires":[["39ae8d85.6e5642"]]},{"id":"eb4c65af.abd668","type":"save","name":"save AnAI - l3-network","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\t\tkey=\"l3-network.network-id = $tmp.l3-network.network-id\" >\n<!-- Create l3-network object -->\n<parameter name=\"network-id\" value=\"`$tmp.l3-network.network-id`\" />\n<parameter name=\"network-name\" value=\"`$tmp.l3-network.network-name`\" />\n<parameter name=\"network-type\" value=\"`$tmp.l3-network.network-type`\" />\n<parameter name=\"network-role\" value=\"`$tmp.l3-network.network-role`\" />\n<parameter name=\"network-technology\" value=\"`$tmp.l3-network.network-technology`\" />\n<parameter name=\"is-bound-to-vpn\" value=\"`$tmp.l3-network.is-bound-to-vpn-boolean`\" />\n<parameter name=\"tenant-id\" value=\"`$network-topology-operation-input.network-request-information.tenant`\" />\n<parameter name=\"orchestration-status\" value=\"PendingCreate\" />\n<parameter name=\"persona-model-id\" value=\"`$tmp.l3-network.persona-model-id`\" />\n<parameter name=\"persona-model-version\" value=\"`$tmp.l3-network.persona-model-version`\" />\n<parameter name=\"persona-model-customization-id\" value=\"`$tmp.l3-network.persona-model-customization-id`\" />\n<parameter name=\"physical-network-name\" value=\"`$tmp.l3-network.physical-network-name`\" />\n<parameter name=\"is-provider-network\" value=\"`$tmp.l3-network.is-provider-network-boolean`\" />\n<parameter name=\"is-shared-network\" value=\"`$tmp.l3-network.is-shared-network-boolean`\" />\n<parameter name=\"is-external-network\" value=\"`$tmp.l3-network.is-external-network-boolean`\" />\n<parameter name=\"selflink\" value=\"`$tmp.l3-network.self-link`\" />\n","comments":"","outputs":1,"x":1177.0436401367188,"y":2751.853515625,"z":"293895e6.5ef0e2","wires":[["17d2413.1f4be3f","eb5b34d1.4537b8"]]},{"id":"7852b58.654cd4c","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='' value='' />\n","comments":"","x":658.7499485015869,"y":3850.904838413,"z":"293895e6.5ef0e2","wires":[]},{"id":"31213429.ff2f4c","type":"switchNode","name":"switch network-model.is-bound-to-vpn","xml":"<switch test='`$network-model.is-bound-to-vpn`'>\n","comments":"","outputs":1,"x":842.7500457763672,"y":756.000009059906,"z":"293895e6.5ef0e2","wires":[["61668342.b78f24"]]},{"id":"61668342.b78f24","type":"other","name":"outcome Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1107.7500495910645,"y":756.0000100135803,"z":"293895e6.5ef0e2","wires":[["6143b1fe.e94e"]]},{"id":"6143b1fe.e94e","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n","atomic":"true","comments":"","outputs":1,"x":1270.5000915527344,"y":756.4999985694885,"z":"293895e6.5ef0e2","wires":[["4068bc26.c234d4"]]},{"id":"a2810608.412cb","type":"get-resource","name":"get-resource vpn-binding","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"vpn-binding\" \n\t\tkey=\"vpn-binding.vpn-id = $vpn-bindings[$vidx].binding-uuid\"\n        pfx='aai.vpnBinding' local-only='false' >\n\n","comments":"","outputs":1,"x":2552.0715866088867,"y":804.2738480567932,"z":"293895e6.5ef0e2","wires":[["3ec769c5.3b69b6","95bdee60.3a7e48","43fc7f1b.eab248"]]},{"id":"3ec769c5.3b69b6","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2788.027919769287,"y":776.0278038978577,"z":"293895e6.5ef0e2","wires":[["c81ef1d0.c56528"]]},{"id":"95bdee60.3a7e48","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2779.7779846191406,"y":810.6111693382263,"z":"293895e6.5ef0e2","wires":[["c81ef1d0.c56528"]]},{"id":"43fc7f1b.eab248","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2784.1388664245605,"y":740.3889183998108,"z":"293895e6.5ef0e2","wires":[["fcfdef84.8935f"]]},{"id":"fcfdef84.8935f","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2949.1388664245605,"y":740.3889183998108,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"426bb16f.c9bb2","type":"comment","name":"pull vpn binding from db table vs field","info":"","comments":"","x":2150.212989807129,"y":733.9232773780823,"z":"293895e6.5ef0e2","wires":[]},{"id":"613afd9.7dfc984","type":"for","name":"for 0..vpn-bindings_length","xml":"<for index='vidx' start='0' end='`$vpn-bindings_length`' >\n","comments":"","outputs":1,"x":2124.578311920166,"y":802.7328181266785,"z":"293895e6.5ef0e2","wires":[["7f145964.210d18"]]},{"id":"7f145964.210d18","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2333.053966522217,"y":804.812225818634,"z":"293895e6.5ef0e2","wires":[["a2810608.412cb"]]},{"id":"8c080bcb.479bc","type":"set","name":"set hasVpnBindings=true","xml":"<set>\n<parameter name='hasVpnBindings' value='true' />\n","comments":"","x":2122.752670288086,"y":771.3042178153992,"z":"293895e6.5ef0e2","wires":[]},{"id":"4068bc26.c234d4","type":"get-resource","name":"get-resource VPN_BINDINGS","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VPN_BINDINGS WHERE network_customization_uuid = $network-topology-operation-input.network-information.onap-model-information.model-customization-uuid'\n  pfx='vpn-bindings[]'>\n\n","comments":"","outputs":1,"x":1511.2817916870117,"y":756.6746144294739,"z":"293895e6.5ef0e2","wires":[["c7f6e79c.4ad44","cebe8d92.34fa78","60da40f1.463e18"]]},{"id":"cebe8d92.34fa78","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1733.710334777832,"y":849.3888840675354,"z":"293895e6.5ef0e2","wires":[["a3070615.94f568"]]},{"id":"60da40f1.463e18","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1729.0433616638184,"y":888.722198009491,"z":"293895e6.5ef0e2","wires":[["afdf36e1.3edc88"]]},{"id":"c7f6e79c.4ad44","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1729.219367980957,"y":810.8148484230042,"z":"293895e6.5ef0e2","wires":[["ded06bb2.f6b7e8"]]},{"id":"ded06bb2.f6b7e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1899.424690246582,"y":810.3888840675354,"z":"293895e6.5ef0e2","wires":[["8c080bcb.479bc","613afd9.7dfc984"]]},{"id":"4c3863ea.780a64","type":"set","name":"set onap-model-info","xml":"<set>\n<parameter name='tmp.l3-network.model-invariant-id' value=\"`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`\" />\n<parameter name='tmp.l3-network.model-version-id' value=\"`$network-topology-operation-input.network-information.onap-model-information.model-version`\" />\n<parameter name='tmp.l3-network.model-customization-id' value=\"`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`\" />\n<parameter name='s-onap-model-information.model-invariant-uuid' value='`$service-model.invariant-uuid`' />\n<parameter name='s-onap-model-information.model-version' value='`$service-model.version`' />\n<parameter name='s-onap-model-information.model-uuid' value='`$service-model.service-uuid`' />\n<parameter name='s-onap-model-information.model-name' value='`$service-model.name`' />\n<parameter name='n-onap-model-information.model-invariant-uuid' value='`$network-model.invariant-uuid`' />\n<parameter name='n-onap-model-information.model-version' value='`$network-model.version`' />\n<parameter name='n-onap-model-information.model-uuid' value='`$network-model.uuid`' />\n<parameter name='n-onap-model-information.model-name' value='`$network-model.name`' />","comments":"","x":790.75390625,"y":680.00390625,"z":"293895e6.5ef0e2","wires":[]},{"id":"f43b1f67.085098","type":"set","name":"set onap-model-info with mysql data","xml":"<set>\n<parameter name='network-data.service-information.ecomp-model-information.' value=\"`$s-onap-model-information.`\" />\n<parameter name='network-data.network-information.ecomp-model-information.' value=\"`$n-onap-model-information.`\" />\n","comments":"","x":840.0039215087891,"y":713.0039143562317,"z":"293895e6.5ef0e2","wires":[]},{"id":"bccef547.3b91c","type":"call","name":"call naming-policy-generate-name to rollback name","xml":"<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n","comments":"","outputs":1,"x":2259.3800477981567,"y":3746.5046286582947,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"8a3142fd.49439","type":"set","name":"set parameters for generate-unique-name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.context-id' value='`$tmp.l3-network.network-id`' />\n<parameter name='naming-policy-generate-name-input.naming-type' value='NETWORK' />\n<parameter name='naming-policy-generate-name-input.action' value='DELETE' />\n\n\n","comments":"","x":2219.630108833313,"y":3702.5046887397766,"z":"293895e6.5ef0e2","wires":[]},{"id":"23833e07.99958a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2802.681553840637,"y":3751.7563996315002,"z":"293895e6.5ef0e2","wires":[["ef665ef5.eb2a98","1521636d.390f25","f96be9ed.5e0508"]]},{"id":"1521636d.390f25","type":"call","name":"call naming-policy-generate-name to rollback name","xml":"<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n","comments":"","outputs":1,"x":3109.1060609817505,"y":3754.5275464057922,"z":"293895e6.5ef0e2","wires":[[]]},{"id":"ef665ef5.eb2a98","type":"set","name":"set parameters for generate-unique-name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.context-id' value='`$tmp.l3-network.network-id`' />\n<parameter name='naming-policy-generate-name-input.naming-type' value='NETWORK' />\n<parameter name='naming-policy-generate-name-input.action' value='DELETE' />\n\n\n","comments":"","x":3081.8562364578247,"y":3716.777464389801,"z":"293895e6.5ef0e2","wires":[]},{"id":"48995ae5.67c19c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1261.505012512207,"y":1320.5048537254333,"z":"293895e6.5ef0e2","wires":[["f8c096c7.aac118","23833e07.99958a"]]},{"id":"cdcb6a66.a11cf","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1257.755012512207,"y":1360.5048537254333,"z":"293895e6.5ef0e2","wires":[["9eef74f0.a1e1b","23833e07.99958a"]]},{"id":"f8c096c7.aac118","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Cloud region not found in AAI\"/>","comments":"","x":1495.2551574707031,"y":1319.2548823356628,"z":"293895e6.5ef0e2","wires":[]},{"id":"f96be9ed.5e0508","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Error writing to l3-network - ' + $tmp.error-message`\"/>","comments":"","x":2988.75519657135,"y":3790.2547554969788,"z":"293895e6.5ef0e2","wires":[]},{"id":"9eef74f0.a1e1b","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Error retrieving cloud region from AAI\"/>","comments":"","x":1495.2551651000977,"y":1360.5047507286072,"z":"293895e6.5ef0e2","wires":[]},{"id":"6c249175.f5d028","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1212.754867553711,"y":1439.2548804283142,"z":"293895e6.5ef0e2","wires":[["7597524b.c05c54","23833e07.99958a"]]},{"id":"7597524b.c05c54","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Cloud region missing relationships in AAI\"/>","comments":"","x":1445.2550048828125,"y":1438.004909992218,"z":"293895e6.5ef0e2","wires":[]},{"id":"62b19f9d.67a67","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1227.754867553711,"y":1581.7548804283142,"z":"293895e6.5ef0e2","wires":[["16974f9.b28683","23833e07.99958a"]]},{"id":"16974f9.b28683","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Complex not found in AAI\"/>","comments":"","x":1460.255012512207,"y":1581.7549214363098,"z":"293895e6.5ef0e2","wires":[]},{"id":"cffd5f4a.151d08","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2320.254867553711,"y":1562.7548804283142,"z":"293895e6.5ef0e2","wires":[["debc7aba.29c54","23833e07.99958a"]]},{"id":"54196261.94e404","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2316.504867553711,"y":1603.7548804283142,"z":"293895e6.5ef0e2","wires":[["5cd4560a.256b98","23833e07.99958a"]]},{"id":"debc7aba.29c54","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Complex not found in AAI\"/>","comments":"","x":2550.505195617676,"y":1565.5049233436584,"z":"293895e6.5ef0e2","wires":[]},{"id":"5cd4560a.256b98","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Error retrieving complex from AA\"/>","comments":"","x":2550.0050201416016,"y":1606.754777431488,"z":"293895e6.5ef0e2","wires":[]},{"id":"de868ff7.e2f398","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2934.9424209594727,"y":1621.5049204826355,"z":"293895e6.5ef0e2","wires":[["7e5580d1.9fcf78","23833e07.99958a"]]},{"id":"7e5580d1.9fcf78","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Complex.region unknown\"/>","comments":"","x":3155.4425735473633,"y":1621.5048174858093,"z":"293895e6.5ef0e2","wires":[]},{"id":"a31343ec.e76f08","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2871.192367553711,"y":1813.0048804283142,"z":"293895e6.5ef0e2","wires":[["7107b96e.fe9278","23833e07.99958a"]]},{"id":"7107b96e.fe9278","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Invalid address plan for VIPR\"/>","comments":"","x":3091.6925201416016,"y":1813.004777431488,"z":"293895e6.5ef0e2","wires":[]},{"id":"f448e026.7558","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2893.692367553711,"y":1985.5048804283142,"z":"293895e6.5ef0e2","wires":[["dbb7226b.0953e","23833e07.99958a"]]},{"id":"dbb7226b.0953e","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"EIPAM V6 Address plan should be null\"/>","comments":"","x":3114.1925201416016,"y":1985.504777431488,"z":"293895e6.5ef0e2","wires":[]},{"id":"cc9dd635.98df68","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2881.192367553711,"y":2189.254880428314,"z":"293895e6.5ef0e2","wires":[["13bc9b22.80b915","23833e07.99958a"]]},{"id":"13bc9b22.80b915","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Invalid address plan for SRIOV\"/>","comments":"","x":3101.6925201416016,"y":2189.254777431488,"z":"293895e6.5ef0e2","wires":[]},{"id":"418a0270.b2cdfc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2882.7283096313477,"y":2487.5765719413757,"z":"293895e6.5ef0e2","wires":[["9e54712b.194c98","23833e07.99958a"]]},{"id":"9e54712b.194c98","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Invalid ipv6 address plan for SRIOV\"/>","comments":"","x":3103.2284622192383,"y":2487.5764689445496,"z":"293895e6.5ef0e2","wires":[]},{"id":"964d0759.ba21c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1256.5049285888672,"y":2361.7546763420105,"z":"293895e6.5ef0e2","wires":[["8d799b4e.f02948","23833e07.99958a"]]},{"id":"8d799b4e.f02948","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Invalid network-technology.  Only AIC_SR_IOV and Contrail are supported for network automated flow\"/>","comments":"","x":1489.0050735473633,"y":2361.754717350006,"z":"293895e6.5ef0e2","wires":[]},{"id":"a3070615.94f568","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1907.4422454833984,"y":849.2548804283142,"z":"293895e6.5ef0e2","wires":[["21bdae32.51c022","23833e07.99958a"]]},{"id":"afdf36e1.3edc88","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1903.6922454833984,"y":889.2548804283142,"z":"293895e6.5ef0e2","wires":[["743cb5.96e0034c","23833e07.99958a"]]},{"id":"21bdae32.51c022","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Network model is_bound_to_vpn=true but no vpn_binding is present\"/>","comments":"","x":2141.1923904418945,"y":848.0049090385437,"z":"293895e6.5ef0e2","wires":[]},{"id":"743cb5.96e0034c","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"Unexpected error retrieving vpn binding\"/>","comments":"","x":2141.192398071289,"y":889.254777431488,"z":"293895e6.5ef0e2","wires":[]},{"id":"c81ef1d0.c56528","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2971.1924209594727,"y":795.504891872406,"z":"293895e6.5ef0e2","wires":[["ea8a27d2.4dd83","23833e07.99958a"]]},{"id":"ea8a27d2.4dd83","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'No vpn binding found for network-model.vpn-binding=' \n    + $vpn-bindings[$vidx].binding-uuid`\"/>","comments":"","x":3208.6925735473633,"y":795.5047888755798,"z":"293895e6.5ef0e2","wires":[]},{"id":"88aa0e0f.278a3","type":"set","name":"set: tmp.error-message to \"\"","xml":"<set>\n\t<parameter name=\"tmp.error-message\" value=\"\"/>","comments":"","x":812.2191925048828,"y":561.9334692955017,"z":"293895e6.5ef0e2","wires":[]},{"id":"c6bc7f3a.1e281","type":"switchNode","name":"switch tmp.nidx ","xml":"<switch test=\"`$tmp.nidx`\">\n\n","comments":"","outputs":1,"x":772.0412635803223,"y":444.2912917137146,"z":"293895e6.5ef0e2","wires":[["4352bf81.36bca8","2ea25c4b.e9b804"]]},{"id":"4352bf81.36bca8","type":"outcome","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":960.6126480102539,"y":442.8626751899719,"z":"293895e6.5ef0e2","wires":[["56d49ab9.18493c"]]},{"id":"56d49ab9.18493c","type":"switchNode","name":"switch service-data.networks_length","xml":"<switch test='`$service-data.networks.network_length`'>\n","comments":"","outputs":1,"x":1209.8387413024902,"y":444.0535922050476,"z":"293895e6.5ef0e2","wires":[["d27193d0.539848","ee3cafd7.3c4058"]]},{"id":"d27193d0.539848","type":"other","name":"Null","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1502.934063911438,"y":442.86290073394775,"z":"293895e6.5ef0e2","wires":[["d8ac678b.d3417"]]},{"id":"d8ac678b.d3417","type":"set","name":"set nidx","xml":"<set>\n<parameter name='nidx' value='0' />\n<parameter name='nidx_len' value='1'/>\n","comments":"","x":1682.934105873108,"y":440.43431663513184,"z":"293895e6.5ef0e2","wires":[]},{"id":"ee3cafd7.3c4058","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1505.791226387024,"y":468.5771732330322,"z":"293895e6.5ef0e2","wires":[["2d29b63f.71cd2a"]]},{"id":"2d29b63f.71cd2a","type":"set","name":"set nidx","xml":"<set>\n<parameter name='nidx' value='`$service-data.networks.network_length`' />\n<parameter name='nidx_len' value='`$service-data.networks.network_length + 1`' />\n","comments":"","x":1684.3626565933228,"y":477.4343738555908,"z":"293895e6.5ef0e2","wires":[]},{"id":"2ea25c4b.e9b804","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":962.0412826538086,"y":481.4341473579407,"z":"293895e6.5ef0e2","wires":[["e1048edf.258b38"]]},{"id":"e1048edf.258b38","type":"set","name":"set nidx","xml":"<set>\n<parameter name='nidx' value='`$tmp.nidx`' />\n<parameter name='nidx_len' value='`$service-data.networks.network_length`' />\n","comments":"","x":1124.8984069824219,"y":481.4341731071472,"z":"293895e6.5ef0e2","wires":[]},{"id":"cb4086d2.f6774","type":"set","name":"set rename for call to create-l3-subnet","xml":"<set>\n<parameter name='v4.entity-id' value='`$tmp.l3-network.level2.v4.entity-id`' />\n<parameter name='v4.ip-prefix' value='`$tmp.l3-network.level2.v4.ip-prefix`' />\n<parameter name='v4.mask' value='`$tmp.l3-network.level2.v4.mask`' />\n<parameter name='v6.entity-id' value='`$tmp.l3-network.level2.v6.entity-id`' />\n<parameter name='v6.ip-prefix' value='`$tmp.l3-network.level2.v6.ip-prefix`' />\n<parameter name='v6.mask' value='`$tmp.l3-network.level2.v6.mask`' />\n\n","comments":"","x":868.7499980926514,"y":2563.5000014305115,"z":"293895e6.5ef0e2","wires":[]},{"id":"6fed3d50.bda79c","type":"block","name":"block","xml":"<block>","atomic":"false","outputs":1,"x":1595.5,"y":2752.25,"z":"293895e6.5ef0e2","wires":[["de7043fa.21dad","cd23b00b.cf80e"]]},{"id":"de7043fa.21dad","type":"set","name":"set: tmp.error-message","xml":"<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'Failed to save l3-network in AAI for network-id = ' + $tmp.l3-network.network-id`\"/>","comments":"","x":1823.1638946533203,"y":2751.4717512130737,"z":"293895e6.5ef0e2","wires":[]}]