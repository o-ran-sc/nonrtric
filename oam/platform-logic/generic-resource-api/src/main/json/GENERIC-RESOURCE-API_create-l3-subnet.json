[{"id":"3b3edc85.ab1344","type":"dgstart","name":"DGSTART","outputs":1,"x":150.00558471679688,"y":85.7198715209961,"z":"a263af79.79be7","wires":[["429059f7.f33678"]]},{"id":"429059f7.f33678","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":251.29129028320312,"y":139.9579849243164,"z":"a263af79.79be7","wires":[["58648933.aece68"]]},{"id":"58648933.aece68","type":"method","name":"create-l3-subnet","xml":"<method rpc='create-l3-subnet' mode='sync'>\n","comments":"","outputs":1,"x":266.68421936035156,"y":189.4698715209961,"z":"a263af79.79be7","wires":[["cc7d688c.201a78"]]},{"id":"cc7d688c.201a78","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":246.505615234375,"y":322.66337418556213,"z":"a263af79.79be7","wires":[["c94352c5.b5422","65a18c1c.198844","5f314f68.e8147","ad05df62.8a915"]]},{"id":"c94352c5.b5422","type":"set","name":"set subnet-idx","xml":"<set>\n<parameter name='subnet-idx' value='0' />\n","comments":"","x":441.43414306640625,"y":268.0055866241455,"z":"a263af79.79be7","wires":[]},{"id":"41cd298c.322138","type":"comment","name":"These should be set from previous eipam call","info":"<parameter name='v4.entity-id' value='' />\n<parameter name='v4.ip-prefix' value='' />\n<parameter name='v4.mask' value='' />\n<parameter name='v4.pool.pre-existing' value='false' />\n<parameter name='v4.subnet.pre-existing' value='false' />\n<parameter name='v6.entity-id' value='' />\n<parameter name='v6.ip-prefix' value='' />\n<parameter name='v6.mask' value='' />\n<parameter name='v6.pool.pre-existing' value='false' />\n<parameter name='v6.subnet.pre-existing' value='false' />","comments":"","x":534.0055847167969,"y":211.7198715209961,"z":"a263af79.79be7","wires":[]},{"id":"65a18c1c.198844","type":"switchNode","name":"switch entity-id for ipv4","xml":"<switch test='`$v4.entity-id`'>\n","comments":"","outputs":1,"x":460.0055847167969,"y":309.7199020385742,"z":"a263af79.79be7","wires":[["854594c0.16f268","53bfd99f.8ad458"]]},{"id":"854594c0.16f268","type":"other","name":"outcome null","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":680.0055847167969,"y":307.7199020385742,"z":"a263af79.79be7","wires":[["51383492.a7dd5c"]]},{"id":"53bfd99f.8ad458","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":668.0055847167969,"y":347.7199020385742,"z":"a263af79.79be7","wires":[["869b294f.c72378"]]},{"id":"869b294f.c72378","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":853.3389434814453,"y":349.71990156173706,"z":"a263af79.79be7","wires":[["d454dc5c.f174f","b4fb0b53.9a3d18","36834eb2.20a752","e5c2c06.c5d234","d1565405.985fa8","ac9925ae.9b6988"]]},{"id":"8b32054f.7f7dc8","type":"set","name":"set dhcp data","xml":"<set>\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-enabled' value='true' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-start' value='`$tmp.return.generate.dhcp-start-address`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-end' value='`$tmp.return.generate.dhcp-end-address`' />\n\n\n","comments":"","x":1795.862506866455,"y":454.624605178833,"z":"a263af79.79be7","wires":[]},{"id":"d454dc5c.f174f","type":"execute","name":"execute getSubnetAddresses","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"getSubnetAddresses\">\n\t<parameter name=\"ipAddress\" value=\"`$v4.ip-prefix`\" />\n\t<parameter name=\"ipVersion\" value=\"4\" />\n\t<parameter name=\"subnet\" value=\"`$v4.mask`\" />\n\t<parameter name=\"dhcp-enabled\" value=\"`$tmp.ipv4dhcp-enabled`\" />\n\t<parameter name=\"ctxGateway\" value=\"tmp.return.generate.gateway-address\" />\n\t<parameter name=\"ctxDhcpStart\" value=\"tmp.return.generate.dhcp-start-address\" />\n\t<parameter name=\"ctxDhcpEnd\" value=\"tmp.return.generate.dhcp-end-address\" />\n\n","comments":"","outputs":1,"x":1134.7198638916016,"y":350.243691444397,"z":"a263af79.79be7","wires":[["6a705282.6c129c"]]},{"id":"b4fb0b53.9a3d18","type":"switchNode","name":"switch network-model.ipv4-dhcp-enabled","xml":"<switch test='`$network-model.ipv4-dhcp-enabled`'>\n","comments":"","outputs":1,"x":1175.3707695007324,"y":432.65636825561523,"z":"a263af79.79be7","wires":[["c3c067b7.41a638","42a2b2d6.7cf19c"]]},{"id":"c3c067b7.41a638","type":"other","name":"Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1436.0847415924072,"y":455.98967456817627,"z":"a263af79.79be7","wires":[["917e88ed.2b9808"]]},{"id":"917e88ed.2b9808","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1596.560977935791,"y":455.98966121673584,"z":"a263af79.79be7","wires":[["8b32054f.7f7dc8"]]},{"id":"36834eb2.20a752","type":"set","name":"set subnet-idx","xml":"<set>\n<parameter name='subnet-idx' value='`$subnet-idx+1`' />\n\n","comments":"","x":1093.9420585632324,"y":470.2753372192383,"z":"a263af79.79be7","wires":[]},{"id":"5f314f68.e8147","type":"switchNode","name":"switch entity-id for ipv6","xml":"<switch test='`$v6.entity-id`'>\n","comments":"","outputs":1,"x":475.2066345214844,"y":840.0637540817261,"z":"a263af79.79be7","wires":[["a65c0af4.4d70c8","4df74206.a84fdc"]]},{"id":"a65c0af4.4d70c8","type":"other","name":"outcome null","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":695.2066345214844,"y":838.0637540817261,"z":"a263af79.79be7","wires":[["ba205c7d.e945b"]]},{"id":"4df74206.a84fdc","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":681.7780532836914,"y":892.7780342102051,"z":"a263af79.79be7","wires":[["727b7844.583018"]]},{"id":"d73bb4d7.941528","type":"set","name":"set l3network.subnet","xml":"<set>\n<parameter name='tmp.l3-network.subnet[$subnet-idx].orchestration-status' value='PendingCreate' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].subnet-id' value='`$v6.entity-id`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].subnet-name' value=\"`$tmp.l3-network.network-name + '_S' + $subnet-idx`\" />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].gateway-address' value='`$tmp.return.generate.gateway-address`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].network-start-address' value='`$v6.ip-prefix`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].cidr-mask' value='`$v6.mask`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].ip-version' value='`$network-model.ipv6-ip-version`' />\n\n\n","comments":"","x":1118.111442565918,"y":977.349461555481,"z":"a263af79.79be7","wires":[]},{"id":"727b7844.583018","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":876.6352310180664,"y":892.3494882583618,"z":"a263af79.79be7","wires":[["3d53eee1.30e0c2","d73bb4d7.941528","73f6dd4f.81ddf4","27c03eeb.0b85f2","eaee38c8.7b8d88","c92b4c1f.b65ae","c90b76dc.2a1ba8"]]},{"id":"2294d0ee.29409","type":"set","name":"set dhcp data","xml":"<set>\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-enabled' value='true' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-start' value='`$tmp.return.generate.dhcp-start-address`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-end' value='`$tmp.return.generate.dhcp-end-address`' />\n\n\n","comments":"","x":1792.7303581237793,"y":1012.7780170440674,"z":"a263af79.79be7","wires":[]},{"id":"3d53eee1.30e0c2","type":"execute","name":"execute getSubnetAddresses","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"getSubnetAddresses\">\n\t<parameter name=\"ipAddress\" value=\"`$v6.ip-prefix`\" />\n\t<parameter name=\"ipVersion\" value=\"6\" />\n\t<parameter name=\"subnet\" value=\"`$v6.mask`\" />\n\t<parameter name=\"dhcp-enabled\" value=\"`$tmp.ipv6dhcp-enabled`\" />\n\t<parameter name=\"ctxGateway\" value=\"tmp.return.generate.gateway-address\" />\n\t<parameter name=\"ctxDhcpStart\" value=\"tmp.return.generate.dhcp-start-address\" />\n\t<parameter name=\"ctxDhcpEnd\" value=\"tmp.return.generate.dhcp-end-address\" />\n\n","comments":"","outputs":1,"x":1146.587501525879,"y":939.3970737457275,"z":"a263af79.79be7","wires":[["94b54e56.a0f0e"]]},{"id":"73f6dd4f.81ddf4","type":"switchNode","name":"switch network-model.ipv6-dhcp-enabled","xml":"<switch test='`$network-model.ipv6-dhcp-enabled`'>\n","comments":"","outputs":1,"x":1171.524169921875,"y":1015.5716705322266,"z":"a263af79.79be7","wires":[["fefb428d.1732c","50b93b2a.2e0404"]]},{"id":"fefb428d.1732c","type":"other","name":"Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1432.9525928497314,"y":1014.1430864334106,"z":"a263af79.79be7","wires":[["abcd65a7.f44998"]]},{"id":"abcd65a7.f44998","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1593.4288291931152,"y":1014.1430730819702,"z":"a263af79.79be7","wires":[["2294d0ee.29409"]]},{"id":"6a705282.6c129c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1366.63525390625,"y":350.01617527008057,"z":"a263af79.79be7","wires":[["ec368668.c530d8"]]},{"id":"ec368668.c530d8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failed to generate ipv4 addresses using IpAddressTools\" />","comments":"","x":1538.3018035888672,"y":350.01617527008057,"z":"a263af79.79be7","wires":[]},{"id":"94b54e56.a0f0e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1376.6352005004883,"y":938.825605392456,"z":"a263af79.79be7","wires":[["f413c960.41b028"]]},{"id":"f413c960.41b028","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failed to generate ipv6 addresses using IpAddressTools\" />","comments":"","x":1548.3017501831055,"y":938.825605392456,"z":"a263af79.79be7","wires":[]},{"id":"ad05df62.8a915","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='' value='' />\n","comments":"","x":423.67224884033203,"y":956.2198286056519,"z":"a263af79.79be7","wires":[]},{"id":"27c03eeb.0b85f2","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.create-l3-subnet:REQID\"/>\n<parameter name=\"field3\" value=\"`$network-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"v6.entity-id\"/>\n<parameter name=\"field5\" value=\"`$v6.entity-id`\"/>\n\n\n\n","comments":"","outputs":1,"x":1077.656494140625,"y":876.1325225830078,"z":"a263af79.79be7","wires":[[]]},{"id":"ba205c7d.e945b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":873.5135269165039,"y":837.8467998504639,"z":"a263af79.79be7","wires":[["c6b4d0e6.ce574"]]},{"id":"c6b4d0e6.ce574","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.create-l3-subnet:REQID\"/>\n<parameter name=\"field3\" value=\"`$network-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"v6.entity-id\"/>\n<parameter name=\"field5\" value=\"null\"/>\n\n\n\n","comments":"","outputs":1,"x":1078.963430404663,"y":837.201283454895,"z":"a263af79.79be7","wires":[[]]},{"id":"e5c2c06.c5d234","type":"set","name":"set l3network.subnet","xml":"<set>\n<parameter name='tmp.l3-network.subnet[$subnet-idx].orchestration-status' value='PendingCreate' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].subnet-id' value='`$v4.entity-id`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].subnet-name' value=\"`$tmp.l3-network.network-name + '_S' + $subnet-idx`\" />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].gateway-address' value='`$tmp.return.generate.gateway-address`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].network-start-address' value='`$v4.ip-prefix`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].cidr-mask' value='`$v4.mask`' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].ip-version' value='`$network-model.ipv4-ip-version`' />\n","comments":"","x":1109.18017578125,"y":392.65635681152344,"z":"a263af79.79be7","wires":[]},{"id":"eaee38c8.7b8d88","type":"set","name":"set subnet-idx","xml":"<set>\n<parameter name='subnet-idx' value='`$subnet-idx+1`' />\n","comments":"","x":1089.894401550293,"y":1048.5610885620117,"z":"a263af79.79be7","wires":[]},{"id":"42a2b2d6.7cf19c","type":"other","name":"N","xml":"<outcome value='N'>\n","comments":"","outputs":1,"x":1438.6245346069336,"y":491.7039556503296,"z":"a263af79.79be7","wires":[["4660a249.73e4fc"]]},{"id":"63f501fc.70fdf","type":"set","name":"set dhcp data","xml":"<set>\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-enabled' value='false' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-start' value='' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-end' value='' />\n\n\n","comments":"","x":1798.6245346069336,"y":490.2753973007202,"z":"a263af79.79be7","wires":[]},{"id":"4660a249.73e4fc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1599.3230056762695,"y":491.64045333862305,"z":"a263af79.79be7","wires":[["63f501fc.70fdf"]]},{"id":"50b93b2a.2e0404","type":"other","name":"N","xml":"<outcome value='N'>\n","comments":"","outputs":1,"x":1431.005485534668,"y":1047.1324996948242,"z":"a263af79.79be7","wires":[["f642cedb.39506"]]},{"id":"d7221dbc.c5717","type":"set","name":"set dhcp data","xml":"<set>\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-enabled' value='false' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-start' value='' />\n<parameter name='tmp.l3-network.subnet[$subnet-idx].dhcp-end' value='' />\n\n\n","comments":"","x":1791.005485534668,"y":1045.7039413452148,"z":"a263af79.79be7","wires":[]},{"id":"f642cedb.39506","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1591.703956604004,"y":1047.0689973831177,"z":"a263af79.79be7","wires":[["d7221dbc.c5717"]]},{"id":"51383492.a7dd5c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":862.8627319335938,"y":262.8627166748047,"z":"a263af79.79be7","wires":[["17806f89.41dd2"]]},{"id":"17806f89.41dd2","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.create-l3-subnet:REQID\"/>\n<parameter name=\"field3\" value=\"`$network-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"v4.entity-id\"/>\n<parameter name=\"field5\" value=\"null\"/>\n\n\n\n","comments":"","outputs":1,"x":1021.2913055419922,"y":261.86271476745605,"z":"a263af79.79be7","wires":[[]]},{"id":"d1565405.985fa8","type":"set","name":"set subnet_length","xml":"<set>\n<parameter name='tmp.l3-network.subnet_length' value='`$subnet-idx`' />\n","comments":"","x":1107.1483154296875,"y":508.1484565734863,"z":"a263af79.79be7","wires":[]},{"id":"c92b4c1f.b65ae","type":"set","name":"set subnet-len","xml":"<set>\n<parameter name='tmp.l3-network.subnet_length' value='`$subnet-idx`' />\n","comments":"","x":1090.243637084961,"y":1081.1960220336914,"z":"a263af79.79be7","wires":[]},{"id":"ac9925ae.9b6988","type":"switchNode","name":"switch network-model.ipv4-dhcp-enabled","xml":"<switch test='`$network-model.ipv4-dhcp-enabled`'>\n","comments":"","outputs":1,"x":1175.11669921875,"y":316.16432189941406,"z":"a263af79.79be7","wires":[["c7113998.526c48","2c3956f7.33089a"]]},{"id":"3f22eec5.648e82","type":"set","name":"set dhcp boolean","xml":"<set>\n<parameter name='tmp.ipv4dhcp-enabled' value='true' />\n\n","comments":"","x":1783.1167545318604,"y":279.1643190383911,"z":"a263af79.79be7","wires":[]},{"id":"c7113998.526c48","type":"other","name":"Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1423.3389892578125,"y":279.5293884277344,"z":"a263af79.79be7","wires":[["72dcdb46.93b294"]]},{"id":"72dcdb46.93b294","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1583.8152256011963,"y":279.52937507629395,"z":"a263af79.79be7","wires":[["3f22eec5.648e82"]]},{"id":"2c3956f7.33089a","type":"other","name":"N","xml":"<outcome value='N'>\n","comments":"","outputs":1,"x":1425.8787822723389,"y":315.2436695098877,"z":"a263af79.79be7","wires":[["8acd180f.9188e8"]]},{"id":"3ff9eec6.bfb552","type":"set","name":"set dhcp boolean","xml":"<set>\n<parameter name='tmp.ipv4dhcp-enabled' value='false' />\n\n\n\n","comments":"","x":1784.8787841796875,"y":315.8151092529297,"z":"a263af79.79be7","wires":[]},{"id":"8acd180f.9188e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1586.5772533416748,"y":315.18016719818115,"z":"a263af79.79be7","wires":[["3ff9eec6.bfb552"]]},{"id":"c90b76dc.2a1ba8","type":"switchNode","name":"switch network-model.ipv6-dhcp-enabled","xml":"<switch test='`$network-model.ipv6-dhcp-enabled`'>\n","comments":"","outputs":1,"x":1187.11669921875,"y":908.1643218994141,"z":"a263af79.79be7","wires":[["90e6e52a.429f38","c5f1bd14.e6f7b"]]},{"id":"f62dd972.e08ee8","type":"set","name":"set dhcp boolean","xml":"<set>\n<parameter name='tmp.ipv6dhcp-enabled' value='true' />\n\n","comments":"","x":1792.11669921875,"y":864.1643218994141,"z":"a263af79.79be7","wires":[]},{"id":"90e6e52a.429f38","type":"other","name":"Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":1432.3389339447021,"y":865.5293912887573,"z":"a263af79.79be7","wires":[["e7d26d70.8c261"]]},{"id":"e7d26d70.8c261","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1592.815170288086,"y":865.5293779373169,"z":"a263af79.79be7","wires":[["f62dd972.e08ee8"]]},{"id":"c5f1bd14.e6f7b","type":"other","name":"N","xml":"<outcome value='N'>\n","comments":"","outputs":1,"x":1434.8787269592285,"y":901.2436723709106,"z":"a263af79.79be7","wires":[["217d22c5.3b376e"]]},{"id":"46544c35.ca6164","type":"set","name":"set dhcp boolean","xml":"<set>\n<parameter name='tmp.ipv6dhcp-enabled' value='false' />\n\n\n\n","comments":"","x":1794.8787269592285,"y":899.8151140213013,"z":"a263af79.79be7","wires":[]},{"id":"217d22c5.3b376e","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1595.5771980285645,"y":901.1801700592041,"z":"a263af79.79be7","wires":[["46544c35.ca6164"]]}]