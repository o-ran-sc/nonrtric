<service-logic
    xmlns='http://www.onap.org/sdnc/svclogic'
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>
    <method rpc='self-serve-aai-vf-module-put' mode='sync'>
        <block atomic="true">
            <switch test='`$ss.capability-name`'>
                <outcome value=''>
                    <return status="failure">
                        <parameter name="ack-final" value="Y" />
                        <parameter name="error-code" value="500"/>
                        <parameter name="error-message" value="ss.capability-name is null" />
                    </return>
                </outcome>
            </switch>
            <switch test='`$ss.capability-action`'>
                <outcome value=''>
                    <return status="failure">
                        <parameter name="ack-final" value="Y" />
                        <parameter name="error-code" value="500"/>
                        <parameter name="error-message" value="ss.capability-action is null" />
                    </return>
                </outcome>
                <outcome value='assign'>
                    <block atomic='true'>
                        <block>
                            <set>
                                <parameter name='nidx' value='0' />
                            </set>
                            <for silentFailure='true' index="bidx" start="0" end="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`" >
                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='startsWith' emitsOutcome='true' >
                                    <parameter name="source" value="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`" />
                                    <parameter name="target" value="sriov"/>
                                    <outcome value='true'>
                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='endsWith' emitsOutcome='true' >
                                            <parameter name="source" value="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`" />
                                            <parameter name="target" value="_net_id"/>
                                            <outcome value='true'>
                                                <block>
                                                    <set>
                                                        <parameter name='ss.network[$nidx].netid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    </set>
                                                    <set>
                                                        <parameter name='nidx' value='`$nidx + 1`' />
                                                    </set>
                                                </block>
                                            </outcome>
                                        </execute>
                                    </outcome>
                                    <outcome value='false'>
                                        <switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`'>
                                            <outcome value='vf_module_id'>
                                                <set>
                                                    <parameter name='ss.param.vf-module-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vf-module-name'>
                                                <set>
                                                    <parameter name='ss.param.vf-module-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='volume-group-id'>
                                                <set>
                                                    <parameter name='ss.param.volume-group-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='volume-group-name'>
                                                <set>
                                                    <parameter name='ss.param.volume-group-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='aic-cloud-region'>
                                                <set>
                                                    <parameter name='ss.param.aic-cloud-region' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-name'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-name-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='oam-interface-name'>
                                                <set>
                                                    <parameter name='ss.param.oam-interface-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.oam-interface-name-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='=âlo0-interface-name'>
                                                <set>
                                                    <parameter name='ss.param.lo0-interface-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.lo0-interface-name-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='ipv4-oam-address'>
                                                <set>
                                                    <parameter name='ss.param.ipv4-oam-address' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.ipv4-oam-address-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='ipv4-oam-address-prefix'>
                                                <set>
                                                    <parameter name='ss.param.ipv4-oam-address-prefix' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.ipv4-oam-address-prefix-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='loopback0_ipv4_address'>
                                                <set>
                                                    <parameter name='ss.param.loopback0-ipv4-address' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.loopback0-ipv4-address-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='ipv4-loopback0-address'>
                                                <set>
                                                    <parameter name='ss.param.ipv4-loopback0-address' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.ipv4-loopback0-address-index' value='`bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='nfc-naming-code'>
                                                <set>
                                                    <parameter name='ss.param.nfc-naming-code' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.nfc-naming-code-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='nfc-function'>
                                                <set>
                                                    <parameter name='ss.param.nfc-function' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.nfc-function-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-model-customization-uuid'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-model-customization-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-model-customization-uuid-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-model-invariant-uuid'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-model-invariant-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-model-invariant-uuid-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-model-version'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-model-version' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-model-version-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='as-number'>
                                                <set>
                                                    <parameter name='ss.param.as-number' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.as-number-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vlan-id-outer'>
                                                <set>
                                                    <parameter name='ss.param.vlan-id-outer' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vlan-id-outer-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='availability_zone_0'>
                                                <set>
                                                    <parameter name='ss.param.availability-zone-0' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.availability-zone-0-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='aai-vf-module-put'>
                                                <block>
                                                    <set>
                                                        <parameter name='ss.param.aai-vf-module-put-index' value='`$bidx`' />
                                                    </set>
                                                    <for silentFailure='true' index="kidx" start="0" end="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key_length`">
                                                        <switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].name`'>
                                                            <outcome value='generic-vnf'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.generic-vnf' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='vf-module'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.vf-module' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='volume-group'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.volume-group' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='vnfc'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.vnfc' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='connection-points'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.connection-points' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='l-interface'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.l-interface' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='l3-netework'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.l3-network' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                        </switch>
                                                    </for>
                                                </block>
                                            </outcome>
                                        </switch>
                                    </outcome>
                                </execute>
                            </for>
                            <set>
                                <parameter name='ss.param.vnf-id' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-id`' />
                            </set>
                        </block>
                        <switch test="`$ss.resource-key.generic-vnf`">
                            <outcome value='generic-vnf'>
                                <block atomic='true'>
                                    <get-resource plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id "
	pfx="tmp.aai.vnf" >
                                        <outcome value='failure'>
                                            <block atomic='true'>
                                                <set>
                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$ss.param.aai-vnf-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                </set>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'Encountered error to get generic-vnf with vnf-id=' + $ss.param.vnf-id + ' from AnAI'`" />
                                                </return>
                                            </block>
                                        </outcome>
                                        <outcome value='not-found'>
                                            <block atomic='true'>
                                                <set>
                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$ss.param.aai-vnf-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                </set>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'generic-vnf.vnf-name with vnf-id=' + $ss.param.vnf-id + ' not found in AAI. '`" />
                                                </return>
                                            </block>
                                        </outcome>
                                    </get-resource>
                                    <switch test="`$ss.param.ipv4-loopback0-address != ''`">
                                        <outcome value='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >
                                                <parameter name='source' value='`$ss.param.ipv4-loopback0-address`' />
                                                <parameter name='target' value='$' />
                                                <outcome value='true'>
                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                        <parameter name="logger" value="message-log"/>
                                                        <parameter name="field1" value="__TIMESTAMP__"/>
                                                        <parameter name="field2" value="`'ss.param.ipv4-loopback0-address = ' + $ss.param.ipv4-loopback0-address`"/>
                                                        <parameter name="field3" value="__SKIP ipv4-loopback0-address update for generic-vnf in AnAI__"/>
                                                    </record>
                                                </outcome>
                                                <outcome value='false'>
                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                        <parameter name="ipv4-loopback0-address" value='`$ss.param.ipv4-loopback0-address`' />
                                                        <outcome value='failure'>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`'Failed to update generic-vnf.ipv4-loopback0-address in AnAI with ipv4-loopback0-address=' + $ss.param.ipv4-loopback0-address + '; ' + $error-message`" />
                                                            </return>
                                                        </outcome>
                                                        <outcome value='not-found'>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`" />
                                                            </return>
                                                        </outcome>
                                                        <outcome value='success'>
                                                            <set>
                                                                <parameter name='ss.ipv4-loopback0-address-updated' value='true' />
                                                            </set>
                                                        </outcome>
                                                    </update>
                                                </outcome>
                                            </execute>
                                        </outcome>
                                    </switch>
                                    <switch test="`$ss.param.ipv4-oam-address != ''`">
                                        <outcome value='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >
                                                <parameter name='source' value='`$ss.param.ipv4-oam-address`' />
                                                <parameter name='target' value='$' />
                                                <outcome value='true'>
                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                        <parameter name="logger" value="message-log"/>
                                                        <parameter name="field1" value="__TIMESTAMP__"/>
                                                        <parameter name="field2" value="`'ss.param.ipv4-oam-address = ' + $ss.param.ipv4-oam-address`"/>
                                                        <parameter name="field3" value="__SKIP ipv4-oam-address update for generic-vnf in AnAI__"/>
                                                    </record>
                                                </outcome>
                                                <outcome value='false'>
                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                        <parameter name="ipv4-oam-address" value='`$ss.param.ipv4-oam-address`' />
                                                        <outcome value='failure'>
                                                            <block atomic='true'>
                                                                <block>
                                                                    <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                        <outcome value='true'>
                                                                            <block>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                </record>
                                                                                <set>
                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                </set>
                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                    <outcome value='failure'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </update>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value="`'Failed to update generic-vnf.ipv4-oam-address in AnAI with ipv4-oam-address=' + $ss.param.ipv4-oam-address + '; ' + $error-message`" />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                        <outcome value='not-found'>
                                                            <block atomic='true'>
                                                                <block>
                                                                    <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                        <outcome value='true'>
                                                                            <block>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                </record>
                                                                                <set>
                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                </set>
                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                    <outcome value='failure'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </update>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value="`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI' + '; ' + $error-message`" />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                        <outcome value='success'>
                                                            <set>
                                                                <parameter name='ss.ipv4-oam-address-updated' value='true' />
                                                            </set>
                                                        </outcome>
                                                    </update>
                                                </outcome>
                                            </execute>
                                        </outcome>
                                    </switch>
                                    <switch test="`$ss.param.as-number != ''`">
                                        <outcome value='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >
                                                <parameter name='source' value='`$ss.param.as-number`' />
                                                <parameter name='target' value='$' />
                                                <outcome value='true'>
                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                        <parameter name="logger" value="message-log"/>
                                                        <parameter name="field1" value="__TIMESTAMP__"/>
                                                        <parameter name="field2" value="`'ss.param.as-number = ' + $ss.param.as-number`"/>
                                                        <parameter name="field3" value="__SKIP as-number update for generic-vnf in AnAI__"/>
                                                    </record>
                                                </outcome>
                                                <outcome value='false'>
                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                        <parameter name="as-number" value='`$ss.param.as-number`' />
                                                        <outcome value='failure'>
                                                            <block atomic='true'>
                                                                <block>
                                                                    <block>
                                                                        <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                            <outcome value='true'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                    </record>
                                                                                    <set>
                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                    </set>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.ipv4-oam-address-updated`">
                                                                        <outcome value='true'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-oam-address update"/>
                                                                                </record>
                                                                                <set>
                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                </set>
                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                    <outcome value='failure'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-oam-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-oam-address update completed. '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </update>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value="`'Failed to update generic-vnf.as-number in AnAI with as-number=' + $ss.param.as-number + '; ' + $error-message`" />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                        <outcome value='not-found'>
                                                            <block atomic='true'>
                                                                <block>
                                                                    <block>
                                                                        <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                            <outcome value='true'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                    </record>
                                                                                    <set>
                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                    </set>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.ipv4-oam-address-updated`">
                                                                        <outcome value='true'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-oam-address update"/>
                                                                                </record>
                                                                                <set>
                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                </set>
                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                    <outcome value='failure'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-oam-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-oam-address update completed. '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </update>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value="`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`" />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                        <outcome value='success'>
                                                            <set>
                                                                <parameter name='ss.as-number-updated' value='true' />
                                                            </set>
                                                        </outcome>
                                                    </update>
                                                </outcome>
                                            </execute>
                                        </outcome>
                                    </switch>
                                    <switch test="`$ss.param.vlan-id-outer != ''`">
                                        <outcome value='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >
                                                <parameter name='source' value='`$ss.param.vlan-id-outer`' />
                                                <parameter name='target' value='$' />
                                                <outcome value='true'>
                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                        <parameter name="logger" value="message-log"/>
                                                        <parameter name="field1" value="__TIMESTAMP__"/>
                                                        <parameter name="field2" value="`'ss.param.vlan-id-outer = ' + $ss.param.vlan-id-outer`"/>
                                                        <parameter name="field3" value="__SKIP vlan-id-outer update for generic-vnf in AnAI__"/>
                                                    </record>
                                                </outcome>
                                                <outcome value='false'>
                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                        <parameter name="vlan-id-outer" value='`$ss.param.vlan-id-outer`' />
                                                        <outcome value='failure'>
                                                            <block atomic='true'>
                                                                <block>
                                                                    <block>
                                                                        <block>
                                                                            <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                                <outcome value='true'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                        </record>
                                                                                        <set>
                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                        </set>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                            <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.ipv4-oam-address-updated`">
                                                                            <outcome value='true'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-oam-address update"/>
                                                                                    </record>
                                                                                    <set>
                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                    </set>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-oam-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-oam-address update completed. '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.as-number-updated`">
                                                                        <outcome value='true'>
                                                                            <block>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.as-number update"/>
                                                                                </record>
                                                                                <set>
                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                </set>
                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                    <outcome value='failure'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.as-number update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.as-number update completed. '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </update>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value="`'Failed to update generic-vnf.vlan-id-outer in AnAI with as-number=' + $ss.param.as-number  + '; ' + $error-message`" />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                        <outcome value='not-found'>
                                                            <block atomic='true'>
                                                                <block>
                                                                    <block>
                                                                        <block>
                                                                            <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                                <outcome value='true'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                        </record>
                                                                                        <set>
                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                        </set>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                            <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.ipv4-oam-address-updated`">
                                                                            <outcome value='true'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-oam-address update"/>
                                                                                    </record>
                                                                                    <set>
                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                    </set>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-oam-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-oam-address update completed. '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.as-number-updated`">
                                                                        <outcome value='true'>
                                                                            <block>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.as-number update"/>
                                                                                </record>
                                                                                <set>
                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                </set>
                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                    <outcome value='failure'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.as-number update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.as-number update completed. '`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </update>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value="`'Failed to update generic-vnf because vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`" />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                        <outcome value='success'>
                                                            <set>
                                                                <parameter name='ss.vlan-id-outer-updated' value='true' />
                                                            </set>
                                                        </outcome>
                                                    </update>
                                                </outcome>
                                            </execute>
                                        </outcome>
                                    </switch>
                                    <switch test="`$ss.param.availability-zone-0 != ''`">
                                        <outcome value='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >
                                                <parameter name='source' value='`$ss.param.availability-zone-0`' />
                                                <parameter name='target' value='$' />
                                                <outcome value='true'>
                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                        <parameter name="logger" value="message-log"/>
                                                        <parameter name="field1" value="__TIMESTAMP__"/>
                                                        <parameter name="field2" value="`'ss.param.availability-zone-0 = ' + $ss.param.availability-zone-0`"/>
                                                        <parameter name="field3" value="__SKIP availability-zone-0 update for generic-vnf in AnAI__"/>
                                                    </record>
                                                </outcome>
                                                <outcome value='false'>
                                                    <block atomic='true'>
                                                        <set>
                                                            <parameter name='ss.availability-zone.related-link' 
	value="`'/aai/v$/cloud-infrastructure/cloud-regions/cloud-region/' + 
	$prop.cloud-region.cloud-owner + '/' + $ss.param.aic-cloud-region + 
	'/availability-zones/availability-zone/' + 
	$ss.param.availability-zone-0`" />
                                                        </set>
                                                        <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf:relationship-list"
		key="generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                            <parameter name="relationship-list.relationship[0].related-to" value="availability-zone" />
                                                            <parameter name="relationship-list.relationship[0].related-link" value="`$ss.availability-zone.related-link`" />
                                                            <!--
<parameter name="relationship-list.relationship[0].related-to" value="availability-zone" /><parameter name="relationship-list.relationship[0].relationship-data[0].relationship-key" value="cloud-region.cloud-owner" /><parameter name="relationship-list.relationship[0].relationship-data[0].relationship-value" value="`$prop.cloud-region.cloud-owner`" /><parameter name="relationship-list.relationship[0].relationship-data[1].relationship-key" value="cloud-region.cloud-region-id" /><parameter name="relationship-list.relationship[0].relationship-data[1].relationship-value" value="`$ss.param.aic-cloud-region`" /><parameter name="relationship-list.relationship[0].relationship-data[2].relationship-key" value="availability-zone.availability-zone-name" /><parameter name="relationship-list.relationship[0].relationship-data[2].relationship-value" value="`$ss.param.availability-zone-0`" />
-->
                                                            <outcome value='failure'>
                                                                <block atomic='true'>
                                                                    <block>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                                        <outcome value='true'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.ipv4-oam-address-updated`">
                                                                                    <outcome value='true'>
                                                                                        <block atomic='true'>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-oam-address update"/>
                                                                                            </record>
                                                                                            <set>
                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                            </set>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-oam-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-oam-address update completed. '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.as-number-updated`">
                                                                                <outcome value='true'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK generic-vnf.as-number update"/>
                                                                                        </record>
                                                                                        <set>
                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                        </set>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                            <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.as-number update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.as-number update completed. '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.vlan-id-outer-updated`">
                                                                            <outcome value='true'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf.vlan-id-outer update"/>
                                                                                    </record>
                                                                                    <set>
                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                    </set>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.vlan-id-outer update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.vlan-id-outer update completed. '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <return status='failure'>
                                                                        <parameter name='error-code' value='500' />
                                                                        <parameter name='error-message' value="`'Failed to save availability-zone relationship for generic-vnf in AnAI with availability-zone-name =' + $ss.param.as-number + '; ' + $error-message`" />
                                                                    </return>
                                                                </block>
                                                            </outcome>
                                                            <outcome value='not-found'>
                                                                <block atomic='true'>
                                                                    <block>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.ipv4-loopback0-address-updated`">
                                                                                        <outcome value='true'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-loopback0-address update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-loopback0-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-loopback0-address update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.ipv4-oam-address-updated`">
                                                                                    <outcome value='true'>
                                                                                        <block atomic='true'>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK generic-vnf.ipv4-oam-address update"/>
                                                                                            </record>
                                                                                            <set>
                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                            </set>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.ipv4-oam-address update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.ipv4-oam-address update completed. '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.as-number-updated`">
                                                                                <outcome value='true'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK generic-vnf.as-number update"/>
                                                                                        </record>
                                                                                        <set>
                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                        </set>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                            <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.as-number update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.as-number update completed. '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.vlan-id-outer-updated`">
                                                                            <outcome value='true'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf.vlan-id-outer update"/>
                                                                                    </record>
                                                                                    <set>
                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                    </set>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf.vlan-id-outer update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf.vlan-id-outer update completed. '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <return status='failure'>
                                                                        <parameter name='error-code' value='500' />
                                                                        <parameter name='error-message' value="`'Failed to create availability-zone relationship because generic-vnf with vnf-id =' + $ss.param.vnf-id + ' is not found in AAI. ' + $error-message`" />
                                                                    </return>
                                                                </block>
                                                            </outcome>
                                                            <outcome value='success'>
                                                                <set>
                                                                    <parameter name='ss.availability-zone-0-updated' value='true' />
                                                                </set>
                                                            </outcome>
                                                        </save>
                                                    </block>
                                                </outcome>
                                            </execute>
                                        </outcome>
                                    </switch>
                                </block>
                            </outcome>
                        </switch>
                        <switch test="`$ss.resource-key.vf-module`">
                            <outcome value='vf-module'>
                                <block atomic='true'>
                                    <get-resource plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id "
	pfx="tmp.aai.vfmdoule" >
                                        <outcome value='failure'>
                                            <block atomic='true'>
                                                <block>
                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                        <outcome value='generic-vnf'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                </record>
                                                                <set>
                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                </set>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'Failed to get vf-module in AnAI with vf-module-id = ' + $ss.param.vf-module-id  + '; ' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                        <outcome value='not-found'>
                                            <block atomic='true'>
                                                <block>
                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                        <outcome value='generic-vnf'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                </record>
                                                                <set>
                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                </set>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'vf-module not found in AnAI with vf-module-id=' + $ss.param.vf-module-id + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                    </get-resource>
                                    <set>
                                        <parameter name='ss.selflink' value="`'restconf/config/GENERIC-RESOURCE-API:services/service/' + 
$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.service-instance-id + 
'/service-data/vnfs/vnf/' + 
$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.vnf-id + 
'/vnf-data/vf-modules/vf-module/' + 
$ss.param.vf-module-id + 
'/vf-module-data/vf-module-topology/'`" />
                                    </set>
                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                        <parameter name="vf-module-name" value='`$ss.param.vf-module-name`' />
                                        <parameter name="selflink" value='`$ss.selflink`' />
                                        <outcome value='failure'>
                                            <block atomic='true'>
                                                <block>
                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                        <outcome value='generic-vnf'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                </record>
                                                                <set>
                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                </set>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'Failed to update vf-module-name with vf-module-id = ' + $ss.param.vf-module-id + ' in AnAI; ' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                        <outcome value='not-found'>
                                            <block atomic='true'>
                                                <block>
                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                        <outcome value='generic-vnf'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                </record>
                                                                <set>
                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                </set>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'Failed to update vf-module-name with vf-module-id =' + $ss.param.vf-module-id + ' because vf-module is not found in AAI' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                    </update>
                                </block>
                            </outcome>
                        </switch>
                        <switch test="`$ss.resource-key.volume-group`">
                            <outcome value='volume-group'>
                                <block atomic='true'>
                                    <get-resource plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" 
	pfx="tmp.aai.volume-group" >
                                        <outcome value='failure'>
                                            <block atomic='true'>
                                                <block>
                                                    <block>
                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                            <outcome value='generic-vnf'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                    </record>
                                                                    <set>
                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                    </set>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vf-module`">
                                                        <outcome value='vf-module'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                </record>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'Failed to get volume-group in AnAI with volume-group-id = ' + $ss.param.volume-group-id  + '; ' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                        <outcome value='not-found'>
                                            <block atomic='true'>
                                                <block>
                                                    <block>
                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                            <outcome value='generic-vnf'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                    </record>
                                                                    <set>
                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                    </set>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vf-module`">
                                                        <outcome value='vf-module'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                </record>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'volume-group not found in AnAI with volume-group-id=' + $ss.param.volume-group-id  + '; ' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                    </get-resource>
                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                        <parameter name="volume-group-name" value='`$ss.param.volume-group-name`' />
                                        <parameter name="volume-group-id" value='`$ss.param.volume-group-id`' />
                                        <outcome value='failure'>
                                            <block atomic='true'>
                                                <block>
                                                    <block>
                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                            <outcome value='generic-vnf'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                    </record>
                                                                    <set>
                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                    </set>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vf-module`">
                                                        <outcome value='vf-module'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                </record>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`' Failed to update volume-group with volume-group-id =' + $ss.param.volume-group-id + ' and volume-group-name = ' + $ss.param.volume-group-name + ' in AnAI.' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                        <outcome value='not-found'>
                                            <block atomic='true'>
                                                <block>
                                                    <block>
                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                            <outcome value='generic-vnf'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                    </record>
                                                                    <set>
                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                    </set>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vf-module`">
                                                        <outcome value='vf-module'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                </record>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`'volume-group not found in AnAI with volume-group-id=' + $ss.param.volume-group-id  + '; ' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                    </update>
                                </block>
                            </outcome>
                        </switch>
                        <switch test="`$ss.resource-key.vnfc`">
                            <outcome value='vnfc'>
                                <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                    <parameter name="nfc-naming-code" value='`$ss.param.nfc-naming-code`' />
                                    <parameter name="nfc-function" value='`$ss.param.nfc-function`' />
                                    <parameter name="model-customization-id" value='`$ss.param.vnfc-model-customization-uuid`' />
                                    <parameter name="model-invariant-id" value='`$ss.param.vnfc-model-invariant-uuid`' />
                                    <parameter name="model-version-id" value='`$ss.param.vnfc-model-version`' />
                                    <outcome value='failure'>
                                        <block atomic='true'>
                                            <block>
                                                <block>
                                                    <block>
                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                            <outcome value='generic-vnf'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                    </record>
                                                                    <set>
                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                    </set>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vf-module`">
                                                        <outcome value='vf-module'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                </record>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <switch test="`$ss.resource-key.volume-group`">
                                                    <outcome value='volume-group'>
                                                        <block>
                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                <parameter name="logger" value="message-log"/>
                                                                <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                            </record>
                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                <outcome value='failure'>
                                                                    <set>
                                                                        <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                    </set>
                                                                </outcome>
                                                                <outcome value='not-found'>
                                                                    <set>
                                                                        <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                    </set>
                                                                </outcome>
                                                                <outcome value='success'>
                                                                    <set>
                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                    </set>
                                                                </outcome>
                                                            </update>
                                                        </block>
                                                    </outcome>
                                                </switch>
                                            </block>
                                            <return status='failure'>
                                                <parameter name='error-code' value='500' />
                                                <parameter name='error-message' value="`' Failed to create vnfc with vnfc-name =' + $ss.param.vnfc-name + ' in AnAI. ' + $error-message`" />
                                            </return>
                                        </block>
                                    </outcome>
                                    <outcome value='not-found'>
                                        <block atomic='true'>
                                            <block>
                                                <block>
                                                    <block>
                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                            <outcome value='generic-vnf'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                    </record>
                                                                    <set>
                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                    </set>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vf-module`">
                                                        <outcome value='vf-module'>
                                                            <block>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                </record>
                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                    <outcome value='failure'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </update>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <switch test="`$ss.resource-key.volume-group`">
                                                    <outcome value='volume-group'>
                                                        <block>
                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                <parameter name="logger" value="message-log"/>
                                                                <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                            </record>
                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                <outcome value='failure'>
                                                                    <set>
                                                                        <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                    </set>
                                                                </outcome>
                                                                <outcome value='not-found'>
                                                                    <set>
                                                                        <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                    </set>
                                                                </outcome>
                                                                <outcome value='success'>
                                                                    <set>
                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                    </set>
                                                                </outcome>
                                                            </update>
                                                        </block>
                                                    </outcome>
                                                </switch>
                                            </block>
                                            <return status='failure'>
                                                <parameter name='error-code' value='500' />
                                                <parameter name='error-message' value="`' Failed to create vnfc with vnfc-name =' + $ss.param.vnfc-name + ' in AnAI. ' + $error-message`" />
                                            </return>
                                        </block>
                                    </outcome>
                                </save>
                            </outcome>
                        </switch>
                        <switch test="`$ss.resource-key.connection-points`">
                            <outcome value='connection-points'>
                                <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                    <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="cp"
		key="cp.cp-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id 
		AND vnfc.vnfc-name = $ss.param.vnfc-name" >
                                        <parameter name="cp-instance-id" 
	value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id`' />
                                        <outcome value='failure'>
                                            <block atomic='true'>
                                                <block atomic='true'>
                                                    <block>
                                                        <block>
                                                            <block>
                                                                <switch test="`$ss.resource-key.generic-vnf`">
                                                                    <outcome value='generic-vnf'>
                                                                        <block>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                            </record>
                                                                            <set>
                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                            </set>
                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                <outcome value='failure'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='not-found'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='success'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                    </set>
                                                                                </outcome>
                                                                            </update>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <switch test="`$ss.resource-key.vf-module`">
                                                                <outcome value='vf-module'>
                                                                    <block>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                        </record>
                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                            <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                            <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                            <outcome value='failure'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                </set>
                                                                            </outcome>
                                                                            <outcome value='not-found'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                </set>
                                                                            </outcome>
                                                                            <outcome value='success'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                </set>
                                                                            </outcome>
                                                                        </update>
                                                                    </block>
                                                                </outcome>
                                                            </switch>
                                                        </block>
                                                        <switch test="`$ss.resource-key.volume-group`">
                                                            <outcome value='volume-group'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                    </record>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                        <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vnfc`">
                                                        <outcome value='vnfc'>
                                                            <block atomic='true'>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                </record>
                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                    <outcome value='failure'>
                                                                        <block atomic='true'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                            <switch test='`$tmp.return-failure`'>
                                                                                <outcome value='true'>
                                                                                    <block atomic='true'>
                                                                                        <set>
                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                        </set>
                                                                                        <return status='failure'>
                                                                                            <parameter name='error-code' value='500' />
                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                        </return>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </delete>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`' Failed to create connection-point with cp-instance-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id + ' in AnAI. ' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                        <outcome value='not-found'>
                                            <block atomic='true'>
                                                <block atomic='true'>
                                                    <block>
                                                        <block>
                                                            <block>
                                                                <switch test="`$ss.resource-key.generic-vnf`">
                                                                    <outcome value='generic-vnf'>
                                                                        <block>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                            </record>
                                                                            <set>
                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                            </set>
                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                <outcome value='failure'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='not-found'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='success'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                    </set>
                                                                                </outcome>
                                                                            </update>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <switch test="`$ss.resource-key.vf-module`">
                                                                <outcome value='vf-module'>
                                                                    <block>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                        </record>
                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                            <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                            <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                            <outcome value='failure'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                </set>
                                                                            </outcome>
                                                                            <outcome value='not-found'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                </set>
                                                                            </outcome>
                                                                            <outcome value='success'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                </set>
                                                                            </outcome>
                                                                        </update>
                                                                    </block>
                                                                </outcome>
                                                            </switch>
                                                        </block>
                                                        <switch test="`$ss.resource-key.volume-group`">
                                                            <outcome value='volume-group'>
                                                                <block>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                    </record>
                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                        <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                        <outcome value='failure'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='not-found'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                            </set>
                                                                        </outcome>
                                                                        <outcome value='success'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                            </set>
                                                                        </outcome>
                                                                    </update>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <switch test="`$ss.resource-key.vnfc`">
                                                        <outcome value='vnfc'>
                                                            <block atomic='true'>
                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                    <parameter name="logger" value="message-log"/>
                                                                    <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                </record>
                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                    <outcome value='failure'>
                                                                        <block atomic='true'>
                                                                            <set>
                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                            </set>
                                                                            <switch test='`$tmp.return-failure`'>
                                                                                <outcome value='true'>
                                                                                    <block atomic='true'>
                                                                                        <set>
                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                        </set>
                                                                                        <return status='failure'>
                                                                                            <parameter name='error-code' value='500' />
                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                        </return>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                    <outcome value='not-found'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                        </set>
                                                                    </outcome>
                                                                    <outcome value='success'>
                                                                        <set>
                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                        </set>
                                                                    </outcome>
                                                                </delete>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                                <return status='failure'>
                                                    <parameter name='error-code' value='500' />
                                                    <parameter name='error-message' value="`' Failed to create connection-point with cp-instance-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id + ' in AnAI. ' + $error-message`" />
                                                </return>
                                            </block>
                                        </outcome>
                                        <outcome value='success'>
                                            <for silentFailure='true' index='j' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                    <parameter name="vlan-tag-id" 
	value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid`' />
                                                    <parameter name="vlan-tag-role" 
	value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-tag-description`' />
                                                    <parameter name="vlan-id-outer" 
	value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-tag-id`' />
                                                    <outcome value='success'>
                                                        <block atomic='true'>
                                                            <set>
                                                                <parameter name='ss.cp.related-link' 
	value="`'/aai/v$/network/vnfcs/vnfc/' + 
	$ss.param.vnfc-name + 
	'/cps/cp/' + 
	$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.connection-point-id`" />
                                                            </set>
                                                            <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag:relationship-list"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                <parameter name="relationship-list.relationship[0].related-to" value="cp" />
                                                                <parameter name="relationship-list.relationship[0].related-link" value="`$ss.cp.related-link`" />
                                                                <outcome value='failure'>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block atomic='true'>
                                                                                <block>
                                                                                    <block>
                                                                                        <block>
                                                                                            <switch test="`$ss.resource-key.generic-vnf`">
                                                                                                <outcome value='generic-vnf'>
                                                                                                    <block>
                                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                            <parameter name="logger" value="message-log"/>
                                                                                                            <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                        </record>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                            <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                            <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                            <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                            <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                            <outcome value='failure'>
                                                                                                                <set>
                                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                                </set>
                                                                                                            </outcome>
                                                                                                            <outcome value='not-found'>
                                                                                                                <set>
                                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                                </set>
                                                                                                            </outcome>
                                                                                                            <outcome value='success'>
                                                                                                                <set>
                                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                                </set>
                                                                                                            </outcome>
                                                                                                        </update>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                        <switch test="`$ss.resource-key.vf-module`">
                                                                                            <outcome value='vf-module'>
                                                                                                <block>
                                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                        <parameter name="logger" value="message-log"/>
                                                                                                        <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                                    </record>
                                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                        <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                        <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                        <outcome value='failure'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='not-found'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='success'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                    </update>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                    <switch test="`$ss.resource-key.volume-group`">
                                                                                        <outcome value='volume-group'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                                </record>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                                    <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vnfc`">
                                                                                    <outcome value='vnfc'>
                                                                                        <block atomic='true'>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                            </record>
                                                                                            <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                                <outcome value='failure'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                        <switch test='`$tmp.return-failure`'>
                                                                                                            <outcome value='true'>
                                                                                                                <block atomic='true'>
                                                                                                                    <set>
                                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                    </set>
                                                                                                                    <return status='failure'>
                                                                                                                        <parameter name='error-code' value='500' />
                                                                                                                        <parameter name='error-message' value='`$error-message`' />
                                                                                                                    </return>
                                                                                                                </block>
                                                                                                            </outcome>
                                                                                                        </switch>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </delete>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                                </record>
                                                                                <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                                    <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                            <outcome value='failure'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                                        <outcome value='true'>
                                                                                                            <block atomic='true'>
                                                                                                                <set>
                                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                </set>
                                                                                                                <return status='failure'>
                                                                                                                    <parameter name='error-code' value='500' />
                                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                                </return>
                                                                                                            </block>
                                                                                                        </outcome>
                                                                                                    </switch>
                                                                                                </block>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </delete>
                                                                                    </for>
                                                                                </for>
                                                                            </block>
                                                                        </block>
                                                                        <return status='failure'>
                                                                            <parameter name='error-code' value='500' />
                                                                            <parameter name='error-message' value="`' Failed to create cp relationship for vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' in AnAI. ' + $error-message`" />
                                                                        </return>
                                                                    </block>
                                                                </outcome>
                                                                <outcome value='not-found'>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block atomic='true'>
                                                                                <block>
                                                                                    <block>
                                                                                        <block>
                                                                                            <switch test="`$ss.resource-key.generic-vnf`">
                                                                                                <outcome value='generic-vnf'>
                                                                                                    <block>
                                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                            <parameter name="logger" value="message-log"/>
                                                                                                            <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                        </record>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                            <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                            <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                            <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                            <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                            <outcome value='failure'>
                                                                                                                <set>
                                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                                </set>
                                                                                                            </outcome>
                                                                                                            <outcome value='not-found'>
                                                                                                                <set>
                                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                                </set>
                                                                                                            </outcome>
                                                                                                            <outcome value='success'>
                                                                                                                <set>
                                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                                </set>
                                                                                                            </outcome>
                                                                                                        </update>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                        <switch test="`$ss.resource-key.vf-module`">
                                                                                            <outcome value='vf-module'>
                                                                                                <block>
                                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                        <parameter name="logger" value="message-log"/>
                                                                                                        <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                                    </record>
                                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                        <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                        <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                        <outcome value='failure'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='not-found'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='success'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                    </update>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                    <switch test="`$ss.resource-key.volume-group`">
                                                                                        <outcome value='volume-group'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                                </record>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                                    <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vnfc`">
                                                                                    <outcome value='vnfc'>
                                                                                        <block atomic='true'>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                            </record>
                                                                                            <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                                <outcome value='failure'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                        <switch test='`$tmp.return-failure`'>
                                                                                                            <outcome value='true'>
                                                                                                                <block atomic='true'>
                                                                                                                    <set>
                                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                    </set>
                                                                                                                    <return status='failure'>
                                                                                                                        <parameter name='error-code' value='500' />
                                                                                                                        <parameter name='error-message' value='`$error-message`' />
                                                                                                                    </return>
                                                                                                                </block>
                                                                                                            </outcome>
                                                                                                        </switch>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </delete>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                                </record>
                                                                                <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                                    <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                            <outcome value='failure'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                                        <outcome value='true'>
                                                                                                            <block atomic='true'>
                                                                                                                <set>
                                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                </set>
                                                                                                                <return status='failure'>
                                                                                                                    <parameter name='error-code' value='500' />
                                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                                </return>
                                                                                                            </block>
                                                                                                        </outcome>
                                                                                                    </switch>
                                                                                                </block>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </delete>
                                                                                    </for>
                                                                                </for>
                                                                            </block>
                                                                        </block>
                                                                        <return status='failure'>
                                                                            <parameter name='error-code' value='500' />
                                                                            <parameter name='error-message' value="`' Failed to create cp relationship for vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' in AnAI. ' + $error-message`" />
                                                                        </return>
                                                                    </block>
                                                                </outcome>
                                                            </save>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='failure'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block atomic='true'>
                                                                    <block>
                                                                        <block>
                                                                            <block>
                                                                                <switch test="`$ss.resource-key.generic-vnf`">
                                                                                    <outcome value='generic-vnf'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                            </record>
                                                                                            <set>
                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                            </set>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.vf-module`">
                                                                                <outcome value='vf-module'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                            <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                            <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.volume-group`">
                                                                            <outcome value='volume-group'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                    </record>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                        <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.resource-key.vnfc`">
                                                                        <outcome value='vnfc'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                </record>
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <block atomic='true'>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                    </record>
                                                                    <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                        <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                            <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                <outcome value='failure'>
                                                                                    <block atomic='true'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                        <switch test='`$tmp.return-failure`'>
                                                                                            <outcome value='true'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                    </set>
                                                                                                    <return status='failure'>
                                                                                                        <parameter name='error-code' value='500' />
                                                                                                        <parameter name='error-message' value='`$error-message`' />
                                                                                                    </return>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                </outcome>
                                                                                <outcome value='not-found'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='success'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                            </delete>
                                                                        </for>
                                                                    </for>
                                                                </block>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='not-found'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block atomic='true'>
                                                                    <block>
                                                                        <block>
                                                                            <block>
                                                                                <switch test="`$ss.resource-key.generic-vnf`">
                                                                                    <outcome value='generic-vnf'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                            </record>
                                                                                            <set>
                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                            </set>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.vf-module`">
                                                                                <outcome value='vf-module'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                            <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                            <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.volume-group`">
                                                                            <outcome value='volume-group'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                    </record>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                        <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.resource-key.vnfc`">
                                                                        <outcome value='vnfc'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                </record>
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <block atomic='true'>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                    </record>
                                                                    <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                        <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                            <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                <outcome value='failure'>
                                                                                    <block atomic='true'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                        <switch test='`$tmp.return-failure`'>
                                                                                            <outcome value='true'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                    </set>
                                                                                                    <return status='failure'>
                                                                                                        <parameter name='error-code' value='500' />
                                                                                                        <parameter name='error-message' value='`$error-message`' />
                                                                                                    </return>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                </outcome>
                                                                                <outcome value='not-found'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='success'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                            </delete>
                                                                        </for>
                                                                    </for>
                                                                </block>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                </save>
                                            </for>
                                        </outcome>
                                    </save>
                                </for>
                            </outcome>
                        </switch>
                        <switch test="`$ss.resource-key.l-interface`">
                            <outcome value='l-interface'>
                                <block atomic='true'>
                                    <switch test="`$ss.param.oam-interface-name != ''`">
                                        <outcome value='true'>
                                            <block atomic='true'>
                                                <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                    <parameter name="interface-name" value='`$ss.param.oam-interface-name`' />
                                                    <parameter name="interface-role" value='OAM' />
                                                    <outcome value='failure'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block atomic='true'>
                                                                    <block>
                                                                        <block>
                                                                            <block>
                                                                                <switch test="`$ss.resource-key.generic-vnf`">
                                                                                    <outcome value='generic-vnf'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                            </record>
                                                                                            <set>
                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                            </set>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.vf-module`">
                                                                                <outcome value='vf-module'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                            <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                            <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.volume-group`">
                                                                            <outcome value='volume-group'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                    </record>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                        <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.resource-key.vnfc`">
                                                                        <outcome value='vnfc'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                </record>
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <block atomic='true'>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                    </record>
                                                                    <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                        <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                            <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                <outcome value='failure'>
                                                                                    <block atomic='true'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                        <switch test='`$tmp.return-failure`'>
                                                                                            <outcome value='true'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                    </set>
                                                                                                    <return status='failure'>
                                                                                                        <parameter name='error-code' value='500' />
                                                                                                        <parameter name='error-message' value='`$error-message`' />
                                                                                                    </return>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                </outcome>
                                                                                <outcome value='not-found'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='success'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                            </delete>
                                                                        </for>
                                                                    </for>
                                                                </block>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l-interface with interface-name = ' + $ss.param.oam-interface-name + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='not-found'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block atomic='true'>
                                                                    <block>
                                                                        <block>
                                                                            <block>
                                                                                <switch test="`$ss.resource-key.generic-vnf`">
                                                                                    <outcome value='generic-vnf'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                            </record>
                                                                                            <set>
                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                            </set>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.vf-module`">
                                                                                <outcome value='vf-module'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                            <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                            <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.volume-group`">
                                                                            <outcome value='volume-group'>
                                                                                <block>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                    </record>
                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                        <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                        <outcome value='failure'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </update>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <switch test="`$ss.resource-key.vnfc`">
                                                                        <outcome value='vnfc'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                </record>
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <block atomic='true'>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                    </record>
                                                                    <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                        <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                            <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                <outcome value='failure'>
                                                                                    <block atomic='true'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                        </set>
                                                                                        <switch test='`$tmp.return-failure`'>
                                                                                            <outcome value='true'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                    </set>
                                                                                                    <return status='failure'>
                                                                                                        <parameter name='error-code' value='500' />
                                                                                                        <parameter name='error-message' value='`$error-message`' />
                                                                                                    </return>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                </outcome>
                                                                                <outcome value='not-found'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                                <outcome value='success'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                    </set>
                                                                                </outcome>
                                                                            </delete>
                                                                        </for>
                                                                    </for>
                                                                </block>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l-interface with interface-name = ' + $ss.param.oam-interface-name + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                </save>
                                                <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l3-interface-ipv4-address-list"
		key="l3-interface-ipv4-address-list.l3-interface-ipv4-address = $ss.param.ipv4-oam-address 
		AND generic-vnf.vnf-id = $ss.param.vnf-id 
		AND l-interface.interface-name = $ss.param.oam-interface-name" >
                                                    <parameter name="l3-interface-ipv4-address" value='`$ss.param.ipv4-oam-address`' />
                                                    <parameter name="l3-interface-ipv4-prefix-length" value='`$ss.param.ipv4-oam-address-prefix`' />
                                                    <outcome value='failure'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                                                        <outcome value='generic-vnf'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vf-module`">
                                                                                    <outcome value='vf-module'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.volume-group`">
                                                                                <outcome value='volume-group'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                            <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.vnfc`">
                                                                            <outcome value='vnfc'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                    </record>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                        </record>
                                                                        <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                            <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </for>
                                                                        </for>
                                                                    </block>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l3-interface-ipv4-address-list with l3-interface-ipv4-address = ' + $ss.param.ipv4-oam-address + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='not-found'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                                                        <outcome value='generic-vnf'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vf-module`">
                                                                                    <outcome value='vf-module'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.volume-group`">
                                                                                <outcome value='volume-group'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                            <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.vnfc`">
                                                                            <outcome value='vnfc'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                    </record>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                        </record>
                                                                        <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                            <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </for>
                                                                        </for>
                                                                    </block>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l3-interface-ipv4-address-list with l3-interface-ipv4-address = ' + $ss.param.ipv4-oam-address + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                </save>
                                            </block>
                                        </outcome>
                                    </switch>
                                    <switch test="`$ss.param.lo0-interface-name != ''`">
                                        <outcome value='true'>
                                            <block atomic='true'>
                                                <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.lo0-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                    <parameter name="interface-name" value='`$ss.param.lo0-interface-name`' />
                                                    <parameter name="interface-role" value='loopback' />
                                                    <outcome value='failure'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                                                        <outcome value='generic-vnf'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vf-module`">
                                                                                    <outcome value='vf-module'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.volume-group`">
                                                                                <outcome value='volume-group'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                            <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.vnfc`">
                                                                            <outcome value='vnfc'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                    </record>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                        </record>
                                                                        <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                            <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </for>
                                                                        </for>
                                                                    </block>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l-interface with interface-name = ' + $ss.param.lo0-interface-name + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='not-found'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                                                        <outcome value='generic-vnf'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vf-module`">
                                                                                    <outcome value='vf-module'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.volume-group`">
                                                                                <outcome value='volume-group'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                            <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.vnfc`">
                                                                            <outcome value='vnfc'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                    </record>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                        </record>
                                                                        <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                            <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </for>
                                                                        </for>
                                                                    </block>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l-interface with interface-name = ' + $ss.param.lo0-interface-name + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                </save>
                                                <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l3-interface-ipv4-address-list"
		key="l3-interface-ipv4-address-list.l3-interface-ipv4-address = $ss.param.ipv4-loopback0-address 
		AND generic-vnf.vnf-id = $ss.param.vnf-id 
		AND l-interface.interface-name = $ss.param.lo0-interface-name" >
                                                    <parameter name="l3-interface-ipv4-address" value='`$ss.param.ipv4-loopback0-address`' />
                                                    <parameter name="l3-interface-ipv4-prefix-length" value='32' />
                                                    <outcome value='failure'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block>
                                                                    <block>
                                                                        <block atomic='true'>
                                                                            <block>
                                                                                <block>
                                                                                    <block>
                                                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                                                            <outcome value='generic-vnf'>
                                                                                                <block>
                                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                        <parameter name="logger" value="message-log"/>
                                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                    </record>
                                                                                                    <set>
                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                    </set>
                                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                        <outcome value='failure'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='not-found'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='success'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                    </update>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                    <switch test="`$ss.resource-key.vf-module`">
                                                                                        <outcome value='vf-module'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                                </record>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.volume-group`">
                                                                                    <outcome value='volume-group'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                                <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.vnfc`">
                                                                                <outcome value='vnfc'>
                                                                                    <block atomic='true'>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                        </record>
                                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                            <outcome value='failure'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                                        <outcome value='true'>
                                                                                                            <block atomic='true'>
                                                                                                                <set>
                                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                </set>
                                                                                                                <return status='failure'>
                                                                                                                    <parameter name='error-code' value='500' />
                                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                                </return>
                                                                                                            </block>
                                                                                                        </outcome>
                                                                                                    </switch>
                                                                                                </block>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </delete>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                            </record>
                                                                            <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                                <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </for>
                                                                            </for>
                                                                        </block>
                                                                    </block>
                                                                    <switch test="`$ss.resource-key.l-interface`">
                                                                        <outcome value='l-interface'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                                </record>
                                                                                <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                    <outcome value='true'>
                                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                            <outcome value='failure'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                                        <outcome value='true'>
                                                                                                            <block atomic='true'>
                                                                                                                <set>
                                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                </set>
                                                                                                                <return status='failure'>
                                                                                                                    <parameter name='error-code' value='500' />
                                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                                </return>
                                                                                                            </block>
                                                                                                        </outcome>
                                                                                                    </switch>
                                                                                                </block>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </delete>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.lo0-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.lo0-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.lo0-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l3-interface-ipv4-address-list with l3-interface-ipv4-address = ' + $ss.param.loopback0-ipv4-address + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='not-found'>
                                                        <block atomic='true'>
                                                            <block>
                                                                <block>
                                                                    <block>
                                                                        <block atomic='true'>
                                                                            <block>
                                                                                <block>
                                                                                    <block>
                                                                                        <switch test="`$ss.resource-key.generic-vnf`">
                                                                                            <outcome value='generic-vnf'>
                                                                                                <block>
                                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                        <parameter name="logger" value="message-log"/>
                                                                                                        <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                    </record>
                                                                                                    <set>
                                                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                    </set>
                                                                                                    <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                        <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                        <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                        <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                        <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                        <outcome value='failure'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='not-found'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                        <outcome value='success'>
                                                                                                            <set>
                                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                            </set>
                                                                                                        </outcome>
                                                                                                    </update>
                                                                                                </block>
                                                                                            </outcome>
                                                                                        </switch>
                                                                                    </block>
                                                                                    <switch test="`$ss.resource-key.vf-module`">
                                                                                        <outcome value='vf-module'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                                </record>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                    <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                    <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.volume-group`">
                                                                                    <outcome value='volume-group'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                                <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.vnfc`">
                                                                                <outcome value='vnfc'>
                                                                                    <block atomic='true'>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                        </record>
                                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                            <outcome value='failure'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                                        <outcome value='true'>
                                                                                                            <block atomic='true'>
                                                                                                                <set>
                                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                </set>
                                                                                                                <return status='failure'>
                                                                                                                    <parameter name='error-code' value='500' />
                                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                                </return>
                                                                                                            </block>
                                                                                                        </outcome>
                                                                                                    </switch>
                                                                                                </block>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </delete>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                            </record>
                                                                            <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                                <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </for>
                                                                            </for>
                                                                        </block>
                                                                    </block>
                                                                    <switch test="`$ss.resource-key.l-interface`">
                                                                        <outcome value='l-interface'>
                                                                            <block atomic='true'>
                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                    <parameter name="logger" value="message-log"/>
                                                                                    <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                                </record>
                                                                                <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                    <outcome value='true'>
                                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                            <outcome value='failure'>
                                                                                                <block atomic='true'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                    </set>
                                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                                        <outcome value='true'>
                                                                                                            <block atomic='true'>
                                                                                                                <set>
                                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                                </set>
                                                                                                                <return status='failure'>
                                                                                                                    <parameter name='error-code' value='500' />
                                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                                </return>
                                                                                                            </block>
                                                                                                        </outcome>
                                                                                                    </switch>
                                                                                                </block>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </delete>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                        </outcome>
                                                                    </switch>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.lo0-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.lo0-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.lo0-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <return status='failure'>
                                                                <parameter name='error-code' value='500' />
                                                                <parameter name='error-message' value="`' Failed to create l3-interface-ipv4-address-list with l3-interface-ipv4-address = ' + $ss.param.loopback0-ipv4-address + ' in AnAI. ' + $error-message`" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                </save>
                                            </block>
                                        </outcome>
                                    </switch>
                                </block>
                            </outcome>
                        </switch>
                        <switch test="`$ss.resource-key.l3-network`">
                            <outcome value='l3-netework'>
                                <for silentFailure='true' index='n' start='0' end='`$nidx`' >
                                    <block atomic='true'>
                                        <set>
                                            <parameter name='ss.l3-network.related-link' 
	value="`'/aai/v$/network/l3-networks/l3-network/' + $ss.network[$n].netid`" />
                                        </set>
                                        <save plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf:relationship-list"
		key="generic-vnf.vnf-id = $ss.param.vnf-id" >
                                            <parameter name="relationship-list.relationship[0].related-to" value="l3-network" />
                                            <parameter name="relationship-list.relationship[0].related-link" value="`$ss.l3-network.related-link`" />
                                            <!--
<parameter name="relationship-list.relationship[0].relationship-data[0].relationship-key" value="l3-network.network-id" /><parameter name="relationship-list.relationship[0].relationship-data[0].relationship-value" value="`$ss.network[$n].netid`" />
-->
                                            <outcome value='failure'>
                                                <block atomic='true'>
                                                    <block>
                                                        <block>
                                                            <block>
                                                                <block>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                                                        <outcome value='generic-vnf'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vf-module`">
                                                                                    <outcome value='vf-module'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.volume-group`">
                                                                                <outcome value='volume-group'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                            <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.vnfc`">
                                                                            <outcome value='vnfc'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                    </record>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                        </record>
                                                                        <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                            <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </for>
                                                                        </for>
                                                                    </block>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <switch test="`$ss.resource-key.l-interface`">
                                                                <outcome value='l-interface'>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                        </record>
                                                                        <switch test="`$ss.param.lo0-interface-name != ''`">
                                                                            <outcome value='true'>
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.lo0-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.lo0-interface-name + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                </outcome>
                                                            </switch>
                                                        </block>
                                                        <switch test="`$ss.resource-key.l3-network`">
                                                            <outcome value='l3-netework'>
                                                                <block atomic='true'>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK VNF l3-network relationship"/>
                                                                    </record>
                                                                    <for silentFailure='true' index='n' start='0' end='`$nidx`' >
                                                                        <set>
                                                                            <parameter name='tmp.related-link' value="`'/aai/v$/network/l3-networks/l3-network/' + $ss.network[$n].netid`" />
                                                                            <!--
<parameter name='tmp.related-link' value="`'/aai/' + $prop.aai.version + '/network/l3-networks/l3-network/' + $ss.network[$n].netid`" />
-->
                                                                        </set>
                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService" 
	resource="generic-vnf:relationship-list" 
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
		AND related-to = l3-network 
		AND relationship.related-link = $tmp.related-link" >
                                                                            <outcome value='failure'>
                                                                                <block atomic='true'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete VNF l3-network relationship for generic-vnf.vnfid = ' + $ss.param.vnf-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                    </set>
                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                        <outcome value='true'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <return status='failure'>
                                                                                                    <parameter name='error-code' value='500' />
                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                </return>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                            </outcome>
                                                                            <outcome value='not-found'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' l3-network relationship with related-path = ' + $tmp.related-path  + ' not found in AAI. Consider silent success!'`" />
                                                                                </set>
                                                                            </outcome>
                                                                            <outcome value='success'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of generic-vnf l3-network relationships completed.'`" />
                                                                                </set>
                                                                            </outcome>
                                                                        </delete>
                                                                    </for>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <return status='failure'>
                                                        <parameter name='error-code' value='500' />
                                                        <parameter name='error-message' value="`' Failed to create generic-vnf releationship for l3-network with network-id =' + $ss.network[$n].netid + ' in AnAI. ' + $error-message`" />
                                                    </return>
                                                </block>
                                            </outcome>
                                            <outcome value='not-found'>
                                                <block atomic='true'>
                                                    <block>
                                                        <block>
                                                            <block>
                                                                <block>
                                                                    <block atomic='true'>
                                                                        <block>
                                                                            <block>
                                                                                <block>
                                                                                    <switch test="`$ss.resource-key.generic-vnf`">
                                                                                        <outcome value='generic-vnf'>
                                                                                            <block>
                                                                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                    <parameter name="logger" value="message-log"/>
                                                                                                    <parameter name="field1" value="ROLLBACK generic-vnf update"/>
                                                                                                </record>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="generic-vnf"
		key="generic-vnf.vnf-id = $ss.param.vnf-id " >
                                                                                                    <parameter name="ipv4-loopback0-address" value='`$tmp.aai.vnf.ipv4-loopback0-address`' />
                                                                                                    <parameter name="ipv4-oam-address" value='`$tmp.aai.vnf.ipv4-oam-address`' />
                                                                                                    <parameter name="as-number" value='`$tmp.aai.vnf.as-number`' />
                                                                                                    <parameter name="vlan-id-outer" value='`$tmp.aai.vnf.vlan-id-outer`' />
                                                                                                    <outcome value='failure'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='not-found'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Failed to rollback generic-vnf update because generic-vnf with vnf-id=' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                    <outcome value='success'>
                                                                                                        <set>
                                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback of generic-vnf update completed. '`" />
                                                                                                        </set>
                                                                                                    </outcome>
                                                                                                </update>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                                <switch test="`$ss.resource-key.vf-module`">
                                                                                    <outcome value='vf-module'>
                                                                                        <block>
                                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                                <parameter name="logger" value="message-log"/>
                                                                                                <parameter name="field1" value="ROLLBACK vf-module update"/>
                                                                                            </record>
                                                                                            <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vf-module"
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
			AND vf-module.vf-module-id = $ss.param.vf-module-id " >
                                                                                                <parameter name="vf-module-name" value='`$tmp.aai.vfmdoule.vf-module-name`' />
                                                                                                <parameter name="selflink" value='`$tmp.aai.vfmdoule.selflink`' />
                                                                                                <outcome value='failure'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' in AnAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='not-found'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to rollback vf-module update with vf-module-id=' + $ss.param.vf-module-id + ' because vf-module not found in AAI. MANUAL ROLLBACK IS REQUIRED!'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                                <outcome value='success'>
                                                                                                    <set>
                                                                                                        <parameter name='error-message' value="`$error-message + ' Rollback of vf-module update completed.'`" />
                                                                                                    </set>
                                                                                                </outcome>
                                                                                            </update>
                                                                                        </block>
                                                                                    </outcome>
                                                                                </switch>
                                                                            </block>
                                                                            <switch test="`$ss.resource-key.volume-group`">
                                                                                <outcome value='volume-group'>
                                                                                    <block>
                                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                            <parameter name="logger" value="message-log"/>
                                                                                            <parameter name="field1" value="ROLLBACK volume-group update"/>
                                                                                        </record>
                                                                                        <update plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="volume-group"
		key="cloud-region.cloud-owner = $prop.cloud-owner  
			AND cloud-region.cloud-region-id = $ss.param.aic-cloud-region 
			AND cloud-region.cloud-owner = $prop.cloud-region.cloud-owner 
			AND volume-group-id = $ss.param.volume-group-id" >
                                                                                            <parameter name="volume-group-name" value='`$tmp.aai.volume-group.volume-group-name`' />
                                                                                            <outcome value='failure'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to UPDATE volume-group with volume-group-id=' + $ss.param.volume-group-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='not-found'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' volume-group with volume-group-id = ' + $ss.param.volume-group-id + ' not found in AAI. Consider silent success!'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                            <outcome value='success'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback of volume_group completed.'`" />
                                                                                                </set>
                                                                                            </outcome>
                                                                                        </update>
                                                                                    </block>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                        <switch test="`$ss.resource-key.vnfc`">
                                                                            <outcome value='vnfc'>
                                                                                <block atomic='true'>
                                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                        <parameter name="logger" value="message-log"/>
                                                                                        <parameter name="field1" value="ROLLBACK vnfc save"/>
                                                                                    </record>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </block>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                                                        </record>
                                                                        <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                                                            <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </for>
                                                                        </for>
                                                                    </block>
                                                                </block>
                                                                <switch test="`$ss.resource-key.l-interface`">
                                                                    <outcome value='l-interface'>
                                                                        <block atomic='true'>
                                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                                <parameter name="logger" value="message-log"/>
                                                                                <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                            </record>
                                                                            <switch test="`$ss.param.oam-interface-name != ''`">
                                                                                <outcome value='true'>
                                                                                    <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                        <outcome value='failure'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                                </set>
                                                                                                <switch test='`$tmp.return-failure`'>
                                                                                                    <outcome value='true'>
                                                                                                        <block atomic='true'>
                                                                                                            <set>
                                                                                                                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                            </set>
                                                                                                            <return status='failure'>
                                                                                                                <parameter name='error-code' value='500' />
                                                                                                                <parameter name='error-message' value='`$error-message`' />
                                                                                                            </return>
                                                                                                        </block>
                                                                                                    </outcome>
                                                                                                </switch>
                                                                                            </block>
                                                                                        </outcome>
                                                                                        <outcome value='not-found'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                        <outcome value='success'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                                                            </set>
                                                                                        </outcome>
                                                                                    </delete>
                                                                                </outcome>
                                                                            </switch>
                                                                        </block>
                                                                    </outcome>
                                                                </switch>
                                                            </block>
                                                            <switch test="`$ss.resource-key.l-interface`">
                                                                <outcome value='l-interface'>
                                                                    <block atomic='true'>
                                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                            <parameter name="logger" value="message-log"/>
                                                                            <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                                                        </record>
                                                                        <switch test="`$ss.param.lo0-interface-name != ''`">
                                                                            <outcome value='true'>
                                                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.lo0-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                                                    <outcome value='failure'>
                                                                                        <block atomic='true'>
                                                                                            <set>
                                                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                            </set>
                                                                                            <switch test='`$tmp.return-failure`'>
                                                                                                <outcome value='true'>
                                                                                                    <block atomic='true'>
                                                                                                        <set>
                                                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                        </set>
                                                                                                        <return status='failure'>
                                                                                                            <parameter name='error-code' value='500' />
                                                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                                                        </return>
                                                                                                    </block>
                                                                                                </outcome>
                                                                                            </switch>
                                                                                        </block>
                                                                                    </outcome>
                                                                                    <outcome value='not-found'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                    <outcome value='success'>
                                                                                        <set>
                                                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.lo0-interface-name + '  completed.'`" />
                                                                                        </set>
                                                                                    </outcome>
                                                                                </delete>
                                                                            </outcome>
                                                                        </switch>
                                                                    </block>
                                                                </outcome>
                                                            </switch>
                                                        </block>
                                                        <switch test="`$ss.resource-key.l3-network`">
                                                            <outcome value='l3-netework'>
                                                                <block atomic='true'>
                                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                                                        <parameter name="logger" value="message-log"/>
                                                                        <parameter name="field1" value="ROLLBACK VNF l3-network relationship"/>
                                                                    </record>
                                                                    <for silentFailure='true' index='n' start='0' end='`$nidx`' >
                                                                        <set>
                                                                            <parameter name='tmp.related-link' value="`'/aai/v$/network/l3-networks/l3-network/' + $ss.network[$n].netid`" />
                                                                            <!--
<parameter name='tmp.related-link' value="`'/aai/' + $prop.aai.version + '/network/l3-networks/l3-network/' + $ss.network[$n].netid`" />
-->
                                                                        </set>
                                                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService" 
	resource="generic-vnf:relationship-list" 
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
		AND related-to = l3-network 
		AND relationship.related-link = $tmp.related-link" >
                                                                            <outcome value='failure'>
                                                                                <block atomic='true'>
                                                                                    <set>
                                                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete VNF l3-network relationship for generic-vnf.vnfid = ' + $ss.param.vnf-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                                                    </set>
                                                                                    <switch test='`$tmp.return-failure`'>
                                                                                        <outcome value='true'>
                                                                                            <block atomic='true'>
                                                                                                <set>
                                                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                                                </set>
                                                                                                <return status='failure'>
                                                                                                    <parameter name='error-code' value='500' />
                                                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                                                </return>
                                                                                            </block>
                                                                                        </outcome>
                                                                                    </switch>
                                                                                </block>
                                                                            </outcome>
                                                                            <outcome value='not-found'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' l3-network relationship with related-path = ' + $tmp.related-path  + ' not found in AAI. Consider silent success!'`" />
                                                                                </set>
                                                                            </outcome>
                                                                            <outcome value='success'>
                                                                                <set>
                                                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of generic-vnf l3-network relationships completed.'`" />
                                                                                </set>
                                                                            </outcome>
                                                                        </delete>
                                                                    </for>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                    <return status='failure'>
                                                        <parameter name='error-code' value='500' />
                                                        <parameter name='error-message' value="`' Failed to create generic-vnf releationship for l3-network with network-id =' + $ss.network[$n].netid + ' in AnAI. ' + $error-message`" />
                                                    </return>
                                                </block>
                                            </outcome>
                                        </save>
                                    </block>
                                </for>
                            </outcome>
                        </switch>
                        <set>
                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='SUCCESS' />
                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].value' 
	value='SUCCESS' />
                        </set>
                    </block>
                </outcome>
                <outcome value='unassign'>
                    <block atomic='true'>
                        <block>
                            <set>
                                <parameter name='nidx' value='0' />
                            </set>
                            <for silentFailure='true' index="bidx" start="0" end="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`" >
                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='startsWith' emitsOutcome='true' >
                                    <parameter name="source" value="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`" />
                                    <parameter name="target" value="sriov"/>
                                    <outcome value='true'>
                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='endsWith' emitsOutcome='true' >
                                            <parameter name="source" value="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`" />
                                            <parameter name="target" value="_net_id"/>
                                            <outcome value='true'>
                                                <block>
                                                    <set>
                                                        <parameter name='ss.network[$nidx].netid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    </set>
                                                    <set>
                                                        <parameter name='nidx' value='`$nidx + 1`' />
                                                    </set>
                                                </block>
                                            </outcome>
                                        </execute>
                                    </outcome>
                                    <outcome value='false'>
                                        <switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].name`'>
                                            <outcome value='vf_module_id'>
                                                <set>
                                                    <parameter name='ss.param.vf-module-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vf_module_name'>
                                                <set>
                                                    <parameter name='ss.param.vf-module-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='volume-group-id'>
                                                <set>
                                                    <parameter name='ss.param.volume-group-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='volume-group-name'>
                                                <set>
                                                    <parameter name='ss.param.volume-group-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='aic-cloud-region'>
                                                <set>
                                                    <parameter name='ss.param.aic-cloud-region' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-name'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-name-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='oam-interface-name'>
                                                <set>
                                                    <parameter name='ss.param.oam-interface-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.oam-interface-name-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='=âlo0-interface-name'>
                                                <set>
                                                    <parameter name='ss.param.lo0-interface-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.lo0-interface-name-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='ipv4-oam-address'>
                                                <set>
                                                    <parameter name='ss.param.ipv4-oam-address' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.ipv4-oam-address-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='ipv4-oam-address-prefix'>
                                                <set>
                                                    <parameter name='ss.param.ipv4-oam-address-prefix' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.ipv4-oam-address-prefix-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='loopback0_ipv4_address'>
                                                <set>
                                                    <parameter name='ss.param.loopback0-ipv4-address' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.loopback0-ipv4-address-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='ipv4-loopback0-address'>
                                                <set>
                                                    <parameter name='ss.param.ipv4-loopback0-address' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.ipv4-loopback0-address-index' value='`bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='nfc-naming-code'>
                                                <set>
                                                    <parameter name='ss.param.nfc-naming-code' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.nfc-naming-code-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='nfc-function'>
                                                <set>
                                                    <parameter name='ss.param.nfc-function' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.nfc-function-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-model-customization-uuid'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-model-customization-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-model-customization-uuid-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-model-invariant-uuid'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-model-invariant-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-model-invariant-uuid-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vnfc-model-version'>
                                                <set>
                                                    <parameter name='ss.param.vnfc-model-version' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vnfc-model-version-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='as-number'>
                                                <set>
                                                    <parameter name='ss.param.as-number' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.as-number-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='vlan-id-outer'>
                                                <set>
                                                    <parameter name='ss.param.vlan-id-outer' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.vlan-id-outer-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='availability_zone_0'>
                                                <set>
                                                    <parameter name='ss.param.availability-zone-0' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].value`' />
                                                    <parameter name='ss.param.availability-zone-0-index' value='`$bidx`' />
                                                </set>
                                            </outcome>
                                            <outcome value='aai-vf-module-put'>
                                                <block>
                                                    <set>
                                                        <parameter name='ss.param.aai-vf-module-put-index' value='`$bidx`' />
                                                    </set>
                                                    <for silentFailure='true' index="kidx" start="0" end="`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key_length`">
                                                        <switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].name`'>
                                                            <outcome value='generic-vnf'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.generic-vnf' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='vf-module'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.vf-module' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='volume-group'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.volume-group' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='vnfc'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.vnfc' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='connection-points'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.connection-points' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='l-interface'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.l-interface' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                            <outcome value='l3-netework'>
                                                                <set>
                                                                    <parameter name='ss.resource-key.l3-network' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$bidx].resource-resolution-data.resource-key[$kidx].value`' />
                                                                </set>
                                                            </outcome>
                                                        </switch>
                                                    </for>
                                                </block>
                                            </outcome>
                                        </switch>
                                    </outcome>
                                </execute>
                            </for>
                            <set>
                                <parameter name='ss.param.vnf-id' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-id`' />
                            </set>
                        </block>
                        <set>
                            <parameter name='tmp.return-failure' value ='true' />
                        </set>
                        <block atomic='true'>
                            <switch test="`$ss.resource-key.vnfc`">
                                <outcome value='vnfc'>
                                    <block atomic='true'>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                            <parameter name="logger" value="message-log"/>
                                            <parameter name="field1" value="ROLLBACK vnfc save"/>
                                        </record>
                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vnfc"
		key="vnfc.vnfc-name = $ss.param.vnfc-name" >
                                            <outcome value='failure'>
                                                <block atomic='true'>
                                                    <set>
                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete vnfc with vnfc-name=' + $ss.param.vnfc-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                    </set>
                                                    <switch test='`$tmp.return-failure`'>
                                                        <outcome value='true'>
                                                            <block atomic='true'>
                                                                <set>
                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                </set>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                            </outcome>
                                            <outcome value='not-found'>
                                                <set>
                                                    <parameter name='error-message' value="`$error-message + ' vnfc with vnfc-name=' + $ss.param.vnfc-name + ' not found in AAI. Consider silent success!'`" />
                                                </set>
                                            </outcome>
                                            <outcome value='success'>
                                                <set>
                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vnfc with vnfc-name=' + $ss.param.vnfc-name + '  completed.'`" />
                                                </set>
                                            </outcome>
                                        </delete>
                                    </block>
                                </outcome>
                            </switch>
                            <block atomic='true'>
                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                    <parameter name="logger" value="message-log"/>
                                    <parameter name="field1" value="ROLLBACK vlan-tag save"/>
                                </record>
                                <for silentFailure='true' index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length`' >
                                    <for silentFailure='true' index='j' start='0' end='$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data_length`' >
                                        <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="vlan-tag"
		key="vlan-tag.vlan-tag-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid" >
                                            <outcome value='failure'>
                                                <block atomic='true'>
                                                    <set>
                                                        <parameter name='error-message' value="`$error-message + ' Failed to delete vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                    </set>
                                                    <switch test='`$tmp.return-failure`'>
                                                        <outcome value='true'>
                                                            <block atomic='true'>
                                                                <set>
                                                                    <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                </set>
                                                                <return status='failure'>
                                                                    <parameter name='error-code' value='500' />
                                                                    <parameter name='error-message' value='`$error-message`' />
                                                                </return>
                                                            </block>
                                                        </outcome>
                                                    </switch>
                                                </block>
                                            </outcome>
                                            <outcome value='not-found'>
                                                <set>
                                                    <parameter name='error-message' value="`$error-message + ' vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + ' not found in AAI. Consider silent success!'`" />
                                                </set>
                                            </outcome>
                                            <outcome value='success'>
                                                <set>
                                                    <parameter name='error-message' value="`$error-message + ' Rollback (delete) of vlan-tag with vlan-tag-id =' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$i].connection-point.vlan-data[$j].vlan-uuid + '  completed.'`" />
                                                </set>
                                            </outcome>
                                        </delete>
                                    </for>
                                </for>
                            </block>
                            <switch test="`$ss.resource-key.l-interface`">
                                <outcome value='l-interface'>
                                    <block atomic='true'>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                            <parameter name="logger" value="message-log"/>
                                            <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                        </record>
                                        <switch test="`$ss.param.oam-interface-name != ''`">
                                            <outcome value='true'>
                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.oam-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                    <outcome value='failure'>
                                                        <block atomic='true'>
                                                            <set>
                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.oam-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                            </set>
                                                            <switch test='`$tmp.return-failure`'>
                                                                <outcome value='true'>
                                                                    <block atomic='true'>
                                                                        <set>
                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                        </set>
                                                                        <return status='failure'>
                                                                            <parameter name='error-code' value='500' />
                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                        </return>
                                                                    </block>
                                                                </outcome>
                                                            </switch>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='not-found'>
                                                        <set>
                                                            <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.oam-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                        </set>
                                                    </outcome>
                                                    <outcome value='success'>
                                                        <set>
                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.oam-interface-name + '  completed.'`" />
                                                        </set>
                                                    </outcome>
                                                </delete>
                                            </outcome>
                                        </switch>
                                    </block>
                                </outcome>
                            </switch>
                            <switch test="`$ss.resource-key.l-interface`">
                                <outcome value='l-interface'>
                                    <block atomic='true'>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                            <parameter name="logger" value="message-log"/>
                                            <parameter name="field1" value="ROLLBACK l-interface (oam) save"/>
                                        </record>
                                        <switch test="`$ss.param.lo0-interface-name != ''`">
                                            <outcome value='true'>
                                                <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService"
	resource="l-interface"
		key="l-interface.interface-name = $ss.param.lo0-interface-name
		AND generic-vnf.vnf-id = $ss.param.vnf-id" >
                                                    <outcome value='failure'>
                                                        <block atomic='true'>
                                                            <set>
                                                                <parameter name='error-message' value="`$error-message + ' Failed to delete l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                            </set>
                                                            <switch test='`$tmp.return-failure`'>
                                                                <outcome value='true'>
                                                                    <block atomic='true'>
                                                                        <set>
                                                                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                        </set>
                                                                        <return status='failure'>
                                                                            <parameter name='error-code' value='500' />
                                                                            <parameter name='error-message' value='`$error-message`' />
                                                                        </return>
                                                                    </block>
                                                                </outcome>
                                                            </switch>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='not-found'>
                                                        <set>
                                                            <parameter name='error-message' value="`$error-message + ' l-interface.interface-name = ' + $ss.param.lo0-interface-name + ' not found in AAI. Consider silent success!'`" />
                                                        </set>
                                                    </outcome>
                                                    <outcome value='success'>
                                                        <set>
                                                            <parameter name='error-message' value="`$error-message + ' Rollback (delete) of l-interface with interface-name = ' + $ss.param.lo0-interface-name + '  completed.'`" />
                                                        </set>
                                                    </outcome>
                                                </delete>
                                            </outcome>
                                        </switch>
                                    </block>
                                </outcome>
                            </switch>
                            <switch test="`$ss.resource-key.l3-network`">
                                <outcome value='l3-netework'>
                                    <block atomic='true'>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder">
                                            <parameter name="logger" value="message-log"/>
                                            <parameter name="field1" value="ROLLBACK VNF l3-network relationship"/>
                                        </record>
                                        <for silentFailure='true' index='n' start='0' end='`$nidx`' >
                                            <set>
                                                <parameter name='tmp.related-link' value="`'/aai/v$/network/l3-networks/l3-network/' + $ss.network[$n].netid`" />
                                                <!--
<parameter name='tmp.related-link' value="`'/aai/' + $prop.aai.version + '/network/l3-networks/l3-network/' + $ss.network[$n].netid`" />
-->
                                            </set>
                                            <delete plugin="org.onap.ccsdk.sli.adaptors.aai.AAIService" 
	resource="generic-vnf:relationship-list" 
		key="generic-vnf.vnf-id = $ss.param.vnf-id 
		AND related-to = l3-network 
		AND relationship.related-link = $tmp.related-link" >
                                                <outcome value='failure'>
                                                    <block atomic='true'>
                                                        <set>
                                                            <parameter name='error-message' value="`$error-message + ' Failed to delete VNF l3-network relationship for generic-vnf.vnfid = ' + $ss.param.vnf-id + ' from AnAI. MANUAL ROLLBACK IS REQUIRED! '`" />
                                                        </set>
                                                        <switch test='`$tmp.return-failure`'>
                                                            <outcome value='true'>
                                                                <block atomic='true'>
                                                                    <set>
                                                                        <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='FAILED' />
                                                                    </set>
                                                                    <return status='failure'>
                                                                        <parameter name='error-code' value='500' />
                                                                        <parameter name='error-message' value='`$error-message`' />
                                                                    </return>
                                                                </block>
                                                            </outcome>
                                                        </switch>
                                                    </block>
                                                </outcome>
                                                <outcome value='not-found'>
                                                    <set>
                                                        <parameter name='error-message' value="`$error-message + ' l3-network relationship with related-path = ' + $tmp.related-path  + ' not found in AAI. Consider silent success!'`" />
                                                    </set>
                                                </outcome>
                                                <outcome value='success'>
                                                    <set>
                                                        <parameter name='error-message' value="`$error-message + ' Rollback (delete) of generic-vnf l3-network relationships completed.'`" />
                                                    </set>
                                                </outcome>
                                            </delete>
                                        </for>
                                    </block>
                                </outcome>
                            </switch>
                        </block>
                        <set>
                            <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].resource-resolution-data.status' 
	value='DELETED' />
                        </set>
                    </block>
                </outcome>
            </switch>
            <set>
                <parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-module-put-index].value' 
	value='SUCCESS' />
            </set>
            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >
                <parameter name='filename' value='/var/tmp/ss-aai-vfput.log' />
            </execute>
        </block>
    </method>
</service-logic>
