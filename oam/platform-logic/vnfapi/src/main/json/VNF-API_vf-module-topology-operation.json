[{"id":"e0ff2801.a03df8","type":"dgstart","name":"DGSTART","outputs":1,"x":195.71429443359375,"y":81.42857360839844,"z":"68297705.7f4dc8","wires":[["78140404.aeb19c"]]},{"id":"78140404.aeb19c","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":362.99205780029297,"y":81.09524250030518,"z":"68297705.7f4dc8","wires":[["78b1b039.ff13b"]]},{"id":"78b1b039.ff13b","type":"method","name":"vf-module-topology-operation","xml":"<method rpc='vf-module-topology-operation' mode='sync'>\n","comments":"","outputs":1,"x":286.21429443359375,"y":131.65079498291016,"z":"68297705.7f4dc8","wires":[["673f06bc.66a948"]]},{"id":"b7519e64.1a17d","type":"other","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":714.3254470825195,"y":981.7618408203125,"z":"68297705.7f4dc8","wires":[["27978610.8d377a"]]},{"id":"27978610.8d377a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='svc-action not recognized'/>\n","comments":"","x":939.3254470825195,"y":981.7618408203125,"z":"68297705.7f4dc8","wires":[]},{"id":"3e3dbb9f.24df84","type":"other","name":"delete","xml":"<outcome value='delete'>","comments":"","outputs":1,"x":714.5754470825195,"y":938.0118427276611,"z":"68297705.7f4dc8","wires":[["ea75b949.ebd298"]]},{"id":"ea75b949.ebd298","type":"call","name":"call: vf-module-topology-delete","xml":"<call module='VNF-API' rpc='vf-module-topology-delete' mode='sync' >","comments":"","outputs":1,"x":994.3255157470703,"y":938.0118436813354,"z":"68297705.7f4dc8","wires":[[]]},{"id":"74dacbed.650b84","type":"comment","name":"vf-module-topology-operation","info":"","comments":"","x":686.6031723022461,"y":122.87301826477051,"z":"68297705.7f4dc8","wires":[]},{"id":"673f06bc.66a948","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":280.7143020629883,"y":188.42857933044434,"z":"68297705.7f4dc8","wires":[["fa0f3bd8.c39298","dbdbdf9f.cc2d6","b9acb3f5.7c184","c1212ec.b8775d","5526645.e90c39c","aa3d3826.cb6ba8","deec160a.22b3a8","4f3a433c.cd903c"]]},{"id":"fa0f3bd8.c39298","type":"switchNode","name":"switch: INPUT vf-module-name","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-name`\">","comments":"","outputs":1,"x":542.380973815918,"y":235.09522151947021,"z":"68297705.7f4dc8","wires":[["82f0521.21003b","640e052e.b656ec"]]},{"id":"82f0521.21003b","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":756.380973815918,"y":235.09522151947021,"z":"68297705.7f4dc8","wires":[["5b22340b.32f12c"]]},{"id":"640e052e.b656ec","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":755.380973815918,"y":279.0952215194702,"z":"68297705.7f4dc8","wires":[["bb3c05e8.388e28"]]},{"id":"5b22340b.32f12c","type":"switchNode","name":"switch: PRELOAD vf-module-name","xml":"<switch test=\"`$vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-name`\">","comments":"","outputs":1,"x":986.380973815918,"y":235.09522151947021,"z":"68297705.7f4dc8","wires":[["54e614b9.3b37bc","ee5a11dd.17f2d"]]},{"id":"54e614b9.3b37bc","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":1221.380973815918,"y":235.09522151947021,"z":"68297705.7f4dc8","wires":[["7f77d834.7fd738"]]},{"id":"ee5a11dd.17f2d","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1222.380973815918,"y":278.0952215194702,"z":"68297705.7f4dc8","wires":[["924b77be.5bf338"]]},{"id":"7f77d834.7fd738","type":"switchNode","name":"switch: vf-module-name INPUT == PRELOAD","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-name == $vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-name`\">","comments":"","outputs":1,"x":1479.380958557129,"y":235.09521961212158,"z":"68297705.7f4dc8","wires":[["5165cc73.2191d4"]]},{"id":"5165cc73.2191d4","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1734.7143249511719,"y":235.76212215423584,"z":"68297705.7f4dc8","wires":[["c51991e0.17e19"]]},{"id":"c51991e0.17e19","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='404'/>\n\t<parameter name='error-message' value='vf-module-name not found in vf-module-preload-data'/>","comments":"","x":1893.3809509277344,"y":235.09522151947021,"z":"68297705.7f4dc8","wires":[]},{"id":"924b77be.5bf338","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='No preload data found to match vf-module-name'/>","comments":"","x":1389.380973815918,"y":278.0952215194702,"z":"68297705.7f4dc8","wires":[]},{"id":"bb3c05e8.388e28","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vf-module-name is required'/>","comments":"","x":916.880973815918,"y":279.3452215194702,"z":"68297705.7f4dc8","wires":[]},{"id":"dbdbdf9f.cc2d6","type":"switchNode","name":"switch: INPUT vf-module-model-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-model-id`\">","comments":"","outputs":1,"x":548.6032104492188,"y":339.7618923187256,"z":"68297705.7f4dc8","wires":[["738dfde0.130494","9e499c38.3810c"]]},{"id":"738dfde0.130494","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":771.6032028198242,"y":339.7618923187256,"z":"68297705.7f4dc8","wires":[["4068ad6f.23d994"]]},{"id":"9e499c38.3810c","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":770.6032028198242,"y":381.7618923187256,"z":"68297705.7f4dc8","wires":[["8d635944.f692b8"]]},{"id":"4068ad6f.23d994","type":"switchNode","name":"switch: PRELOAD vf-module-model-id","xml":"<switch test=\"`$vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-model-id`\">","comments":"","outputs":1,"x":1010.6032028198242,"y":339.7618923187256,"z":"68297705.7f4dc8","wires":[["5914ef95.68c0c","84aff1dd.c5e9a"]]},{"id":"5914ef95.68c0c","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":1250.6032028198242,"y":339.7618923187256,"z":"68297705.7f4dc8","wires":[["b6797064.75d77"]]},{"id":"84aff1dd.c5e9a","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1250.6032028198242,"y":380.7618923187256,"z":"68297705.7f4dc8","wires":[["5bac39ac.c75ae8"]]},{"id":"8d635944.f692b8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vf-module-model-id is required'/>","comments":"","x":932.1032028198242,"y":382.0118923187256,"z":"68297705.7f4dc8","wires":[]},{"id":"b6797064.75d77","type":"switchNode","name":"switch: vf-module-model-id INPUT == PRELOAD","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-model-id == $vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-model-id`\">","comments":"","outputs":1,"x":1521.6031799316406,"y":339.7618923187256,"z":"68297705.7f4dc8","wires":[["a95f9de7.96ae5"]]},{"id":"5bac39ac.c75ae8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='No preload data found to match vf-module-model-id from input'/>","comments":"","x":1410.6031799316406,"y":380.7618923187256,"z":"68297705.7f4dc8","wires":[]},{"id":"a95f9de7.96ae5","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1791.6031799316406,"y":340.0953884124756,"z":"68297705.7f4dc8","wires":[["519c0a31.767ca4"]]},{"id":"519c0a31.767ca4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='404'/>\n\t<parameter name='error-message' value='vf-module-model-id not found in vf-module-preload-data'/>","comments":"","x":1950.2698059082031,"y":339.42848777770996,"z":"68297705.7f4dc8","wires":[]},{"id":"b9acb3f5.7c184","type":"switchNode","name":"switch: INPUT vf-module-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-id`\">","comments":"","outputs":1,"x":526.781867980957,"y":431.72621726989746,"z":"68297705.7f4dc8","wires":[["d1ebf8c0.c6a178","319b8367.1d946c"]]},{"id":"319b8367.1d946c","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":748.7818374633789,"y":471.8690547943115,"z":"68297705.7f4dc8","wires":[["71f257ae.ebcf08"]]},{"id":"d1ebf8c0.c6a178","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":748.9247665405273,"y":431.2976531982422,"z":"68297705.7f4dc8","wires":[["71f257ae.ebcf08"]]},{"id":"71f257ae.ebcf08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vf-module-id cannot be NULL or 0'/>","comments":"","x":923.639045715332,"y":472.15477561950684,"z":"68297705.7f4dc8","wires":[]},{"id":"c1212ec.b8775d","type":"switchNode","name":"switch: INPUT vnf-instance-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vnf-instance-id`\">","comments":"","outputs":1,"x":532.6865997314453,"y":525.3730382919312,"z":"68297705.7f4dc8","wires":[["42518bf.4367274","af1b381e.b67c38"]]},{"id":"af1b381e.b67c38","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":765.6865692138672,"y":563.5158758163452,"z":"68297705.7f4dc8","wires":[["e777cce9.c995a"]]},{"id":"42518bf.4367274","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":764.8294982910156,"y":525.9444742202759,"z":"68297705.7f4dc8","wires":[["e777cce9.c995a"]]},{"id":"e777cce9.c995a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-instance-id cannot be NULL or 0'/>","comments":"","x":919.5437774658203,"y":563.8015966415405,"z":"68297705.7f4dc8","wires":[]},{"id":"5526645.e90c39c","type":"switchNode","name":"switch: INPUT vnf-instance-name","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vnf-instance-name`\">","comments":"","outputs":1,"x":545.9365882873535,"y":606.3730392456055,"z":"68297705.7f4dc8","wires":[["bf0856af.62fb18"]]},{"id":"bf0856af.62fb18","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":795.9365577697754,"y":606.5158767700195,"z":"68297705.7f4dc8","wires":[["d2d0c1d2.6d45"]]},{"id":"d2d0c1d2.6d45","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-instance-name cannot be NULL'/>","comments":"","x":949.7937660217285,"y":606.8015975952148,"z":"68297705.7f4dc8","wires":[]},{"id":"aa3d3826.cb6ba8","type":"switchNode","name":"switch: INPUT vnf-model-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vnf-model-id`\">","comments":"","outputs":1,"x":527.6866226196289,"y":653.6230411529541,"z":"68297705.7f4dc8","wires":[["8f8cbdfc.4846a"]]},{"id":"8f8cbdfc.4846a","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":777.6865921020508,"y":653.7658786773682,"z":"68297705.7f4dc8","wires":[["6f5b3f20.92185"]]},{"id":"6f5b3f20.92185","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-model-id cannot be NULL'/>","comments":"","x":931.5438003540039,"y":654.0515995025635,"z":"68297705.7f4dc8","wires":[]},{"id":"deec160a.22b3a8","type":"switchNode","name":"switch: INPUT aic-cloud-region","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.aic-cloud-region`\">","comments":"","outputs":1,"x":537.9643020629883,"y":697.9285831451416,"z":"68297705.7f4dc8","wires":[["a1e5052d.4510a8"]]},{"id":"a1e5052d.4510a8","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":755.9642715454102,"y":698.0714206695557,"z":"68297705.7f4dc8","wires":[["8cc2ab6a.205d98"]]},{"id":"8cc2ab6a.205d98","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='aic-cloud-region cannot be NULL'/>","comments":"","x":909.8214797973633,"y":698.357141494751,"z":"68297705.7f4dc8","wires":[]},{"id":"4f3a433c.cd903c","type":"switchNode","name":"switch: svc-action","xml":"<switch test=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-action`\">\n<!--\nleaf svc-action { \n\ttype enumeration { \n\t\tenum \"reserve\";\n\t\tenum \"assign\";\n\t\tenum \"activate\";  // equal to commit\n\t\tenum \"delete\";\t  // equal to commit\n\t\tenum \"changeassign\";\n\t\tenum \"changedelete\";\n\t\tenum \"rollback\";\n\t}\n}\n-->\n\n","comments":"","outputs":1,"x":496.2698440551758,"y":763.7618370056152,"z":"68297705.7f4dc8","wires":[["b7519e64.1a17d","ca8e3631.a35768","6b6e6366.f5966c","64432f78.b4e26","3e3dbb9f.24df84","d425cfc4.5c5b6"]]},{"id":"ca8e3631.a35768","type":"other","name":"assign","xml":"<outcome value='assign'>","comments":"","outputs":1,"x":713.8254013061523,"y":763.7618427276611,"z":"68297705.7f4dc8","wires":[["b7efe2a6.85804"]]},{"id":"6b6e6366.f5966c","type":"other","name":"activate","xml":"<outcome value='activate'>","comments":"","outputs":1,"x":716.8254165649414,"y":853.0118312835693,"z":"68297705.7f4dc8","wires":[["ba7e49a5.adf968"]]},{"id":"64432f78.b4e26","type":"other","name":"rollback","xml":"<outcome value='rollback'>","comments":"","outputs":1,"x":716.5754165649414,"y":895.2618322372437,"z":"68297705.7f4dc8","wires":[["7fbdb178.da1f3"]]},{"id":"d425cfc4.5c5b6","type":"other","name":"changeassign","xml":"<outcome value='changeassign'>","comments":"","outputs":1,"x":735.3254165649414,"y":809.261833190918,"z":"68297705.7f4dc8","wires":[["f52637d5.69b248"]]},{"id":"b7efe2a6.85804","type":"call","name":"call: vf-module-topology-assign","xml":"<call module='VNF-API' rpc='vf-module-topology-assign' mode='sync' >","comments":"","outputs":1,"x":994.0754013061523,"y":763.7618408203125,"z":"68297705.7f4dc8","wires":[[]]},{"id":"f52637d5.69b248","type":"call","name":"call: vf-module-topology-changeassign","xml":"<call module='VNF-API' rpc='vf-module-topology-changeassign' mode='sync' >","comments":"","outputs":1,"x":1017.3255233764648,"y":808.7618408203125,"z":"68297705.7f4dc8","wires":[[]]},{"id":"7fbdb178.da1f3","type":"call","name":"call: vf-module-topology-rollback","xml":"<call module='VNF-API' rpc='vf-module-topology-rollback' mode='sync' >","comments":"","outputs":1,"x":999.0755233764648,"y":895.2618427276611,"z":"68297705.7f4dc8","wires":[[]]},{"id":"ba7e49a5.adf968","type":"call","name":"call: vf-module-topology-activate","xml":"<call module='VNF-API' rpc='vf-module-topology-activate' mode='sync' >","comments":"","outputs":1,"x":998.5755157470703,"y":853.2618365287781,"z":"68297705.7f4dc8","wires":[[]]}]
