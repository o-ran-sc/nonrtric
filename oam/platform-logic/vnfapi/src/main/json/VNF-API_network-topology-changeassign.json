[
    {
        "id": "adccb6.8424d348",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 178.7500114440918,
        "y": 167.50000190734863,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c7828b0a.e799e8",
                "2212dd2d.8e7942",
                "2dfb355b.d5d24a",
                "313c1584.4f97fa",
                "6c413597.876f3c",
                "34af06b5.07d33a",
                "59c57e09.0c9bd",
                "c10e73d.da8889",
                "bb8ce764.d17888",
                "b16ab5f2.35a148",
                "f15dac05.a23f",
                "10056ed4.c3d191",
                "b4cd1414.581b48",
                "e456340c.466478",
                "eca5ffa4.23d73",
                "bd2d9b6e.b5c1d8"
            ]
        ]
    },
    {
        "id": "c7828b0a.e799e8",
        "type": "get-resource",
        "name": "get AnAI - l3-network",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\t\tkey=\"l3-network.network-id = $network-topology-operation-input.network-request-information.network-id\" \n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.AnAI.l3network\">\n",
        "comments": "",
        "outputs": 1,
        "x": 424.80941009521484,
        "y": 168.38485431671143,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "812ba46c.1b8558",
                "8ace8ce6.55a0e"
            ]
        ]
    },
    {
        "id": "2212dd2d.8e7942",
        "type": "switchNode",
        "name": "switch: AnAI == PRELOAD - network-name",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.network-name == $preload-data.network-topology-information.network-topology-identifier.network-name`\">",
        "comments": "",
        "outputs": 1,
        "x": 493.2222099304199,
        "y": 340.5555057525635,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "f97c22c3.bd33d"
            ]
        ]
    },
    {
        "id": "2dfb355b.d5d24a",
        "type": "for",
        "name": "for loop k - tmp.AnAI.l3network.subnets.subnet",
        "xml": "<for index=\"k\" start=\"0\" end=\"`$tmp.AnAI.l3network.subnets.subnet_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 499.5236930847168,
        "y": 515.6143531799316,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4dd3576.8062ba8"
            ]
        ]
    },
    {
        "id": "99484323.6781e",
        "type": "for",
        "name": "for loop i - PRELOAD subnets",
        "xml": "<for index=\"i\" start=\"0\" end=\"`$preload-data.network-topology-information.subnets_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 847.464298248291,
        "y": 1611.5709714889526,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "caf58dc4.3309b"
            ]
        ]
    },
    {
        "id": "313c1584.4f97fa",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status=\"success\">\n\t<parameter name=\"networkId\" value=\"`$network-topology-operation-input.network-request-information.network-id`\" />\n\t<parameter name=\"error-code\" value=\"200\" />",
        "comments": "",
        "x": 284.05884170532227,
        "y": 6246.302718162537,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "812ba46c.1b8558",
        "type": "not-found",
        "name": "not found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 611.7143592834473,
        "y": 209.57915782928467,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "90e7717c.4ff42"
            ]
        ]
    },
    {
        "id": "90e7717c.4ff42",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"404\" />\n\t<parameter name=\"error-message\" value=\"`'network-id: ' + $network-topology-operation-input.network-request-information.network-id + 'not found in AnAI'`\" />",
        "comments": "",
        "x": 774.3531341552734,
        "y": 209.4681453704834,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "6a707f17.e585d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 641.8493194580078,
        "y": 654.6338815689087,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e1540d8d.4554a",
                "15930eb5.9d2c61"
            ]
        ]
    },
    {
        "id": "c69a9fad.d395d",
        "type": "set",
        "name": "initialize tmp.start-address-match = 0",
        "xml": "<set>\n<parameter name='tmp.start-address-match' value='0' />\n",
        "comments": "",
        "x": 714.3761596679688,
        "y": 563.1682300567627,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "cb84ba2b.90bd48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 549.4607391357422,
        "y": 1776.8211612701416,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "766397f9.d8d1f8",
                "9f8d35e4.e55ae8"
            ]
        ]
    },
    {
        "id": "7945c8d8.383a58",
        "type": "set",
        "name": "initialize tmp.start-address-match = 0",
        "xml": "<set>\n<parameter name=\"tmp.start-address-match\" value=\"0\" />\n",
        "comments": "",
        "x": 738.2764015197754,
        "y": 1709.0573635101318,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "e1540d8d.4554a",
        "type": "for",
        "name": "for loop n PRELOAD subnets",
        "xml": "<for index=\"n\" start=\"0\" end=\"`$preload-data.network-topology-information.subnets_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 874.579891204834,
        "y": 655.1577501296997,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "94c41929.7cf038"
            ]
        ]
    },
    {
        "id": "4fd8628d.a08a8c",
        "type": "switchNode",
        "name": "switch: tmp.start-address-match = 0",
        "xml": "<switch test=\"`$tmp.start-address-match == 0`\">",
        "comments": "",
        "outputs": 1,
        "x": 989.4622459411621,
        "y": 1282.7005062103271,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d695fd69.34476"
            ]
        ]
    },
    {
        "id": "766397f9.d8d1f8",
        "type": "for",
        "name": "for loop j - AnAI l3subnet",
        "xml": "<for index=\"j\" start=\"0\" end=\"`$tmp.AnAI.l3network.subnets.subnet_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 770.6567459106445,
        "y": 1777.2368459701538,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a27e439b.1f5f7"
            ]
        ]
    },
    {
        "id": "d695fd69.34476",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1226.8745765686035,
        "y": 1282.2680130004883,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "df441732.5a6038"
            ]
        ]
    },
    {
        "id": "e08b1d05.35c67",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 933.4417266845703,
        "y": 1831.371304512024,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "f26659b9.bdc948"
            ]
        ]
    },
    {
        "id": "94c41929.7cf038",
        "type": "switchNode",
        "name": "switch: AnAI-k == PRELOAD-n start-address",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].network-start-address == $preload-data.network-topology-information.subnets[$n].start-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 887.6592407226562,
        "y": 706.0110673904419,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "5c5db431.fc380c"
            ]
        ]
    },
    {
        "id": "a27e439b.1f5f7",
        "type": "switchNode",
        "name": "switch: PRELOAD-i == AnAI-j start-address",
        "xml": "<switch test=\"`$preload-data.network-topology-information.subnets[$i].start-address == $tmp.AnAI.l3network.subnets.subnet[$j].network-start-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 1084.7081756591797,
        "y": 1777.8203172683716,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c4c3be7b.c7a1b"
            ]
        ]
    },
    {
        "id": "f26659b9.bdc948",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1113.581069946289,
        "y": 1831.8419494628906,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8fd779af.d8ec98",
                "b1a240fe.72ecb",
                "bdf792c0.b5a28",
                "2340601b.c0fbc",
                "84c3d0d1.e984c",
                "754d89e8.1de998"
            ]
        ]
    },
    {
        "id": "5c5db431.fc380c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1154.7284240722656,
        "y": 706.2167139053345,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b5badb50.692f18"
            ]
        ]
    },
    {
        "id": "df441732.5a6038",
        "type": "save",
        "name": "update AnAI - subnet",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.AnAI.l3network.subnets.subnet[$k].subnet-id\" >\n<parameter name=\"orchestration-status\" value=\"pending-delete\" />\n\t\t",
        "comments": "",
        "outputs": 1,
        "x": 1410.3694496154785,
        "y": 1281.6625576019287,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b8c75959.a07998",
                "e5068dd8.d58d5",
                "150db709.87fab9"
            ]
        ]
    },
    {
        "id": "c4c3be7b.c7a1b",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1335.9098434448242,
        "y": 1777.2601118087769,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b390fee8.578a3"
            ]
        ]
    },
    {
        "id": "b8c75959.a07998",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1603.3452911376953,
        "y": 1281.5433139801025,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c6b0d6cd.d0a058"
            ]
        ]
    },
    {
        "id": "272c0e65.707422",
        "type": "comment",
        "name": "foreach AnAI l3subnet not found in PRELOAD, set pending-delete",
        "info": "",
        "comments": "",
        "x": 1032.8700065612793,
        "y": 1158.146183013916,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "661025a8.9e175c",
        "type": "comment",
        "name": "foreach PRELOAD subnet not found in AnAI l3subnet, create subnet in AnAI",
        "info": "",
        "comments": "",
        "x": 626.5205192565918,
        "y": 1534.1595935821533,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "5138e1dc.f8066",
        "type": "switchNode",
        "name": "switch: AnAI-k == PRELOAD-n cidr-mask",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].cidr-mask == $preload-data.network-topology-information.subnets[$n].cidr-mask`\">",
        "comments": "",
        "outputs": 1,
        "x": 1588.1782608032227,
        "y": 467.1387405395508,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "da70def2.76425"
            ]
        ]
    },
    {
        "id": "5bb8c4e2.6d08bc",
        "type": "set",
        "name": "set tmp.start-address-match = 1",
        "xml": "<set>\n<parameter name='tmp.start-address-match' value='1' />\n",
        "comments": "",
        "x": 1560.4662246704102,
        "y": 418.6142053604126,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "b5badb50.692f18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1304.9099044799805,
        "y": 706.583779335022,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "5bb8c4e2.6d08bc",
                "5138e1dc.f8066",
                "f67b8249.bf0ed",
                "49957628.a77588",
                "c6be995.0b46868",
                "e67b0a35.1d06e8",
                "aa1015d0.f81c38",
                "cf30dbbc.caf468",
                "ef8f189e.13e928"
            ]
        ]
    },
    {
        "id": "28694ef.e6d40b2",
        "type": "comment",
        "name": "start-addr matched, compare other subnet attrs",
        "info": "",
        "comments": "",
        "x": 1184.274257659912,
        "y": 560.822154045105,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "da70def2.76425",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1834.7589530944824,
        "y": 467.59263038635254,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "90858a29.37fc08"
            ]
        ]
    },
    {
        "id": "17ed7289.814ddd",
        "type": "save",
        "name": "update AnAI - subnet",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.AnAI.l3network.subnets.subnet[$k].subnet-id\" >\n\t<!-- Update l3network.subnet -->\n\t<parameter name=\"gateway-address\" value=\"`$tmp.gateway-address`\"/>\n\t<parameter name=\"subnet-name\" value=\"`$preload-data.network-topology-information.subnets[$n].subnet-name`\"/>\n\t<parameter name=\"cidr-mask\" value=\"`$preload-data.network-topology-information.subnets[$n].cidr-mask`\"/>\n\t<parameter name=\"dhcp-start\" value=\"`$preload-data.network-topology-information.subnets[$n].dhcp-start-address`\"/>\n\t<parameter name=\"dhcp-end\" value=\"`$preload-data.network-topology-information.subnets[$n].dhcp-end-address`\"/>\n\t<parameter name=\"dhcp-enabled\" value=\"`$tmp.dhcpEnabled.boolean`\"/>\n\t<parameter name=\"orchestration-status\" value=\"pending-update\" />\n\t\t",
        "comments": "",
        "outputs": 1,
        "x": 1941.5383796691895,
        "y": 1026.5579977035522,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "2d5ecb94.1f2404",
                "80e40fc7.91291",
                "c9c8378e.07a4c8"
            ]
        ]
    },
    {
        "id": "bfe3db0b.73f948",
        "type": "comment",
        "name": "foreach AnAI subnet attr different from PRELOAD, update AnAI and set pending-update",
        "info": "",
        "comments": "",
        "x": 1908.5912628173828,
        "y": 365.12071228027344,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "cf30dbbc.caf468",
        "type": "switchNode",
        "name": "switch: AnAI-k == PRELOAD-n dhcp-enabled.boolean",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].dhcp-enabled == $tmp.dhcpEnabled.boolean`\">",
        "comments": "",
        "outputs": 1,
        "x": 1625.5838432312012,
        "y": 829.0172414779663,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7321a40b.545eac"
            ]
        ]
    },
    {
        "id": "7321a40b.545eac",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1908.4177474975586,
        "y": 828.9894180297852,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "1bcbd50a.81742b"
            ]
        ]
    },
    {
        "id": "8fd779af.d8ec98",
        "type": "switchNode",
        "name": "switch : PRELOAD dhcp-enabled",
        "xml": "<switch test=\"`$preload-data.network-topology-information.subnets[$i].dhcp-enabled`\">",
        "comments": "",
        "outputs": 1,
        "x": 1376.659194946289,
        "y": 1831.488842010498,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d1241924.ed09f8",
                "7227226.f5b7ddc"
            ]
        ]
    },
    {
        "id": "7227226.f5b7ddc",
        "type": "other",
        "name": "N",
        "xml": "<outcome value='N'>",
        "comments": "",
        "outputs": 1,
        "x": 1624.2147521972656,
        "y": 1832.4095478057861,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "2a420bce.572e64"
            ]
        ]
    },
    {
        "id": "d1241924.ed09f8",
        "type": "other",
        "name": "Y",
        "xml": "<outcome value='Y'>",
        "comments": "",
        "outputs": 1,
        "x": 1624.881492614746,
        "y": 1878.8540449142456,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "797eb8ae.317378"
            ]
        ]
    },
    {
        "id": "67602934.d76d68",
        "type": "set",
        "name": "set tmp.dhcpEnabled.bolean=false",
        "xml": "<set>\n<parameter name=\"tmp.dhcpEnabled.boolean\" value=\"false\" />\n",
        "comments": "",
        "x": 2016.2388725280762,
        "y": 738.6499919891357,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "25a34e9f.ba3cb2",
        "type": "set",
        "name": "set tmp.dhcpEnabled.boolean=true",
        "xml": "<set>\n<parameter name=\"tmp.dhcpEnabled.boolean\" value=\"true\" />\n",
        "comments": "",
        "x": 2017.8779106140137,
        "y": 780.1221618652344,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "aa1015d0.f81c38",
        "type": "switchNode",
        "name": "switch : PRELOAD-n dhcp-enabled",
        "xml": "<switch test=\"`$preload-data.network-topology-information.subnets[$n].dhcp-enabled`\">",
        "comments": "",
        "outputs": 1,
        "x": 1567.1460990905762,
        "y": 738.4153118133545,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d4a0bbfd.813968",
                "7c02b1e6.66023"
            ]
        ]
    },
    {
        "id": "7c02b1e6.66023",
        "type": "other",
        "name": "N",
        "xml": "<outcome value='N'>",
        "comments": "",
        "outputs": 1,
        "x": 1797.2017631530762,
        "y": 738.6931438446045,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "67602934.d76d68"
            ]
        ]
    },
    {
        "id": "d4a0bbfd.813968",
        "type": "other",
        "name": "Y",
        "xml": "<outcome value='Y'>",
        "comments": "",
        "outputs": 1,
        "x": 1796.618564605713,
        "y": 779.8876571655273,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "25a34e9f.ba3cb2"
            ]
        ]
    },
    {
        "id": "4dd3576.8062ba8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 452.6436080932617,
        "y": 563.4527454376221,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c69a9fad.d395d",
                "6a707f17.e585d",
                "d6ebf8bb.4c2de8"
            ]
        ]
    },
    {
        "id": "d6ebf8bb.4c2de8",
        "type": "set",
        "name": "initialize tmp.subnetUpdate = 0",
        "xml": "<set>\n<parameter name='tmp.subnetUpdate' value='0' />\n",
        "comments": "",
        "x": 695.1359634399414,
        "y": 608.8260974884033,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "f67b8249.bf0ed",
        "type": "switchNode",
        "name": "switch: tmp.subnetUpdate = 1",
        "xml": "<switch test=\"`$tmp.subnetUpdate == 1`\">",
        "comments": "",
        "outputs": 1,
        "x": 1548.4172706604004,
        "y": 1027.1630268096924,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b0b528dc.173918"
            ]
        ]
    },
    {
        "id": "b0b528dc.173918",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1756.4172706604004,
        "y": 1026.8297748565674,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "17ed7289.814ddd"
            ]
        ]
    },
    {
        "id": "caf58dc4.3309b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 476.2505073547363,
        "y": 1709.036449432373,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7945c8d8.383a58",
                "cb84ba2b.90bd48"
            ]
        ]
    },
    {
        "id": "d922f181.c8317",
        "type": "set",
        "name": "set tmp.l3networkUpdate = 1",
        "xml": "<set>\n<parameter name=\"tmp.l3networkUpdate\" value=\"1\" />\n",
        "comments": "",
        "x": 2512.298324584961,
        "y": 1271.3373107910156,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "e5068dd8.d58d5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1610.0681495666504,
        "y": 1435.3452835083008,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "87593b73.e592d8"
            ]
        ]
    },
    {
        "id": "b0faff93.2dd14",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1640.504550933838,
        "y": 2245.03267288208,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ee66f92b.ccfb18"
            ]
        ]
    },
    {
        "id": "f20c0bb3.0d7af8",
        "type": "set",
        "name": "set tmp.subnetRollback: orchestraton-status",
        "xml": "<set>\n  <parameter name=\"tmp.subnetRollback[$x].subnet-id\" value= \"`$tmp.AnAI.l3network.subnets.subnet[$k].subnet-id`\"/>\n  <parameter name=\"tmp.subnetRollback[$x].orchestration-status\" value= \"`$tmp.AnAI.l3network.subnets.subnet[$k].orchestration-status`\" />\n  <parameter name=\"tmp.subnetRollback[$x].type\" value = \"delete\"  />\n  \n\n\n",
        "comments": "",
        "x": 2054.0706214904785,
        "y": 1434.5365447998047,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "87593b73.e592d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1746.9279098510742,
        "y": 1435.1081132888794,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "f20c0bb3.0d7af8",
                "8f7fc73c.e2c3d8",
                "3eceba12.f5d206"
            ]
        ]
    },
    {
        "id": "ee66f92b.ccfb18",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1782.9489860534668,
        "y": 2244.078380584717,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "eaaa5901.98e238",
                "29738f0c.0d796",
                "3b6d36e2.4f5b5a"
            ]
        ]
    },
    {
        "id": "eaaa5901.98e238",
        "type": "set",
        "name": "set tmp.subnetRollback for create",
        "xml": "<set>\n  <parameter name=\"tmp.subnetRollback[$x].subnet-id\" value= \"`$tmp.return.generate-subnets-subnet-id.uuid`\" />\n  <parameter name=\"tmp.subnetRollback[$x].type\" value = \"create\"  />",
        "comments": "",
        "x": 2019.2348937988281,
        "y": 2244.792977333069,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "8f7fc73c.e2c3d8",
        "type": "set",
        "name": "$x++",
        "xml": "<set>\n  <parameter name=\"x\" value = \"`$x + 1`\"  />\n\n",
        "comments": "",
        "x": 1937.775577545166,
        "y": 1480.5871963500977,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "29738f0c.0d796",
        "type": "set",
        "name": "$x++",
        "xml": "<set>\n  <parameter name=\"x\" value = \"`$x + 1`\"  />\n\n",
        "comments": "",
        "x": 1936.1711730957031,
        "y": 2290.3573427200317,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "49957628.a77588",
        "type": "switchNode",
        "name": "switch: l3subnet[k] == PRELOAD subnets[n] dhcp-start",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].dhcp-start == $preload-data.network-topology-information.subnets[$n].dhcp-start-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 1627.2202644348145,
        "y": 877.0411176681519,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a485a10d.6f0aa"
            ]
        ]
    },
    {
        "id": "a485a10d.6f0aa",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1908.1367721557617,
        "y": 876.7633323669434,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ca9a6174.d3216"
            ]
        ]
    },
    {
        "id": "c6be995.0b46868",
        "type": "switchNode",
        "name": "switch: l3subnet[k] == PRELOAD subnets[n] dhcp-end",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].dhcp-end == $preload-data.network-topology-information.subnets[$n].dhcp-end-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 1624.4424324035645,
        "y": 924.3744916915894,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b7005098.53ee7"
            ]
        ]
    },
    {
        "id": "b7005098.53ee7",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1907.3589401245117,
        "y": 924.0967063903809,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "292eb234.c8484e"
            ]
        ]
    },
    {
        "id": "e25fc8a9.1116e8",
        "type": "method",
        "name": "method network-topology-changeassign",
        "xml": "<method rpc=\"network-topology-changeassign\" mode=\"sync\">",
        "comments": "",
        "outputs": 1,
        "x": 228.1150665283203,
        "y": 109.55552768707275,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "adccb6.8424d348"
            ]
        ]
    },
    {
        "id": "202a3e03.4ddbf2",
        "type": "service-logic",
        "name": "VNF-API ${project.version}",
        "module": "VNF-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>",
        "outputs": 1,
        "x": 282.5594940185547,
        "y": 53.22220325469971,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e25fc8a9.1116e8"
            ]
        ]
    },
    {
        "id": "570ef049.e5ed1",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 118.44837951660156,
        "y": 53.22220325469971,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "202a3e03.4ddbf2"
            ]
        ]
    },
    {
        "id": "8ace8ce6.55a0e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 604.6705780029297,
        "y": 168.77773571014404,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "77d4339b.2c77fc"
            ]
        ]
    },
    {
        "id": "77d4339b.2c77fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"500\" />\n\t<parameter name=\"error-message\" value=\"`'Error retrieving l3-network with network-id=' + $network-topology-operation-input.network-request-information.network-id + ' from AnAI'`\" />",
        "comments": "",
        "x": 763.7816619873047,
        "y": 168.9999647140503,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "540da71a.6c5d78",
        "type": "GenericXML",
        "name": "Execute: generate gateway-address",
        "xml": "<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"getGatewayAddress\">\n\t<parameter name=\"ipAddress\" value=\"`$preload-data.network-topology-information.subnets[$n].start-address`\" />\n\t<parameter name=\"ipVersion\" value=\"`$preload-data.network-topology-information.subnets[$n].ip-version`\" />\n\t<parameter name=\"subnet\" value=\"`$preload-data.network-topology-information.subnets[$n].cidr-mask`\" />\n\t<parameter name=\"ctxVariable\" value=\"tmp.return.generate.gateway-address\" />",
        "comments": "",
        "outputs": 1,
        "x": 2190.293586730957,
        "y": 525.952335357666,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "66b36d53.f585d4",
        "type": "set",
        "name": "set tmp.gateway-address",
        "xml": "<set>\n<parameter name=\"tmp.gateway-address\" value=\"`$tmp.return.generate.gateway-address`\" />\n",
        "comments": "",
        "x": 2807.043712615967,
        "y": 588.9523363113403,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "e67b0a35.1d06e8",
        "type": "switchNode",
        "name": "switch : PRELOAD gateway-address",
        "xml": "<switch test=\"`$preload-data.network-topology-information.subnets[$n].gateway-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 1575.543586730957,
        "y": 525.952335357666,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8b3b77a0.09f798",
                "4ab20367.f03b6c"
            ]
        ]
    },
    {
        "id": "8b3b77a0.09f798",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 1809.543586730957,
        "y": 525.952335357666,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4d8feb3a.3484b4"
            ]
        ]
    },
    {
        "id": "4ab20367.f03b6c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1811.543586730957,
        "y": 569.952335357666,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "6708d473.7fb07c"
            ]
        ]
    },
    {
        "id": "6708d473.7fb07c",
        "type": "switchNode",
        "name": "switch: AnAI-k == PRELOAD-n gateway-address",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].gateway-address == $preload-data.network-topology-information.subnets[$n].gateway-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 2044.543743133545,
        "y": 648.6666088104248,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "263829a0.412d26",
                "9e7603e8.19f05"
            ]
        ]
    },
    {
        "id": "263829a0.412d26",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2321.043743133545,
        "y": 648.9166088104248,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ac91a48c.df4748"
            ]
        ]
    },
    {
        "id": "d3078aa9.d0b7f8",
        "type": "set",
        "name": "set tmp.gateway-address",
        "xml": "<set>\n<parameter name=\"tmp.gateway-address\" value=\"`$preload-data.network-topology-information.subnets[$n].gateway-address`\" />\n",
        "comments": "",
        "x": 2808.0437049865723,
        "y": 647.0594596862793,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "4d8feb3a.3484b4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1949.543586730957,
        "y": 525.952335357666,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "540da71a.6c5d78",
                "e9310489.7af568"
            ]
        ]
    },
    {
        "id": "ac91a48c.df4748",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2460.043743133545,
        "y": 648.9166088104248,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d3078aa9.d0b7f8",
                "9d0c9a84.7d8738"
            ]
        ]
    },
    {
        "id": "6e1e477.31893b8",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2527.4322395324707,
        "y": 1113.436484336853,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "f97c22c3.bd33d",
        "type": "not-found",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 747.4722099304199,
        "y": 340.55950260162354,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "5b49a928.5702a8"
            ]
        ]
    },
    {
        "id": "5b49a928.5702a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"404\" />\n\t<parameter name=\"error-message\" value=\"`'No preload network found with network-name = ' + $tmp.AnAI.l3network.network-name + ' in SDNC'`\" />",
        "comments": "",
        "x": 910.1109848022461,
        "y": 340.44849014282227,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "cd77a967.3c6308",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2295.138832092285,
        "y": 1026.595251083374,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "6e1e477.31893b8",
                "fcfd2600.488c78",
                "5d6b7d0.b989584"
            ]
        ]
    },
    {
        "id": "2d5ecb94.1f2404",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2127.6016120910645,
        "y": 1026.3078203201294,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cd77a967.3c6308"
            ]
        ]
    },
    {
        "id": "80e40fc7.91291",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2135.163372039795,
        "y": 1181.254093170166,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3fce51fa.fd9e2e"
            ]
        ]
    },
    {
        "id": "c1d7a122.2a287",
        "type": "set",
        "name": "set tmp.subnetRollback: keys",
        "xml": "<set>\n  <parameter name=\"tmp.subnetRollback[$x].subnet-id\" value= \"`$tmp.AnAI.l3network.subnets.subnet[$k].subnet-id`\"/>\n  <parameter name=\"tmp.subnetRollback[$x].type\" value = \"update\"/>\n  \n\n\n",
        "comments": "",
        "x": 2511.4268836975098,
        "y": 1181.4888858795166,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "3fce51fa.fd9e2e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2273.662322998047,
        "y": 1181.2392616271973,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c1d7a122.2a287",
                "61057541.26debc",
                "d922f181.c8317"
            ]
        ]
    },
    {
        "id": "61057541.26debc",
        "type": "set",
        "name": "$x++",
        "xml": "<set>\n  <parameter name=\"x\" value = \"`$x + 1`\"  />\n\n",
        "comments": "",
        "x": 2441.1170692443848,
        "y": 1227.039545059204,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "3d2b0a50.3a8f56",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2039.186595916748,
        "y": 1368.3451623916626,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "84c3d0d1.e984c",
        "type": "save",
        "name": "save AnAI - l3-network.subnets.subnet",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.return.generate-subnets-subnet-id.uuid\" >\n\t<!-- Create l3-network object -->\n\t<parameter name=\"network-id\" value=\"`$tmp.AnAI.l3network.network-id`\" />\n\t<parameter name=\"subnet-id\" value=\"`$tmp.return.generate-subnets-subnet-id.uuid`\" />\n\t<parameter name=\"gateway-address\" value=\"`$tmp.gateway-address`\" />\n\t<parameter name=\"subnet-name\" value=\"`$preload-data.network-topology-information.subnets[$i].subnet-name`\" />\t\t\n\t<parameter name=\"network-start-address\" value=\"`$preload-data.network-topology-information.subnets[$i].start-address`\" />\n\t<parameter name=\"cidr-mask\" value=\"`$preload-data.network-topology-information.subnets[$i].cidr-mask`\" />\n\t<parameter name=\"ip-version\" value=\"`$preload-data.network-topology-information.subnets[$i].ip-version`\" />\n\t<parameter name=\"dhcp-start\" value=\"`$preload-data.network-topology-information.subnets[$i].dhcp-start-address`\" />\n\t<parameter name=\"dhcp-end\" value=\"`$preload-data.network-topology-information.subnets[$i].dhcp-end-address`\" />\n\t<parameter name=\"dhcp-enabled\" value=\"`$tmp.dhcpEnabled.boolean`\" />\n\t<parameter name=\"orchestration-status\" value=\"pending-create\" />",
        "comments": "",
        "outputs": 1,
        "x": 1392.1628170013428,
        "y": 2104.321937561035,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ddd8c8e2.0b4288",
                "b0faff93.2dd14",
                "92778af8.befa68"
            ]
        ]
    },
    {
        "id": "ddd8c8e2.0b4288",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1634.7790908813477,
        "y": 2104.670440673828,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8dabdae5.57ab58"
            ]
        ]
    },
    {
        "id": "bdf792c0.b5a28",
        "type": "switchNode",
        "name": "switch : PRELOAD gateway-address",
        "xml": "<switch test=\"`$preload-data.network-topology-information.subnets[$i].gateway-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 1391.028793334961,
        "y": 1969.615735054016,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b4dd1568.7deed8"
            ]
        ]
    },
    {
        "id": "b4dd1568.7deed8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 1614.528793334961,
        "y": 1969.615735054016,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cbdcd1c2.b3ed5"
            ]
        ]
    },
    {
        "id": "a0138d79.73728",
        "type": "GenericXML",
        "name": "Execute: generate gateway-address",
        "xml": "<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"getGatewayAddress\">\n\t<parameter name=\"ipAddress\" value=\"`$preload-data.network-topology-information.subnets[$i].start-address`\" />\n\t<parameter name=\"ipVersion\" value=\"`$preload-data.network-topology-information.subnets[$i].ip-version`\" />\n\t<parameter name=\"subnet\" value=\"`$preload-data.network-topology-information.subnets[$i].cidr-mask`\" />\n\t<parameter name=\"ctxVariable\" value=\"tmp.return.generate.gateway-address\" />",
        "comments": "",
        "outputs": 1,
        "x": 1987.77880859375,
        "y": 1969.3657426834106,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "cbdcd1c2.b3ed5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1756.2788009643555,
        "y": 1969.6157455444336,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a0138d79.73728",
                "c95c4bf2.a7bd28"
            ]
        ]
    },
    {
        "id": "b1a240fe.72ecb",
        "type": "set",
        "name": "set tmp.gateway-address",
        "xml": "<set>\n<parameter name='tmp.gateway-address' value='`$preload-data.network-topology-information.subnets[$i].gateway-address`' />\n",
        "comments": "",
        "x": 1353.52880859375,
        "y": 1925.8657417297363,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "c95c4bf2.a7bd28",
        "type": "set",
        "name": "set tmp.gateway-address",
        "xml": "<set>\n<parameter name=\"tmp.gateway-address\" value=\"`$tmp.return.generate.gateway-address`\" />\n",
        "comments": "",
        "x": 1954.27880859375,
        "y": 2011.3657445907593,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "2340601b.c0fbc",
        "type": "call",
        "name": "call generate-subnets-subnet-id",
        "xml": "<call module=\"VNF-API\" rpc=\"generate-subnets-subnet-id\" mode=\"sync\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1371.1437721252441,
        "y": 2057.4728574752808,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8589e64d.6294f8"
            ]
        ]
    },
    {
        "id": "8589e64d.6294f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1634.893756866455,
        "y": 2057.7228479385376,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8dabdae5.57ab58"
            ]
        ]
    },
    {
        "id": "c6b0d6cd.d0a058",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1807.6506958007812,
        "y": 1281.8093757629395,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3d2b0a50.3a8f56",
                "eea3a1e.e88116",
                "1623f021.c2b9"
            ]
        ]
    },
    {
        "id": "2a420bce.572e64",
        "type": "set",
        "name": "set tmp.dhcpEnabled.bolean=false",
        "xml": "<set>\n<parameter name=\"tmp.dhcpEnabled.boolean\" value=\"false\" />\n",
        "comments": "",
        "x": 1848.3532104492188,
        "y": 1831.9525032043457,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "797eb8ae.317378",
        "type": "set",
        "name": "set tmp.dhcpEnabled.boolean=true",
        "xml": "<set>\n<parameter name=\"tmp.dhcpEnabled.boolean\" value=\"true\" />\n",
        "comments": "",
        "x": 1850.1350021362305,
        "y": 1878.5675792694092,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "9117f581.49cd58",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2045.3016777038574,
        "y": 2193.504596710205,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "8dabdae5.57ab58",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1834.5158653259277,
        "y": 2104.3617782592773,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9117f581.49cd58",
                "a6fad29a.1da73",
                "ca78be2.35c6c4"
            ]
        ]
    },
    {
        "id": "a6fad29a.1da73",
        "type": "set",
        "name": "set i, j max + 1",
        "xml": "<set>\n\t<parameter name='j' value='`$tmp.AnAI.l3subnet_length + 1`' />\n\t<parameter name='i' value='`$preload-data.network-topology-information.subnets_length + 1`' />",
        "comments": "",
        "x": 2009.0159034729004,
        "y": 2104.361795425415,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "da60e97d.0ede68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Error updating l3-network in AnAI with network-id = ' + $tmp.AnAI.l3network.network-id + ' - ' + $tmp.error-message + ' - ' + $tmp.rollback.error-message`\"/>",
        "comments": "",
        "x": 669.991397857666,
        "y": 6073.796445846558,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "6c413597.876f3c",
        "type": "set",
        "name": "Set final indicator to Y",
        "xml": "<set>\n<parameter name=\"ack-final\" value=\"Y\"/>",
        "comments": "",
        "x": 347.87683486938477,
        "y": 6179.523144721985,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "3b6d36e2.4f5b5a",
        "type": "set",
        "name": "set tmp.l3networkUpdate = 1",
        "xml": "<set>\n<parameter name='tmp.l3networkUpdate' value='1' />\n",
        "comments": "",
        "x": 2005.5675163269043,
        "y": 2336.881452560425,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "4ab836fd.f49d78",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1271.8109970092773,
        "y": 4664.159008979797,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b682bac.b292748"
            ]
        ]
    },
    {
        "id": "80e7eee4.21ab2",
        "type": "switchNode",
        "name": "switch : tmp.l3networkUpdate = 1",
        "xml": "<switch test=\"`$tmp.l3networkUpdate == 1`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 518.019718170166,
        "y": 4664.275115013123,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b8e556ef.dde5f8"
            ]
        ]
    },
    {
        "id": "b8e556ef.dde5f8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 731.6863822937012,
        "y": 4664.052649497986,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e53a9499.9d4d28"
            ]
        ]
    },
    {
        "id": "e53a9499.9d4d28",
        "type": "save",
        "name": "update AnAI - l3-network.orchestration-status",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"orchestration-status\" value=\"pending-update\" />",
        "comments": "",
        "outputs": 1,
        "x": 986.7340812683105,
        "y": 4664.179589271545,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4ab836fd.f49d78",
                "b3df03dc.e1fb8",
                "40f41704.9cc688"
            ]
        ]
    },
    {
        "id": "b682bac.b292748",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "outputs": 1,
        "x": 1446.8769569396973,
        "y": 4664.4650774002075,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "277621ff.2d16fe",
                "2e3c7ba2.d21b54"
            ]
        ]
    },
    {
        "id": "277621ff.2d16fe",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"An error occurred while updating l3-network.orchestration-status in AnAI\"/>",
        "comments": "",
        "x": 1694.02103805542,
        "y": 4664.2675523757935,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "ea36d758.4a9288",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 493.1831245422363,
        "y": 2314.7121753692627,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "50318e70.387a9",
                "6f14f693.d5a4e8"
            ]
        ]
    },
    {
        "id": "70d1080b.b08868",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 459.1587104797363,
        "y": 3271.960355758667,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "85ca29b3.1bb488",
                "67e9507e.488ea"
            ]
        ]
    },
    {
        "id": "7d587fe3.3f132",
        "type": "save",
        "name": "Rollback AnAI - l3-network.orchestration-status",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"orchestration-status\" value=\"`$tmp.AnAI.l3network.orchestration-status`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1280.6508178710938,
        "y": 5976.617420196533,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d11dd828.7802a8",
                "81ba8fb7.9e498"
            ]
        ]
    },
    {
        "id": "ae8d6ec6.39e21",
        "type": "set",
        "name": "set tmp.subnetUpdate = 1",
        "xml": "<set>\n<parameter name=\"tmp.subnetUpdate\" value=\"1\" />\n",
        "comments": "",
        "x": 2313.293930053711,
        "y": 828.4881381988525,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "3eceba12.f5d206",
        "type": "set",
        "name": "set tmp.l3networkUpdate = 1",
        "xml": "<set>\n<parameter name=\"tmp.l3networkUpdate\" value=\"1\" />\n",
        "comments": "",
        "x": 2005.543643951416,
        "y": 1525.7023010253906,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "9f8d35e4.e55ae8",
        "type": "switchNode",
        "name": "switch: tmp.start-address-match = 0",
        "xml": "<switch test=\"`$tmp.start-address-match == 0`\">",
        "comments": "",
        "outputs": 1,
        "x": 693.8650512695312,
        "y": 1831.6666650772095,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e08b1d05.35c67"
            ]
        ]
    },
    {
        "id": "b390fee8.578a3",
        "type": "set",
        "name": "set tmp.start-address-match = 1",
        "xml": "<set>\n<parameter name='tmp.start-address-match' value='1' />\n",
        "comments": "",
        "x": 1557.3650588989258,
        "y": 1776.9166612625122,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "50318e70.387a9",
        "type": "save",
        "name": "delete relationship: vpn_binding",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\tAND related-to = vpn-binding\" >",
        "comments": "",
        "outputs": 1,
        "x": 764.8055114746094,
        "y": 2315.0001096725464,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "30ff2667.471baa"
            ]
        ]
    },
    {
        "id": "c4f81359.003b8",
        "type": "for",
        "name": "for loop i - PRELOAD vpn-bindings",
        "xml": "<for index=\"i\" start=\"0\" end=\"`$preload-data.network-topology-information.vpn-bindings_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 862.5317022535537,
        "y": 2543.666758219401,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7c3e0805.40af68"
            ]
        ]
    },
    {
        "id": "7c3e0805.40af68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1101.309480879042,
        "y": 2543.9167601267495,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "678f44ab.ea50ac",
                "1598e5df.565bea",
                "36a2784d.cf59e8",
                "236011f6.f5e4be"
            ]
        ]
    },
    {
        "id": "d17665c3.e234d8",
        "type": "save",
        "name": "save relationship: vpn_bindings",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"vpn-binding\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"vpn-binding.vpn-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.vpn-binding-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1557.5039176940918,
        "y": 2921.8888416290283,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cc145aed.800d88",
                "e2c85fda.7c9cd",
                "49306a1.5c79894"
            ]
        ]
    },
    {
        "id": "a47b8b14.1829d8",
        "type": "switchNode",
        "name": "switch ... PRELOAD vpn-bindings[]",
        "xml": "<switch test=\"`$preload-data.network-topology-information.vpn-bindings_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 862.9091453552246,
        "y": 2500.248071670532,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4801868f.077cf8"
            ]
        ]
    },
    {
        "id": "4801868f.077cf8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 1089.3535957336426,
        "y": 2500.0258073806763,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a35d2b.e1e2b2d8"
            ]
        ]
    },
    {
        "id": "a35d2b.e1e2b2d8",
        "type": "set",
        "name": "set vpn-bindings[] = 0",
        "xml": "<set>\n<parameter name=\"preload-data.network-topology-information.vpn-bindings_length\" value=\"0\" />\n",
        "comments": "",
        "x": 1277.90920469496,
        "y": 2500.0258280436196,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "6940ee9d.942ff",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1604.0438635084365,
        "y": 2637.5160624186196,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "96fde5e9.4b32b8"
            ]
        ]
    },
    {
        "id": "96fde5e9.4b32b8",
        "type": "save",
        "name": "query AnAI - vpn-bindings",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\" \n\t\tkey=\"vpn-binding.global-route-target = $preload-data.network-topology-information.vpn-bindings[$i].global-route-target\" \n\t\tpfx=\"tmp.AnAI.vpn-binding\">",
        "comments": "",
        "outputs": 1,
        "x": 1808.5438596937393,
        "y": 2637.266063372294,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3c316751.c18568",
                "f1e8d85f.221188",
                "804fc820.1767b8"
            ]
        ]
    },
    {
        "id": "3c316751.c18568",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2016.293897840712,
        "y": 2684.766030947367,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "30521316.33fc5c"
            ]
        ]
    },
    {
        "id": "f1e8d85f.221188",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2021.7939016554092,
        "y": 2637.266029993693,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "30521316.33fc5c"
            ]
        ]
    },
    {
        "id": "30521316.33fc5c",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "outputs": 1,
        "x": 2169.293901655409,
        "y": 2684.5160319010415,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c83277b8.bca398",
                "69801ad3.b07ae4"
            ]
        ]
    },
    {
        "id": "c83277b8.bca398",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'Failed to query vpn-bindings n AnAI where global-route-target = ' + $preload-data.network-topology-information.vpn-bindings[$i].global-route-target`\"/>",
        "comments": "",
        "x": 2410.3934423658584,
        "y": 2684.265930811564,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "678f44ab.ea50ac",
        "type": "switchNode",
        "name": "switch: PRELOAD vpn-binding-id",
        "xml": "<switch test=\"`$preload-data.network-topology-information.vpn-bindings[$i].vpn-binding-id`\">",
        "comments": "",
        "outputs": 1,
        "x": 1346.7938673231338,
        "y": 2591.7660023371377,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "49c99c5d.db6104"
            ]
        ]
    },
    {
        "id": "49c99c5d.db6104",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1567.2938749525283,
        "y": 2591.516003290812,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "dc650ff6.6a37a"
            ]
        ]
    },
    {
        "id": "dc650ff6.6a37a",
        "type": "set",
        "name": "set tmp.vpn-binding-id",
        "xml": "<set>\n<parameter name=\"tmp.vpn-binding-id\" value=\"`$preload-data.network-topology-information.vpn-bindings[$i].vpn-binding-id`\" />\n",
        "comments": "",
        "x": 1762.7938749525283,
        "y": 2591.5160042444863,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "804fc820.1767b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2021.7107429504395,
        "y": 2785.932608604431,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d43a1da1.801f4"
            ]
        ]
    },
    {
        "id": "d43a1da1.801f4",
        "type": "set",
        "name": "set tmp.vpn-binding-id",
        "xml": "<set>\n<parameter name=\"tmp.vpn-binding-id\" value=\"`$tmp.AnAI.vpn-binding.vpn-id`\" />\n",
        "comments": "",
        "x": 2212.2107429504395,
        "y": 2785.932608604431,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "cc145aed.800d88",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1817.5767936706543,
        "y": 2921.3644285202026,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "bd84c069.9f407"
            ]
        ]
    },
    {
        "id": "bd84c069.9f407",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "outputs": 1,
        "x": 1974.4696731567383,
        "y": 2921.000535964966,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d0bc0241.16643",
                "67a32bcf.a45a94",
                "d62cda9.c225228"
            ]
        ]
    },
    {
        "id": "d0bc0241.16643",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving l3-newtork vpn-binding relationship in AnAI where vpn-id = ' + $tmp.vpn-binding-id`\"/>",
        "comments": "",
        "x": 2194.5692138671875,
        "y": 2920.7504348754883,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "d8a1ae30.7e241",
        "type": "switchNode",
        "name": "switch: tmp.vpn-binding-id != NULL",
        "xml": "<switch test=\"`$tmp.vpn-binding-id != ''`\">",
        "comments": "",
        "outputs": 1,
        "x": 1387.5438346862793,
        "y": 2816.9325428009033,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "35e2cab.1320636"
            ]
        ]
    },
    {
        "id": "35e2cab.1320636",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1609.7938385009766,
        "y": 2816.9325428009033,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d17665c3.e234d8"
            ]
        ]
    },
    {
        "id": "9dcafbd2.180118",
        "type": "switchNode",
        "name": "switch ... PRELOAD network-policy[]",
        "xml": "<switch test=\"`$preload-data.network-topology-information.network-policy_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 815.2102928161621,
        "y": 3497.8329753875732,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9a549469.8cf168"
            ]
        ]
    },
    {
        "id": "9a549469.8cf168",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 1044.65474319458,
        "y": 3497.6107110977173,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "626b2924.e714b8"
            ]
        ]
    },
    {
        "id": "626b2924.e714b8",
        "type": "set",
        "name": "set network-policy[] = 0",
        "xml": "<set>\n<parameter name='preload-data.network-topology-information.network-policy_length' value='0' />\n",
        "comments": "",
        "x": 1239.2103521558975,
        "y": 3497.6107317606607,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "f4907fd3.a65",
        "type": "for",
        "name": "for loop i - PRELOAD network-policy",
        "xml": "<for index=\"i\" start=\"0\" end=\"`$preload-data.network-topology-information.network-policy_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 814.567554473877,
        "y": 3543.404366493225,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c8c91878.a06a48"
            ]
        ]
    },
    {
        "id": "74c62ee.c142ad",
        "type": "save",
        "name": "save relationship: network-policy",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"network-policy\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"network-policy.network-policy-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.AnAI.network-policy.network-policy-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2095.9804649353027,
        "y": 3742.5910663604736,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "961c1793.845838",
                "cd9366f0.221d18",
                "c3c189a0.4ccb58"
            ]
        ]
    },
    {
        "id": "c8c91878.a06a48",
        "type": "switchNode",
        "name": "switch: PRELOAD network-policy-fqdn != NULL",
        "xml": "<switch test=\"`$preload-data.network-topology-information.network-policy[$i].network-policy-fqdn != NULL`\">",
        "comments": "",
        "outputs": 1,
        "x": 1173.0797521803115,
        "y": 3543.5036207834873,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b83dfff2.e2be5"
            ]
        ]
    },
    {
        "id": "b83dfff2.e2be5",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1453.8297521803115,
        "y": 3543.7536207834873,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "72405702.54bef8"
            ]
        ]
    },
    {
        "id": "72405702.54bef8",
        "type": "save",
        "name": "query AnAI - network-policy",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\" \n\t\tkey=\"network-policy.network-policy-fqdn = $preload-data.network-topology-information.network-policy[$i].network-policy-fqdn\"  \n\t\tpfx=\"tmp.AnAI.network-policy\" >",
        "comments": "",
        "outputs": 1,
        "x": 1653.8297882080078,
        "y": 3543.753540992737,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9106f450.700d08",
                "d7e04886.f0b1b8",
                "38bde268.aac7fe"
            ]
        ]
    },
    {
        "id": "9106f450.700d08",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1865.8298204210068,
        "y": 3584.503463109335,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8bf9d679.d0ee98"
            ]
        ]
    },
    {
        "id": "d7e04886.f0b1b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1871.329824235704,
        "y": 3544.0034621556606,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8bf9d679.d0ee98"
            ]
        ]
    },
    {
        "id": "8bf9d679.d0ee98",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "outputs": 1,
        "x": 2020.829824235704,
        "y": 3584.2534640630092,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e5a86167.920af",
                "338842a2.95efee"
            ]
        ]
    },
    {
        "id": "e5a86167.920af",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'Failed to query network-policy n AnAI where network-policy-fqdn = ' + $preload-data.network-topology-information.network-policy[$i].network-policy-fqdn`\"/>",
        "comments": "",
        "x": 2236.9293649461533,
        "y": 3584.0033629735317,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "961c1793.845838",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2322.0533409118652,
        "y": 3742.066653251648,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9f43abef.bd4728"
            ]
        ]
    },
    {
        "id": "9f43abef.bd4728",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "outputs": 1,
        "x": 2462.946220397949,
        "y": 3741.702760696411,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d2d1e07.7cfa32",
                "133667f2.eb77f8"
            ]
        ]
    },
    {
        "id": "d2d1e07.7cfa32",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving l3-newtork network-policy relationship in AnAI where network-policy-id = ' + $tmp.AnAI.network-policy.network-policy-id`\"/>",
        "comments": "",
        "x": 2694.0457611083984,
        "y": 3741.4526596069336,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "85ca29b3.1bb488",
        "type": "save",
        "name": "delete relationship: network-policy",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t AND related-to = network-policy\" >",
        "comments": "",
        "outputs": 1,
        "x": 747.372989654541,
        "y": 3271.769684076309,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e8183966.f88478"
            ]
        ]
    },
    {
        "id": "754d89e8.1de998",
        "type": "set",
        "name": "set tmp.local.network-id",
        "xml": "<set>\n<parameter name=\"tmp.local.network-id\" value=\"`$tmp.AnAI.l3network.network-id`\" />\n",
        "comments": "",
        "x": 1350.7499885559082,
        "y": 2012.642957687378,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "7ffa62de.33fecc",
        "type": "comment",
        "name": "query l3-network gets all the subnets and relationships for free",
        "info": "",
        "comments": "",
        "x": 1084.7022819519043,
        "y": 164.40476989746094,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "1598e5df.565bea",
        "type": "switchNode",
        "name": "switch: PRELOAD route-target != NULL",
        "xml": "<switch test=\"`$preload-data.network-topology-information.vpn-bindings[$i].global-route-target != ''`\" >",
        "comments": "",
        "outputs": 1,
        "x": 1368.130941602919,
        "y": 2637.071567217509,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "6940ee9d.942ff"
            ]
        ]
    },
    {
        "id": "34af06b5.07d33a",
        "type": "set",
        "name": "initialize tmp variables, x, tmp.error-message, tmp.l3networkUpdate, execute_failure",
        "xml": "<set>\n\t<parameter name='x' value='0' />\n\t<parameter name='tmp.error-message' value='' />\n\t<parameter name='execute_failure' value='false' />\n\t<parameter name='tmp.l3networkUpdate' value='0' />",
        "comments": "",
        "x": 617.3453178405762,
        "y": 428.8214406967163,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "e9310489.7af568",
        "type": "switchNode",
        "name": "switch: AnAI-k == tmp.return.generate.gateway-address",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].gateway-address == $tmp.return.generate.gateway-address`\">",
        "comments": "",
        "outputs": 1,
        "x": 2155.7498893737793,
        "y": 588.8214159011841,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "fd638c90.7772"
            ]
        ]
    },
    {
        "id": "fd638c90.7772",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2440.3215827941895,
        "y": 588.2857179641724,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8a95056c.8243a8"
            ]
        ]
    },
    {
        "id": "8a95056c.8243a8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2585.0000495910645,
        "y": 588.7222108840942,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "66b36d53.f585d4",
                "9d0c9a84.7d8738"
            ]
        ]
    },
    {
        "id": "1bcbd50a.81742b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2045.7501602172852,
        "y": 829.2222023010254,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ae8d6ec6.39e21"
            ]
        ]
    },
    {
        "id": "ca9a6174.d3216",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2045.0001602172852,
        "y": 876.222204208374,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ae8d6ec6.39e21"
            ]
        ]
    },
    {
        "id": "292eb234.c8484e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2044.5001602172852,
        "y": 924.4722051620483,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ae8d6ec6.39e21"
            ]
        ]
    },
    {
        "id": "38bde268.aac7fe",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1870.595417022705,
        "y": 3742.094934463501,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "74c62ee.c142ad"
            ]
        ]
    },
    {
        "id": "36a2784d.cf59e8",
        "type": "set",
        "name": "unset tmp.vpn-binding-id",
        "xml": "<set>\n<parameter name=\"tmp.vpn-binding-id\" value=\"\" />\n",
        "comments": "",
        "x": 1320.9166776869033,
        "y": 2544.0001236597695,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "30ff2667.471baa",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 996.0833282470703,
        "y": 2314.5833377838135,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e69d9ede.c998c"
            ]
        ]
    },
    {
        "id": "e69d9ede.c998c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1155.8201026916504,
        "y": 2315.2746753692627,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7c0a1390.80c06c",
                "2f44a8dd.3b2668"
            ]
        ]
    },
    {
        "id": "7c0a1390.80c06c",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"An error occurred while deleting l3-network vpn-binding relationship from AnAI\"/>",
        "comments": "",
        "x": 1374.500072479248,
        "y": 2315.5835123062134,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "e8183966.f88478",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 971.5079612731934,
        "y": 3271.3528950214386,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "fc52b15.447615"
            ]
        ]
    },
    {
        "id": "fc52b15.447615",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1148.2447357177734,
        "y": 3271.044232606888,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "18b5ade9.0299e2",
                "8aeb103.23b59f"
            ]
        ]
    },
    {
        "id": "18b5ade9.0299e2",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"An error occurred while deleting l3-network network-policy relationship from AnAI in preparation to regenerate the network-policy relationship from PRELOAD.\"/>",
        "comments": "",
        "x": 1372.2579612731934,
        "y": 3271.3528950214386,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "28badb43.5ee5d4",
        "type": "switchNode",
        "name": "switch : tmp.l3network.status.updated = 1",
        "xml": "<switch test=\"`$tmp.l3network.status.updated == 1`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 764.6190795898438,
        "y": 5976.534414291382,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d6b5f392.672a4"
            ]
        ]
    },
    {
        "id": "d6b5f392.672a4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1017.2857131958008,
        "y": 5976.812002182007,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7d587fe3.3f132"
            ]
        ]
    },
    {
        "id": "7d8628e3.bfb0d8",
        "type": "set",
        "name": "set tmp.l3network.status.updated = 1",
        "xml": "<set>\n<parameter name='tmp.l3network.status.updated' value='1' />\n",
        "comments": "",
        "x": 1527.988193511963,
        "y": 4767.8097858428955,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "b3df03dc.e1fb8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1275.9168281555176,
        "y": 4768.083599090576,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7d8628e3.bfb0d8"
            ]
        ]
    },
    {
        "id": "f2214172.a1643",
        "type": "for",
        "name": "for loop z - tmp.AnAI.l3network.relationship-list.relationship[]",
        "xml": "<for index=\"z\" start=\"0\" end=\"`$tmp.AnAI.l3network.relationship-list.relationship_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 824.3810005187988,
        "y": 4983.3337116241455,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "40b39fed.993b8"
            ]
        ]
    },
    {
        "id": "40b39fed.993b8",
        "type": "switchNode",
        "name": "switch: relationship[].related-to",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.relationship-list.relationship[$z].related-to`\">",
        "comments": "",
        "outputs": 1,
        "x": 901.1309394836426,
        "y": 5074.583716392517,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "445af20b.efd5dc",
                "7e1ce913.d1ada8",
                "63a30c32.764734"
            ]
        ]
    },
    {
        "id": "445af20b.efd5dc",
        "type": "other",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1130.6309394836426,
        "y": 5074.833716392517,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3307d5fd.2423fa"
            ]
        ]
    },
    {
        "id": "fb5a4fe8.b156b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 491.38093185424805,
        "y": 4982.8337116241455,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "f2214172.a1643",
                "30cb9475.50352c",
                "28badb43.5ee5d4",
                "da60e97d.0ede68"
            ]
        ]
    },
    {
        "id": "befdd7ed.7d6be8",
        "type": "save",
        "name": "Rollback to save relationship: vpn_binding",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"vpn-binding\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"vpn-binding.vpn-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.AnAI.l3network.relationship-list.relationship[$z].relationship-data[0].relationship-value`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1294.21431350708,
        "y": 5133.833827018738,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a9924139.29c5e",
                "d4b57fb0.f24f4"
            ]
        ]
    },
    {
        "id": "a9924139.29c5e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1547.2871894836426,
        "y": 5133.309413909912,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3a4aef64.3150d"
            ]
        ]
    },
    {
        "id": "3a4aef64.3150d",
        "type": "set",
        "name": "set: tmp.rollback.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.rollback.error-message\" value=\"`'An error occurred during rollback of l3-newtork vpn-binding relationship in AnAI where vpn-id = ' + $tmp.AnAI.l3network.relationship-list.relationship[$z].relationship-data[0].relationship-value + ' MANUAL ROLLBACK IS REQUIRED.'`\"/>",
        "comments": "",
        "x": 1787.2795906066895,
        "y": 5132.695249557495,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "9cd29c09.984bd",
        "type": "set",
        "name": "set tmp.network-policy.updated = 1",
        "xml": "<set>\n<parameter name='tmp.network-policy.updated' value='1' />\n",
        "comments": "",
        "x": 2567.38090133667,
        "y": 3832.2736530303955,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "e0cc74f6.cef2e8",
        "type": "set",
        "name": "set tmp.vpn-binding.updated = 1",
        "xml": "<set>\n<parameter name='tmp.vpn-binding.updated' value='1' />\n",
        "comments": "",
        "x": 2044.4286079406738,
        "y": 3063.916700363159,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "cd9366f0.221d18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2328.63090133667,
        "y": 3832.5236530303955,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9cd29c09.984bd"
            ]
        ]
    },
    {
        "id": "e2c85fda.7c9cd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1820.6786003112793,
        "y": 3063.916700363159,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e0cc74f6.cef2e8"
            ]
        ]
    },
    {
        "id": "7e1ce913.d1ada8",
        "type": "other",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1141.583209991455,
        "y": 5223.654871940613,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "163697ef.53ddb8"
            ]
        ]
    },
    {
        "id": "a1822be9.e1be18",
        "type": "save",
        "name": "Rollback to save relationship: network-policy",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"network-policy\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"network-policy.network-policy-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.AnAI.l3network.relationship-list.relationship[$z].relationship-data[0].relationship-value`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1309.16646194458,
        "y": 5282.988368034363,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cde96a1a.b38188",
                "c5b6850b.08be08"
            ]
        ]
    },
    {
        "id": "cde96a1a.b38188",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1569.2393379211426,
        "y": 5282.463954925537,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "de78af5a.c6912"
            ]
        ]
    },
    {
        "id": "de78af5a.c6912",
        "type": "set",
        "name": "tmp.rollback.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.rollback.error-message\" value=\"`'An error occurred during rollback of l3-newtork network-policy relationship in AnAI where network-policy-id = ' + $tmp.AnAI.l3network.relationship-list.relationship[$z].relationship-data[0].relationship-value + ' MANUAL ROLLBACK IS REQUIRED.'`\"/>",
        "comments": "",
        "x": 1785.2316627502441,
        "y": 5282.849543571472,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "163697ef.53ddb8",
        "type": "switchNode",
        "name": "switch:  tmp.network-policy.updated == 1",
        "xml": "<switch test=\"`$tmp.network-policy.updated == 1`\">",
        "comments": "",
        "outputs": 1,
        "x": 1412.9166984558105,
        "y": 5223.655074119568,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7a01074a.f70308"
            ]
        ]
    },
    {
        "id": "3307d5fd.2423fa",
        "type": "switchNode",
        "name": "switch:  tmp.vpn-binding.updated == 1",
        "xml": "<switch test=\"`$tmp.vpn-binding.updated == 1`\">",
        "comments": "",
        "outputs": 1,
        "x": 1372.916706085205,
        "y": 5074.655116081238,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "462a22ce.3cdbbc"
            ]
        ]
    },
    {
        "id": "462a22ce.3cdbbc",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1606.916706085205,
        "y": 5074.655116081238,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "befdd7ed.7d6be8"
            ]
        ]
    },
    {
        "id": "7a01074a.f70308",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1657.916706085205,
        "y": 5223.655116081238,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a1822be9.e1be18"
            ]
        ]
    },
    {
        "id": "70aa977b.fe30d8",
        "type": "for",
        "name": "for loop i - tmp.AnAI.l3network.subnets.subnet[]",
        "xml": "<for index=\"i\" start=\"0\" end=\"`$tmp.AnAI.l3network.subnets.subnet_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1018.5593681335449,
        "y": 5636.50013256073,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e51d6a24.425c98"
            ]
        ]
    },
    {
        "id": "56134ac0.df0084",
        "type": "switchNode",
        "name": "switch: tmp.subnetRollback[].type",
        "xml": "<switch test=\"`$tmp.subnetRollback[$j].type`\">",
        "comments": "",
        "outputs": 1,
        "x": 1265.3325576782227,
        "y": 5719.288496017456,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cab697cd.251568",
                "d0693ac4.d5ac18"
            ]
        ]
    },
    {
        "id": "cab697cd.251568",
        "type": "outcomeTrue",
        "name": "delete",
        "xml": "<outcome value='delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1504.0470352172852,
        "y": 5719.137134552002,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "74fc00ec.dc13f"
            ]
        ]
    },
    {
        "id": "d0693ac4.d5ac18",
        "type": "outcomeTrue",
        "name": "update",
        "xml": "<outcome value='update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1505.6183624267578,
        "y": 5764.709531784058,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "32bdc1c1.96f2ee"
            ]
        ]
    },
    {
        "id": "74fc00ec.dc13f",
        "type": "save",
        "name": "Rollback AnAI delete - l3network.subnets.subnet",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.subnetRollback[$j].subnet-id\" >\n<parameter name=\"orchestration-status\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].orchestration-status`\" />\n\t\t",
        "comments": "",
        "outputs": 1,
        "x": 1786.475700378418,
        "y": 5718.710096359253,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d50c1822.8cb098",
                "ad551bbf.58fcc8"
            ]
        ]
    },
    {
        "id": "76cbcff8.a7aa9",
        "type": "outcomeTrue",
        "name": "create",
        "xml": "<outcome value='create'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1657.0249366760254,
        "y": 5868.8378829956055,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "5e8f2f9e.a1436"
            ]
        ]
    },
    {
        "id": "5e8f2f9e.a1436",
        "type": "delete",
        "name": "Rollback AnAI create -  l3-network.subnets.subnet",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.subnetRollback[$j].subnet-id\" >",
        "comments": "",
        "outputs": 1,
        "x": 1943.310344696045,
        "y": 5867.815706253052,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "eb93aa28.0b07f8",
                "c1cf86f2.493818"
            ]
        ]
    },
    {
        "id": "30cb9475.50352c",
        "type": "for",
        "name": "for loop j - subnetRollback[]",
        "xml": "<for index=\"j\" start=\"0\" end=\"`$x`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 728.845157623291,
        "y": 5525.070099830627,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "dad835c6.d0c618"
            ]
        ]
    },
    {
        "id": "e51d6a24.425c98",
        "type": "switchNode",
        "name": "switch: subnet-id  tmp.AnAI.l3network.subnets.subnet[] == tmp.subnetRollback[]",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$i].subnet-id == $tmp.subnetRollback[$j].subnet-id`\">",
        "comments": "",
        "outputs": 1,
        "x": 1521.5595359802246,
        "y": 5636.785568237305,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "f63c8882.16f8c8"
            ]
        ]
    },
    {
        "id": "f63c8882.16f8c8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1899.2739334106445,
        "y": 5637.213930130005,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7bc44cc3.686514"
            ]
        ]
    },
    {
        "id": "32bdc1c1.96f2ee",
        "type": "save",
        "name": "rollback AnAI update - l3-network.subnets.subnet ",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"subnet\" \n\t\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t\tAND subnet.subnet-id = $tmp.AnAI.l3network.subnets.subnet[$j].subnet-id\" >\n<parameter name=\"subnet-name\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].subnet-name`\"/>\n<parameter name=\"gateway-address\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].gateway-address`\"/>\n<parameter name=\"cidr-mask\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].cidr-mask`\"/>\n<parameter name=\"dhcp-start\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].dhcp-start`\"/>\n<parameter name=\"dhcp-end\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].dhcp-end`\"/>\n<parameter name=\"dhcp-enabled\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].dhcp-enabled`\"/>\n<parameter name=\"orchestration-status\" value=\"`$tmp.AnAI.l3network.subnets.subnet[$i].orchestration-status`\" />\n\t\t",
        "comments": "",
        "outputs": 1,
        "x": 1788.274269104004,
        "y": 5764.070308685303,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "1f2ad8bc.a55ac7",
                "e61b880e.096858"
            ]
        ]
    },
    {
        "id": "90858a29.37fc08",
        "type": "set",
        "name": "set tmp.subnetUpdate = 1",
        "xml": "<set>\n<parameter name=\"tmp.subnetUpdate\" value=\"1\" />\n",
        "comments": "",
        "x": 2039.7500114440918,
        "y": 467.30952644348145,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "2e3c7ba2.d21b54",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 1703.5237846374512,
        "y": 4707.786193847656,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "8ecdb1d7.aea0c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value=\"true\">",
        "outputs": 1,
        "x": 626.4760551452637,
        "y": 4866.821534156799,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "fb5a4fe8.b156b"
            ]
        ]
    },
    {
        "id": "59c57e09.0c9bd",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 420.53577041625977,
        "y": 1611.0597400665283,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "41ca0932.f48da8"
            ]
        ]
    },
    {
        "id": "41ca0932.f48da8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 623.2500190734863,
        "y": 1611.059762954712,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "99484323.6781e"
            ]
        ]
    },
    {
        "id": "15930eb5.9d2c61",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 822.3214836120605,
        "y": 1218.0238513946533,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "13aa477e.313a59"
            ]
        ]
    },
    {
        "id": "13aa477e.313a59",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1028.035732269287,
        "y": 1218.023874282837,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4fd8628d.a08a8c"
            ]
        ]
    },
    {
        "id": "eea3a1e.e88116",
        "type": "set",
        "name": "set k, n max + 1",
        "xml": "<set>\n\t<parameter name='k' value='`$tmp.AnAI.l3network.subnets.subnet_length + 1`' />\n\t<parameter name='n' value='`$preload-data.network-topology-information.subnets_length + 1`' />",
        "comments": "",
        "x": 2009.035930633545,
        "y": 1281.0239906311035,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "fcfd2600.488c78",
        "type": "set",
        "name": "set k, n max + 1",
        "xml": "<set>\n\t<parameter name='k' value='`$tmp.AnAI.l3network.subnets.subnet_length + 1`' />\n\t<parameter name='n' value='`$preload-data.network-topology-information.subnets_length + 1`' />",
        "comments": "",
        "x": 2495.2500495910645,
        "y": 1026.416687965393,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "f15dac05.a23f",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 417.50002670288086,
        "y": 2252.666706085205,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "aae89695.f77e48"
            ]
        ]
    },
    {
        "id": "aae89695.f77e48",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 620.2142753601074,
        "y": 2252.6667289733887,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ea36d758.4a9288"
            ]
        ]
    },
    {
        "id": "b16ab5f2.35a148",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 419.91669845581055,
        "y": 4867.2497272491455,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8ecdb1d7.aea0c"
            ]
        ]
    },
    {
        "id": "bb8ce764.d17888",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 426.8452568054199,
        "y": 4584.21407699585,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4b1ed48a.23e81c"
            ]
        ]
    },
    {
        "id": "4b1ed48a.23e81c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 629.5595054626465,
        "y": 4584.214099884033,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "80e7eee4.21ab2"
            ]
        ]
    },
    {
        "id": "c10e73d.da8889",
        "type": "switchNode",
        "name": "switch: texecute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 441.80556869506836,
        "y": 3195.333309173584,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "452cff0a.34b71"
            ]
        ]
    },
    {
        "id": "452cff0a.34b71",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 644.5198173522949,
        "y": 3195.3333320617676,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "70d1080b.b08868"
            ]
        ]
    },
    {
        "id": "6f14f693.d5a4e8",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 748.750057220459,
        "y": 2416.8331909179688,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4f7b45c9.8320cc"
            ]
        ]
    },
    {
        "id": "4f7b45c9.8320cc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 951.4643058776855,
        "y": 2416.8332138061523,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "1cdf3f9f.d8ad9"
            ]
        ]
    },
    {
        "id": "1cdf3f9f.d8ad9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 575.4166831970215,
        "y": 2500.1666870117188,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a47b8b14.1829d8",
                "c4f81359.003b8"
            ]
        ]
    },
    {
        "id": "2f44a8dd.3b2668",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 1379.3213157653809,
        "y": 2357.7857484817505,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "69801ad3.b07ae4",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2416.083438873291,
        "y": 2728.4998531341553,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "236011f6.f5e4be",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 1326.7500114440918,
        "y": 2731.1666736602783,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a714abe2.f5c9e8"
            ]
        ]
    },
    {
        "id": "a714abe2.f5c9e8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1529.4642601013184,
        "y": 2731.166696548462,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "d8a1ae30.7e241"
            ]
        ]
    },
    {
        "id": "67a32bcf.a45a94",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2201.1783409118652,
        "y": 3006.547595977783,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "d62cda9.c225228",
        "type": "set",
        "name": "set i = max + 1",
        "xml": "<set>\n  <parameter name=\"i\" value = \"`$preload-data.network-topology-information.vpn-bindings_length + 1`\"  />\n\n",
        "comments": "",
        "x": 2168.321300506592,
        "y": 2963.452346801758,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "67e9507e.488ea",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 722.6388664245605,
        "y": 3411.7224493026733,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "24fa2743.255dc8"
            ]
        ]
    },
    {
        "id": "24fa2743.255dc8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 925.3531150817871,
        "y": 3411.722472190857,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "abcc1298.8b121"
            ]
        ]
    },
    {
        "id": "abcc1298.8b121",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 551.5277671813965,
        "y": 3498.1664628982544,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9dcafbd2.180118",
                "f4907fd3.a65"
            ]
        ]
    },
    {
        "id": "8aeb103.23b59f",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 1377.8608665466309,
        "y": 3317.5153970718384,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "338842a2.95efee",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2245.4166526794434,
        "y": 3628.166793823242,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "133667f2.eb77f8",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2704.7027473449707,
        "y": 3785.4525051116943,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "9d0c9a84.7d8738",
        "type": "set",
        "name": "set tmp.subnetUpdate = 1",
        "xml": "<set>\n<parameter name=\"tmp.subnetUpdate\" value=\"1\" />\n",
        "comments": "",
        "x": 2812.464214324951,
        "y": 697.5952434539795,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "9e7603e8.19f05",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2322.178722381592,
        "y": 693.7380847930908,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "17af6854.693e78"
            ]
        ]
    },
    {
        "id": "17af6854.693e78",
        "type": "set",
        "name": "set tmp.gateway-address",
        "xml": "<set>\n<parameter name=\"tmp.gateway-address\" value=\"`$preload-data.network-topology-information.subnets[$n].gateway-address`\" />\n",
        "comments": "",
        "x": 2518.035655975342,
        "y": 693.8809680938721,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "dad835c6.d0c618",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 728.4644050598145,
        "y": 5585.832514762878,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "70aa977b.fe30d8",
                "e3487ebb.a5939",
                "153987c7.1a4048"
            ]
        ]
    },
    {
        "id": "f6fe6422.4322c8",
        "type": "set",
        "name": "set: tmp.rollbck.match = 1",
        "xml": "<set>\n\t<parameter name=\"tmp.rollback.match\" value=\"1\"/>",
        "comments": "",
        "x": 1242.6072006225586,
        "y": 5804.118718147278,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "7bc44cc3.686514",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 996.6070785522461,
        "y": 5719.1187171936035,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "56134ac0.df0084",
                "f6fe6422.4322c8"
            ]
        ]
    },
    {
        "id": "e3487ebb.a5939",
        "type": "switchNode",
        "name": "switch: tmp.rollback.match == 0",
        "xml": "<switch test=\"`$tmp.rollback.match == 0`\">",
        "comments": "",
        "outputs": 1,
        "x": 970.8927803039551,
        "y": 5869.405124664307,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "97427759.0023b8"
            ]
        ]
    },
    {
        "id": "44553355.40997c",
        "type": "switchNode",
        "name": "switch: tmp.subnetRollback[].type",
        "xml": "<switch test=\"`$tmp.subnetRollback[$j].type`\">",
        "comments": "",
        "outputs": 1,
        "x": 1423.607120513916,
        "y": 5868.690284729004,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "76cbcff8.a7aa9"
            ]
        ]
    },
    {
        "id": "d50c1822.8cb098",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2076.3214721679688,
        "y": 5718.976065635681,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "abd6e5ca.0f7378"
            ]
        ]
    },
    {
        "id": "abd6e5ca.0f7378",
        "type": "set",
        "name": "set: tmp.rollback.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.rollback.error-message\" value=\"`'failed to rollback the subnet.orchestration-status in AnAI where subnet-id = ' + $tmp.AnAI.l3network.subnets.subnet[$i].subnet-id + ' MANUAL ROLLBACK IS REQUIRED.'`\"/>",
        "comments": "",
        "x": 2341.3138847351074,
        "y": 5718.36167049408,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "a1bcb891.4f80b8",
        "type": "set",
        "name": "set: tmp.rollback.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.rollback.error-message\" value=\"`'failed to rollback the subnet attributes update in AnAI where subnet-id = ' + $tmp.AnAI.l3network.subnets.subnet[$i].subnet-id + ' MANUAL ROLLBACK IS REQUIRED.'`\"/>",
        "comments": "",
        "x": 2344.1787719726562,
        "y": 5763.833457946777,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "602727b5.9746c8",
        "type": "set",
        "name": "set: tmp.rollback.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.rollback.error-message\" value=\"`'failed to rollback to delete subnet from AnAI where subnet-id = ' + $tmp.subnetRollback[$j].subnet-id + ' MANUAL ROLLBACK IS REQUIRED.'`\"/>",
        "comments": "",
        "x": 2462.321430206299,
        "y": 5867.9756507873535,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "1f2ad8bc.a55ac7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2076.3212890625,
        "y": 5764.11878490448,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a1bcb891.4f80b8"
            ]
        ]
    },
    {
        "id": "eb93aa28.0b07f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2231.4643592834473,
        "y": 5867.404291152954,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "602727b5.9746c8"
            ]
        ]
    },
    {
        "id": "cdfeb5ff.d63b08",
        "type": "set",
        "name": "set: tmp.rollback.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.rollback.error-message\" value=\"`'failed to rollback l3network.orchestration-status in AnAI where subnet-id = ' + $tmp.AnAI.l3network.subnets.subnet[$i].subnet-id + ' MANUAL ROLLBACK IS REQUIRED.'`\"/>",
        "comments": "",
        "x": 1794.464267730713,
        "y": 5975.404790878296,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "d11dd828.7802a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1556.6071968078613,
        "y": 5975.8334312438965,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cdfeb5ff.d63b08"
            ]
        ]
    },
    {
        "id": "d02a826d.205fd",
        "type": "comment",
        "name": "----  ROLLBACK STARTS HERE  ----",
        "info": "",
        "comments": "",
        "x": 484.1071357727051,
        "y": 4820.047375679016,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "ca78be2.35c6c4",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving new subnet in AnAI with subnet-id = ' + $tmp.return.generate-subnets-subnet-id.uuid`\"/>",
        "comments": "",
        "x": 2037.1785850524902,
        "y": 2146.595244407654,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "1623f021.c2b9",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while updating subnet status to pending-delete in AnAI with subnet-id = ' + $tmp.AnAI.l3network.subnets.subnet[$k].subnet-id`\"/>",
        "comments": "",
        "x": 2030.3214073181152,
        "y": 1323.7380981445312,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "5d6b7d0.b989584",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while updating subnet attributes in AnAI with subnet-id = ' + $tmp.AnAI.l3network.subnets.subnet[$k].subnet-id`\"/>",
        "comments": "",
        "x": 2519.464366912842,
        "y": 1069.880968093872,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "153987c7.1a4048",
        "type": "set",
        "name": "set: tmp.rollbck.match = 0",
        "xml": "<set>\n\t<parameter name=\"tmp.rollback.match\" value=\"0\"/>",
        "comments": "",
        "x": 950.8928108215332,
        "y": 5586.119483947754,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "92778af8.befa68",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1643.0358047485352,
        "y": 2149.9285049438477,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8dabdae5.57ab58"
            ]
        ]
    },
    {
        "id": "150db709.87fab9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1612.1785697937012,
        "y": 1325.3571643829346,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c6b0d6cd.d0a058"
            ]
        ]
    },
    {
        "id": "c9c8378e.07a4c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2135.8928031921387,
        "y": 1069.928575515747,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cd77a967.3c6308"
            ]
        ]
    },
    {
        "id": "49306a1.5c79894",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1826.6071586608887,
        "y": 2964.214220046997,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "bd84c069.9f407"
            ]
        ]
    },
    {
        "id": "c3c189a0.4ccb58",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2330.6071586608887,
        "y": 3788.071397781372,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "40f41704.9cc688",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1280.1071510314941,
        "y": 4706.237885475159,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b682bac.b292748"
            ]
        ]
    },
    {
        "id": "10056ed4.c3d191",
        "type": "switchNode",
        "name": "switch: AnAI == INPUT - network-name",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.network-name == $network-topology-operation-input.network-request-information.network-name`\">",
        "comments": "",
        "outputs": 1,
        "x": 482.1785697937012,
        "y": 250.93650436401367,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9ed8a698.ef15c8"
            ]
        ]
    },
    {
        "id": "9ed8a698.ef15c8",
        "type": "not-found",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 729.4285697937012,
        "y": 250.94050121307373,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "669252c9.4ba83c"
            ]
        ]
    },
    {
        "id": "669252c9.4ba83c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"404\" />\n\t<parameter name=\"error-message\" value=\"`'The input network-name,' + network-topology-operation-input.network-request-information.network-name + ', does not match what is returned from AnAI with network-id = ' + $network-topology-operation-input.network-request-information.network-id`\" />",
        "comments": "",
        "x": 892.0673446655273,
        "y": 250.82948875427246,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "b4cd1414.581b48",
        "type": "switchNode",
        "name": "switch: AnAI == INPUT - network-type",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.network-type == $network-topology-operation-input.network-request-information.network-type`\">",
        "comments": "",
        "outputs": 1,
        "x": 475.892822265625,
        "y": 294.22220611572266,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "4ad1dbfd.e57f94"
            ]
        ]
    },
    {
        "id": "4ad1dbfd.e57f94",
        "type": "not-found",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 730.142822265625,
        "y": 294.2262029647827,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3522894b.36b6e6"
            ]
        ]
    },
    {
        "id": "3522894b.36b6e6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"404\" />\n\t<parameter name=\"error-message\" value=\"`'The input network-type,' + network-topology-operation-input.network-request-information.network-type + ', does not match what is returned from AnAI with network-id = ' + $network-topology-operation-input.network-request-information.network-id`\" />",
        "comments": "",
        "x": 892.7815971374512,
        "y": 294.11519050598145,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "e456340c.466478",
        "type": "switchNode",
        "name": "switch: AnAI == PRELOAD - network-type",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.network-type == $preload-data.network-topology-information.network-topology-identifier.network-type`\">",
        "comments": "",
        "outputs": 1,
        "x": 491.0357475280762,
        "y": 384.22219944000244,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "9cd473e1.2c58a"
            ]
        ]
    },
    {
        "id": "9cd473e1.2c58a",
        "type": "not-found",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 747.2857475280762,
        "y": 384.2261962890625,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "6893351b.74b03c"
            ]
        ]
    },
    {
        "id": "6893351b.74b03c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name=\"error-code\" value=\"404\" />\n\t<parameter name=\"error-message\" value=\"`'No preload network found with network-type = ' + $tmp.AnAI.l3network.network-type + ' in SDNC'`\" />",
        "comments": "",
        "x": 909.9245223999023,
        "y": 384.11518383026123,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "97427759.0023b8",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1190.7143287658691,
        "y": 5869.460375785828,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "44553355.40997c"
            ]
        ]
    },
    {
        "id": "c5b6850b.08be08",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1577.4998817443848,
        "y": 5322.082991600037,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "de78af5a.c6912"
            ]
        ]
    },
    {
        "id": "d4b57fb0.f24f4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1554.4998817443848,
        "y": 5173.749495506287,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3a4aef64.3150d"
            ]
        ]
    },
    {
        "id": "ad551bbf.58fcc8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2084.333240509033,
        "y": 5673.749419212341,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "abd6e5ca.0f7378"
            ]
        ]
    },
    {
        "id": "e61b880e.096858",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2083.9998664855957,
        "y": 5809.082915306091,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a1bcb891.4f80b8"
            ]
        ]
    },
    {
        "id": "c1cf86f2.493818",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2239.999988555908,
        "y": 5909.749419212341,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "602727b5.9746c8"
            ]
        ]
    },
    {
        "id": "81ba8fb7.9e498",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1564.3332405090332,
        "y": 6018.082915306091,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cdfeb5ff.d63b08"
            ]
        ]
    },
    {
        "id": "eca5ffa4.23d73",
        "type": "switchNode",
        "name": "switch ... tmp.AnAI.l3network.subnets.subnet[]",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 499.1785697937012,
        "y": 470.35716438293457,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "48a25cc2.387cb4"
            ]
        ]
    },
    {
        "id": "48a25cc2.387cb4",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 769.6230201721191,
        "y": 470.1349000930786,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8ba49ed0.9ad3c"
            ]
        ]
    },
    {
        "id": "8ba49ed0.9ad3c",
        "type": "set",
        "name": "set tmp.AnAI.l3network.subnets.subnet[] = 0",
        "xml": "<set>\n<parameter name=\"tmp.AnAI.l3network.subnets.subnet_length\" value=\"0\" />\n",
        "comments": "",
        "x": 1027.1786291334365,
        "y": 470.134920756022,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "95ceb957.e7a948",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 463.0356864929199,
        "y": 4019.404680252075,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c3dd4c7f.8ca1e",
                "af6b3c9b.97c77"
            ]
        ]
    },
    {
        "id": "2d4379bf.6ca416",
        "type": "switchNode",
        "name": "switch ... PRELOAD route-table-reference[]",
        "xml": "<switch test=\"`$preload-data.network-topology-information.route-table-reference_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 837.8372917175293,
        "y": 4245.277545928955,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "7688d6b7.3bce68"
            ]
        ]
    },
    {
        "id": "7688d6b7.3bce68",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 1094.5317192077637,
        "y": 4245.0550355911255,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "26a757db.f17628"
            ]
        ]
    },
    {
        "id": "26a757db.f17628",
        "type": "set",
        "name": "set route-table-reference[] = 0",
        "xml": "<set>\n<parameter name='preload-data.network-topology-information.route-table-reference_length' value='0' />\n",
        "comments": "",
        "x": 1309.087328169081,
        "y": 4245.055056254068,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "3fbe4ceb.b0e5e4",
        "type": "for",
        "name": "for loop i - PRELOAD route-table-reference",
        "xml": "<for index=\"i\" start=\"0\" end=\"`$preload-data.network-topology-information.route-table-reference_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 837.4445457458496,
        "y": 4290.848835945129,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "6b695bb.39906a4"
            ]
        ]
    },
    {
        "id": "e761c57c.044408",
        "type": "save",
        "name": "save relationship: network-policy",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"route-table-reference\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"route-table-reference.route-table-reference-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.AnAI.route-table-reference.route-table-reference-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2229.8574409484863,
        "y": 4490.035390853882,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "5628f36a.55c77c",
                "a92d1865.c2b648",
                "3e5fe722.9f7198"
            ]
        ]
    },
    {
        "id": "6b695bb.39906a4",
        "type": "switchNode",
        "name": "switch: PRELOAD route-table-reference-fqdn != NULL",
        "xml": "<switch test=\"`$preload-data.network-topology-information.route-table-reference[$i].route-table-reference-fqdn != NULL`\">",
        "comments": "",
        "outputs": 1,
        "x": 1248.2067527770996,
        "y": 4290.947957038879,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "8696f734.56d0f8"
            ]
        ]
    },
    {
        "id": "8696f734.56d0f8",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1533.9567604064941,
        "y": 4291.197957038879,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c3ff1f7e.223f6"
            ]
        ]
    },
    {
        "id": "c3ff1f7e.223f6",
        "type": "save",
        "name": "query AnAI - route-table-reference",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"route-table-reference\" \n\t\tkey=\"route-table-reference.route-table-reference-fqdn = $preload-data.network-topology-information.route-table-reference[$i].route-table-reference-fqdn\" \n\t\tpfx=\"tmp.AnAI.route-table-reference\">",
        "comments": "",
        "outputs": 1,
        "x": 1760.7067642211914,
        "y": 4291.197865486145,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c5a368f6.5d1388",
                "4611ee89.1d504",
                "1c257c97.0acec3"
            ]
        ]
    },
    {
        "id": "c5a368f6.5d1388",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1999.7067964341904,
        "y": 4331.947787602743,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c1256682.7b8998"
            ]
        ]
    },
    {
        "id": "4611ee89.1d504",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2005.2068002488877,
        "y": 4291.447786649069,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "c1256682.7b8998"
            ]
        ]
    },
    {
        "id": "c1256682.7b8998",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "outputs": 1,
        "x": 2154.7068002488877,
        "y": 4331.697788556417,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "daaddd41.3513f",
                "dabc25b1.2558b8"
            ]
        ]
    },
    {
        "id": "daaddd41.3513f",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'Failed to query network-policy n AnAI where network-policy-fqdn = ' + $preload-data.network-topology-information.network-policy[$i].network-policy-fqdn`\"/>",
        "comments": "",
        "x": 2370.806340959337,
        "y": 4331.44768746694,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "5628f36a.55c77c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.930316925049,
        "y": 4489.510977745056,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e1c99ca6.e00f4"
            ]
        ]
    },
    {
        "id": "e1c99ca6.e00f4",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "outputs": 1,
        "x": 2596.823196411133,
        "y": 4489.147085189819,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e0fe20d7.e6c28",
                "6b785063.e94b4"
            ]
        ]
    },
    {
        "id": "e0fe20d7.e6c28",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"`'An error occurred while saving l3-newtork route-table-reference relationship in AnAI where route-table-reference-id = ' + $tmp.AnAI.route-table-reference.route-table-reference-id`\"/>",
        "comments": "",
        "x": 2827.922737121582,
        "y": 4488.896984100342,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "c3dd4c7f.8ca1e",
        "type": "save",
        "name": "delete relationship: route-table-reference",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id \n\t\t AND related-to = route-table-reference\" >",
        "comments": "",
        "outputs": 1,
        "x": 751.2499656677246,
        "y": 4019.2140085697174,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "593b5e06.7f9d3"
            ]
        ]
    },
    {
        "id": "1c257c97.0acec3",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2004.4723930358887,
        "y": 4489.539258956909,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e761c57c.044408"
            ]
        ]
    },
    {
        "id": "593b5e06.7f9d3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1044.384937286377,
        "y": 4018.797219514847,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "72f7191.61f2fe8"
            ]
        ]
    },
    {
        "id": "72f7191.61f2fe8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1221.121711730957,
        "y": 4018.488557100296,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "35c5090a.a6a506",
                "9f95b6ef.410b58"
            ]
        ]
    },
    {
        "id": "35c5090a.a6a506",
        "type": "set",
        "name": "set: tmp.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.error-message\" value=\"An error occurred while deleting l3-network route-table-reference relationship from AnAI prior to regenerate the route-table-reference relationship from PRELOAD.\"/>",
        "comments": "",
        "x": 1445.134937286377,
        "y": 4018.797219514847,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "b1f0d10d.9422f",
        "type": "set",
        "name": "set tmp.route-table-reference.updated = 1",
        "xml": "<set>\n<parameter name='tmp.route-table-reference.updated' value='1' />\n",
        "comments": "",
        "x": 2701.2578773498535,
        "y": 4579.717977523804,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "a92d1865.c2b648",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2462.5078773498535,
        "y": 4579.967977523804,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "b1f0d10d.9422f"
            ]
        ]
    },
    {
        "id": "bd2d9b6e.b5c1d8",
        "type": "switchNode",
        "name": "switch: texecute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 441.6825370788574,
        "y": 3942.777727127075,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "3e54549b.21c4cc"
            ]
        ]
    },
    {
        "id": "3e54549b.21c4cc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 648.3967933654785,
        "y": 3942.777656555176,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "95ceb957.e7a948"
            ]
        ]
    },
    {
        "id": "af6b3c9b.97c77",
        "type": "switchNode",
        "name": "switch: execute_failure",
        "xml": "<switch test=\"`$execute_failure`\">",
        "comments": "",
        "outputs": 1,
        "x": 726.5158424377441,
        "y": 4159.1667737960815,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "96f82eb1.4c085"
            ]
        ]
    },
    {
        "id": "96f82eb1.4c085",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 929.2300910949707,
        "y": 4159.166796684265,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ab2bfb98.61b8f8"
            ]
        ]
    },
    {
        "id": "ab2bfb98.61b8f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 555.4047431945801,
        "y": 4245.610787391663,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "2d4379bf.6ca416",
                "3fbe4ceb.b0e5e4"
            ]
        ]
    },
    {
        "id": "9f95b6ef.410b58",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 1450.7378425598145,
        "y": 4064.9597215652466,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "dabc25b1.2558b8",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2379.293628692627,
        "y": 4375.61111831665,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "6b785063.e94b4",
        "type": "returnSuccess",
        "name": "set execute_failure = true",
        "xml": "<return status='success'>\n\t<parameter name='execute_failure' value='true' />\n",
        "comments": "",
        "x": 2838.5797233581543,
        "y": 4532.8968296051025,
        "z": "b24c83f7.abbc6",
        "wires": []
    },
    {
        "id": "3e5fe722.9f7198",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2464.4841346740723,
        "y": 4535.51572227478,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "63a30c32.764734",
        "type": "other",
        "name": "route-table-reference",
        "xml": "<outcome value='route-table-reference'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1136.785717010498,
        "y": 5378.57142829895,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "cb6e6d5b.fb8fc"
            ]
        ]
    },
    {
        "id": "e64e8959.22cce8",
        "type": "save",
        "name": "Rollback to save relationship: route-table-reference",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-network:relationship-list\" \n\tkey=\"l3-network.network-id = $tmp.AnAI.l3network.network-id\" >\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"route-table-reference\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"route-table-reference.route-table-reference-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.AnAI.l3network.relationship-list.relationship[$z].relationship-data[0].relationship-value`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1304.368968963623,
        "y": 5437.9049243927,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "daa92ca8.40a27",
                "751ffeff.5a4d2"
            ]
        ]
    },
    {
        "id": "daa92ca8.40a27",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1564.4418449401855,
        "y": 5437.3805112838745,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "5bbb5aa9.dd0a84"
            ]
        ]
    },
    {
        "id": "5bbb5aa9.dd0a84",
        "type": "set",
        "name": "tmp.rollback.error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"tmp.rollback.error-message\" value=\"`'An error occurred during rollback of l3-newtork route-table-reference relationship in AnAI where route-table-reference-id = ' + $tmp.AnAI.l3network.relationship-list.relationship[$z].relationship-data[0].relationship-value + ' MANUAL ROLLBACK IS REQUIRED.'`\"/>",
        "comments": "",
        "x": 1780.434169769287,
        "y": 5437.76609992981,
        "z": "b24c83f7.abbc6",
        "wires": [
            []
        ]
    },
    {
        "id": "cb6e6d5b.fb8fc",
        "type": "switchNode",
        "name": "switch:  tmp.route-table-reference.updated == 1",
        "xml": "<switch test=\"`$tmp.route-table-reference.updated == 1`\">",
        "comments": "",
        "outputs": 1,
        "x": 1408.1192054748535,
        "y": 5378.571630477905,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "43ccda4d.49fa94"
            ]
        ]
    },
    {
        "id": "43ccda4d.49fa94",
        "type": "other",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1653.119213104248,
        "y": 5378.571672439575,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "e64e8959.22cce8"
            ]
        ]
    },
    {
        "id": "751ffeff.5a4d2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1572.7023887634277,
        "y": 5476.999547958374,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "5bbb5aa9.dd0a84"
            ]
        ]
    },
    {
        "id": "ef8f189e.13e928",
        "type": "switchNode",
        "name": "switch: l3subnet[k] == PRELOAD subnets[n] subnet-name",
        "xml": "<switch test=\"`$tmp.AnAI.l3network.subnets.subnet[$k].subnet-name == $preload-data.network-topology-information.subnets[$n].subnet-name`\">",
        "comments": "",
        "outputs": 1,
        "x": 1637.285717010498,
        "y": 971.0714282989502,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "abf8f55e.ce71d8"
            ]
        ]
    },
    {
        "id": "abf8f55e.ce71d8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1937.2022247314453,
        "y": 970.7936429977417,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "a89a0d2d.9ab2c"
            ]
        ]
    },
    {
        "id": "a89a0d2d.9ab2c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2075.3434448242188,
        "y": 971.1691417694092,
        "z": "b24c83f7.abbc6",
        "wires": [
            [
                "ae8d6ec6.39e21"
            ]
        ]
    }
]
